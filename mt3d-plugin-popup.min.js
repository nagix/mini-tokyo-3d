/*!
 * mt3d-plugin-popup v0.1.0
 * https://minitokyo3d.com
 * (c) 2023 Akihiko Kusanagi
 * Released under the MIT license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).mt3dPopup=t()}(this,(function(){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(t,r))}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),r}var mapboxGlAnimatedPopup={exports:{}},mapboxGl={exports:{}},hasRequiredMapboxGl;function requireMapboxGl(){return hasRequiredMapboxGl||(hasRequiredMapboxGl=1,function(e,t){e.exports=function(){var e,t,r;function o(o,i){if(e)if(t){var s="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",n={};e(n),r=i(n),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else t=i;else e=i}return o(["exports"],(function(e){var t="undefined"!=typeof self?self:{},r="2.15.0";let o;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==o){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{o=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):e}catch(t){o=e}}return o},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const e=new URL(i.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},s={supported:!1,testSupport:function(e){!l&&a&&(c?u(e):n=e)}};let n,a,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.isContextLost())return;s.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(a=t.document.createElement("img"),a.onload=function(){n&&u(n),n=null,c=!0},a.onerror=function(){l=!0,n=null},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const p="01";function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h=g;function g(e,t,r,o){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=o}g.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,o=0;o<8;o++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s}var n=0,a=1;for(r=e,o=0;o<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));o++)e>i?n=r:a=r,r=.5*(a-n)+n;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var f=d(h),_=m;function m(e,t){this.x=e,this.y=t}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),o=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=o,this},_rotateAround:function(e,t){var r=Math.cos(e),o=Math.sin(e),i=t.y+o*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-o*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(e){return e instanceof m?e:Array.isArray(e)?new m(e[0],e[1]):e};var y=d(_);const b=Math.PI/180,S=180/Math.PI;function R(e){return e*b}function v(e){return e*S}const x=[[0,0],[1,0],[1,1],[0,1]];function E(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function M(e,t,r,o){const i=new f(e,t,r,o);return function(e){return i.solve(e)}}const T=M(.25,.1,.25,1);function w(e,t,r){return Math.min(r,Math.max(t,e))}function F(e,t,r){return(r=w((r-e)/(t-e),0,1))*r*(3-2*r)}function B(e,t,r){const o=r-t,i=((e-t)%o+o)%o+t;return i===t?r:i}function C(e,t,r){if(!e.length)return r(null,[]);let o=e.length;const i=new Array(e.length);let s=null;e.forEach(((e,n)=>{t(e,((e,t)=>{e&&(s=e),i[n]=t,0==--o&&r(s,i)}))}))}function L(e){const t=[];for(const r in e)t.push(e[r]);return t}function D(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}let I=1;function O(){return I++}function P(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function A(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function k(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function z(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function N(e,t){return-1!==e.indexOf(t,e.length-t.length)}function j(e,t,r){const o={};for(const i in e)o[i]=t.call(r||this,e[i],i,e);return o}function U(e,t,r){const o={};for(const i in e)t.call(r||this,e[i],i,e)&&(o[i]=e[i]);return o}function G(e){return Array.isArray(e)?e.map(G):"object"==typeof e&&e?j(e,G):e}const W={};function q(e){W[e]||(W[e]=!0)}function $(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function V(e){let t=0;for(let r,o,i=0,s=e.length,n=s-1;i<s;n=i++)r=e[i],o=e[n],t+=(o.x-r.x)*(r.y+o.y);return t}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function K(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,o,i)=>{const s=o||i;return t[r]=!s||s.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let Z=null;function X(e){if(null==Z){const t=e.navigator?e.navigator.userAgent:null;Z=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Z}function J(e){try{const r=t[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Y(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Q="mapbox-tiles";let ee,te,re=500,oe=50;function ie(){try{return t.caches}catch(e){}}function se(){ie()&&!ee&&(ee=t.caches.open(Q))}function ne(e){const t=e.indexOf("?");if(t<0)return e;const r=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),o=r.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return o.length?`${e.slice(0,t)}?${o.join("&")}`:e.slice(0,t)}let ae=1/0;const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(le);class ce extends Error{constructor(e,t,r){401===t&&Se(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ue=H()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,pe=function(e,r){if(!(/^file:/.test(o=e.url)||/^file:/.test(ue())&&!/^\w+:/.test(o))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,r){const o=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ue(),referrerPolicy:e.referrerPolicy,signal:o.signal});let s=!1,n=!1;const a=(l=i.url).indexOf("sku=")>0&&Se(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const c=(o,s,l)=>{if(n)return;if(o&&"SecurityError"!==o.message&&q(o.toString()),s&&l)return u(s);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=a?t.clone():null;return u(t,e,c)}return r(new ce(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&r(new Error(`${t.message} ${e.url}`))}))},u=(o,a,l)=>{("arrayBuffer"===e.type?o.arrayBuffer():"json"===e.type?o.json():o.text()).then((e=>{n||(a&&l&&function(e,r,o){if(se(),!ee)return;const i={status:r.status,statusText:r.statusText,headers:new t.Headers};r.headers.forEach(((e,t)=>i.headers.set(t,e)));const s=K(r.headers.get("Cache-Control")||"");if(s["no-store"])return;s["max-age"]&&i.headers.set("Expires",new Date(o+1e3*s["max-age"]).toUTCString());const n=i.headers.get("Expires");n&&(new Date(n).getTime()-o<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(r,(r=>{const o=new t.Response(r,i);se(),ee&&ee.then((t=>t.put(ne(e.url),o))).catch((e=>q(e.message)))})))}(i,a,l),s=!0,r(null,e,o.headers.get("Cache-Control"),o.headers.get("Expires")))})).catch((e=>{n||r(new Error(e.message))}))};return a?function(e,t){if(se(),!ee)return t(null);const r=ne(e.url);ee.then((e=>{e.match(r).then((o=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),r=K(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(o);e.delete(r),i&&e.put(r,o.clone()),t(null,o,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{n=!0,s||o.abort()}}}(e,r);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var o;return function(e,r){const o=new t.XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(o.responseType="text",o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{r(new Error(o.statusText))},o.onload=()=>{if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return r(e)}r(null,t,o.getResponseHeader("Cache-Control"),o.getResponseHeader("Expires"))}else r(new ce(o.statusText,o.status,e.url))},o.send(e.body),{cancel:()=>o.abort()}}(e,r)},de=function(e,t){return pe(D(e,{type:"arrayBuffer"}),t)};function he(e){const r=t.document.createElement("a");return r.href=e,r.protocol===t.document.location.protocol&&r.host===t.document.location.host}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let fe,_e;fe=[],_e=0;const me=function(e,r){if(s.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),_e>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return fe.push(t),t}_e++;let o=!1;const n=()=>{if(!o)for(o=!0,_e--;fe.length&&_e<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=fe.shift(),{requestParameters:t,callback:r,cancelled:o}=e;o||(e.cancel=me(t,r).cancel)}},a=de(e,((e,o,i,s)=>{n(),e?r(e):o&&(t.createImageBitmap?function(e,r){const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(o).then((e=>{r(null,e)})).catch((e=>{r(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(o,((e,t)=>r(e,t,i,s))):function(e,r){const o=new t.Image,i=t.URL;o.onload=()=>{r(null,o),i.revokeObjectURL(o.src),o.onload=null,t.requestAnimationFrame((()=>{o.src=ge}))},o.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const s=new t.Blob([new Uint8Array(e)],{type:"image/png"});o.src=e.byteLength?i.createObjectURL(s):ge}(o,((e,t)=>r(e,t,i,s))))}));return{cancel:()=>{a.cancel(),n()}}},ye="NO_ACCESS_TOKEN";function be(e){return 0===e.indexOf("mapbox:")}function Se(e){return i.API_URL_REGEX.test(e)}function Re(e){return i.API_CDN_URL_REGEX.test(e)}function ve(e){return i.API_STYLE_REGEX.test(e)&&!xe(e)}function xe(e){return i.API_SPRITE_REGEX.test(e)}const Ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Me(e){const t=e.match(Ee);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Te(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}const we="mapbox.eventData";function Fe(e){if(!e)return null;const r=e.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(r[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Be{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Fe(i.ACCESS_TOKEN);let o="";return o=r&&r.u?t.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`${we}.${e}:${o}`:`${we}:${o}`}fetchEventData(){const e=J("localStorage"),r=this.getStorageKey(),o=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(r);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(o);i&&(this.anonId=i)}catch(e){q("Unable to read from LocalStorage")}}saveEventData(){const e=J("localStorage"),r=this.getStorageKey(),o=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(o,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(e){q("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,r,o){if(!i.EVENTS_URL)return;const s=Me(i.EVENTS_URL);s.params.push(`access_token=${o||i.ACCESS_TOKEN||""}`);const n={event:this.type,created:new Date(e).toISOString()},a=t?D(n,t):n,l={url:Te(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=function(e,t){return pe(D(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(o)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Ce=new class extends Be{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>be(e)||Se(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Fe(i.ACCESS_TOKEN),o=t?t.u:i.ACCESS_TOKEN;let s=o!==this.eventData.tokenU;k(this.anonId)||(this.anonId=P(),s=!0);const n=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(n),r=(n-this.eventData.lastSuccess)/864e5;s=s||r>=1||r<-1||e.getDate()!==t.getDate()}else s=!0;s?this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:p,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=n,this.eventData.tokenU=o)}),e):this.processRequests()}},Le=Ce.postTurnstileEvent.bind(Ce),De=new class extends Be{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,r,o){this.skuToken=t,this.errorCb=o,i.EVENTS_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:o}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),k(this.anonId)||(this.anonId=P()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:p,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Ie=De.postMapLoadEvent.bind(De),Oe=new class extends Be{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:o,performanceData:i}=this.queue.shift(),s=function(e){const o=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),s=function(e){const t={};if(e)for(const r in e)if("other"!==r)for(const o of e[r]){const e=`${r}ResolveRangeMin`,i=`${r}ResolveRangeMax`,s=`${r}RequestCount`,n=`${r}RequestCachedCount`;t[e]=Math.min(t[e]||1/0,o.startTime),t[i]=Math.max(t[i]||-1/0,o.responseEnd);const a=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==o.transferSize&&0===o.transferSize&&a(n),a(s)}return t}(function(e,t){const r={};if(e)for(const o of e){const e=t(o);void 0===r[e]&&(r[e]=[]),r[e].push(o)}return r}(o,Ue)),n=t.devicePixelRatio,a=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,r)=>{null!=r&&e.push({name:t,value:r.toString()})};for(const e in s)c(l.counters,e,s[e]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const e of Object.keys(Ne)){const t=Ne[e],r=i.find((e=>e.name===t));r&&c(l.counters,t,r.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(ve(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(o)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",n),c(l.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/n),c(l.metadata,"mapHeight",e.height/n),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",r),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const e of s.metadata);for(const e of s.counters);for(const e of s.attributes);this.postEvent(o,s,(()=>{}),e)}},Pe=Oe.postPerformanceEvent.bind(Oe),Ae=new class extends Be{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,r,o){if(!i.API_URL||!i.SESSION_PATH)return;const s=Me(i.API_URL+i.SESSION_PATH);s.params.push(`sku=${t||""}`),s.params.push(`access_token=${o||i.ACCESS_TOKEN||""}`);const n={url:Te(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return pe(D(e,{method:"GET"}),t)}(n,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(o)}))}getSessionAPI(e,t,r,o){this.skuToken=t,this.errorCb=o,i.SESSION_PATH&&i.API_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||this.getSession(r,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},ke=Ae.getSessionAPI.bind(Ae),ze=new Set,Ne={create:"create",load:"load",fullLoad:"fullLoad"},je={mark(e){t.performance.mark(e)},measure(e,r,o){t.performance.measure(e,r,o)}};function Ue(e){const t=e.name.split("?")[0];return Re(t)&&t.includes("mapbox-gl.js")?"javascript":Re(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":xe(t)?"sprite":ve(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ge=t.performance;function We(e){const t=e?e.url.toString():void 0;return Ge.getEntriesByName(t)}let qe,$e,Ve,He;const Ke={now:()=>void 0!==Ve?Ve:t.performance.now(),setNow(e){Ve=e},restoreNow(){Ve=void 0},frame(e){const r=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(r)}},getImageData(e,r=0){const{width:o,height:i}=e;He||(He=t.document.createElement("canvas"));const s=He.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return(o>He.width||i>He.height)&&(He.width=o,He.height=i),s.clearRect(-r,-r,o+2*r,i+2*r),s.drawImage(e,0,0,o,i),s.getImageData(-r,-r,o+2*r,i+2*r)},resolveURL:e=>(qe||(qe=t.document.createElement("a")),qe.href=e,qe.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==$e&&($e=t.matchMedia("(prefers-reduced-motion: reduce)")),$e.matches)}};function Ze(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function Xe(e,t,r){if(r&&r[e]){const o=r[e].indexOf(t);-1!==o&&r[e].splice(o,1)}}class Je{constructor(e,t={}){D(this,t),this.type=e}}class Ye extends Je{constructor(e,t={}){super("error",D({error:e},t))}}class Qe{on(e,t){return this._listeners=this._listeners||{},Ze(e,t,this._listeners),this}off(e,t){return Xe(e,t,this._listeners),Xe(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Je(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const t of o)Xe(r,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(D(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}function rt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ot(e){if(Array.isArray(e))return e.map(ot);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=ot(e[r]);return t}return rt(e)}class it extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var st=it;class nt{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,r]of t)this.bindings[e]=r}concat(e){return new nt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var at=nt;const lt={kind:"null"},ct={kind:"number"},ut={kind:"string"},pt={kind:"boolean"},dt={kind:"color"},ht={kind:"object"},gt={kind:"value"},ft={kind:"collator"},_t={kind:"formatted"},mt={kind:"resolvedImage"};function yt(e,t){return{kind:"array",itemType:e,N:t}}function bt(e){if("array"===e.kind){const t=bt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const St=[lt,ct,ut,pt,dt,_t,ht,yt(gt),mt];function Rt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Rt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of St)if(!Rt(e,t))return null}return`Expected ${bt(e)} but found ${bt(t)} instead.`}function vt(e,t){return t.some((t=>t.kind===e.kind))}function xt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var Et,Mt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Tt(e){return(e=Math.round(e))<0?0:e>255?255:e}function wt(e){return Tt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Ft(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Bt(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{Et={}.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in Mt)return Mt[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var o=r.indexOf("("),i=r.indexOf(")");if(-1!==o&&i+1===r.length){var s=r.substr(0,o),n=r.substr(o+1,i-(o+1)).split(","),a=1;switch(s){case"rgba":if(4!==n.length)return null;a=Ft(n.pop());case"rgb":return 3!==n.length?null:[wt(n[0]),wt(n[1]),wt(n[2]),a];case"hsla":if(4!==n.length)return null;a=Ft(n.pop());case"hsl":if(3!==n.length)return null;var l=(parseFloat(n[0])%360+360)%360/360,c=Ft(n[1]),u=Ft(n[2]),p=u<=.5?u*(c+1):u+c-u*c,d=2*u-p;return[Tt(255*Bt(d,p,l+1/3)),Tt(255*Bt(d,p,l)),Tt(255*Bt(d,p,l-1/3)),a];default:return null}}return null}}catch(e){}class Ct{constructor(e,t,r,o=1){this.r=e,this.g=t,this.b=r,this.a=o}static parse(e){if(!e)return;if(e instanceof Ct)return e;if("string"!=typeof e)return;const t=Et(e);return t?new Ct(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,r,o]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${o})`}toArray(){const{r:e,g:t,b:r,a:o}=this;return 0===o?[0,0,0,0]:[255*e/o,255*t/o,255*r/o,o]}toArray01(){const{r:e,g:t,b:r,a:o}=this;return 0===o?[0,0,0,0]:[e/o,t/o,r/o,o]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:o}=this;return[e,t,r,o]}}Ct.black=new Ct(0,0,0,1),Ct.white=new Ct(1,1,1,1),Ct.transparent=new Ct(0,0,0,0),Ct.red=new Ct(1,0,0,1),Ct.blue=new Ct(0,0,1,1);var Lt=Ct;class Dt{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class It{constructor(e,t,r,o,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=o,this.textColor=i}}class Ot{constructor(e){this.sections=e}static fromString(e){return new Ot([new It(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ot?e:Ot.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Pt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Pt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function At(e,t,r,o){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===o||"number"==typeof o&&o>=0&&o<=1?null:`Invalid rgba value [${[e,t,r,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof o?[e,t,r,o]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Lt)return!0;if(e instanceof Dt)return!0;if(e instanceof Ot)return!0;if(e instanceof Pt)return!0;if(Array.isArray(e)){for(const t of e)if(!kt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!kt(e[t]))return!1;return!0}return!1}function zt(e){if(null===e)return lt;if("string"==typeof e)return ut;if("boolean"==typeof e)return pt;if("number"==typeof e)return ct;if(e instanceof Lt)return dt;if(e instanceof Dt)return ft;if(e instanceof Ot)return _t;if(e instanceof Pt)return mt;if(Array.isArray(e)){const t=e.length;let r;for(const t of e){const e=zt(t);if(r){if(r===e)continue;r=gt;break}r=e}return yt(r||gt,t)}return ht}function Nt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Lt||e instanceof Ot||e instanceof Pt?e.toString():JSON.stringify(e)}class jt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!kt(e[1]))return t.error("invalid value");const r=e[1];let o=zt(r);const i=t.expectedType;return"array"!==o.kind||0!==o.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(o=i),new jt(o,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Lt?["rgba"].concat(this.value.toArray()):this.value instanceof Ot?this.value.serialize():this.value}}var Ut=jt,Gt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Wt={string:ut,number:ct,boolean:pt,object:ht};class qt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,o=1;const i=e[0];if("array"===i){let i,s;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in Wt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Wt[r],o++}else i=gt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);s=e[2],o++}r=yt(i,s)}else r=Wt[i];const s=[];for(;o<e.length;o++){const r=t.parse(e[o],o,gt);if(!r)return null;s.push(r)}return new qt(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!Rt(this.type,zt(r)))return r;if(t===this.args.length-1)throw new Gt(`Expected value to be of type ${bt(this.type)}, but found ${bt(zt(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);const o=e.N;("number"==typeof o||this.args.length>1)&&t.push(o)}}return t.concat(this.args.map((e=>e.serialize())))}}var $t=qt;class Vt{constructor(e){this.type=_t,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const o=[];let i=!1;for(let r=1;r<=e.length-1;++r){const s=e[r];if(i&&"object"==typeof s&&!Array.isArray(s)){i=!1;let e=null;if(s["font-scale"]&&(e=t.parse(s["font-scale"],1,ct),!e))return null;let r=null;if(s["text-font"]&&(r=t.parse(s["text-font"],1,yt(ut)),!r))return null;let n=null;if(s["text-color"]&&(n=t.parse(s["text-color"],1,dt),!n))return null;const a=o[o.length-1];a.scale=e,a.font=r,a.textColor=n}else{const s=t.parse(e[r],1,gt);if(!s)return null;const n=s.type.kind;if("string"!==n&&"value"!==n&&"null"!==n&&"resolvedImage"!==n)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,o.push({content:s,scale:null,font:null,textColor:null})}}return new Vt(o)}evaluate(e){return new Ot(this.sections.map((t=>{const r=t.content.evaluate(e);return zt(r)===mt?new It("",r,null,null,null):new It(Nt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Ht{constructor(e){this.type=mt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ut);return r?new Ht(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Pt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Kt={"to-boolean":pt,"to-color":dt,"to-number":ct,"to-string":ut};class Zt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const o=Kt[r],i=[];for(let r=1;r<e.length;r++){const o=t.parse(e[r],r,gt);if(!o)return null;i.push(o)}return new Zt(o,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const o of this.args){if(t=o.evaluate(e),r=null,t instanceof Lt)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:At(t[0],t[1],t[2],t[3]),!r))return new Lt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Gt(r||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const o=Number(t);if(!isNaN(o))return o}throw new Gt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Ot.fromString(Nt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Pt.fromString(Nt(this.args[0].evaluate(e))):Nt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Vt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ht(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Xt=Zt;const Jt=["Unknown","Point","LineString","Polygon"];var Yt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Jt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:o}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(o*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Lt.parse(e)),t}};class Qt{constructor(e,t,r,o){this.name=e,this.type=t,this._evaluate=r,this.args=o}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const r=e[0],o=Qt.definitions[r];if(!o)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(o)?o[0]:o.type,s=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,n=s.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let a=null;for(const[o,s]of n){a=new Tr(t.registry,t.path,null,t.scope);const n=[];let l=!1;for(let t=1;t<e.length;t++){const r=e[t],i=Array.isArray(o)?o[t-1]:o.type,s=a.parse(r,1+n.length,i);if(!s){l=!0;break}n.push(s)}if(!l)if(Array.isArray(o)&&o.length!==n.length)a.error(`Expected ${o.length} arguments, but found ${n.length} instead.`);else{for(let e=0;e<n.length;e++){const t=Array.isArray(o)?o[e]:o.type,r=n[e];a.concat(e+1).checkSubtype(t,r.type)}if(0===a.errors.length)return new Qt(r,i,s,n)}}if(1===n.length)t.errors.push(...a.errors);else{const r=(n.length?n:s).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(bt).join(", ")})`:`(${bt(t.type)}...)`;var t})).join(" | "),o=[];for(let r=1;r<e.length;r++){const i=t.parse(e[r],1+o.length);if(!i)return null;o.push(bt(i.type))}t.error(`Expected arguments of type ${r}, but found (${o.join(", ")}) instead.`)}return null}static register(e,t){Qt.definitions=t;for(const r in t)e[r]=Qt}}var er=Qt;class tr{constructor(e,t,r){this.type=ft,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const o=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,pt);if(!o)return null;const i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,pt);if(!i)return null;let s=null;return r.locale&&(s=t.parse(r.locale,1,ut),!s)?null:new tr(o,i,s)}evaluate(e){return new Dt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const rr=8192;function or(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ir(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function sr(e,t){const r=(180+e[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*rr),Math.round(o*i*rr)]}function nr(e,t,r){const o=e[0]-t[0],i=e[1]-t[1],s=e[0]-r[0],n=e[1]-r[1];return o*n-s*i==0&&o*s<=0&&i*n<=0}function ar(e,t){let r=!1;for(let n=0,a=t.length;n<a;n++){const a=t[n];for(let t=0,n=a.length;t<n-1;t++){if(nr(e,a[t],a[t+1]))return!1;(i=a[t])[1]>(o=e)[1]!=(s=a[t+1])[1]>o[1]&&o[0]<(s[0]-i[0])*(o[1]-i[1])/(s[1]-i[1])+i[0]&&(r=!r)}}var o,i,s;return r}function lr(e,t){for(let r=0;r<t.length;r++)if(ar(e,t[r]))return!0;return!1}function cr(e,t,r,o){const i=o[0]-r[0],s=o[1]-r[1],n=(e[0]-r[0])*s-i*(e[1]-r[1]),a=(t[0]-r[0])*s-i*(t[1]-r[1]);return n>0&&a<0||n<0&&a>0}function ur(e,t,r){for(const c of r)for(let r=0;r<c.length-1;++r)if(0!=(a=[(n=c[r+1])[0]-(s=c[r])[0],n[1]-s[1]])[0]*(l=[(i=t)[0]-(o=e)[0],i[1]-o[1]])[1]-a[1]*l[0]&&cr(o,i,s,n)&&cr(s,n,o,i))return!0;var o,i,s,n,a,l;return!1}function pr(e,t){for(let r=0;r<e.length;++r)if(!ar(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(ur(e[r],e[r+1],t))return!1;return!0}function dr(e,t){for(let r=0;r<t.length;r++)if(pr(e,t[r]))return!0;return!1}function hr(e,t,r){const o=[];for(let i=0;i<e.length;i++){const s=[];for(let o=0;o<e[i].length;o++){const n=sr(e[i][o],r);or(t,n),s.push(n)}o.push(s)}return o}function gr(e,t,r){const o=[];for(let i=0;i<e.length;i++){const s=hr(e[i],t,r);o.push(s)}return o}function fr(e,t,r,o){if(e[0]<r[0]||e[0]>r[2]){const t=.5*o;let i=e[0]-r[0]>t?-o:r[0]-e[0]>t?o:0;0===i&&(i=e[0]-r[2]>t?-o:r[2]-e[0]>t?o:0),e[0]+=i}or(t,e)}function _r(e,t,r,o){const i=Math.pow(2,o.z)*rr,s=[o.x*rr,o.y*rr],n=[];if(!e)return n;for(const o of e)for(const e of o){const o=[e.x+s[0],e.y+s[1]];fr(o,t,r,i),n.push(o)}return n}function mr(e,t,r,o){const i=Math.pow(2,o.z)*rr,s=[o.x*rr,o.y*rr],n=[];if(!e)return n;for(const r of e){const e=[];for(const o of r){const r=[o.x+s[0],o.y+s[1]];or(t,r),e.push(r)}n.push(e)}if(t[2]-t[0]<=i/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const e of n)for(const o of e)fr(o,t,r,i)}var a;return n}class yr{constructor(e,t){this.type=pt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(kt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new yr(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new yr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new yr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const s=hr(t.coordinates,o,i),n=_r(e.geometry(),r,o,i);if(!ir(r,o))return!1;for(const e of n)if(!ar(e,s))return!1}if("MultiPolygon"===t.type){const s=gr(t.coordinates,o,i),n=_r(e.geometry(),r,o,i);if(!ir(r,o))return!1;for(const e of n)if(!lr(e,s))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const s=hr(t.coordinates,o,i),n=mr(e.geometry(),r,o,i);if(!ir(r,o))return!1;for(const e of n)if(!pr(e,s))return!1}if("MultiPolygon"===t.type){const s=gr(t.coordinates,o,i),n=mr(e.geometry(),r,o,i);if(!ir(r,o))return!1;for(const e of n)if(!dr(e,s))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var br=yr;function Sr(e){if(e instanceof er){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof br)return!1;let t=!0;return e.eachChild((e=>{t&&!Sr(e)&&(t=!1)})),t}function Rr(e){if(e instanceof er&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Rr(e)&&(t=!1)})),t}function vr(e,t){if(e instanceof er&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!vr(e,t)&&(r=!1)})),r}class xr{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new xr(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Er=xr;class Mr{constructor(e,t=[],r,o=new at,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=o,this.errors=i,this.expectedType=r}parse(e,t,r,o,i={}){return t?this.concat(t,r,o)._parse(e,i):this._parse(e,i)}_parse(e,t){function r(e,t,r){return"assert"===r?new $t(t,[e]):"coerce"===r?new Xt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=e[0];if("string"!=typeof o)return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[o];if(i){let o=i.parse(e,this);if(!o)return null;if(this.expectedType){const e=this.expectedType,i=o.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else o=r(o,e,t.typeAnnotation||"coerce");else o=r(o,e,t.typeAnnotation||"assert")}if(!(o instanceof Ut)&&"resolvedImage"!==o.type.kind&&wr(o)){const t=new Yt;try{o=new Ut(o.type,o.evaluate(t))}catch(e){return this.error(e.message),null}}return o}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const o="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new Mr(this.registry,o,t||null,i,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new st(r,e))}checkSubtype(e,t){const r=Rt(e,t);return r&&this.error(r),r}}var Tr=Mr;function wr(e){if(e instanceof Er)return wr(e.boundExpression);if(e instanceof er&&"error"===e.name)return!1;if(e instanceof tr)return!1;if(e instanceof br)return!1;const t=e instanceof Xt||e instanceof $t;let r=!0;return e.eachChild((e=>{r=t?r&&wr(e):r&&e instanceof Ut})),!!r&&Sr(e)&&vr(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Fr(e,t){const r=e.length-1;let o,i,s=0,n=r,a=0;for(;s<=n;)if(a=Math.floor((s+n)/2),o=e[a],i=e[a+1],o<=t){if(a===r||t<i)return a;s=a+1}else{if(!(o>t))throw new Gt("Input is not a number.");n=a-1}return 0}class Br{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const o=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let r=1;r<e.length;r+=2){const s=1===r?-1/0:e[r],n=e[r+1],a=r,l=r+1;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(o.length&&o[o.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(n,l,i);if(!c)return null;i=i||c.type,o.push([s,c])}return new Br(i,r,o)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);const i=t.length;return o>=t[i-1]?r[i-1].evaluate(e):r[Fr(t,o)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Cr=Br;function Lr(e,t,r){return e*(1-r)+t*r}var Dr=Object.freeze({__proto__:null,array:function(e,t,r){return e.map(((e,o)=>Lr(e,t[o],r)))},color:function(e,t,r){return new Lt(Lr(e.r,t.r,r),Lr(e.g,t.g,r),Lr(e.b,t.b,r),Lr(e.a,t.a,r))},number:Lr});const Ir=.95047,Or=1.08883,Pr=4/29,Ar=6/29,kr=3*Ar*Ar,zr=Ar*Ar*Ar,Nr=Math.PI/180,jr=180/Math.PI;function Ur(e){return e>zr?Math.pow(e,1/3):e/kr+Pr}function Gr(e){return e>Ar?e*e*e:kr*(e-Pr)}function Wr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $r(e){const t=qr(e.r),r=qr(e.g),o=qr(e.b),i=Ur((.4124564*t+.3575761*r+.1804375*o)/Ir),s=Ur((.2126729*t+.7151522*r+.072175*o)/1);return{l:116*s-16,a:500*(i-s),b:200*(s-Ur((.0193339*t+.119192*r+.9503041*o)/Or)),alpha:e.a}}function Vr(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,o=isNaN(e.b)?t:t-e.b/200;return t=1*Gr(t),r=Ir*Gr(r),o=Or*Gr(o),new Lt(Wr(3.2404542*r-1.5371385*t-.4985314*o),Wr(-.969266*r+1.8760108*t+.041556*o),Wr(.0556434*r-.2040259*t+1.0572252*o),e.alpha)}function Hr(e,t,r){const o=t-e;return e+r*(o>180||o<-180?o-360*Math.round(o/360):o)}const Kr={forward:$r,reverse:Vr,interpolate:function(e,t,r){return{l:Lr(e.l,t.l,r),a:Lr(e.a,t.a,r),b:Lr(e.b,t.b,r),alpha:Lr(e.alpha,t.alpha,r)}}},Zr={forward:function(e){const{l:t,a:r,b:o}=$r(e),i=Math.atan2(o,r)*jr;return{h:i<0?i+360:i,c:Math.sqrt(r*r+o*o),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Nr,r=e.c;return Vr({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:Hr(e.h,t.h,r),c:Lr(e.c,t.c,r),l:Lr(e.l,t.l,r),alpha:Lr(e.alpha,t.alpha,r)}}};var Xr=Object.freeze({__proto__:null,hcl:Zr,lab:Kr});class Jr{constructor(e,t,r,o,i){this.type=e,this.operator=t,this.interpolation=r,this.input=o,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,o){let i=0;if("exponential"===e.name)i=Yr(t,e.base,r,o);else if("linear"===e.name)i=Yr(t,1,r,o);else if("cubic-bezier"===e.name){const s=e.controlPoints;i=new f(s[0],s[1],s[2],s[3]).solve(Yr(t,1,r,o))}return i}static parse(e,t){let[r,o,i,...s]=e;if(!Array.isArray(o)||0===o.length)return t.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){const e=o[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:e}}else{if("cubic-bezier"!==o[0])return t.error(`Unknown interpolation type ${String(o[0])}`,1,0);{const e=o.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ct),!i)return null;const n=[];let a=null;"interpolate-hcl"===r||"interpolate-lab"===r?a=dt:t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(let e=0;e<s.length;e+=2){const r=s[e],o=s[e+1],i=e+3,l=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(n.length&&n[n.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(o,l,a);if(!c)return null;a=a||c.type,n.push([r,c])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new Jr(a,r,o,i,n):t.error(`Type ${bt(a)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);const i=t.length;if(o>=t[i-1])return r[i-1].evaluate(e);const s=Fr(t,o),n=Jr.interpolationFactor(this.interpolation,o,t[s],t[s+1]),a=r[s].evaluate(e),l=r[s+1].evaluate(e);return"interpolate"===this.operator?Dr[this.type.kind.toLowerCase()](a,l,n):"interpolate-hcl"===this.operator?Zr.reverse(Zr.interpolate(Zr.forward(a),Zr.forward(l),n)):Kr.reverse(Kr.interpolate(Kr.forward(a),Kr.forward(l),n))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function Yr(e,t,r,o){const i=o-r,s=e-r;return 0===i?0:1===t?s/i:(Math.pow(t,s)-1)/(Math.pow(t,i)-1)}var Qr=Jr;class eo{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const o=t.expectedType;o&&"value"!==o.kind&&(r=o);const i=[];for(const o of e.slice(1)){const e=t.parse(o,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,i.push(e)}const s=o&&i.some((e=>Rt(o,e.type)));return new eo(s?gt:r,i)}evaluate(e){let t,r=null,o=0;for(const i of this.args){if(o++,r=i.evaluate(e),r&&r instanceof Pt&&!r.available&&(t||(t=r),r=null,o===this.args.length))return t;if(null!==r)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var to=eo;class ro{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let o=1;o<e.length-1;o+=2){const i=e[o];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,o);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=t.parse(e[o+1],o+1);if(!s)return null;r.push([i,s])}const o=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return o?new ro(r,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var oo=ro;class io{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ct),o=t.parse(e[2],2,yt(t.expectedType||gt));return r&&o?new io(o.type.itemType,r,o):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Gt(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Gt(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Gt(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var so=io;class no{constructor(e,t){this.type=pt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,gt),o=t.parse(e[2],2,gt);return r&&o?vt(r.type,[pt,ut,ct,lt,gt])?new no(r,o):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${bt(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!xt(t,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${bt(zt(t))} instead.`);if(!xt(r,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${bt(zt(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ao=no;class lo{constructor(e,t,r){this.type=ct,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,gt),o=t.parse(e[2],2,gt);if(!r||!o)return null;if(!vt(r.type,[pt,ut,ct,lt,gt]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${bt(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new lo(r,o,i):null}return new lo(r,o)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!xt(t,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${bt(zt(t))} instead.`);if(!xt(r,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${bt(zt(r))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(e);return r.indexOf(t,o)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var co=lo;class uo{constructor(e,t,r,o,i,s){this.inputType=e,this.type=t,this.input=r,this.cases=o,this.outputs=i,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);const i={},s=[];for(let n=2;n<e.length-1;n+=2){let a=e[n];const l=e[n+1];Array.isArray(a)||(a=[a]);const c=t.concat(n);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,zt(e)))return null}else r=zt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=s.length}const u=t.parse(l,n,o);if(!u)return null;o=o||u.type,s.push(u)}const n=t.parse(e[1],1,gt);if(!n)return null;const a=t.parse(e[e.length-1],e.length-1,o);return a?"value"!==n.type.kind&&t.concat(1).checkSubtype(r,n.type)?null:new uo(r,o,n,i,s,a):null}evaluate(e){const t=this.input.evaluate(e);return(zt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],o={};for(const e of t){const t=o[this.cases[e]];void 0===t?(o[this.cases[e]]=r.length,r.push([this.cases[e],[e]])):r[t][1].push(e)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,o]of r)e.push(1===o.length?i(o[0]):o.map(i)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}var po=uo;class ho{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const o=[];for(let i=1;i<e.length-1;i+=2){const s=t.parse(e[i],i,pt);if(!s)return null;const n=t.parse(e[i+1],i+1,r);if(!n)return null;o.push([s,n]),r=r||n.type}const i=t.parse(e[e.length-1],e.length-1,r);return i?new ho(r,o,i):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var go=ho;class fo{constructor(e,t,r,o){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,gt),o=t.parse(e[2],2,ct);if(!r||!o)return null;if(!vt(r.type,[yt(gt),ut,gt]))return t.error(`Expected first argument to be of type array or string, but found ${bt(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new fo(r.type,r,o,i):null}return new fo(r.type,r,o)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!xt(t,["string","array"]))throw new Gt(`Expected first argument to be of type array or string, but found ${bt(zt(t))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(e);return t.slice(r,o)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var _o=fo;function mo(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function yo(e,t,r,o){return 0===o.compare(t,r)}function bo(e,t,r){const o="=="!==e&&"!="!==e;return class i{constructor(e,t,r){this.type=pt,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let s=t.parse(e[1],1,gt);if(!s)return null;if(!mo(r,s.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${bt(s.type)}'.`);let n=t.parse(e[2],2,gt);if(!n)return null;if(!mo(r,n.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${bt(n.type)}'.`);if(s.type.kind!==n.type.kind&&"value"!==s.type.kind&&"value"!==n.type.kind)return t.error(`Cannot compare types '${bt(s.type)}' and '${bt(n.type)}'.`);o&&("value"===s.type.kind&&"value"!==n.type.kind?s=new $t(n.type,[s]):"value"!==s.type.kind&&"value"===n.type.kind&&(n=new $t(s.type,[n])));let a=null;if(4===e.length){if("string"!==s.type.kind&&"string"!==n.type.kind&&"value"!==s.type.kind&&"value"!==n.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,ft),!a)return null}return new i(s,n,a)}evaluate(i){const s=this.lhs.evaluate(i),n=this.rhs.evaluate(i);if(o&&this.hasUntypedArgument){const t=zt(s),r=zt(n);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new Gt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const e=zt(s),r=zt(n);if("string"!==e.kind||"string"!==r.kind)return t(i,s,n)}return this.collator?r(i,s,n,this.collator.evaluate(i)):t(i,s,n)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const So=bo("==",(function(e,t,r){return t===r}),yo),Ro=bo("!=",(function(e,t,r){return t!==r}),(function(e,t,r,o){return!yo(0,t,r,o)})),vo=bo("<",(function(e,t,r){return t<r}),(function(e,t,r,o){return o.compare(t,r)<0})),xo=bo(">",(function(e,t,r){return t>r}),(function(e,t,r,o){return o.compare(t,r)>0})),Eo=bo("<=",(function(e,t,r){return t<=r}),(function(e,t,r,o){return o.compare(t,r)<=0})),Mo=bo(">=",(function(e,t,r){return t>=r}),(function(e,t,r,o){return o.compare(t,r)>=0}));class To{constructor(e,t,r,o,i,s){this.type=ut,this.number=e,this.locale=t,this.currency=r,this.unit=o,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const o=e[2];if("object"!=typeof o||Array.isArray(o))return t.error("NumberFormat options argument must be an object.");let i=null;if(o.locale&&(i=t.parse(o.locale,1,ut),!i))return null;let s=null;if(o.currency&&(s=t.parse(o.currency,1,ut),!s))return null;let n=null;if(o.unit&&(n=t.parse(o.unit,1,ut),!n))return null;let a=null;if(o["min-fraction-digits"]&&(a=t.parse(o["min-fraction-digits"],1,ct),!a))return null;let l=null;return o["max-fraction-digits"]&&(l=t.parse(o["max-fraction-digits"],1,ct),!l)?null:new To(r,i,s,n,a,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class wo{constructor(e){this.type=ct,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${bt(r.type)} instead.`):new wo(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Gt(`Expected value to be of type string or array, but found ${bt(zt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Fo={"==":So,"!=":Ro,">":xo,"<":vo,">=":Mo,"<=":Eo,array:$t,at:so,boolean:$t,case:go,coalesce:to,collator:tr,format:Vt,image:Ht,in:ao,"index-of":co,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:wo,let:oo,literal:Ut,match:po,number:$t,"number-format":To,object:$t,slice:_o,step:Cr,string:$t,"to-boolean":Xt,"to-color":Xt,"to-number":Xt,"to-string":Xt,var:Er,within:br};function Bo(e,[t,r,o,i]){t=t.evaluate(e),r=r.evaluate(e),o=o.evaluate(e);const s=i?i.evaluate(e):1,n=At(t,r,o,s);if(n)throw new Gt(n);return new Lt(t/255*s,r/255*s,o/255*s,s)}function Co(e,t){return e in t}function Lo(e,t){const r=t[e];return void 0===r?null:r}function Do(e){return{type:e}}er.register(Fo,{error:[{kind:"error"},[ut],(e,[t])=>{throw new Gt(t.evaluate(e))}],typeof:[ut,[gt],(e,[t])=>bt(zt(t.evaluate(e)))],"to-rgba":[yt(ct,4),[dt],(e,[t])=>t.evaluate(e).toArray()],rgb:[dt,[ct,ct,ct],Bo],rgba:[dt,[ct,ct,ct,ct],Bo],has:{type:pt,overloads:[[[ut],(e,[t])=>Co(t.evaluate(e),e.properties())],[[ut,ht],(e,[t,r])=>Co(t.evaluate(e),r.evaluate(e))]]},get:{type:gt,overloads:[[[ut],(e,[t])=>Lo(t.evaluate(e),e.properties())],[[ut,ht],(e,[t,r])=>Lo(t.evaluate(e),r.evaluate(e))]]},"feature-state":[gt,[ut],(e,[t])=>Lo(t.evaluate(e),e.featureState||{})],properties:[ht,[],e=>e.properties()],"geometry-type":[ut,[],e=>e.geometryType()],id:[gt,[],e=>e.id()],zoom:[ct,[],e=>e.globals.zoom],pitch:[ct,[],e=>e.globals.pitch||0],"distance-from-center":[ct,[],e=>e.distanceFromCenter()],"heatmap-density":[ct,[],e=>e.globals.heatmapDensity||0],"line-progress":[ct,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ct,[],e=>e.globals.skyRadialProgress||0],accumulated:[gt,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ct,Do(ct),(e,t)=>{let r=0;for(const o of t)r+=o.evaluate(e);return r}],"*":[ct,Do(ct),(e,t)=>{let r=1;for(const o of t)r*=o.evaluate(e);return r}],"-":{type:ct,overloads:[[[ct,ct],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[ct],(e,[t])=>-t.evaluate(e)]]},"/":[ct,[ct,ct],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[ct,[ct,ct],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[ct,[ct],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))],log2:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ct,[ct],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ct,[ct],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ct,[ct],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ct,[ct],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ct,[ct],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ct,[ct],(e,[t])=>Math.atan(t.evaluate(e))],min:[ct,Do(ct),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ct,Do(ct),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ct,[ct],(e,[t])=>Math.abs(t.evaluate(e))],round:[ct,[ct],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ct,[ct],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ct,[ct],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[pt,[ut,gt],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[pt,[gt],(e,[t])=>e.id()===t.value],"filter-type-==":[pt,[ut],(e,[t])=>e.geometryType()===t.value],"filter-<":[pt,[ut,gt],(e,[t,r])=>{const o=e.properties()[t.value],i=r.value;return typeof o==typeof i&&o<i}],"filter-id-<":[pt,[gt],(e,[t])=>{const r=e.id(),o=t.value;return typeof r==typeof o&&r<o}],"filter->":[pt,[ut,gt],(e,[t,r])=>{const o=e.properties()[t.value],i=r.value;return typeof o==typeof i&&o>i}],"filter-id->":[pt,[gt],(e,[t])=>{const r=e.id(),o=t.value;return typeof r==typeof o&&r>o}],"filter-<=":[pt,[ut,gt],(e,[t,r])=>{const o=e.properties()[t.value],i=r.value;return typeof o==typeof i&&o<=i}],"filter-id-<=":[pt,[gt],(e,[t])=>{const r=e.id(),o=t.value;return typeof r==typeof o&&r<=o}],"filter->=":[pt,[ut,gt],(e,[t,r])=>{const o=e.properties()[t.value],i=r.value;return typeof o==typeof i&&o>=i}],"filter-id->=":[pt,[gt],(e,[t])=>{const r=e.id(),o=t.value;return typeof r==typeof o&&r>=o}],"filter-has":[pt,[gt],(e,[t])=>t.value in e.properties()],"filter-has-id":[pt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[pt,[yt(ut)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[pt,[yt(gt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[pt,[ut,yt(gt)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[pt,[ut,yt(gt)],(e,[t,r])=>function(e,t,r,o){for(;r<=o;){const i=r+o>>1;if(t[i]===e)return!0;t[i]>e?o=i-1:r=i+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:pt,overloads:[[[pt,pt],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Do(pt),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:pt,overloads:[[[pt,pt],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Do(pt),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[pt,[pt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[pt,[ut],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ut,[ut],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ut,[ut],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ut,Do(gt),(e,t)=>t.map((t=>Nt(t.evaluate(e)))).join("")],"resolved-locale":[ut,[ft],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Io=Fo;function Oo(e){return{result:"success",value:e}}function Po(e){return{result:"error",value:e}}function Ao(e){return"data-driven"===e["property-type"]}function ko(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zo(e){return!!e.expression&&e.expression.interpolated}function No(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function jo(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Uo(e){return e}function Go(e,t){const r="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],i=o||!(o||void 0!==e.property),s=e.type||(zo(t)?"exponential":"interval");if(r&&((e=tt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],Lt.parse(e[1])]))),e.default=Lt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Xr[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let n,a,l;if("exponential"===s)n=Vo;else if("interval"===s)n=$o;else if("categorical"===s){n=qo,a=Object.create(null);for(const t of e.stops)a[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==s)throw new Error(`Unknown function type "${s}"`);n=Ho}if(o){const r={},o=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],s=i[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:e.type,property:e.property,default:e.default,stops:[]},o.push(s)),r[s].stops.push([i[0].value,i[1]])}const i=[];for(const e of o)i.push([r[e].zoom,Go(r[e],t)]);const s={name:"linear"};return{kind:"composite",interpolationType:s,interpolationFactor:Qr.interpolationFactor.bind(void 0,s),zoomStops:i.map((e=>e[0])),evaluate:({zoom:r},o)=>Vo({stops:i,base:e.base},t,r).evaluate(r,o)}}if(i){const r="exponential"===s?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Qr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>n(e,t,r,a,l)}}return{kind:"source",evaluate(r,o){const i=o&&o.properties?o.properties[e.property]:void 0;return void 0===i?Wo(e.default,t.default):n(e,t,i,a,l)}}}function Wo(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function qo(e,t,r,o,i){return Wo(typeof r===i?o[r]:void 0,e.default,t.default)}function $o(e,t,r){if("number"!==No(r))return Wo(e.default,t.default);const o=e.stops.length;if(1===o)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];const i=Fr(e.stops.map((e=>e[0])),r);return e.stops[i][1]}function Vo(e,t,r){const o=void 0!==e.base?e.base:1;if("number"!==No(r))return Wo(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const s=Fr(e.stops.map((e=>e[0])),r),n=function(e,t,r,o){const i=o-r,s=e-r;return 0===i?0:1===t?s/i:(Math.pow(t,s)-1)/(Math.pow(t,i)-1)}(r,o,e.stops[s][0],e.stops[s+1][0]),a=e.stops[s][1],l=e.stops[s+1][1];let c=Dr[t.type]||Uo;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Xr[e.colorSpace];c=(e,r)=>t.reverse(t.interpolate(t.forward(e),t.forward(r),n))}return"function"==typeof a.evaluate?{evaluate(...e){const t=a.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==r)return c(t,r,n)}}:c(a,l,n)}function Ho(e,t,r){return"color"===t.type?r=Lt.parse(r):"formatted"===t.type?r=Ot.fromString(r.toString()):"resolvedImage"===t.type?r=Pt.fromString(r.toString()):No(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Wo(r,e.default,t.default)}class Ko{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Yt,this._defaultValue=t?function(e){return"color"===e.type&&(jo(e.default)||Array.isArray(e.default))?new Lt(0,0,0,0):"color"===e.type?Lt.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,o,i,s,n,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=o||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=n||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,o,i,s,n,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=n||null,this._evaluator.featureDistanceData=a||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Gt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0),this._defaultValue}}}function Zo(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Io}function Xo(e,t){const r=new Tr(Io,[],t?function(e){const t={color:dt,string:ut,number:ct,enum:ut,boolean:pt,formatted:_t,resolvedImage:mt};return"array"===e.type?yt(t[e.value]||gt,e.length):t[e.type]}(t):void 0),o=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?Oo(new Ko(o,t)):Po(r.errors)}class Jo{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Rr(t.expression)}evaluateWithoutErrorHandling(e,t,r,o,i,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,i,s)}evaluate(e,t,r,o,i,s){return this._styleExpression.evaluate(e,t,r,o,i,s)}}class Yo{constructor(e,t,r,o){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Rr(t.expression),this.interpolationType=o}evaluateWithoutErrorHandling(e,t,r,o,i,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,i,s)}evaluate(e,t,r,o,i,s){return this._styleExpression.evaluate(e,t,r,o,i,s)}interpolationFactor(e,t,r){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,e,t,r):0}}function Qo(e,t){if("error"===(e=Xo(e,t)).result)return e;const r=e.value.expression,o=Sr(r);if(!o&&!Ao(t))return Po([new st("","data expressions not supported")]);const i=vr(r,["zoom","pitch","distance-from-center"]);if(!i&&!ko(t))return Po([new st("","zoom expressions not supported")]);const s=ti(r);return s||i?s instanceof st?Po([s]):s instanceof Qr&&!zo(t)?Po([new st("",'"interpolate" expressions cannot be used with this property')]):Oo(s?new Yo(o?"camera":"composite",e.value,s.labels,s instanceof Qr?s.interpolation:void 0):new Jo(o?"constant":"source",e.value)):Po([new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ei{constructor(e,t){this._parameters=e,this._specification=t,tt(this,Go(this._parameters,this._specification))}static deserialize(e){return new ei(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ti(e){let t=null;if(e instanceof oo)t=ti(e.result);else if(e instanceof to){for(const r of e.args)if(t=ti(r),t)break}else(e instanceof Cr||e instanceof Qr)&&e.input instanceof er&&"zoom"===e.input.name&&(t=e);return t instanceof st||e.eachChild((e=>{const r=ti(e);r instanceof st?t=r:!t&&r?t=new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new st("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class ri{constructor(e,t,r,o){this.message=(e?`${e}: `:"")+r,o&&(this.identifier=o),null!=t&&t.__line__&&(this.line=t.__line__)}}function oi(e){const t=e.key,r=e.value,o=e.valueSpec||{},i=e.objectElementValidators||{},s=e.style,n=e.styleSpec;let a=[];const l=No(r);if("object"!==l)return[new ri(t,r,`object expected, ${l} found`)];for(const e in r){const l=e.split(".")[0];let c;i[l]?c=i[l]:o[l]?c=ki:i["*"]?c=i["*"]:o["*"]&&(c=ki),c?a=a.concat(c({key:(t?`${t}.`:t)+e,value:r[e],valueSpec:o[l]||o["*"],style:s,styleSpec:n,object:r,objectKey:e},r)):a.push(new ri(t,r[e],`unknown property "${e}"`))}for(const e in o)i[e]||o[e].required&&void 0===o[e].default&&void 0===r[e]&&a.push(new ri(t,r,`missing required property "${e}"`));return a}function ii(e){const t=e.value,r=e.valueSpec,o=e.style,i=e.styleSpec,s=e.key,n=e.arrayElementValidator||ki;if("array"!==No(t))return[new ri(s,t,`array expected, ${No(t)} found`)];if(r.length&&t.length!==r.length)return[new ri(s,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new ri(s,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let a={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(a.function=r.function),"object"===No(r.value)&&(a=r.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(n({array:t,arrayIndex:e,value:t[e],valueSpec:a,style:o,styleSpec:i,key:`${s}[${e}]`}));return l}function si(e){const t=e.key,r=e.value,o=e.valueSpec;let i=No(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new ri(t,r,`number expected, ${i} found`)];if("minimum"in o){let i=o.minimum;if("array"===No(o.minimum)&&(i=o.minimum[e.arrayIndex]),r<i)return[new ri(t,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in o){let i=o.maximum;if("array"===No(o.maximum)&&(i=o.maximum[e.arrayIndex]),r>i)return[new ri(t,r,`${r} is greater than the maximum value ${i}`)]}return[]}function ni(e){const t=e.valueSpec,r=rt(e.value.type);let o,i,s,n={};const a="categorical"!==r&&void 0===e.value.property,l=!a,c="array"===No(e.value.stops)&&"array"===No(e.value.stops[0])&&"object"===No(e.value.stops[0][0]),u=oi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ri(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const o=e.value;return t=t.concat(ii({key:e.key,value:o,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===No(o)&&0===o.length&&t.push(new ri(e.key,o,"array must have at least one stop")),t},default:function(e){return ki({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&a&&u.push(new ri(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new ri(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!zo(e.valueSpec)&&u.push(new ri(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ao(e.valueSpec)?u.push(new ri(e.key,e.value,"property functions not supported")):a&&!ko(e.valueSpec)&&u.push(new ri(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new ri(e.key,e.value,'"property" property is required')),u;function p(e){let r=[];const o=e.value,a=e.key;if("array"!==No(o))return[new ri(a,o,`array expected, ${No(o)} found`)];if(2!==o.length)return[new ri(a,o,`array length 2 expected, length ${o.length} found`)];if(c){if("object"!==No(o[0]))return[new ri(a,o,`object expected, ${No(o[0])} found`)];if(void 0===o[0].zoom)return[new ri(a,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new ri(a,o,"object stop key must have value")];const t=rt(o[0].zoom);if("number"!=typeof t)return[new ri(a,o[0].zoom,"stop zoom values must be numbers")];if(s&&s>t)return[new ri(a,o[0].zoom,"stop zoom values must appear in ascending order")];t!==s&&(s=t,i=void 0,n={}),r=r.concat(oi({key:`${a}[0]`,value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:si,value:d}}))}else r=r.concat(d({key:`${a}[0]`,value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return Zo(ot(o[1]))?r.concat([new ri(`${a}[1]`,o[1],"expressions are not allowed in function stops.")]):r.concat(ki({key:`${a}[1]`,value:o[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,s){const a=No(e.value),l=rt(e.value),c=null!==e.value?e.value:s;if(o){if(a!==o)return[new ri(e.key,c,`${a} stop domain type must match previous stop domain type ${o}`)]}else o=a;if("number"!==a&&"string"!==a&&"boolean"!==a&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ri(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==r){let o=`number expected, ${a} found`;return Ao(t)&&void 0===r&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ri(e.key,c,o)]}return"categorical"!==r||"number"!==a||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===a&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ri(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in n?[new ri(e.key,c,"stop domain values must be unique")]:(n[l]=!0,[])):[new ri(e.key,c,`integer expected, found ${String(l)}`)]}}function ai(e){const t=("property"===e.expressionContext?Qo:Xo)(ot(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ri(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ri(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Rr(r))return[new ri(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return li(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!vr(r,["zoom","feature-state"]))return[new ri(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Sr(r))return[new ri(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(e,t){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const e of t.valueSpec.expression.parameters)r.delete(e);if(0===r.size)return[];const o=[];return e instanceof er&&r.has(e.name)?[new ri(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{o.push(...li(e,t))})),o)}function ci(e){const t=e.key,r=e.value,o=e.valueSpec,i=[];return Array.isArray(o.values)?-1===o.values.indexOf(rt(r))&&i.push(new ri(t,r,`expected one of [${o.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(o.values).indexOf(rt(r))&&i.push(new ri(t,r,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function ui(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ui(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function pi(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ui(e)||(e=yi(e));const r=e;let o=!0;try{o=function(e){if(!gi(e))return e;let t=ot(e);return hi(t),t=di(t),t}(r)}catch(e){}const i=et[`filter_${t}`],s=Xo(o,i);let n=null;if("error"===s.result)throw new Error(s.value.map((e=>`${e.key}: ${e.message}`)).join(", "));n=(e,t,r)=>s.value.evaluate(e,t,{},r);let a=null,l=null;if(o!==r){const e=Xo(r,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(t,r,o,i,s)=>e.value.evaluate(t,r,{},o,void 0,void 0,i,s),l=!Sr(e.value.expression)}return{filter:n,dynamicFilter:a||void 0,needGeometry:mi(o),needFeature:!!l}}function di(e){if(!Array.isArray(e))return e;const t=function(e){if(fi.has(e[0]))for(let t=1;t<e.length;t++)if(gi(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>di(e)))}function hi(e){let t=!1;const r=[];if("case"===e[0]){for(let o=1;o<e.length-1;o+=2)t=t||gi(e[o]),r.push(e[o+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||gi(e[1]);for(let t=2;t<e.length-1;t+=2)r.push(e[t+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||gi(e[1]);for(let t=1;t<e.length-1;t+=2)r.push(e[t+1])}t&&(e.length=0,e.push("any",...r));for(let t=1;t<e.length;t++)hi(e[t])}function gi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(gi(e[t]))return!0;return!1}const fi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function _i(e,t){return e<t?-1:e>t?1:0}function mi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(mi(e[t]))return!0;return!1}function yi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?bi(e[1],e[2],"=="):"!="===t?vi(bi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?bi(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(yi))):"all"===t?["all"].concat(e.slice(1).map(yi)):"none"===t?["all"].concat(e.slice(1).map(yi).map(vi)):"in"===t?Si(e[1],e.slice(2)):"!in"===t?vi(Si(e[1],e.slice(2))):"has"===t?Ri(e[1]):"!has"===t?vi(Ri(e[1])):"within"!==t||e;var r}function bi(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function Si(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(_i)]]:["filter-in-small",e,["literal",t]]}}function Ri(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function vi(e){return["!",e]}function xi(e){return ui(ot(e.value))?ai(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):Ei(e)}function Ei(e){const t=e.value,r=e.key;if("array"!==No(t))return[new ri(r,t,`array expected, ${No(t)} found`)];const o=e.styleSpec;let i,s=[];if(t.length<1)return[new ri(r,t,"filter array must have at least 1 element")];switch(s=s.concat(ci({key:`${r}[0]`,value:t[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),rt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===rt(t[1])&&s.push(new ri(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&s.push(new ri(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=No(t[1]),"string"!==i&&s.push(new ri(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let n=2;n<t.length;n++)i=No(t[n]),"$type"===rt(t[1])?s=s.concat(ci({key:`${r}[${n}]`,value:t[n],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&s.push(new ri(`${r}[${n}]`,t[n],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let o=1;o<t.length;o++)s=s.concat(Ei({key:`${r}[${o}]`,value:t[o],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=No(t[1]),2!==t.length?s.push(new ri(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&s.push(new ri(`${r}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=No(t[1]),2!==t.length?s.push(new ri(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&s.push(new ri(`${r}[1]`,t[1],`object expected, ${i} found`))}return s}function Mi(e,t){const r=e.key,o=e.style,i=e.styleSpec,s=e.value,n=e.objectKey,a=i[`${t}_${e.layerType}`];if(!a)return[];const l=n.match(/^(.*)-transition$/);if("paint"===t&&l&&a[l[1]]&&a[l[1]].transition)return ki({key:r,value:s,valueSpec:i.transition,style:o,styleSpec:i});const c=e.valueSpec||a[n];if(!c)return[new ri(r,s,`unknown property "${n}"`)];let u;if("string"===No(s)&&Ao(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(s))){const e=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new ri(r,s,`"${n}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const p=[];return"symbol"===e.layerType&&("text-field"===n&&o&&!o.glyphs&&p.push(new ri(r,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===n&&jo(ot(s))&&"identity"===rt(s.type)&&p.push(new ri(r,s,'"text-font" does not support identity functions'))),p.concat(ki({key:e.key,value:s,valueSpec:c,style:o,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:n}))}function Ti(e){return Mi(e,"paint")}function wi(e){return Mi(e,"layout")}function Fi(e){let t=[];const r=e.value,o=e.key,i=e.style,s=e.styleSpec;r.type||r.ref||t.push(new ri(o,r,'either "type" or "ref" is required'));let n=rt(r.type);const a=rt(r.ref);if(r.id){const s=rt(r.id);for(let n=0;n<e.arrayIndex;n++){const e=i.layers[n];rt(e.id)===s&&t.push(new ri(o,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new ri(o,r[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{rt(t.id)===a&&(e=t)})),e?e.ref?t.push(new ri(o,r.ref,"ref cannot reference another ref layer")):n=rt(e.type):"string"==typeof a&&t.push(new ri(o,r.ref,`ref layer "${a}" not found`))}else if("background"!==n&&"sky"!==n)if(r.source){const e=i.sources&&i.sources[r.source],s=e&&rt(e.type);e?"vector"===s&&"raster"===n?t.push(new ri(o,r.source,`layer "${r.id}" requires a raster source`)):"raster"===s&&"raster"!==n?t.push(new ri(o,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==s||r["source-layer"]?"raster-dem"===s&&"hillshade"!==n?t.push(new ri(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==n||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===s&&e.lineMetrics||t.push(new ri(o,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ri(o,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new ri(o,r.source,`source "${r.source}" not found`))}else t.push(new ri(o,r,'missing required property "source"'));return t=t.concat(oi({key:o,value:r,valueSpec:s.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ki({key:`${o}.type`,value:r.type,valueSpec:s.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:e=>xi(tt({layerType:n},e)),layout:e=>oi({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>wi(tt({layerType:n},e))}}),paint:e=>oi({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ti(tt({layerType:n},e))}})}})),t}function Bi(e){const t=e.value,r=e.key,o=No(t);return"string"!==o?[new ri(r,t,`string expected, ${o} found`)]:[]}const Ci={promoteId:function({key:e,value:t}){if("string"===No(t))return Bi({key:e,value:t});{const r=[];for(const o in t)r.push(...Bi({key:`${e}.${o}`,value:t[o]}));return r}}};function Li(e){const t=e.value,r=e.key,o=e.styleSpec,i=e.style;if(!t.type)return[new ri(r,t,'"type" is required')];const s=rt(t.type);let n;switch(s){case"vector":case"raster":case"raster-dem":return n=oi({key:r,value:t,valueSpec:o[`source_${s.replace("-","_")}`],style:e.style,styleSpec:o,objectElementValidators:Ci}),n;case"geojson":if(n=oi({key:r,value:t,valueSpec:o.source_geojson,style:i,styleSpec:o,objectElementValidators:Ci}),t.cluster)for(const e in t.clusterProperties){const[o,i]=t.clusterProperties[e],s="string"==typeof o?[o,["accumulated"],["get",e]]:o;n.push(...ai({key:`${r}.${e}.map`,value:i,expressionContext:"cluster-map"})),n.push(...ai({key:`${r}.${e}.reduce`,value:s,expressionContext:"cluster-reduce"}))}return n;case"video":return oi({key:r,value:t,valueSpec:o.source_video,style:i,styleSpec:o});case"image":return oi({key:r,value:t,valueSpec:o.source_image,style:i,styleSpec:o});case"canvas":return[new ri(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:`${r}.type`,value:t.type,valueSpec:{values:Di(o)},style:i,styleSpec:o})}}function Di(e){return e.source.reduce(((t,r)=>{const o=e[r];return"enum"===o.type.type&&(t=t.concat(Object.keys(o.type.values))),t}),[])}function Ii(e){const t=e.value,r=e.styleSpec,o=r.light,i=e.style;let s=[];const n=No(t);if(void 0===t)return s;if("object"!==n)return s=s.concat([new ri("light",t,`object expected, ${n} found`)]),s;for(const e in t){const n=e.match(/^(.*)-transition$/);s=s.concat(n&&o[n[1]]&&o[n[1]].transition?ki({key:e,value:t[e],valueSpec:r.transition,style:i,styleSpec:r}):o[e]?ki({key:e,value:t[e],valueSpec:o[e],style:i,styleSpec:r}):[new ri(e,t[e],`unknown property "${e}"`)])}return s}function Oi(e){const t=e.value,r=e.key,o=e.style,i=e.styleSpec,s=i.terrain;let n=[];const a=No(t);if(void 0===t)return n;if("object"!==a)return n=n.concat([new ri("terrain",t,`object expected, ${a} found`)]),n;for(const e in t){const r=e.match(/^(.*)-transition$/);n=n.concat(r&&s[r[1]]&&s[r[1]].transition?ki({key:e,value:t[e],valueSpec:i.transition,style:o,styleSpec:i}):s[e]?ki({key:e,value:t[e],valueSpec:s[e],style:o,styleSpec:i}):[new ri(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=o.sources&&o.sources[t.source],i=e&&rt(e.type);e?"raster-dem"!==i&&n.push(new ri(r,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):n.push(new ri(r,t.source,`source "${t.source}" not found`))}else n.push(new ri(r,t,'terrain is missing required property "source"'));return n}function Pi(e){const t=e.value,r=e.style,o=e.styleSpec,i=o.fog;let s=[];const n=No(t);if(void 0===t)return s;if("object"!==n)return s=s.concat([new ri("fog",t,`object expected, ${n} found`)]),s;for(const e in t){const n=e.match(/^(.*)-transition$/);s=s.concat(n&&i[n[1]]&&i[n[1]].transition?ki({key:e,value:t[e],valueSpec:o.transition,style:r,styleSpec:o}):i[e]?ki({key:e,value:t[e],valueSpec:i[e],style:r,styleSpec:o}):[new ri(e,t[e],`unknown property "${e}"`)])}return s}const Ai={"*":()=>[],array:ii,boolean:function(e){const t=e.value,r=e.key,o=No(t);return"boolean"!==o?[new ri(r,t,`boolean expected, ${o} found`)]:[]},number:si,color:function(e){const t=e.key,r=e.value,o=No(r);return"string"!==o?[new ri(t,r,`color expected, ${o} found`)]:null===Et(r)?[new ri(t,r,`color expected, "${r}" found`)]:[]},enum:ci,filter:xi,function:ni,layer:Fi,object:oi,source:Li,light:Ii,terrain:Oi,fog:Pi,string:Bi,formatted:function(e){return 0===Bi(e).length?[]:ai(e)},resolvedImage:function(e){return 0===Bi(e).length?[]:ai(e)},projection:function(e){const t=e.value,r=e.styleSpec,o=r.projection,i=e.style;let s=[];const n=No(t);if("object"===n)for(const e in t)s=s.concat(ki({key:e,value:t[e],valueSpec:o[e],style:i,styleSpec:r}));else"string"!==n&&(s=s.concat([new ri("projection",t,`object or string expected, ${n} found`)]));return s}};function ki(e){const t=e.value,r=e.valueSpec,o=e.styleSpec;return r.expression&&jo(rt(t))?ni(e):r.expression&&Zo(ot(t))?ai(e):r.type&&Ai[r.type]?Ai[r.type](e):oi(tt({},e,{valueSpec:r.type?o[r.type]:r}))}function zi(e){const t=e.value,r=e.key,o=Bi(e);return o.length||(-1===t.indexOf("{fontstack}")&&o.push(new ri(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new ri(r,t,'"glyphs" url must include a "{range}" token'))),o}function Ni(e,t=et){return Gi(ki({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:zi,"*":()=>[]}}))}const ji=e=>Gi(Ti(e)),Ui=e=>Gi(wi(e));function Gi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function Wi(e,t){let r=!1;if(t&&t.length)for(const o of t)e.fire(new Ye(new Error(o.message))),r=!0;return r}var qi=Vi,$i=3;function Vi(e,t,r){var o=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(var s=0;s<this.d*this.d;s++){var n=i[$i+s],a=i[$i+s+1];o.push(n===a?null:i.subarray(n,a))}var l=i[$i+o.length+1];this.keys=i.subarray(i[$i+o.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)o.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}Vi.prototype.insert=function(e,t,r,o,i){this._forEachCell(t,r,o,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(i)},Vi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vi.prototype._insertCell=function(e,t,r,o,i,s){this.cells[i].push(s)},Vi.prototype.query=function(e,t,r,o,i){var s=this.min,n=this.max;if(e<=s&&t<=s&&n<=r&&n<=o&&!i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(e,t,r,o,this._queryCell,a,{},i),a},Vi.prototype._queryCell=function(e,t,r,o,i,s,n,a){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,p=0;p<l.length;p++){var d=l[p];if(void 0===n[d]){var h=4*d;(a?a(u[h+0],u[h+1],u[h+2],u[h+3]):e<=u[h+2]&&t<=u[h+3]&&r>=u[h+0]&&o>=u[h+1])?(n[d]=!0,s.push(c[d])):n[d]=!1}}},Vi.prototype._forEachCell=function(e,t,r,o,i,s,n,a){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),p=this._convertToCellCoord(o),d=l;d<=u;d++)for(var h=c;h<=p;h++){var g=this.d*h+d;if((!a||a(this._convertFromCellCoord(d),this._convertFromCellCoord(h),this._convertFromCellCoord(d+1),this._convertFromCellCoord(h+1)))&&i.call(this,e,t,r,o,g,s,n,a))return}},Vi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Vi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Vi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=$i+this.cells.length+1+1,r=0,o=0;o<this.cells.length;o++)r+=this.cells[o].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var s=t,n=0;n<e.length;n++){var a=e[n];i[$i+n]=s,i.set(a,s),s+=a.length}return i[$i+e.length]=s,i.set(this.keys,s),i[$i+e.length+1]=s+=this.keys.length,i.set(this.bboxes,s),s+=this.bboxes.length,i.buffer};var Hi=d(qi);const Ki={};function Zi(e,t,r={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Ki[t]={klass:e,omit:r.omit||[]}}Zi(Object,"Object"),Hi.serialize=function(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},Hi.deserialize=function(e){return new Hi(e.buffer)},Object.defineProperty(Hi,"name",{value:"Grid"}),Zi(Hi,"Grid"),Zi(Lt,"Color"),Zi(Error,"Error"),Zi(ce,"AJAXError"),Zi(Pt,"ResolvedImage"),Zi(ei,"StylePropertyFunction"),Zi(Ko,"StyleExpression",{omit:["_evaluator"]}),Zi(Yo,"ZoomDependentExpression"),Zi(Jo,"ZoomConstantExpression"),Zi(er,"CompoundExpression",{omit:["_evaluate"]});for(const e in Io)Ki[Io[e]._classRegistryKey]||Zi(Io[e],`Expression${e}`);function Xi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ji(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Yi(e,r){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Xi(e)||Ji(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return r&&r.push(t.buffer),t}if(e instanceof t.ImageData)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const o of e)t.push(Yi(o,r));return t}if("object"==typeof e){const t=e.constructor,o=t._classRegistryKey;if(!o)throw new Error(`can't serialize object of unregistered class ${o}`);const i=t.serialize?t.serialize(e,r):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Ki[o].omit.indexOf(t)>=0||(i[t]=Yi(e[t],r)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==o&&(i.$name=o),i}throw new Error("can't serialize object of type "+typeof e)}function Qi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Xi(e)||Ji(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Qi);if("object"==typeof e){const t=e.$name||"Object",{klass:r}=Ki[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const o=Object.create(r.prototype);for(const t of Object.keys(e))"$name"!==t&&(o[t]=Qi(e[t]));return o}throw new Error("can't deserialize object of type "+typeof e)}const es={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function ts(e){for(const t of e)if(is(t.charCodeAt(0)))return!0;return!1}function rs(e){for(const t of e)if(!os(t.charCodeAt(0)))return!1;return!0}function os(e){return!(es.Arabic(e)||es["Arabic Supplement"](e)||es["Arabic Extended-A"](e)||es["Arabic Presentation Forms-A"](e)||es["Arabic Presentation Forms-B"](e))}function is(e){return!(746!==e&&747!==e&&(e<4352||!(es["Bopomofo Extended"](e)||es.Bopomofo(e)||es["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||es["CJK Compatibility Ideographs"](e)||es["CJK Compatibility"](e)||es["CJK Radicals Supplement"](e)||es["CJK Strokes"](e)||!(!es["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||es["CJK Unified Ideographs Extension A"](e)||es["CJK Unified Ideographs"](e)||es["Enclosed CJK Letters and Months"](e)||es["Hangul Compatibility Jamo"](e)||es["Hangul Jamo Extended-A"](e)||es["Hangul Jamo Extended-B"](e)||es["Hangul Jamo"](e)||es["Hangul Syllables"](e)||es.Hiragana(e)||es["Ideographic Description Characters"](e)||es.Kanbun(e)||es["Kangxi Radicals"](e)||es["Katakana Phonetic Extensions"](e)||es.Katakana(e)&&12540!==e||!(!es["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!es["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||es["Unified Canadian Aboriginal Syllabics"](e)||es["Unified Canadian Aboriginal Syllabics Extended"](e)||es["Vertical Forms"](e)||es["Yijing Hexagram Symbols"](e)||es["Yi Syllables"](e)||es["Yi Radicals"](e))))}function ss(e){return!(is(e)||function(e){return!!(es["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||es["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||es["Letterlike Symbols"](e)||es["Number Forms"](e)||es["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||es["Control Pictures"](e)&&9251!==e||es["Optical Character Recognition"](e)||es["Enclosed Alphanumerics"](e)||es["Geometric Shapes"](e)||es["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||es["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||es["CJK Symbols and Punctuation"](e)||es.Katakana(e)||es["Private Use Area"](e)||es["CJK Compatibility Forms"](e)||es["Small Form Variants"](e)||es["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ns(e){return e>=1424&&e<=2303||es["Arabic Presentation Forms-A"](e)||es["Arabic Presentation Forms-B"](e)}function as(e,t){return!(!t&&ns(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||es.Khmer(e))}function ls(e){for(const t of e)if(ns(t.charCodeAt(0)))return!0;return!1}const cs="deferred",us="loading",ps="loaded";let ds=null,hs="unavailable",gs=null;const fs=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(hs="error"),ds&&ds(e)};function _s(){ms.fire(new Je("pluginStateChange",{pluginStatus:hs,pluginURL:gs}))}const ms=new Qe,ys=function(){return hs},bs=function(){if(hs!==cs||!gs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hs=us,_s(),gs&&de({url:gs},(e=>{e?fs(e):(hs=ps,_s())}))},Ss={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>hs===ps||null!=Ss.applyArabicShaping,isLoading:()=>hs===us,setState(e){hs=e.pluginStatus,gs=e.pluginURL},isParsed:()=>null!=Ss.applyArabicShaping&&null!=Ss.processBidirectionalText&&null!=Ss.processStyledBidirectionalText,getPluginURL:()=>gs};class Rs{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const r of e)if(!as(r.charCodeAt(0),t))return!1;return!0}(e,Ss.isLoaded())}}class vs{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(jo(e))return new ei(e,t);if(Zo(e)){const r=Qo(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"string"==typeof e&&"color"===t.type&&(r=Lt.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class xs{constructor(e){this.property=e,this.value=new vs(e,void 0)}transitioned(e,t){return new Ms(this.property,this.value,t,D({},e.transition,this.transition),e.now)}untransitioned(){return new Ms(this.property,this.value,null,{},0)}}class Es{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return G(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new xs(this._values[e].property)),this._values[e].value=new vs(this._values[e].property,null===t?void 0:G(t))}getTransition(e){return G(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new xs(this._values[e].property)),this._values[e].transition=G(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const o=this.getTransition(t);void 0!==o&&(e[`${t}-transition`]=o)}return e}transitioned(e,t){const r=new Ts(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].transitioned(e,t._values[o]);return r}untransitioned(){const e=new Ts(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ms{constructor(e,t,r,o,i){const s=o.delay||0,n=o.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+s,this.end=this.begin+n,e.specification.transition&&(o.delay||o.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const o=e.now||0,i=this.value.possiblyEvaluate(e,t,r),s=this.prior;if(s){if(o>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(o<this.begin)return s.possiblyEvaluate(e,t,r);{const n=(o-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(e,t,r),i,E(n))}}return i}}class Ts{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const o=new Bs(this._properties);for(const i of Object.keys(this._values))o._values[i]=this._values[i].possiblyEvaluate(e,t,r);return o}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ws{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return G(this._values[e].value)}setValue(e,t){this._values[e]=new vs(this._values[e].property,null===t?void 0:G(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const o=new Bs(this._properties);for(const i of Object.keys(this._values))o._values[i]=this._values[i].possiblyEvaluate(e,t,r);return o}}class Fs{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,o){return this.property.evaluate(this.value,this.parameters,e,t,r,o)}}class Bs{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Cs{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,r){const o=Dr[this.specification.type];return o?o(e,t,r):e}}class Ls{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,o){return new Fs(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,o)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Fs(this,{kind:"constant",value:void 0},e.parameters);const o=Dr[this.specification.type];return o?new Fs(this,{kind:"constant",value:o(e.value.value,t.value.value,r)},e.parameters):e}evaluate(e,t,r,o,i,s){return"constant"===e.kind?e.value:e.evaluate(t,r,o,i,s)}}class Ds{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,o){return!!e.expression.evaluate(t,null,{},r,o)}interpolate(){return!1}}class Is{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new Rs(0,{});for(const r in e){const o=e[r];o.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new vs(o,void 0),s=this.defaultTransitionablePropertyValues[r]=new xs(o);this.defaultTransitioningPropertyValues[r]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(t)}}}function Os(e,t){return 256*(e=w(Math.floor(e),0,255))+w(Math.floor(t),0,255)}Zi(Ls,"DataDrivenProperty"),Zi(Cs,"DataConstantProperty"),Zi(Ds,"ColorRampProperty");const Ps={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class As{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ks{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function zs(e,t=1){let r=0,o=0;return{members:e.map((e=>{const i=Ps[e.type].BYTES_PER_ELEMENT,s=r=Ns(r,Math.max(t,i)),n=e.components||1;return o=Math.max(o,i),r+=i*n,{name:e.name,type:e.type,components:n,offset:s}})),size:Ns(r,Math.max(o,t)),alignment:t}}function Ns(e,t){return Math.ceil(e/t)*t}class js extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const o=2*e;return this.int16[o+0]=t,this.int16[o+1]=r,e}}js.prototype.bytesPerElement=4,Zi(js,"StructArrayLayout2i4");class Us extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r)}emplace(e,t,r,o){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=o,e}}Us.prototype.bytesPerElement=6,Zi(Us,"StructArrayLayout3i6");class Gs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,o)}emplace(e,t,r,o,i){const s=4*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=o,this.int16[s+3]=i,e}}Gs.prototype.bytesPerElement=8,Zi(Gs,"StructArrayLayout4i8");class Ws extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,o,i,s,n)}emplace(e,t,r,o,i,s,n,a){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=o,this.uint8[c+5]=i,this.uint8[c+6]=s,this.uint8[c+7]=n,this.float32[u+2]=a,e}}Ws.prototype.bytesPerElement=12,Zi(Ws,"StructArrayLayout2i4ub1f12");class qs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,o)}emplace(e,t,r,o,i){const s=4*e;return this.float32[s+0]=t,this.float32[s+1]=r,this.float32[s+2]=o,this.float32[s+3]=i,e}}qs.prototype.bytesPerElement=16,Zi(qs,"StructArrayLayout4f16");class $s extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,o,i)}emplace(e,t,r,o,i,s){const n=6*e,a=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,this.uint16[n+2]=o,this.uint16[n+3]=i,this.float32[a+2]=s,e}}$s.prototype.bytesPerElement=12,Zi($s,"StructArrayLayout4ui1f12");class Vs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,o)}emplace(e,t,r,o,i){const s=4*e;return this.uint16[s+0]=t,this.uint16[s+1]=r,this.uint16[s+2]=o,this.uint16[s+3]=i,e}}Vs.prototype.bytesPerElement=8,Zi(Vs,"StructArrayLayout4ui8");class Hs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,o,i,s)}emplace(e,t,r,o,i,s,n){const a=6*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=o,this.int16[a+3]=i,this.int16[a+4]=s,this.int16[a+5]=n,e}}Hs.prototype.bytesPerElement=12,Zi(Hs,"StructArrayLayout6i12");class Ks extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n,a,l,c,u,p){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,o,i,s,n,a,l,c,u,p)}emplace(e,t,r,o,i,s,n,a,l,c,u,p,d){const h=12*e;return this.int16[h+0]=t,this.int16[h+1]=r,this.int16[h+2]=o,this.int16[h+3]=i,this.uint16[h+4]=s,this.uint16[h+5]=n,this.uint16[h+6]=a,this.uint16[h+7]=l,this.int16[h+8]=c,this.int16[h+9]=u,this.int16[h+10]=p,this.int16[h+11]=d,e}}Ks.prototype.bytesPerElement=24,Zi(Ks,"StructArrayLayout4i4ui4i24");class Zs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,o,i,s)}emplace(e,t,r,o,i,s,n){const a=10*e,l=5*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=o,this.float32[l+2]=i,this.float32[l+3]=s,this.float32[l+4]=n,e}}Zs.prototype.bytesPerElement=20,Zi(Zs,"StructArrayLayout3i3f20");class Xs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Xs.prototype.bytesPerElement=4,Zi(Xs,"StructArrayLayout1ul4");class Js extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n,a,l,c,u,p,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,o,i,s,n,a,l,c,u,p,d)}emplace(e,t,r,o,i,s,n,a,l,c,u,p,d,h){const g=20*e,f=10*e;return this.int16[g+0]=t,this.int16[g+1]=r,this.int16[g+2]=o,this.int16[g+3]=i,this.int16[g+4]=s,this.float32[f+3]=n,this.float32[f+4]=a,this.float32[f+5]=l,this.float32[f+6]=c,this.int16[g+14]=u,this.uint32[f+8]=p,this.uint16[g+18]=d,this.uint16[g+19]=h,e}}Js.prototype.bytesPerElement=40,Zi(Js,"StructArrayLayout5i4f1i1ul2ui40");class Ys extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,o,i,s,n)}emplace(e,t,r,o,i,s,n,a){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=o,this.int16[l+4]=i,this.int16[l+5]=s,this.int16[l+6]=n,this.int16[l+7]=a,e}}Ys.prototype.bytesPerElement=16,Zi(Ys,"StructArrayLayout3i2i2i16");class Qs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,o,i)}emplace(e,t,r,o,i,s){const n=4*e,a=8*e;return this.float32[n+0]=t,this.float32[n+1]=r,this.float32[n+2]=o,this.int16[a+6]=i,this.int16[a+7]=s,e}}Qs.prototype.bytesPerElement=16,Zi(Qs,"StructArrayLayout2f1f2i16");class en extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,o)}emplace(e,t,r,o,i){const s=12*e,n=3*e;return this.uint8[s+0]=t,this.uint8[s+1]=r,this.float32[n+1]=o,this.float32[n+2]=i,e}}en.prototype.bytesPerElement=12,Zi(en,"StructArrayLayout2ub2f12");class tn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r)}emplace(e,t,r,o){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=o,e}}tn.prototype.bytesPerElement=12,Zi(tn,"StructArrayLayout3f12");class rn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r)}emplace(e,t,r,o){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=o,e}}rn.prototype.bytesPerElement=6,Zi(rn,"StructArrayLayout3ui6");class on extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S){const R=this.length;return this.resize(R+1),this.emplace(R,e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S)}emplace(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S,R){const v=30*e,x=15*e,E=60*e;return this.int16[v+0]=t,this.int16[v+1]=r,this.int16[v+2]=o,this.float32[x+2]=i,this.float32[x+3]=s,this.uint16[v+8]=n,this.uint16[v+9]=a,this.uint32[x+5]=l,this.uint32[x+6]=c,this.uint32[x+7]=u,this.uint16[v+16]=p,this.uint16[v+17]=d,this.uint16[v+18]=h,this.float32[x+10]=g,this.float32[x+11]=f,this.uint8[E+48]=_,this.uint8[E+49]=m,this.uint8[E+50]=y,this.uint32[x+13]=b,this.int16[v+28]=S,this.uint8[E+58]=R,e}}on.prototype.bytesPerElement=60,Zi(on,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class sn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S,R,v,x,E,M,T,w,F,B){const C=this.length;return this.resize(C+1),this.emplace(C,e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S,R,v,x,E,M,T,w,F,B)}emplace(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S,R,v,x,E,M,T,w,F,B,C){const L=38*e,D=19*e;return this.int16[L+0]=t,this.int16[L+1]=r,this.int16[L+2]=o,this.float32[D+2]=i,this.float32[D+3]=s,this.int16[L+8]=n,this.int16[L+9]=a,this.int16[L+10]=l,this.int16[L+11]=c,this.int16[L+12]=u,this.int16[L+13]=p,this.uint16[L+14]=d,this.uint16[L+15]=h,this.uint16[L+16]=g,this.uint16[L+17]=f,this.uint16[L+18]=_,this.uint16[L+19]=m,this.uint16[L+20]=y,this.uint16[L+21]=b,this.uint16[L+22]=S,this.uint16[L+23]=R,this.uint16[L+24]=v,this.uint16[L+25]=x,this.uint16[L+26]=E,this.uint16[L+27]=M,this.uint16[L+28]=T,this.uint32[D+15]=w,this.float32[D+16]=F,this.float32[D+17]=B,this.float32[D+18]=C,e}}sn.prototype.bytesPerElement=76,Zi(sn,"StructArrayLayout3i2f6i15ui1ul3f76");class nn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}nn.prototype.bytesPerElement=4,Zi(nn,"StructArrayLayout1f4");class an extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,o,i){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,o,i)}emplace(e,t,r,o,i,s){const n=5*e;return this.float32[n+0]=t,this.float32[n+1]=r,this.float32[n+2]=o,this.float32[n+3]=i,this.float32[n+4]=s,e}}an.prototype.bytesPerElement=20,Zi(an,"StructArrayLayout5f20");class ln extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,o)}emplace(e,t,r,o,i){const s=6*e;return this.uint32[3*e+0]=t,this.uint16[s+2]=r,this.uint16[s+3]=o,this.uint16[s+4]=i,e}}ln.prototype.bytesPerElement=12,Zi(ln,"StructArrayLayout1ul3ui12");class cn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const o=2*e;return this.uint16[o+0]=t,this.uint16[o+1]=r,e}}cn.prototype.bytesPerElement=4,Zi(cn,"StructArrayLayout2ui4");class un extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}un.prototype.bytesPerElement=2,Zi(un,"StructArrayLayout1ui2");class pn extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const o=2*e;return this.float32[o+0]=t,this.float32[o+1]=r,e}}pn.prototype.bytesPerElement=8,Zi(pn,"StructArrayLayout2f8");class dn extends As{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}dn.prototype.size=40;class hn extends Js{get(e){return new dn(this,e)}}Zi(hn,"CollisionBoxArray");class gn extends As{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}gn.prototype.size=60;class fn extends on{get(e){return new gn(this,e)}}Zi(fn,"PlacedSymbolArray");class _n extends As{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}_n.prototype.size=76;class mn extends sn{get(e){return new _n(this,e)}}Zi(mn,"SymbolInstanceArray");class yn extends nn{getoffsetX(e){return this.float32[1*e+0]}}Zi(yn,"GlyphOffsetArray");class bn extends js{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Zi(bn,"SymbolLineVertexArray");class Sn extends As{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Sn.prototype.size=12;class Rn extends ln{get(e){return new Sn(this,e)}}Zi(Rn,"FeatureIndexArray");class vn extends cn{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Zi(vn,"FillExtrusionCentroidArray");const xn=zs([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),En=zs([{name:"a_dash",components:4,type:"Uint16"}]);var Mn={exports:{}},Tn={exports:{}};Tn.exports=function(e,t){var r,o,i,s,n,a,l,c;for(o=e.length-(r=3&e.length),i=t,n=3432918353,a=461845907,c=0;c<o;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(s=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*n+(((l>>>16)*n&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*n+(((l>>>16)*n&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var wn=Tn.exports,Fn={exports:{}};Fn.exports=function(e,t){for(var r,o=e.length,i=t^o,s=0;o>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),o-=4,++s;switch(o){case 3:i^=(255&e.charCodeAt(s+2))<<16;case 2:i^=(255&e.charCodeAt(s+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(s)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Bn=wn,Cn=Fn.exports;Mn.exports=Bn,Mn.exports.murmur3=Bn,Mn.exports.murmur2=Cn;var Ln=d(Mn.exports);class Dn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,o){this.ids.push(In(e)),this.positions.push(t,r,o)}getPositions(e){const t=In(e);let r=0,o=this.ids.length-1;for(;r<o;){const e=r+o>>1;this.ids[e]>=t?o=e:r=e+1}const i=[];for(;this.ids[r]===t;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(e,t){const r=new Float64Array(e.ids),o=new Uint32Array(e.positions);return On(r,o,0,r.length-1),t&&t.push(r.buffer,o.buffer),{ids:r,positions:o}}static deserialize(e){const t=new Dn;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function In(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Ln(String(e))}function On(e,t,r,o){for(;r<o;){const i=e[r+o>>1];let s=r-1,n=o+1;for(;;){do{s++}while(e[s]<i);do{n--}while(e[n]>i);if(s>=n)break;Pn(e,s,n),Pn(t,3*s,3*n),Pn(t,3*s+1,3*n+1),Pn(t,3*s+2,3*n+2)}n-r<o-n?(On(e,t,r,n),r=n+1):(On(e,t,n+1,o),o=n)}}function Pn(e,t,r){const o=e[t];e[t]=e[r],e[r]=o}Zi(Dn,"FeaturePositionMap");class An{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class kn extends An{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class zn extends An{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class Nn extends An{constructor(e){super(e),this.current=Lt.transparent}set(e,t,r){this.fetchUniformLocation(e,t)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}const jn=new Float32Array(16),Un=new Float32Array(9),Gn=new Float32Array(4);function Wn(e){return[Os(255*e.r,255*e.g),Os(255*e.b,255*e.a)]}class qn{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r,o,i){t.set(e,i,o.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new Nn(e):new kn(e)}}class $n{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,r,o,i){const s="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;s&&t.set(e,i,s)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new zn(e):new kn(e)}}class Vn{constructor(e,t,r,o){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,r,o,i,s){const n=this.paintVertexArray.length,a=this.expression.evaluate(new Rs(0),t,{},i,o,s);this.paintVertexArray.resize(e),this._setPaintValue(n,e,a)}updatePaintArray(e,t,r,o,i){const s=this.expression.evaluate({zoom:0},r,o,void 0,i);this._setPaintValue(e,t,s)}_setPaintValue(e,t,r){if("color"===this.type){const o=Wn(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,o[0],o[1])}else{for(let o=e;o<t;o++)this.paintVertexArray.emplace(o,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hn{constructor(e,t,r,o,i,s){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=o,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new s}populatePaintArray(e,t,r,o,i,s){const n=this.expression.evaluate(new Rs(this.zoom),t,{},i,o,s),a=this.expression.evaluate(new Rs(this.zoom+1),t,{},i,o,s),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,n,a)}updatePaintArray(e,t,r,o,i){const s=this.expression.evaluate({zoom:this.zoom},r,o,void 0,i),n=this.expression.evaluate({zoom:this.zoom+1},r,o,void 0,i);this._setPaintValue(e,t,s,n)}_setPaintValue(e,t,r,o){if("color"===this.type){const i=Wn(r),s=Wn(o);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1],s[0],s[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r,o);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,r,o,i){const s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,n=w(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(e,i,n)}getBinding(e,t){return new kn(e)}}class Kn{constructor(e,t,r,o,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===r?En:xn).members;for(let e=0;e<t.length;++e);this.paintVertexArray=new o}populatePaintArray(e,t,r){const o=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(o,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,o,i,s){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],s)}_setPaintValues(e,t,r,o){if(!o||!r)return;const i=o[r];if(!i)return;const{tl:s,br:n,pixelRatio:a}=i;for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,s[0],s[1],n[0],n[1],a)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zn{constructor(e,t,r=(()=>!0)){this.binders={},this._buffers=[];const o=[];for(const i in e.paint._values){if(!r(i))continue;const s=e.paint.get(i);if(!(s instanceof Fs&&Ao(s.property.specification)))continue;const n=Yn(i,e.type),a=s.value,l=s.property.specification.type,c=!!s.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),p="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==a.kind||p)if("source"===a.kind||p||u){const t=ta(i,l,"source");this.binders[i]=u?new Kn(a,n,l,t,e.id):new Vn(a,n,l,t),o.push(`/a_${i}`)}else{const e=ta(i,l,"composite");this.binders[i]=new Hn(a,n,l,c,t,e),o.push(`/z_${i}`)}else this.binders[i]=u?new $n(a.value,n):new qn(a.value,n,l),o.push(`/u_${i}`)}this.cacheKey=o.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Vn||t instanceof Hn?t.maxValue:0}populatePaintArrays(e,t,r,o,i,s){for(const n in this.binders){const a=this.binders[n];(a instanceof Vn||a instanceof Hn||a instanceof Kn)&&a.populatePaintArray(e,t,r,o,i,s)}}setConstantPatternPositions(e){for(const t in this.binders){const r=this.binders[t];r instanceof $n&&r.setConstantPatternPositions(e)}}updatePaintArrays(e,t,r,o,i,s){let n=!1;for(const a in e){const l=t.getPositions(a);for(const t of l){const l=r.feature(t.index);for(const r in this.binders){const c=this.binders[r];if((c instanceof Vn||c instanceof Hn||c instanceof Kn)&&!0===c.expression.isStateDependent){const u=o.paint.get(r);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[a],i,s),n=!0}}}}return n}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof qn||r instanceof $n)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof Vn||r instanceof Hn||r instanceof Kn)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof qn||r instanceof $n||r instanceof Hn)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof qn||o instanceof $n||o instanceof Hn)for(const i of o.uniformNames)t.push({name:i,property:r,binding:o.getBinding(e,i)})}return t}setUniforms(e,t,r,o,i){for(const{name:t,property:s,binding:n}of r)this.binders[s].setUniform(e,n,i,o.get(s),t)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Vn||t instanceof Hn||t instanceof Kn)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof Vn||r instanceof Hn||r instanceof Kn)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Vn||t instanceof Hn||t instanceof Kn)&&t.destroy()}}}class Xn{constructor(e,t,r=(()=>!0)){this.programConfigurations={};for(const o of e)this.programConfigurations[o.id]=new Zn(o,t,r);this.needsUpload=!1,this._featureMap=new Dn,this._bufferOffset=0}populatePaintArrays(e,t,r,o,i,s,n){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,o,i,s,n);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,o,i){for(const s of r)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,o,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Jn={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Yn(e,t){return Jn[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Qn={"line-pattern":{source:$s,composite:$s},"fill-pattern":{source:$s,composite:$s},"fill-extrusion-pattern":{source:$s,composite:$s},"line-dasharray":{source:Vs,composite:Vs}},ea={color:{source:pn,composite:qs},number:{source:nn,composite:pn}};function ta(e,t,r){const o=Qn[e];return o&&o[r]||ea[t][r]}Zi(qn,"ConstantBinder"),Zi($n,"PatternConstantBinder"),Zi(Vn,"SourceExpressionBinder"),Zi(Kn,"PatternCompositeBinder"),Zi(Hn,"CompositeExpressionBinder"),Zi(Zn,"ProgramConfiguration",{omit:["_buffers"]}),Zi(Xn,"ProgramConfigurationSet");const ra="-transition";class oa extends Qe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new ws(t.layout)),t.paint)){this._transitionablePaint=new Es(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bs(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(Ui,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return N(e,ra)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(ji,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(N(e,ra))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],o=r.value.isDataDriven(),i=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const s=this._transitionablePaint._values[e].value,n=s.isDataDriven(),a=N(e,"pattern")||"line-dasharray"===e;return n||o||a||this._handleOverridablePaintPropertyUpdate(e,i,s)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),U(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,o,i={}){return(!i||!1!==i.validate)&&Wi(this,e.call(Ni,{key:t,layerType:this.type,objectKey:r,value:o,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Fs&&Ao(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=pi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ia=zs([{name:"a_pos",components:2,type:"Int16"}],4),sa=zs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class na{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,o){let i=this.segments[this.segments.length-1];return e>na.MAX_VERTEX_ARRAY_LENGTH&&q(`Max vertices per segment is ${na.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>na.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==o)&&(i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==o&&(i.sortKey=o),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,o){return new na([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:o,vaos:{},sortKey:0}])}}na.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Zi(na,"SegmentVector");var aa=8192;class la{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}setSouthWest(e){return this._sw=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}extend(e){const t=this._sw,r=this._ne;let o,i;if(e instanceof Gl)o=e,i=e;else{if(!(e instanceof la))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(la.convert(e)):this.extend(Gl.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Gl.convert(e)):this;if(o=e._sw,i=e._ne,!o||!i)return this}return t||r?(t.lng=Math.min(o.lng,t.lng),t.lat=Math.min(o.lat,t.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Gl(o.lng,o.lat),this._ne=new Gl(i.lng,i.lat)),this}getCenter(){return new Gl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gl(this.getWest(),this.getNorth())}getSouthEast(){return new Gl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=Gl.convert(e);let o=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&o}static convert(e){return!e||e instanceof la?e:new la(e)}}var ca=1e-6,ua="undefined"!=typeof Float32Array?Float32Array:Array;function pa(){var e=new ua(9);return ua!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function da(e,t,r){var o=t[0],i=t[1],s=t[2],n=t[3],a=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=r[0],h=r[1],g=r[2],f=r[3],_=r[4],m=r[5],y=r[6],b=r[7],S=r[8];return e[0]=d*o+h*n+g*c,e[1]=d*i+h*a+g*u,e[2]=d*s+h*l+g*p,e[3]=f*o+_*n+m*c,e[4]=f*i+_*a+m*u,e[5]=f*s+_*l+m*p,e[6]=y*o+b*n+S*c,e[7]=y*i+b*a+S*u,e[8]=y*s+b*l+S*p,e}function ha(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ga(e,t){var r=t[0],o=t[1],i=t[2],s=t[3],n=t[4],a=t[5],l=t[6],c=t[7],u=t[8],p=t[9],d=t[10],h=t[11],g=t[12],f=t[13],_=t[14],m=t[15],y=r*a-o*n,b=r*l-i*n,S=r*c-s*n,R=o*l-i*a,v=o*c-s*a,x=i*c-s*l,E=u*f-p*g,M=u*_-d*g,T=u*m-h*g,w=p*_-d*f,F=p*m-h*f,B=d*m-h*_,C=y*B-b*F+S*w+R*T-v*M+x*E;return C?(e[0]=(a*B-l*F+c*w)*(C=1/C),e[1]=(i*F-o*B-s*w)*C,e[2]=(f*x-_*v+m*R)*C,e[3]=(d*v-p*x-h*R)*C,e[4]=(l*T-n*B-c*M)*C,e[5]=(r*B-i*T+s*M)*C,e[6]=(_*S-g*x-m*b)*C,e[7]=(u*x-d*S+h*b)*C,e[8]=(n*F-a*T+c*E)*C,e[9]=(o*T-r*F-s*E)*C,e[10]=(g*v-f*S+m*y)*C,e[11]=(p*S-u*v-h*y)*C,e[12]=(a*M-n*w-l*E)*C,e[13]=(r*w-o*M+i*E)*C,e[14]=(f*b-g*R-_*y)*C,e[15]=(u*R-p*b+d*y)*C,e):null}function fa(e,t,r){var o=t[0],i=t[1],s=t[2],n=t[3],a=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=t[9],h=t[10],g=t[11],f=t[12],_=t[13],m=t[14],y=t[15],b=r[0],S=r[1],R=r[2],v=r[3];return e[0]=b*o+S*a+R*p+v*f,e[1]=b*i+S*l+R*d+v*_,e[2]=b*s+S*c+R*h+v*m,e[3]=b*n+S*u+R*g+v*y,e[4]=(b=r[4])*o+(S=r[5])*a+(R=r[6])*p+(v=r[7])*f,e[5]=b*i+S*l+R*d+v*_,e[6]=b*s+S*c+R*h+v*m,e[7]=b*n+S*u+R*g+v*y,e[8]=(b=r[8])*o+(S=r[9])*a+(R=r[10])*p+(v=r[11])*f,e[9]=b*i+S*l+R*d+v*_,e[10]=b*s+S*c+R*h+v*m,e[11]=b*n+S*u+R*g+v*y,e[12]=(b=r[12])*o+(S=r[13])*a+(R=r[14])*p+(v=r[15])*f,e[13]=b*i+S*l+R*d+v*_,e[14]=b*s+S*c+R*h+v*m,e[15]=b*n+S*u+R*g+v*y,e}function _a(e,t,r){var o,i,s,n,a,l,c,u,p,d,h,g,f=r[0],_=r[1],m=r[2];return t===e?(e[12]=t[0]*f+t[4]*_+t[8]*m+t[12],e[13]=t[1]*f+t[5]*_+t[9]*m+t[13],e[14]=t[2]*f+t[6]*_+t[10]*m+t[14],e[15]=t[3]*f+t[7]*_+t[11]*m+t[15]):(i=t[1],s=t[2],n=t[3],a=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=t[9],h=t[10],g=t[11],e[0]=o=t[0],e[1]=i,e[2]=s,e[3]=n,e[4]=a,e[5]=l,e[6]=c,e[7]=u,e[8]=p,e[9]=d,e[10]=h,e[11]=g,e[12]=o*f+a*_+p*m+t[12],e[13]=i*f+l*_+d*m+t[13],e[14]=s*f+c*_+h*m+t[14],e[15]=n*f+u*_+g*m+t[15]),e}function ma(e,t,r){var o=r[0],i=r[1],s=r[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ya(e,t,r){var o=Math.sin(r),i=Math.cos(r),s=t[4],n=t[5],a=t[6],l=t[7],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*o,e[5]=n*i+u*o,e[6]=a*i+p*o,e[7]=l*i+d*o,e[8]=c*i-s*o,e[9]=u*i-n*o,e[10]=p*i-a*o,e[11]=d*i-l*o,e}function ba(e,t,r){var o=Math.sin(r),i=Math.cos(r),s=t[0],n=t[1],a=t[2],l=t[3],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*o,e[1]=n*i-u*o,e[2]=a*i-p*o,e[3]=l*i-d*o,e[8]=s*o+c*i,e[9]=n*o+u*i,e[10]=a*o+p*i,e[11]=l*o+d*i,e}function Sa(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ra(e,t,r){var o,i,s,n=r[0],a=r[1],l=r[2],c=Math.hypot(n,a,l);return c<ca?null:(n*=c=1/c,a*=c,l*=c,o=Math.sin(t),i=Math.cos(t),e[0]=n*n*(s=1-i)+i,e[1]=a*n*s+l*o,e[2]=l*n*s-a*o,e[3]=0,e[4]=n*a*s-l*o,e[5]=a*a*s+i,e[6]=l*a*s+n*o,e[7]=0,e[8]=n*l*s+a*o,e[9]=a*l*s-n*o,e[10]=l*l*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var va=fa;function xa(){var e=new ua(3);return ua!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ea(e){var t=new ua(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ma(e){return Math.hypot(e[0],e[1],e[2])}function Ta(e,t,r){var o=new ua(3);return o[0]=e,o[1]=t,o[2]=r,o}function wa(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Fa(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ba(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Ca(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function La(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Da(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Ia(e,t,r,o){return e[0]=t[0]+r[0]*o,e[1]=t[1]+r[1]*o,e[2]=t[2]+r[2]*o,e}function Oa(e,t){var r=t[0],o=t[1],i=t[2],s=r*r+o*o+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Pa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Aa(e,t,r){var o=t[0],i=t[1],s=t[2],n=r[0],a=r[1],l=r[2];return e[0]=i*l-s*a,e[1]=s*n-o*l,e[2]=o*a-i*n,e}function ka(e,t,r){var o=t[0],i=t[1],s=t[2],n=r[3]*o+r[7]*i+r[11]*s+r[15];return e[0]=(r[0]*o+r[4]*i+r[8]*s+r[12])/(n=n||1),e[1]=(r[1]*o+r[5]*i+r[9]*s+r[13])/n,e[2]=(r[2]*o+r[6]*i+r[10]*s+r[14])/n,e}function za(e,t,r){var o=r[0],i=r[1],s=r[2],n=t[0],a=t[1],l=t[2],c=i*l-s*a,u=s*n-o*l,p=o*a-i*n,d=i*p-s*u,h=s*c-o*p,g=o*u-i*c,f=2*r[3];return u*=f,p*=f,h*=2,g*=2,e[0]=n+(c*=f)+(d*=2),e[1]=a+u+h,e[2]=l+p+g,e}var Na,ja=Fa,Ua=Ba,Ga=Ma;function Wa(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function qa(e,t){var r=t[0],o=t[1],i=t[2],s=t[3],n=r*r+o*o+i*i+s*s;return n>0&&(n=1/Math.sqrt(n)),e[0]=r*n,e[1]=o*n,e[2]=i*n,e[3]=s*n,e}function $a(e,t,r){var o=t[0],i=t[1],s=t[2],n=t[3];return e[0]=r[0]*o+r[4]*i+r[8]*s+r[12]*n,e[1]=r[1]*o+r[5]*i+r[9]*s+r[13]*n,e[2]=r[2]*o+r[6]*i+r[10]*s+r[14]*n,e[3]=r[3]*o+r[7]*i+r[11]*s+r[15]*n,e}function Va(){var e=new ua(4);return ua!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ha(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ka(e,t,r){r*=.5;var o=t[0],i=t[1],s=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l+n*a,e[1]=i*l+s*a,e[2]=s*l-i*a,e[3]=n*l-o*a,e}function Za(e,t,r){r*=.5;var o=t[0],i=t[1],s=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l-s*a,e[1]=i*l+n*a,e[2]=s*l+o*a,e[3]=n*l-i*a,e}xa(),Na=new ua(4),ua!=Float32Array&&(Na[0]=0,Na[1]=0,Na[2]=0,Na[3]=0);var Xa=qa;xa(),Ta(1,0,0),Ta(0,1,0),Va(),Va(),pa();const Ja=zs([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ya}=Ja,Qa=zs([{name:"a_pos_3",components:3,type:"Int16"}]);var el=zs([{name:"a_pos",type:"Int16",components:2}]);class tl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,r){const o=Pa(t,this.dir);if(Math.abs(o)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/o;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,r){if(function(e,t){var r=e[0],o=e[1],i=e[2],s=t[0],n=t[1],a=t[2];return Math.abs(r-s)<=ca*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-n)<=ca*Math.max(1,Math.abs(o),Math.abs(n))&&Math.abs(i-a)<=ca*Math.max(1,Math.abs(i),Math.abs(a))}(this.pos,e)||0===t)return r[0]=r[1]=r[2]=0,!1;const[o,i,s]=this.dir,n=this.pos[0]-e[0],a=this.pos[1]-e[1],l=this.pos[2]-e[2],c=o*o+i*i+s*s,u=2*(n*o+a*i+l*s),p=u*u-4*c*(n*n+a*a+l*l-t*t);if(p<0){const e=Math.max(-u/2,0),c=n+o*e,p=a+i*e,d=l+s*e,h=Math.hypot(c,p,d);return r[0]=c*t/h,r[1]=p*t/h,r[2]=d*t/h,!1}{const e=(-u-Math.sqrt(p))/(2*c);if(e<0){const e=Math.hypot(n,a,l);return r[0]=n*t/e,r[1]=a*t/e,r[2]=l*t/e,!1}return r[0]=n+o*e,r[1]=a+i*e,r[2]=l+s*e,!0}}}class rl{constructor(e,t,r,o,i){this.TL=e,this.TR=t,this.BR=r,this.BL=o,this.horizon=i}static fromInvProjectionMatrix(e,t,r){const o=[-1,1,1],i=[1,1,1],s=[1,-1,1],n=[-1,-1,1],a=ka(o,o,e),l=ka(i,i,e),c=ka(s,s,e),u=ka(n,n,e);return new rl(a,l,c,u,t/r)}}class ol{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,r,o){const i=Math.pow(2,r),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const s=$a([],r,e),n=1/s[3]/t*i;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(s,s,[n,n,o?1/s[3]:n,n])})),n=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Oa([],Aa([],ja([],s[e[0]],s[e[1]]),ja([],s[e[2]],s[e[1]]))),r=-Pa(t,s[e[1]]);return t.concat(r)}));return new ol(s,n)}}class il{static fromPoints(e){const t=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const o of e)Ca(t,t,o),La(r,r,o);return new il(t,r)}static applyTransform(e,t){const r=e.getCorners();for(let e=0;e<r.length;++e)ka(r[e],r[e],t);return il.fromPoints(r)}constructor(e,t){this.min=e,this.max=t,this.center=Da([],wa([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],r=Ea(this.min),o=Ea(this.max);for(let e=0;e<t.length;e++)r[e]=t[e]?this.min[e]:this.center[e],o[e]=t[e]?this.center[e]:this.max[e];return o[2]=this.max[2],new il(r,o)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let r=!0;for(let o=0;o<e.planes.length;o++){const i=e.planes[o];let s=0;for(let e=0;e<t.length;e++)s+=Pa(i,t[e])+i[3]>=0;if(0===s)return 0;s!==t.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let r=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const s=e.points[i][t]-this.min[t];r=Math.min(r,s),o=Math.max(o,s)}if(o<0||r>this.max[t]-this.min[t])return 0}return 1}}const sl=5,nl=6,al=aa/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],pl=-al,dl=al,hl=[new il([pl,pl,pl],[dl,dl,dl]),new il([pl,pl,pl],[0,0,dl]),new il([0,pl,pl],[dl,0,dl]),new il([pl,0,pl],[0,dl,dl]),new il([0,0,pl],[dl,dl,dl])];function gl(e){return e*al/Nl}function fl(e,t,r,o=!0){const i=Da([],e._camera.position,e.worldSize),s=[t,r,1,1];$a(s,s,e.pixelMatrixInverse),Wa(s,s,1/s[3]);const n=Oa([],ja([],s,i)),a=e.globeMatrix,l=[a[12],a[13],a[14]],c=ja([],l,i),u=Ma(c),p=Oa([],c),d=e.worldSize/(2*Math.PI),h=Pa(p,n),g=Math.asin(d/u);if(g<Math.acos(h)){if(!o)return null;const e=[],t=[];Da(e,n,u/h),Oa(t,ja(t,e,c)),Oa(n,wa(n,c,Da(n,t,Math.tan(g)*u)))}const f=[];new tl(i,n).closestPointOnSphere(l,d,f);const _=Oa([],Y(a,0)),m=Oa([],Y(a,1)),y=Oa([],Y(a,2)),b=Pa(_,f),S=Pa(m,f),R=Pa(y,f),x=v(Math.asin(-S/d));let E=v(Math.atan2(b,R));E=e.center.lng+function(e,t){const r=(t-e+180)%360-180;return r<-180?r+360:r}(e.center.lng,E);const M=ql(E),T=w($l(x),0,1);return new Yl(M,T)}class _l{constructor(e,t,r){this.a=ja([],e,r),this.b=ja([],t,r),this.center=r;const o=Oa([],this.a),i=Oa([],this.b);this.angle=Math.acos(Pa(o,i))}}function ml(e,t){if(0===e.angle)return null;let r;return r=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),r<0||r>1?null:function(e,t,r,o){const i=Math.sin(r);return e*(Math.sin((1-o)*r)/i)+t*(Math.sin(o*r)/i)}(e.a[t],e.b[t],e.angle,w(r,0,1))+e.center[t]}function yl(e){if(e.z<=1)return hl[e.z+2*e.y+e.x];const t=El(xl(e));return il.fromPoints(t)}function bl(e,t,r){return Da(e,e,1-r),Ia(e,e,t,r)}function Sl(e,t){const r=Il(t.zoom);if(0===r)return yl(e);const o=xl(e),i=El(o),s=ql(o.getWest())*t.worldSize,n=ql(o.getEast())*t.worldSize,a=$l(o.getNorth())*t.worldSize,l=$l(o.getSouth())*t.worldSize,c=[s,a,0],u=[n,a,0],p=[s,l,0],d=[n,l,0],h=ga([],t.globeMatrix);return ka(c,c,h),ka(u,u,h),ka(p,p,h),ka(d,d,h),i[0]=bl(i[0],p,r),i[1]=bl(i[1],d,r),i[2]=bl(i[2],u,r),i[3]=bl(i[3],c,r),il.fromPoints(i)}function Rl(e,t,r){for(const o of e)ka(o,o,t),Da(o,o,r)}function vl(e,t,r){const o=t/e.worldSize,i=e.globeMatrix;if(r.z<=1){const e=yl(r).getCorners();return Rl(e,i,o),il.fromPoints(e)}const s=xl(r),n=El(s);Rl(n,i,o);const a=Number.MAX_VALUE,l=[-a,-a,-a],c=[a,a,a];if(s.contains(e.center)){for(const e of n)Ca(c,c,e),La(l,l,e);l[2]=0;const t=e.point,r=[t.x*o,t.y*o,0];return Ca(c,c,r),La(l,l,r),new il(c,l)}const u=[i[12]*o,i[13]*o,i[14]*o],p=s.getCenter(),d=w(e.center.lat,-Xl,Xl),h=w(p.lat,-Xl,Xl),g=ql(e.center.lng),f=$l(d);let _=g-ql(p.lng);const m=f-$l(h);_>.5?_-=1:_<-.5&&(_+=1);let y=0;Math.abs(_)>Math.abs(m)?y=_>=0?1:3:(y=m>=0?0:2,Ia(u,u,[i[4]*o,i[5]*o,i[6]*o],-Math.sin(R(m>=0?s.getSouth():s.getNorth()))*al));const b=n[y],S=n[(y+1)%4],v=new _l(b,S,u),x=[ml(v,0)||b[0],ml(v,1)||b[1],ml(v,2)||b[2]],E=Il(e.zoom);if(E>0){const o=function({x:e,y:t,z:r},o,i,s,n){const a=1/(1<<r);let l=e*a,c=l+a,u=t*a,p=u+a,d=0;const h=(l+c)/2-s;return h>.5?d=-1:h<-.5&&(d=1),l=((l+d)*o-(s*=o))*i+s,c=((c+d)*o-s)*i+s,u=(u*o-(n*=o))*i+n,p=(p*o-n)*i+n,[[l,p,0],[c,p,0],[c,u,0],[l,u,0]]}(r,t,e._pixelsPerMercatorPixel,g,f);for(let e=0;e<n.length;e++)bl(n[e],o[e],E);const i=wa([],o[y],o[(y+1)%4]);Da(i,i,.5),bl(x,i,E)}for(const e of n)Ca(c,c,e),La(l,l,e);return c[2]=Math.min(b[2],S[2]),Ca(c,c,x),La(l,l,x),new il(c,l)}function xl({x:e,y:t,z:r}){const o=1/(1<<r),i=new Gl(Hl(e*o),Kl((t+1)*o)),s=new Gl(Hl((e+1)*o),Kl(t*o));return new la(i,s)}function El(e){const t=R(e.getNorth()),r=R(e.getSouth()),o=Math.cos(t),i=Math.cos(r),s=Math.sin(t),n=Math.sin(r),a=e.getWest(),l=e.getEast();return[Ml(i,n,a),Ml(i,n,l),Ml(o,s,l),Ml(o,s,a)]}function Ml(e,t,r,o=al){return r=R(r),[e*Math.sin(r)*o,-t*o,e*Math.cos(r)*o]}function Tl(e,t,r){return Ml(Math.cos(R(e)),Math.sin(R(e)),t,r)}function wl(e,t,r,o){const i=1<<r.z,s=(e/aa+r.x)/i;return Tl(Kl((t/aa+r.y)/i),Hl(s),o)}function Fl({min:e,max:t}){return ll/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Bl=new Float64Array(16);function Cl(e){const t=Fl(e),r=Sa(Bl,[t,t,t]);return _a(r,r,((o=[])[0]=-(i=e.min)[0],o[1]=-i[1],o[2]=-i[2],o));var o,i}function Ll(e){const t=(o=e.min,(r=Bl)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=o[0],r[13]=o[1],r[14]=o[2],r[15]=1,r);var r,o;const i=1/Fl(e);return ma(t,t,[i,i,i])}function Dl(e,t,r,o,i){const s=function(e){const t=aa/(2*Math.PI);return e/(2*Math.PI)/t}(r),n=[e,t,-r/(2*Math.PI)],a=ha(new Float64Array(16));return _a(a,a,n),ma(a,a,[s,s,s]),ya(a,a,R(-i)),ba(a,a,R(-o)),a}function Il(e){return F(sl,nl,e)}function Ol(e,t){const r=Tl(t.lat,t.lng),o=function(e){const t=Tl(e._center.lat,e._center.lng);let r=Aa([],Ta(0,1,0),t);const o=Ra([],-e.angle,t);r=ka(r,r,o),Ra(o,-e._pitch,r);const i=Oa([],t);return Da(i,i,gl(e.cameraToCenterDistance/e.pixelsPerMeter)),ka(i,i,o),wa([],t,i)}(e);return n=(i=Fa([],o,r))[0],a=i[1],l=i[2],c=(s=r)[0],u=s[1],p=s[2],h=(d=Math.sqrt(n*n+a*a+l*l)*Math.sqrt(c*c+u*u+p*p))&&Pa(i,s)/d,Math.acos(Math.min(Math.max(h,-1),1));var i,s,n,a,l,c,u,p,d,h}function Pl(e,t){return Ol(e,t)>Math.PI/2*1.01}const Al=R(85),kl=Math.cos(Al),zl=Math.sin(Al),Nl=6371008.8,jl=2*Math.PI*Nl;class Ul{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(B(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,o=e.lat*t,i=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos((e.lng-this.lng)*t);return Nl*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new la(new Ul(this.lng-r,this.lat-t),new Ul(this.lng+r,this.lat+t))}toEcef(e){const t=gl(e);return Tl(this.lat,this.lng,al+t)}static convert(e){if(e instanceof Ul)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ul(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ul(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Gl=Ul;function Wl(e){return jl*Math.cos(e*Math.PI/180)}function ql(e){return(180+e)/360}function $l(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Vl(e,t){return e/Wl(t)}function Hl(e){return 360*e-180}function Kl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Zl(e,t){return e*Wl(Kl(t))}const Xl=85.051129;function Jl(e){return 1/Math.cos(e*Math.PI/180)}class Yl{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=Gl.convert(e);return new Yl(ql(r.lng),$l(r.lat),Vl(t,r.lat))}toLngLat(){return new Gl(Hl(this.x),Kl(this.y))}toAltitude(){return Zl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/jl*Jl(Kl(this.y))}}function Ql(e,t,r,o,i,s,n,a,l){const c=(t+o)/2,u=(r+i)/2,p=new y(c,u);a(p),function(e,t,r,o,i,s){const n=r-i,a=o-s;return Math.abs((o-t)*n-(r-e)*a)/Math.hypot(n,a)}(p.x,p.y,s.x,s.y,n.x,n.y)>=l?(Ql(e,t,r,c,u,s,p,a,l),Ql(e,c,u,o,i,p,n,a,l)):e.push(n)}function ec(e,t,r){let o=e[0],i=o.x,s=o.y;t(o);const n=[o];for(let a=1;a<e.length;a++){const l=e[a],{x:c,y:u}=l;t(l),Ql(n,i,s,c,u,o,l,t,r),i=c,s=u,o=l}return n}function tc(e,t,r,o){if(o(t,r)){const i=t.add(r)._mult(.5);tc(e,t,i,o),tc(e,i,r,o)}else e.push(r)}function rc(e,t){let r=e[0];const o=[r];for(let i=1;i<e.length;i++){const s=e[i];tc(o,r,s,t),r=s}return o}const oc=Math.pow(2,14)-1,ic=-oc-1;function sc(e,t){const r=Math.round(e.x*t),o=Math.round(e.y*t);return e.x=w(r,ic,oc),e.y=w(o,ic,oc),(r<e.x||r>e.x+1||o<e.y||o>e.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function nc(e,t,r){const o=e.loadGeometry(),i=e.extent,s=aa/i;if(t&&r&&r.projection.isReprojectedInTileSpace){const s=1<<t.z,{scale:n,x:a,y:l,projection:c}=r,u=e=>{const r=Hl((t.x+e.x/i)/s),o=Kl((t.y+e.y/i)/s),u=c.project(r,o);e.x=(u.x*n-a)*i,e.y=(u.y*n-l)*i};for(let t=0;t<o.length;t++)if(1!==e.type)o[t]=ec(o[t],u,1);else{const e=[];for(const r of o[t])r.x<0||r.x>=i||r.y<0||r.y>=i||(u(r),e.push(r));o[t]=e}}for(const e of o)for(const t of e)sc(t,s);return o}function ac(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?nc(e):[]}}function lc(e,t,r,o,i){e.emplaceBack(2*t+(o+1)/2,2*r+(i+1)/2)}function cc(e,t,r){const o=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*o,r[1]*o,r[2]*o)}class uc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new js,this.indexArray=new rn,this.segments=new na,this.programConfigurations=new Xn(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,o){const i=this.layers[0],s=[];let n=null;"circle"===i.type&&(n=i.layout.get("circle-sort-key"));for(const{feature:t,id:i,index:a,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=ac(t,e);if(!this.layers[0]._featureFilter.filter(new Rs(this.zoom),c,r))continue;const u=n?n.evaluate(c,{},r):void 0,p={id:i,properties:t.properties,type:t.type,sourceLayerIndex:l,index:a,geometry:e?c.geometry:nc(t,r,o),patterns:{},sortKey:u};s.push(p)}n&&s.sort(((e,t)=>e.sortKey-t.sortKey));let a=null;"globe"===o.projection.name&&(this.globeExtVertexArray=new Hs,a=o.projection);for(const o of s){const{geometry:i,index:s,sourceLayerIndex:n}=o,l=e[s].feature;this.addFeature(o,i,s,t.availableImages,r,a),t.featureIndex.insert(l,i,s,n,this.index)}}update(e,t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ia.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,sa.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,r,o,i,s){for(const r of t)for(const t of r){const r=t.x,o=t.y;if(r<0||r>=aa||o<0||o>=aa)continue;if(s){const e=s.projectTilePoint(r,o,i),t=s.upVector(i,r,o),n=this.globeExtVertexArray;cc(n,e,t),cc(n,e,t),cc(n,e,t),cc(n,e,t)}const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),a=n.vertexLength;lc(this.layoutVertexArray,r,o,-1,-1),lc(this.layoutVertexArray,r,o,1,-1),lc(this.layoutVertexArray,r,o,1,1),lc(this.layoutVertexArray,r,o,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+2,a+3),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},o,i)}}function pc(e,t){for(let r=0;r<e.length;r++)if(Sc(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Sc(e,t[r]))return!0;return!!fc(e,t)}function dc(e,t,r){return!!Sc(e,t)||!!mc(t,e,r)}function hc(e,t){if(1===e.length)return bc(t,e[0]);for(let r=0;r<t.length;r++){const o=t[r];for(let t=0;t<o.length;t++)if(Sc(e,o[t]))return!0}for(let r=0;r<e.length;r++)if(bc(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(fc(e,t[r]))return!0;return!1}function gc(e,t,r){if(e.length>1){if(fc(e,t))return!0;for(let o=0;o<t.length;o++)if(mc(t[o],e,r))return!0}for(let o=0;o<e.length;o++)if(mc(e[o],t,r))return!0;return!1}function fc(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const o=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)if(_c(o,i,t[e],t[e+1]))return!0}return!1}function _c(e,t,r,o){return $(e,r,o)!==$(t,r,o)&&$(e,t,r)!==$(e,t,o)}function mc(e,t,r){const o=r*r;if(1===t.length)return e.distSqr(t[0])<o;for(let r=1;r<t.length;r++)if(yc(e,t[r-1],t[r])<o)return!0;return!1}function yc(e,t,r){const o=t.distSqr(r);if(0===o)return e.distSqr(t);const i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/o;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function bc(e,t){let r,o,i,s=!1;for(let n=0;n<e.length;n++){r=e[n];for(let e=0,n=r.length-1;e<r.length;n=e++)o=r[e],i=r[n],o.y>t.y!=i.y>t.y&&t.x<(i.x-o.x)*(t.y-o.y)/(i.y-o.y)+o.x&&(s=!s)}return s}function Sc(e,t){let r=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const s=e[o],n=e[i];s.y>t.y!=n.y>t.y&&t.x<(n.x-s.x)*(t.y-s.y)/(n.y-s.y)+s.x&&(r=!r)}return r}function Rc(e,t,r,o,i){for(const s of e)if(t<=s.x&&r<=s.y&&o>=s.x&&i>=s.y)return!0;const s=[new y(t,r),new y(t,i),new y(o,i),new y(o,r)];if(e.length>2)for(const t of s)if(Sc(e,t))return!0;for(let t=0;t<e.length-1;t++)if(vc(e[t],e[t+1],s))return!0;return!1}function vc(e,t,r){const o=r[0],i=r[2];if(e.x<o.x&&t.x<o.x||e.x>i.x&&t.x>i.x||e.y<o.y&&t.y<o.y||e.y>i.y&&t.y>i.y)return!1;const s=$(e,t,r[0]);return s!==$(e,t,r[1])||s!==$(e,t,r[2])||s!==$(e,t,r[3])}function xc(e,t,r){const o=t.paint.get(e).value;return"constant"===o.kind?o.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Ec(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Mc(e,t,r,o,i){if(!t[0]&&!t[1])return e;const s=y.convert(t)._mult(i);"viewport"===r&&s._rotate(-o);const n=[];for(let t=0;t<e.length;t++)n.push(e[t].sub(s));return n}function Tc(e,t,r,o){const i=y.convert(e)._mult(o);return"viewport"===t&&i._rotate(-r),i}Zi(uc,"CircleBucket",{omit:["layers"]});const wc=new Is({"circle-sort-key":new Ls(et.layout_circle["circle-sort-key"])});var Fc={paint:new Is({"circle-radius":new Ls(et.paint_circle["circle-radius"]),"circle-color":new Ls(et.paint_circle["circle-color"]),"circle-blur":new Ls(et.paint_circle["circle-blur"]),"circle-opacity":new Ls(et.paint_circle["circle-opacity"]),"circle-translate":new Cs(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Cs(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Cs(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Cs(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ls(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ls(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ls(et.paint_circle["circle-stroke-opacity"])}),layout:wc};function Bc(e,t,r,o,i,s,n,a,l){if(s&&e.queryGeometry.isAboveHorizon)return!1;s&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=r.projection.upVectorScale(c,r.center.lat,r.worldSize).metersToTile;for(const p of t)for(const t of p){const p=t.add(a),d=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(p.x,p.y,!0):0,h=r.projection.projectTilePoint(p.x,p.y,c);if(d>0){const e=r.projection.upVector(c,p.x,p.y);h.x+=e[0]*u*d,h.y+=e[1]*u*d,h.z+=e[2]*u*d}const g=s?p:Cc(h.x,h.y,h.z,o),f=s?e.tilespaceRays.map((e=>Ic(e,d))):e.queryGeometry.screenGeometry,_=$a([],[h.x,h.y,h.z,1],o);if(!n&&s?l*=_[3]/r.cameraToCenterDistance:n&&!s&&(l*=r.cameraToCenterDistance/_[3]),s){const e=Kl((t.y/aa+c.y)/(1<<c.z));l/=r.projection.pixelsPerMeter(e,1)/Vl(1,e)}if(dc(f,g,l))return!0}return!1}function Cc(e,t,r,o){const i=$a([],[e,t,r,1],o);return new y(i[0]/i[3],i[1]/i[3])}const Lc=Ta(0,0,0),Dc=Ta(0,0,1);function Ic(e,t){const r=xa();return Lc[2]=t,e.intersectsPlane(Lc,Dc,r),new y(r[0],r[1])}class Oc extends uc{}function Pc(e,{width:t,height:r},o,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*o)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*r*o);return e.width=t,e.height=r,e.data=i,e}function Ac(e,t,r){const{width:o,height:i}=t;o===e.width&&i===e.height||(kc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,o),height:Math.min(e.height,i)},r),e.width=o,e.height=i,e.data=t.data)}function kc(e,t,r,o,i,s){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||o.x>t.width-i.width||o.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const n=e.data,a=t.data;for(let l=0;l<i.height;l++){const c=((r.y+l)*e.width+r.x)*s,u=((o.y+l)*t.width+o.x)*s;for(let e=0;e<i.width*s;e++)a[u+e]=n[c+e]}return t}Zi(Oc,"HeatmapBucket",{omit:["layers"]});class zc{constructor(e,t){Pc(this,e,1,t)}resize(e){Ac(this,new zc(e),1)}clone(){return new zc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,o,i){kc(e,t,r,o,i,1)}}class Nc{constructor(e,t){Pc(this,e,4,t)}resize(e){Ac(this,new Nc(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,o,i){kc(e,t,r,o,i,4)}}Zi(zc,"AlphaImage"),Zi(Nc,"RGBAImage");var jc={paint:new Is({"heatmap-radius":new Ls(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ls(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Cs(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ds(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Cs(et.paint_heatmap["heatmap-opacity"])})};function Uc(e){const t={},r=e.resolution||256,o=e.clips?e.clips.length:1,i=e.image||new Nc({width:r,height:o}),s=(r,o,s)=>{t[e.evaluationKey]=s;const n=e.expression.evaluate(t);i.data[r+o+0]=Math.floor(255*n.r/n.a),i.data[r+o+1]=Math.floor(255*n.g/n.a),i.data[r+o+2]=Math.floor(255*n.b/n.a),i.data[r+o+3]=Math.floor(255*n.a)};if(e.clips)for(let t=0,i=0;t<o;++t,i+=4*r)for(let o=0,n=0;o<r;o++,n+=4){const a=o/(r-1),{start:l,end:c}=e.clips[t];s(i,n,l*(1-a)+c*a)}else for(let e=0,t=0;e<r;e++,t+=4)s(0,t,e/(r-1));return i}var Gc={paint:new Is({"hillshade-illumination-direction":new Cs(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Cs(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Cs(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Cs(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Cs(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Cs(et.paint_hillshade["hillshade-accent-color"])})};const Wc=zs([{name:"a_pos",components:2,type:"Int16"}],4),{members:qc}=Wc;var $c={exports:{}};function Vc(e,t,r){r=r||2;var o,i,s,n,a,l,c,u=t&&t.length,p=u?t[0]*r:e.length,d=Hc(e,0,p,r,!0),h=[];if(!d||d.next===d.prev)return h;if(u&&(d=function(e,t,r,o){var i,s,n,a=[];for(i=0,s=t.length;i<s;i++)(n=Hc(e,t[i]*o,i<s-1?t[i+1]*o:e.length,o,!1))===n.next&&(n.steiner=!0),a.push(iu(n));for(a.sort(eu),i=0;i<a.length;i++)r=tu(a[i],r);return r}(e,t,d,r)),e.length>80*r){o=s=e[0],i=n=e[1];for(var g=r;g<p;g+=r)(a=e[g])<o&&(o=a),(l=e[g+1])<i&&(i=l),a>s&&(s=a),l>n&&(n=l);c=0!==(c=Math.max(s-o,n-i))?32767/c:0}return Zc(d,h,r,o,i,c,0),h}function Hc(e,t,r,o,i){var s,n;if(i===mu(e,t,r,o)>0)for(s=t;s<r;s+=o)n=gu(s,e[s],e[s+1],n);else for(s=r-o;s>=t;s-=o)n=gu(s,e[s],e[s+1],n);return n&&lu(n,n.next)&&(fu(n),n=n.next),n}function Kc(e,t){if(!e)return e;t||(t=e);var r,o=e;do{if(r=!1,o.steiner||!lu(o,o.next)&&0!==au(o.prev,o,o.next))o=o.next;else{if(fu(o),(o=t=o.prev)===o.next)break;r=!0}}while(r||o!==t);return t}function Zc(e,t,r,o,i,s,n){if(e){!n&&s&&function(e,t,r,o){var i=e;do{0===i.z&&(i.z=ou(i.x,i.y,t,r,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,o,i,s,n,a,l,c=1;do{for(r=e,e=null,s=null,n=0;r;){for(n++,o=r,a=0,t=0;t<c&&(a++,o=o.nextZ);t++);for(l=c;a>0||l>0&&o;)0!==a&&(0===l||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=o}s.nextZ=null,c*=2}while(n>1)}(i)}(e,o,i,s);for(var a,l,c=e;e.prev!==e.next;)if(a=e.prev,l=e.next,s?Jc(e,o,i,s):Xc(e))t.push(a.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),fu(e),e=l.next,c=l.next;else if((e=l)===c){n?1===n?Zc(e=Yc(Kc(e),t,r),t,r,o,i,s,2):2===n&&Qc(e,t,r,o,i,s):Zc(Kc(e),t,r,o,i,s,1);break}}}function Xc(e){var t=e.prev,r=e,o=e.next;if(au(t,r,o)>=0)return!1;for(var i=t.x,s=r.x,n=o.x,a=t.y,l=r.y,c=o.y,u=i<s?i<n?i:n:s<n?s:n,p=a<l?a<c?a:c:l<c?l:c,d=i>s?i>n?i:n:s>n?s:n,h=a>l?a>c?a:c:l>c?l:c,g=o.next;g!==t;){if(g.x>=u&&g.x<=d&&g.y>=p&&g.y<=h&&su(i,a,s,l,n,c,g.x,g.y)&&au(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Jc(e,t,r,o){var i=e.prev,s=e,n=e.next;if(au(i,s,n)>=0)return!1;for(var a=i.x,l=s.x,c=n.x,u=i.y,p=s.y,d=n.y,h=a<l?a<c?a:c:l<c?l:c,g=u<p?u<d?u:d:p<d?p:d,f=a>l?a>c?a:c:l>c?l:c,_=u>p?u>d?u:d:p>d?p:d,m=ou(h,g,t,r,o),y=ou(f,_,t,r,o),b=e.prevZ,S=e.nextZ;b&&b.z>=m&&S&&S.z<=y;){if(b.x>=h&&b.x<=f&&b.y>=g&&b.y<=_&&b!==i&&b!==n&&su(a,u,l,p,c,d,b.x,b.y)&&au(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,S.x>=h&&S.x<=f&&S.y>=g&&S.y<=_&&S!==i&&S!==n&&su(a,u,l,p,c,d,S.x,S.y)&&au(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;b&&b.z>=m;){if(b.x>=h&&b.x<=f&&b.y>=g&&b.y<=_&&b!==i&&b!==n&&su(a,u,l,p,c,d,b.x,b.y)&&au(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;S&&S.z<=y;){if(S.x>=h&&S.x<=f&&S.y>=g&&S.y<=_&&S!==i&&S!==n&&su(a,u,l,p,c,d,S.x,S.y)&&au(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function Yc(e,t,r){var o=e;do{var i=o.prev,s=o.next.next;!lu(i,s)&&cu(i,o,o.next,s)&&du(i,s)&&du(s,i)&&(t.push(i.i/r|0),t.push(o.i/r|0),t.push(s.i/r|0),fu(o),fu(o.next),o=e=s),o=o.next}while(o!==e);return Kc(o)}function Qc(e,t,r,o,i,s){var n=e;do{for(var a=n.next.next;a!==n.prev;){if(n.i!==a.i&&nu(n,a)){var l=hu(n,a);return n=Kc(n,n.next),l=Kc(l,l.next),Zc(n,t,r,o,i,s,0),void Zc(l,t,r,o,i,s,0)}a=a.next}n=n.next}while(n!==e)}function eu(e,t){return e.x-t.x}function tu(e,t){var r=function(e,t){var r,o=t,i=e.x,s=e.y,n=-1/0;do{if(s<=o.y&&s>=o.next.y&&o.next.y!==o.y){var a=o.x+(s-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(a<=i&&a>n&&(n=a,r=o.x<o.next.x?o:o.next,a===i))return r}o=o.next}while(o!==t);if(!r)return null;var l,c=r,u=r.x,p=r.y,d=1/0;o=r;do{i>=o.x&&o.x>=u&&i!==o.x&&su(s<p?i:n,s,u,p,s<p?n:i,s,o.x,o.y)&&(l=Math.abs(s-o.y)/(i-o.x),du(o,e)&&(l<d||l===d&&(o.x>r.x||o.x===r.x&&ru(r,o)))&&(r=o,d=l)),o=o.next}while(o!==c);return r}(e,t);if(!r)return t;var o=hu(r,e);return Kc(o,o.next),Kc(r,r.next)}function ru(e,t){return au(e.prev,e,t.prev)<0&&au(t.next,e,e.next)<0}function ou(e,t,r,o,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function iu(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function su(e,t,r,o,i,s,n,a){return(i-n)*(t-a)>=(e-n)*(s-a)&&(e-n)*(o-a)>=(r-n)*(t-a)&&(r-n)*(s-a)>=(i-n)*(o-a)}function nu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&cu(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(du(e,t)&&du(t,e)&&function(e,t){var r=e,o=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next}while(r!==e);return o}(e,t)&&(au(e.prev,e,t.prev)||au(e,t.prev,t))||lu(e,t)&&au(e.prev,e,e.next)>0&&au(t.prev,t,t.next)>0)}function au(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function lu(e,t){return e.x===t.x&&e.y===t.y}function cu(e,t,r,o){var i=pu(au(e,t,r)),s=pu(au(e,t,o)),n=pu(au(r,o,e)),a=pu(au(r,o,t));return i!==s&&n!==a||!(0!==i||!uu(e,r,t))||!(0!==s||!uu(e,o,t))||!(0!==n||!uu(r,e,o))||!(0!==a||!uu(r,t,o))}function uu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function pu(e){return e>0?1:e<0?-1:0}function du(e,t){return au(e.prev,e,e.next)<0?au(e,t,e.next)>=0&&au(e,e.prev,t)>=0:au(e,t,e.prev)<0||au(e,e.next,t)<0}function hu(e,t){var r=new _u(e.i,e.x,e.y),o=new _u(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,o.next=r,r.prev=o,s.next=o,o.prev=s,o}function gu(e,t,r,o){var i=new _u(e,t,r);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function fu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _u(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mu(e,t,r,o){for(var i=0,s=t,n=r-o;s<r;s+=o)i+=(e[n]-e[s])*(e[s+1]+e[n+1]),n=s;return i}$c.exports=Vc,$c.exports.default=Vc,Vc.deviation=function(e,t,r,o){var i=t&&t.length,s=Math.abs(mu(e,0,i?t[0]*r:e.length,r));if(i)for(var n=0,a=t.length;n<a;n++)s-=Math.abs(mu(e,t[n]*r,n<a-1?t[n+1]*r:e.length,r));var l=0;for(n=0;n<o.length;n+=3){var c=o[n]*r,u=o[n+1]*r,p=o[n+2]*r;l+=Math.abs((e[c]-e[p])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[p+1]-e[c+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},Vc.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},o=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var n=0;n<t;n++)r.vertices.push(e[i][s][n]);i>0&&r.holes.push(o+=e[i-1].length)}return r};var yu=d($c.exports);function bu(e,t,r,o,i){Su(e,t,r||0,o||e.length-1,i||vu)}function Su(e,t,r,o,i){for(;o>r;){if(o-r>600){var s=o-r+1,n=t-r+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(n-s/2<0?-1:1);Su(e,t,Math.max(r,Math.floor(t-n*l/s+c)),Math.min(o,Math.floor(t+(s-n)*l/s+c)),i)}var u=e[t],p=r,d=o;for(Ru(e,r,t),i(e[o],u)>0&&Ru(e,r,o);p<d;){for(Ru(e,p,d),p++,d--;i(e[p],u)<0;)p++;for(;i(e[d],u)>0;)d--}0===i(e[r],u)?Ru(e,r,d):Ru(e,++d,o),d<=t&&(r=d+1),t<=d&&(o=d-1)}}function Ru(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function vu(e,t){return e<t?-1:e>t?1:0}function xu(e,t){const r=e.length;if(r<=1)return[e];const o=[];let i,s;for(let t=0;t<r;t++){const r=V(e[t]);0!==r&&(e[t].area=Math.abs(r),void 0===s&&(s=r<0),s===r<0?(i&&o.push(i),i=[e[t]]):i.push(e[t]))}if(i&&o.push(i),t>1)for(let e=0;e<o.length;e++)o[e].length<=t||(bu(o[e],t,1,o[e].length-1,Eu),o[e]=o[e].slice(0,t));return o}function Eu(e,t){return t.area-e.area}function Mu(e,t,r){const o=r.patternDependencies;let i=!1;for(const r of t){const t=r.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const s=t.constantOr(null);s&&(i=!0,o[s]=!0)}return i}function Tu(e,t,r,o,i){const s=i.patternDependencies;for(const n of t){const t=n.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:o},r,{},i.availableImages);e=e&&e.name?e.name:e,s[e]=!0,r.patterns[n.id]=e}}return r}class wu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new js,this.indexArray=new rn,this.indexArray2=new cn,this.programConfigurations=new Xn(e.layers,e.zoom),this.segments=new na,this.segments2=new na,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,r,o){this.hasPattern=Mu("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:n,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=ac(n,e);if(!this.layers[0]._featureFilter.filter(new Rs(this.zoom),u,r))continue;const p=i?i.evaluate(u,{},r,t.availableImages):void 0,d={id:a,properties:n.properties,type:n.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:nc(n,r,o),patterns:{},sortKey:p};s.push(d)}i&&s.sort(((e,t)=>e.sortKey-t.sortKey));for(const o of s){const{geometry:i,index:s,sourceLayerIndex:n}=o;if(this.hasPattern){const e=Tu("fill",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,i,s,r,{},t.availableImages);t.featureIndex.insert(e[s].feature,i,s,n,this.index)}}update(e,t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,o)}addFeatures(e,t,r,o,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,o,i,s=[]){for(const e of xu(t,500)){let t=0;for(const r of e)t+=r.length;const r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),o=r.vertexLength,i=[],s=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&s.push(i.length/2);const r=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),o=r.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(o+t.length-1,o),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(o+e-1,o+e),i.push(t[e].x),i.push(t[e].y);r.vertexLength+=t.length,r.primitiveLength+=t.length}const n=yu(i,s);for(let e=0;e<n.length;e+=3)this.indexArray.emplaceBack(o+n[e],o+n[e+1],o+n[e+2]);r.vertexLength+=t,r.primitiveLength+=n.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,s,o)}}Zi(wu,"FillBucket",{omit:["layers","patternFeatures"]});const Fu=new Is({"fill-sort-key":new Ls(et.layout_fill["fill-sort-key"])});var Bu={paint:new Is({"fill-antialias":new Cs(et.paint_fill["fill-antialias"]),"fill-opacity":new Ls(et.paint_fill["fill-opacity"]),"fill-color":new Ls(et.paint_fill["fill-color"]),"fill-outline-color":new Ls(et.paint_fill["fill-outline-color"]),"fill-translate":new Cs(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Cs(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ls(et.paint_fill["fill-pattern"])}),layout:Fu};const Cu=zs([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Lu=zs([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Du=zs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Iu}=Cu;var Ou={},Pu=_,Au=ku;function ku(e,t,r,o,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=i,e.readFields(zu,this,t)}function zu(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var o=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[o]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Nu(e){for(var t,r,o=0,i=0,s=e.length,n=s-1;i<s;n=i++)o+=((r=e[n]).x-(t=e[i]).x)*(t.y+r.y);return o}ku.types=["Unknown","Point","LineString","Polygon"],ku.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,o=1,i=0,s=0,n=0,a=[];e.pos<r;){if(i<=0){var l=e.readVarint();o=7&l,i=l>>3}if(i--,1===o||2===o)s+=e.readSVarint(),n+=e.readSVarint(),1===o&&(t&&a.push(t),t=[]),t.push(new Pu(s,n));else{if(7!==o)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&a.push(t),a},ku.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,o=0,i=0,s=0,n=1/0,a=-1/0,l=1/0,c=-1/0;e.pos<t;){if(o<=0){var u=e.readVarint();r=7&u,o=u>>3}if(o--,1===r||2===r)(i+=e.readSVarint())<n&&(n=i),i>a&&(a=i),(s+=e.readSVarint())<l&&(l=s),s>c&&(c=s);else if(7!==r)throw new Error("unknown command "+r)}return[n,l,a,c]},ku.prototype.toGeoJSON=function(e,t,r){var o,i,s=this.extent*Math.pow(2,r),n=this.extent*e,a=this.extent*t,l=this.loadGeometry(),c=ku.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+n)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+a)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(o=0;o<l.length;o++)p[o]=l[o][0];u(l=p);break;case 2:for(o=0;o<l.length;o++)u(l[o]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,o,i=[],s=0;s<t;s++){var n=Nu(e[s]);0!==n&&(void 0===o&&(o=n<0),o===n<0?(r&&i.push(r),r=[e[s]]):r.push(e[s]))}return r&&i.push(r),i}(l),o=0;o<l.length;o++)for(i=0;i<l[o].length;i++)u(l[o][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var ju=Au,Uu=Gu;function Gu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Wu,this,t),this.length=this._features.length}function Wu(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var o=e.readVarint()>>3;t=1===o?e.readString():2===o?e.readFloat():3===o?e.readDouble():4===o?e.readVarint64():5===o?e.readVarint():6===o?e.readSVarint():7===o?e.readBoolean():null}return t}(r))}Gu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new ju(this._pbf,t,this.extent,this._keys,this._values)};var qu=Uu;function $u(e,t,r){if(3===e){var o=new qu(r,r.readVarint()+r.pos);o.length&&(t[o.name]=o)}}var Vu=Ou.VectorTile=function(e,t){this.layers=e.readFields($u,{},t)},Hu=Ou.VectorTileFeature=Au;function Ku(e,t,r,o){const i=[],s=0===o?(e,t,r,o,i,s)=>{e.push(new y(s,r+(s-t)/(o-t)*(i-r)))}:(e,t,r,o,i,s)=>{e.push(new y(t+(s-r)/(i-r)*(o-t),s))};for(const n of e){const e=[];for(const i of n){if(i.length<=2)continue;const n=[];for(let e=0;e<i.length-1;e++){const a=i[e].x,l=i[e].y,c=i[e+1].x,u=i[e+1].y,p=0===o?a:l,d=0===o?c:u;p<t?d>t&&s(n,a,l,c,u,t):p>r?d<r&&s(n,a,l,c,u,r):n.push(i[e]),d<t&&p>=t&&s(n,a,l,c,u,t),d>r&&p<=r&&s(n,a,l,c,u,r)}let a=i[i.length-1];const l=0===o?a.x:a.y;l>=t&&l<=r&&n.push(a),n.length&&(a=n[n.length-1],n[0].x===a.x&&n[0].y===a.y||n.push(n[0]),e.push(n))}e.length&&i.push(e)}return i}Ou.VectorTileLayer=Uu;const Zu=Hu.types,Xu=Math.pow(2,13);function Ju(e,t,r,o,i,s,n,a){e.emplaceBack((t<<1)+n,(r<<1)+s,(Math.floor(o*Xu)<<1)+i,Math.round(a))}function Yu(e,t,r){const o=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*o,r[1]*o,r[2]*o)}class Qu{constructor(){this.acc=new y(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new y(e.x,e.y),this.max=new y(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const r=this.min,o=this.max;e.x<r.x?r.x=e.x:e.x>o.x&&(o.x=e.x),e.y<r.y?r.y=e.y:e.y>o.y&&(o.y=e.y),((0===e.x||e.x===aa)&&e.x===t.x)!=((0===e.y||e.y===aa)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Lr(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>aa!=e.x>aa&&this.addBorderIntersection(1,Lr(t.y,e.y,(aa-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Lr(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>aa!=e.y>aa&&this.addBorderIntersection(3,Lr(t.x,e.x,(aa-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{const r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new y(0,0)}span(){return new y(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ep{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Gs,this.centroidVertexArray=new vn,this.indexArray=new rn,this.programConfigurations=new Xn(e.layers,e.zoom),this.segments=new na,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,r,o){this.features=[],this.hasPattern=Mu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/aa/(1<<e.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:s,index:n,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,l=ac(i,e);if(!this.layers[0]._featureFilter.filter(new Rs(this.zoom),l,r))continue;const c={id:s,sourceLayerIndex:a,index:n,geometry:e?l.geometry:nc(i,r,o),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Tu("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,n,r,{},t.availableImages,o),t.featureIndex.insert(i,c.geometry,n,a,this.index,u)}this.sortBorders()}addFeatures(e,t,r,o,i){for(const e of this.features){const{geometry:s}=e;this.addFeature(e,s,e.index,t,r,o,i)}this.sortBorders()}update(e,t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Iu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Du.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Lu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,o,i,s,n){const a=[new y(0,0),new y(aa,aa)],l=n.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,p="Polygon"===Zu[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Hs);const d=xu(t,500);for(let e=d.length-1;e>=0;e--){const t=d[e];(0===t.length||(h=t[0]).every((e=>e.x<=0))||h.every((e=>e.x>=aa))||h.every((e=>e.y<=0))||h.every((e=>e.y>=aa)))&&d.splice(e,1)}var h;let g;if(c)g=lp(d,a,o);else{g=[];for(const e of d)g.push({polygon:e,bounds:a})}const f=p?this.edgeRadius:0;for(const{polygon:e,bounds:t}of g){let r=0,i=0;for(const t of e)p&&!t[0].equals(t[t.length-1])&&t.push(t[0]),i+=p?t.length-1:t.length;const s=this.segments.prepareSegment((p?5:4)*i,this.layoutVertexArray,this.indexArray);if(p){const t=[],i=[];r=s.vertexLength;for(const r of e){let n,a;r.length&&r!==e[0]&&i.push(t.length/2),n=r[1].sub(r[0])._perp()._unit();for(let e=1;e<r.length;e++){const i=r[e],u=r[e===r.length-1?1:e+1];let{x:p,y:d}=i;if(f){a=u.sub(i)._perp()._unit();const e=n.add(a)._unit(),t=f*Math.min(4,1/(n.x*e.x+n.y*e.y));p+=t*e.x,d+=t*e.y,n=a}Ju(this.layoutVertexArray,p,d,0,0,1,1,0),s.vertexLength++,t.push(i.x,i.y),c&&Yu(this.layoutVertexExtArray,l.projectTilePoint(p,d,o),l.upVector(o,p,d))}}const n=yu(t,i);for(let e=0;e<n.length;e+=3)this.indexArray.emplaceBack(r+n[e],r+n[e+2],r+n[e+1]),s.primitiveLength++}for(const i of e){u&&i.length&&u.startRing(i[0]);let e,n,a,d=i.length>4&&sp(i[i.length-2],i[0],i[1]),h=f?rp(i[i.length-2],i[0],i[1],f):0;n=i[1].sub(i[0])._perp()._unit();let g=!0;for(let _=1,m=0;_<i.length;_++){let y=i[_-1],b=i[_];const S=i[_===i.length-1?1:_+1];if(u&&p&&u.currentPolyCount.top++,ip(b,y,t)){f&&(n=S.sub(b)._perp()._unit(),g=!g);continue}u&&u.append(b,y);const R=b.sub(y)._perp(),v=R.x/(Math.abs(R.x)+Math.abs(R.y)),x=R.y>0?1:0,E=y.dist(b);if(m+E>32768&&(m=0),f){a=S.sub(b)._perp()._unit();let e=op(y,b,S,tp(n,a),f);isNaN(e)&&(e=0);const t=b.sub(y)._unit();y=y.add(t.mult(h))._round(),b=b.add(t.mult(-e))._round(),h=e,n=a}const M=s.vertexLength,T=i.length>4&&sp(y,b,S);let w=np(m,d,g);if(Ju(this.layoutVertexArray,y.x,y.y,v,x,0,0,w),Ju(this.layoutVertexArray,y.x,y.y,v,x,0,1,w),m+=E,w=np(m,T,!g),d=T,Ju(this.layoutVertexArray,b.x,b.y,v,x,0,0,w),Ju(this.layoutVertexArray,b.x,b.y,v,x,0,1,w),s.vertexLength+=4,this.indexArray.emplaceBack(M+0,M+1,M+2),this.indexArray.emplaceBack(M+1,M+3,M+2),s.primitiveLength+=2,f){const o=r+(1===_?i.length-2:_-2),n=1===_?r:o+1;if(this.indexArray.emplaceBack(M+1,o,M+3),this.indexArray.emplaceBack(o,n,M+3),s.primitiveLength+=2,void 0===e&&(e=M),!ip(S,i[_],t)){const t=_===i.length-1?e:s.vertexLength;this.indexArray.emplaceBack(M+2,M+3,t),this.indexArray.emplaceBack(M+3,t+1,t),this.indexArray.emplaceBack(M+3,n,t+1),s.primitiveLength+=3}g=!g}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(y.x,y.y,o),r=l.projectTilePoint(b.x,b.y,o),i=l.upVector(o,y.x,y.y),s=l.upVector(o,b.x,b.y);Yu(e,t,i),Yu(e,t,i),Yu(e,r,s),Yu(e,r,s)}}p&&(r+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let r=0;r<4;r++)e[r][0]!==Number.MAX_VALUE&&this.borders[r].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,s,o)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,r)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[r].borders[e][0]))}encodeCentroid(e,t,r=!0){let o,i;if(e)if(0!==e.y){const r=t.span()._mult(this.tileToMeter);o=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else o=Math.ceil(7*(e.x+450)),i=0;else o=0,i=+r;let s=r?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(s++,o,i);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,o,i)}}}function tp(e,t){const r=e.add(t)._unit();return e.x*r.x+e.y*r.y}function rp(e,t,r,o){const i=t.sub(e)._perp()._unit(),s=r.sub(t)._perp()._unit();return op(e,t,r,tp(i,s),o)}function op(e,t,r,o,i){const s=Math.sqrt(1-o*o);return Math.min(e.dist(t)/3,t.dist(r)/3,i*s/o)}function ip(e,t,r){return e.x<r[0].x&&t.x<r[0].x||e.x>r[1].x&&t.x>r[1].x||e.y<r[0].y&&t.y<r[0].y||e.y>r[1].y&&t.y>r[1].y}function sp(e,t,r){if(e.x<0||e.x>=aa||t.x<0||t.x>=aa||r.x<0||r.x>=aa)return!1;const o=r.sub(t),i=o.perp(),s=e.sub(t);return(o.x*s.x+o.y*s.y)/Math.sqrt((o.x*o.x+o.y*o.y)*(s.x*s.x+s.y*s.y))>-.866&&i.x*s.x+i.y*s.y<0}function np(e,t,r){const o=t?2|e:-3&e;return r?1|o:-2&o}function ap(){const e=Math.PI/32,t=Math.tan(e),r=Nl;return r*Math.sqrt(1+2*t*t)-r}function lp(e,t,r){const o=1<<r.z,i=Hl(r.x/o),s=Hl((r.x+1)/o),n=Kl(r.y/o),a=Kl((r.y+1)/o);return function(e,t,r,o,i=0,s){const n=[];if(!e.length||!r||!o)return n;const a=(e,t)=>{for(const r of e)n.push({polygon:r,bounds:t})},l=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(o)),u=l-c,p=[];for(let e=0;e<Math.abs(u);e++)p.push(u>0?0:1);for(let e=0;e<Math.min(l,c);e++)p.push(0),p.push(1);let d=e;if(d=Ku(d,t[0].y-i,t[1].y+i,1),d=Ku(d,t[0].x-i,t[1].x+i,0),!d.length)return n;const h=[];for(p.length?h.push({polygons:d,bounds:t,depth:0}):a(d,t);h.length;){const e=h.pop(),t=e.depth,r=p[t],o=e.bounds[0],n=e.bounds[1],l=0===r?o.x:o.y,c=0===r?n.x:n.y,u=s?s(r,l,c):.5*(l+c),d=Ku(e.polygons,l-i,u+i,r),g=Ku(e.polygons,u-i,c+i,r);if(d.length){const e=[o,new y(0===r?u:n.x,1===r?u:n.y)];p.length>t+1?h.push({polygons:d,bounds:e,depth:t+1}):a(d,e)}if(g.length){const e=[new y(0===r?u:o.x,1===r?u:o.y),n];p.length>t+1?h.push({polygons:g,bounds:e,depth:t+1}):a(g,e)}}return n}(e,t,Math.ceil((s-i)/11.25),Math.ceil((n-a)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=Kl((r.y+t/aa)/o);return($l(.5*(Kl((r.y+i/aa)/o)+e))*o-r.y)*aa}}))}Zi(ep,"FillExtrusionBucket",{omit:["layers","features"]}),Zi(Qu,"PartMetadata");const cp=new Is({"fill-extrusion-edge-radius":new Cs(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var up={paint:new Is({"fill-extrusion-opacity":new Cs(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ls(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Cs(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Cs(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ls(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ls(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ls(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Cs(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Cs(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Cs(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Cs(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:cp};function pp(e,t,r){var o=2*Math.PI*6378137/256/Math.pow(2,r);return[e*o-2*Math.PI*6378137/2,t*o-2*Math.PI*6378137/2]}class dp{constructor(e,t,r){this.z=e,this.x=t,this.y=r,this.key=fp(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const r=function(e,t,r){var o=pp(256*e,256*(t=Math.pow(2,r)-t-1),r),i=pp(256*(e+1),256*(t+1),r);return o[0]+","+o[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),o=function(e,t,r){let o,i="";for(let s=e;s>0;s--)o=1<<s-1,i+=(t&o?1:0)+(r&o?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",o).replace("{bbox-epsg-3857}",r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hp{constructor(e,t){this.wrap=e,this.canonical=t,this.key=fp(e,t.z,t.z,t.x,t.y)}}class gp{constructor(e,t,r,o,i){this.overscaledZ=e,this.wrap=t,this.canonical=new dp(r,+o,+i),this.key=0===t&&e===r?this.canonical.key:fp(t,e,r,o,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new gp(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gp(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return fp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-e;return fp(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new gp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,o=2*this.canonical.y;return[new gp(t,this.wrap,t,r,o),new gp(t,this.wrap,t,r+1,o),new gp(t,this.wrap,t,r,o+1),new gp(t,this.wrap,t,r+1,o+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new gp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new gp(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function fp(e,t,r,o,i){const s=1<<Math.min(r,22);let n=s*(i%s)+o%s;return e&&r<22&&(n+=s*s*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*n+r)+(t-r)}Zi(dp,"CanonicalTileID"),Zi(gp,"OverscaledTileID",{omit:["projMatrix"]});class _p extends y{constructor(e,t,r){super(e,t),this.z=r}}function mp(e,t){return e.x*t.x+e.y*t.y}function yp(e,t){if(1===e.length){let r=0;const o=t[r++];let i;for(;!i||o.equals(i);)if(i=t[r++],!i)return 1/0;for(;r<t.length;r++){const s=t[r],n=e[0],a=i.sub(o),l=s.sub(o),c=n.sub(o),u=mp(a,a),p=mp(a,l),d=mp(l,l),h=mp(c,a),g=mp(c,l),f=u*d-p*p,_=(d*h-p*g)/f,m=(u*g-p*h)/f,y=o.z*(1-_-m)+i.z*_+s.z*m;if(isFinite(y))return y}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}function bp(e,t,r,o,i,s,n,a){const l=n*i.getElevationAt(e,t,!0,!0),c=0!==s[0],u=c?0===s[1]?n*(s[0]/7-450):n*function(e,t,r){const o=Math.floor(t[0]/8),i=Math.floor(t[1]/8),s=10*(t[0]-8*o),n=10*(t[1]-8*i),a=e.getElevationAt(o,i,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(s*l-1)),u=Math.floor(.5*(n*l-1)),p=e.tileCoordToPixel(o,i),d=2*c+1,h=2*u+1,g=function(e,t,r,o,i){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+i,r,!0),e.getElevationAtPixel(t,r+i,!0),e.getElevationAtPixel(t+o,r+i,!0)]}(e,p.x-c,p.y-u,d,h),f=Math.abs(g[0]-g[1]),_=Math.abs(g[2]-g[3]),m=Math.abs(g[0]-g[2])+Math.abs(g[1]-g[3]),y=Math.min(.25,.5*l*(f+_)/d),b=Math.min(.25,.5*l*m/h);return a+Math.max(y*s,b*n)}(i,s,a):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+o,l+r+2):l+o}}const Sp=zs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Rp}=Sp,vp=zs([{name:"a_packed",components:4,type:"Float32"}]),{members:xp}=vp,Ep=Hu.types,Mp=Math.cos(Math.PI/180*37.5);class Tp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Ws,this.layoutVertexArray2=new qs,this.indexArray=new rn,this.programConfigurations=new Xn(e.layers,e.zoom),this.segments=new na,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,o){this.hasPattern=Mu("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:t,id:n,index:a,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=ac(t,e);if(!this.layers[0]._featureFilter.filter(new Rs(this.zoom),c,r))continue;const u=i?i.evaluate(c,{},r):void 0,p={id:n,properties:t.properties,type:t.type,sourceLayerIndex:l,index:a,geometry:e?c.geometry:nc(t,r,o),patterns:{},sortKey:u};s.push(p)}i&&s.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:n,featureIndex:a}=t,l=this.addConstantDashes(n);for(const o of s){const{geometry:i,index:s,sourceLayerIndex:c}=o;if(l&&this.addFeatureDashes(o,n),this.hasPattern){const e=Tu("line",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,i,s,r,n.positions,t.availableImages);a.insert(e[s].feature,i,s,c,this.index)}}addConstantDashes(e){let t=!1;for(const r of this.layers){const o=r.paint.get("line-dasharray").value,i=r.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==i.kind)t=!0;else{const t=i.value,r=o.value;if(!r)continue;e.addDash(r,t)}}return t}addFeatureDashes(e,t){const r=this.zoom;for(const o of this.layers){const i=o.paint.get("line-dasharray").value,s=o.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===s.kind)continue;let n,a;if("constant"===i.kind){if(n=i.value,!n)continue}else n=i.evaluate({zoom:r},e);a="constant"===s.kind?s.value:s.evaluate({zoom:r},e),t.addDash(n,a),e.patterns[o.id]=t.getKey(n,a)}}update(e,t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,o)}addFeatures(e,t,r,o,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,xp)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rp),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,o,i,s){const n=this.layers[0].layout,a=n.get("line-join").evaluate(e,{}),l=n.get("line-cap").evaluate(e,{}),c=n.get("line-miter-limit"),u=n.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const r of t)this.addLine(r,e,a,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,s,o)}addLine(e,t,r,o,i,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const n="Polygon"===Ep[t.type];let a=e.length;for(;a>=2&&e[a-1].equals(e[a-2]);)a--;let l=0;for(;l<a-1&&e[l].equals(e[l+1]);)l++;if(a<(n?3:2))return;"bevel"===r&&(i=1.05);const c=this.overscaling<=16?15*aa/(512*this.overscaling):0,u=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let p,d,h,g,f;this.e1=this.e2=-1,n&&(p=e[a-2],f=e[l].sub(p)._unit()._perp());for(let t=l;t<a;t++){if(h=t===a-1?n?e[l+1]:void 0:e[t+1],h&&e[t].equals(h))continue;f&&(g=f),p&&(d=p),p=e[t],f=h?h.sub(p)._unit()._perp():g,g=g||f;let _=g.add(f);0===_.x&&0===_.y||_._unit();const m=g.x*f.x+g.y*f.y,y=_.x*f.x+_.y*f.y,b=0!==y?1/y:1/0,S=2*Math.sqrt(2-2*y),R=y<Mp&&d&&h,v=g.x*f.y-g.y*f.x>0;if(R&&t>l){const e=p.dist(d);if(e>2*c){const t=p.sub(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,g,0,0,u),d=t}}const x=d&&h;let E=x?r:n?"butt":o;if(x&&"round"===E&&(b<s?E="miter":b<=2&&(E="fakeround")),"miter"===E&&b>i&&(E="bevel"),"bevel"===E&&(b>2&&(E="flipbevel"),b<i&&(E="miter")),d&&this.updateDistance(d,p),"miter"===E)_._mult(b),this.addCurrentVertex(p,_,0,0,u);else if("flipbevel"===E){if(b>100)_=f.mult(-1);else{const e=b*g.add(f).mag()/g.sub(f).mag();_._perp()._mult(e*(v?-1:1))}this.addCurrentVertex(p,_,0,0,u),this.addCurrentVertex(p,_.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(b*b-1),t=v?e:0,r=v?0:e;if(d&&this.addCurrentVertex(p,g,t,r,u),"fakeround"===E){const e=Math.round(180*S/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+m*(m*(3.55645-1.43519*m)-3.2452))*e*e+(.848013+m*(.215638*m-1.06021)))}const o=f.sub(g)._mult(r)._add(g)._unit()._mult(v?-1:1);this.addHalfVertex(p,o.x,o.y,!1,v,0,u)}}h&&this.addCurrentVertex(p,f,-t,-r,u)}else if("butt"===E)this.addCurrentVertex(p,_,0,0,u);else if("square"===E){const e=d?1:-1;d||this.addCurrentVertex(p,_,e,e,u),this.addCurrentVertex(p,_,0,0,u),d&&this.addCurrentVertex(p,_,e,e,u)}else"round"===E&&(d&&(this.addCurrentVertex(p,g,0,0,u),this.addCurrentVertex(p,g,1,1,u,!0)),h&&(this.addCurrentVertex(p,f,-1,-1,u,!0),this.addCurrentVertex(p,f,0,0,u)));if(R&&t<a-1){const e=p.dist(h);if(e>2*c){const t=p.add(h.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,f,0,0,u),p=t}}}}addCurrentVertex(e,t,r,o,i,s=!1){const n=t.y*o-t.x,a=-t.y-t.x*o;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,s,!1,r,i),this.addHalfVertex(e,n,a,s,!0,-o,i)}addHalfVertex({x:e,y:t},r,o,i,s,n,a){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(s?1:0),Math.round(63*r)+128,Math.round(63*o)+128,1+(0===n?0:n<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),s?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Zi(Tp,"LineBucket",{omit:["layers","patternFeatures"]});const wp=new Is({"line-cap":new Ls(et.layout_line["line-cap"]),"line-join":new Ls(et.layout_line["line-join"]),"line-miter-limit":new Cs(et.layout_line["line-miter-limit"]),"line-round-limit":new Cs(et.layout_line["line-round-limit"]),"line-sort-key":new Ls(et.layout_line["line-sort-key"])});var Fp={paint:new Is({"line-opacity":new Ls(et.paint_line["line-opacity"]),"line-color":new Ls(et.paint_line["line-color"]),"line-translate":new Cs(et.paint_line["line-translate"]),"line-translate-anchor":new Cs(et.paint_line["line-translate-anchor"]),"line-width":new Ls(et.paint_line["line-width"]),"line-gap-width":new Ls(et.paint_line["line-gap-width"]),"line-offset":new Ls(et.paint_line["line-offset"]),"line-blur":new Ls(et.paint_line["line-blur"]),"line-dasharray":new Ls(et.paint_line["line-dasharray"]),"line-pattern":new Ls(et.paint_line["line-pattern"]),"line-gradient":new Ds(et.paint_line["line-gradient"]),"line-trim-offset":new Cs(et.paint_line["line-trim-offset"])}),layout:wp};const Bp=new class extends Ls{possiblyEvaluate(e,t){return t=new Rs(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,o){return t=D({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,o)}}(Fp.paint.properties["line-width"].specification);function Cp(e,t){return t>0?t+2*e:e}Bp.useIntegerZoom=!0;const Lp=zs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dp=zs([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Ip=zs([{name:"a_projected_pos",components:4,type:"Float32"}],4);zs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Op=zs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Pp=zs([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);zs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ap=zs([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kp=zs([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);zs([{name:"triangle",components:3,type:"Uint16"}]),zs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),zs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),zs([{type:"Float32",name:"offsetX"}]),zs([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var zp=24;const Np=128;function jp(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Rs(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:o}=r;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let s=i;for(;s<t.length&&t[s]<e+1;)s++;s=Math.min(t.length-1,s);const n=t[i],a=t[s];return"composite"===r.kind?{kind:"composite",minZoom:n,maxZoom:a,interpolationType:o}:{kind:"camera",minZoom:n,maxZoom:a,minSize:r.evaluate(new Rs(n)),maxSize:r.evaluate(new Rs(a)),interpolationType:o}}}function Up(e,{uSize:t,uSizeT:r},{lowerSize:o,upperSize:i}){return"source"===e.kind?o/Np:"composite"===e.kind?Lr(o/Np,i/Np,r):t}function Gp(e,t){let r=0,o=0;if("constant"===e.kind)o=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:s,maxZoom:n}=e,a=i?w(Qr.interpolationFactor(i,t,s,n),0,1):0;"camera"===e.kind?o=Lr(e.minSize,e.maxSize,a):r=a}return{uSizeT:r,uSize:o}}var Wp=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Np,evaluateSizeForFeature:Up,evaluateSizeForZoom:Gp,getSizeData:jp});function qp(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const o=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===o?e=e.toLocaleUpperCase():"lowercase"===o&&(e=e.toLocaleLowerCase()),Ss.applyArabicShaping&&(e=Ss.applyArabicShaping(e)),e}(e.text,t,r)})),e}const $p={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Vp(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}function Hp(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}var Kp=Jp,Zp=function(e,t,r,o,i){var s,n,a=8*i-o-1,l=(1<<a)-1,c=l>>1,u=-7,p=r?i-1:0,d=r?-1:1,h=e[t+p];for(p+=d,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+e[t+p],p+=d,u-=8);for(n=s&(1<<-u)-1,s>>=-u,u+=o;u>0;n=256*n+e[t+p],p+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return n?NaN:1/0*(h?-1:1);n+=Math.pow(2,o),s-=c}return(h?-1:1)*n*Math.pow(2,s-o)},Xp=function(e,t,r,o,i,s){var n,a,l,c=8*s-i-1,u=(1<<c)-1,p=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:s-1,g=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,n=u):(n=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-n))<1&&(n--,l*=2),(t+=n+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(n++,l/=2),n+p>=u?(a=0,n=u):n+p>=1?(a=(t*l-1)*Math.pow(2,i),n+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),n=0));i>=8;e[r+h]=255&a,h+=g,a/=256,i-=8);for(n=n<<i|a,c+=i;c>0;e[r+h]=255&n,h+=g,n/=256,c-=8);e[r+h-g]|=128*f};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Jp(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Jp.Varint=0,Jp.Fixed64=1,Jp.Bytes=2,Jp.Fixed32=5;var Yp=4294967296,Qp=1/Yp,ed="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function td(e){return e.type===Jp.Bytes?e.readVarint()+e.pos:e.pos+1}function rd(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function od(e,t,r){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(o);for(var i=r.pos-1;i>=e;i--)r.buf[i+o]=r.buf[i]}function id(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function sd(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function nd(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function ad(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function ld(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function cd(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function ud(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function pd(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function dd(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function hd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function gd(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function fd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Jp.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),i=o>>3,s=this.pos;this.type=7&o,e(i,t,this),this.pos===s&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=hd(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=fd(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=hd(this.buf,this.pos)+hd(this.buf,this.pos+4)*Yp;return this.pos+=8,e},readSFixed64:function(){var e=hd(this.buf,this.pos)+fd(this.buf,this.pos+4)*Yp;return this.pos+=8,e},readFloat:function(){var e=Zp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Zp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,o=this.buf;return t=127&(r=o[this.pos++]),r<128?t:(t|=(127&(r=o[this.pos++]))<<7,r<128?t:(t|=(127&(r=o[this.pos++]))<<14,r<128?t:(t|=(127&(r=o[this.pos++]))<<21,r<128?t:function(e,t,r){var o,i,s=r.buf;if(o=(112&(i=s[r.pos++]))>>4,i<128)return rd(e,o,t);if(o|=(127&(i=s[r.pos++]))<<3,i<128)return rd(e,o,t);if(o|=(127&(i=s[r.pos++]))<<10,i<128)return rd(e,o,t);if(o|=(127&(i=s[r.pos++]))<<17,i<128)return rd(e,o,t);if(o|=(127&(i=s[r.pos++]))<<24,i<128)return rd(e,o,t);if(o|=(1&(i=s[r.pos++]))<<31,i<128)return rd(e,o,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=o[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ed?function(e,t,r){return ed.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var o="",i=t;i<r;){var s,n,a,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(s=e[i+1]))&&(c=(31&l)<<6|63&s)<=127&&(c=null):3===u?(n=e[i+2],128==(192&(s=e[i+1]))&&128==(192&n)&&((c=(15&l)<<12|(63&s)<<6|63&n)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(n=e[i+2],a=e[i+3],128==(192&(s=e[i+1]))&&128==(192&n)&&128==(192&a)&&((c=(15&l)<<18|(63&s)<<12|(63&n)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,o+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),o+=String.fromCharCode(c),i+=u}return o}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Jp.Bytes)return e.push(this.readVarint(t));var r=td(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Jp.Bytes)return e.push(this.readSVarint());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Jp.Bytes)return e.push(this.readBoolean());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Jp.Bytes)return e.push(this.readFloat());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Jp.Bytes)return e.push(this.readDouble());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Jp.Bytes)return e.push(this.readFixed32());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Jp.Bytes)return e.push(this.readSFixed32());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Jp.Bytes)return e.push(this.readFixed64());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Jp.Bytes)return e.push(this.readSFixed64());var t=td(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Jp.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jp.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jp.Fixed32)this.pos+=4;else{if(t!==Jp.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),gd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),gd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),gd(this.buf,-1&e,this.pos),gd(this.buf,Math.floor(e*Qp),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),gd(this.buf,-1&e,this.pos),gd(this.buf,Math.floor(e*Qp),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,o;if(e>=0?(r=e%4294967296|0,o=e/4294967296|0):(o=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,o=o+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(o,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var o,i,s=0;s<t.length;s++){if((o=t.charCodeAt(s))>55295&&o<57344){if(!i){o>56319||s+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=o;continue}if(o<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=o;continue}o=i-55296<<10|o-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);o<128?e[r++]=o:(o<2048?e[r++]=o>>6|192:(o<65536?e[r++]=o>>12|224:(e[r++]=o>>18|240,e[r++]=o>>12&63|128),e[r++]=o>>6&63|128),e[r++]=63&o|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&od(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Xp(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Xp(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var o=this.pos-r;o>=128&&od(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,r){this.writeTag(e,Jp.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,id,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,sd,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,ld,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,nd,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,ad,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,cd,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ud,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,pd,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,dd,t)},writeBytesField:function(e,t){this.writeTag(e,Jp.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Jp.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Jp.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Jp.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Jp.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Jp.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Jp.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Jp.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Jp.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Jp.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var _d=d(Kp);const md=3;function yd(e,t,r){t.glyphs=[],1===e&&r.readMessage(bd,t)}function bd(e,t,r){if(3===e){const{id:e,bitmap:o,width:i,height:s,left:n,top:a,advance:l}=r.readMessage(Sd,{});t.glyphs.push({id:e,bitmap:new zc({width:i+2*md,height:s+2*md},o),metrics:{width:i,height:s,left:n,top:a,advance:l}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function Sd(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}const Rd=md;function vd(e){let t=0,r=0;for(const o of e)t+=o.w*o.h,r=Math.max(r,o.w);e.sort(((e,t)=>t.h-e.h));const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let i=0,s=0;for(const t of e)for(let e=o.length-1;e>=0;e--){const r=o[e];if(!(t.w>r.w||t.h>r.h)){if(t.x=r.x,t.y=r.y,s=Math.max(s,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===r.w&&t.h===r.h){const t=o.pop();e<o.length&&(o[e]=t)}else t.h===r.h?(r.x+=t.w,r.w-=t.w):t.w===r.w?(r.y+=t.h,r.h-=t.h):(o.push({x:r.x+t.w,y:r.y,w:r.w-t.w,h:t.h}),r.y+=t.h,r.h-=t.h);break}}return{w:i,h:s,fill:t/(i*s)||0}}const xd=1;class Ed{constructor(e,{pixelRatio:t,version:r,stretchX:o,stretchY:i,content:s}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=o,this.stretchY=i,this.content=s,this.version=r}get tl(){return[this.paddedRect.x+xd,this.paddedRect.y+xd]}get br(){return[this.paddedRect.x+this.paddedRect.w-xd,this.paddedRect.y+this.paddedRect.h-xd]}get displaySize(){return[(this.paddedRect.w-2*xd)/this.pixelRatio,(this.paddedRect.h-2*xd)/this.pixelRatio]}}class Md{constructor(e,t){const r={},o={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,r,i),this.addImages(t,o,i);const{w:s,h:n}=vd(i),a=new Nc({width:s||1,height:n||1});for(const t in e){const o=e[t],i=r[t].paddedRect;Nc.copy(o.data,a,{x:0,y:0},{x:i.x+xd,y:i.y+xd},o.data)}for(const e in t){const r=t[e],i=o[e].paddedRect,s=i.x+xd,n=i.y+xd,l=r.data.width,c=r.data.height;Nc.copy(r.data,a,{x:0,y:0},{x:s,y:n},r.data),Nc.copy(r.data,a,{x:0,y:c-1},{x:s,y:n-1},{width:l,height:1}),Nc.copy(r.data,a,{x:0,y:0},{x:s,y:n+c},{width:l,height:1}),Nc.copy(r.data,a,{x:l-1,y:0},{x:s-1,y:n},{width:1,height:c}),Nc.copy(r.data,a,{x:0,y:0},{x:s+l,y:n},{width:1,height:c})}this.image=a,this.iconPositions=r,this.patternPositions=o}addImages(e,t,r){for(const o in e){const i=e[o],s={x:0,y:0,w:i.data.width+2*xd,h:i.data.height+2*xd};r.push(s),t[o]=new Ed(s,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(o)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[o,i]=e.tl;r.update(t.data,void 0,{x:o,y:i})}}Zi(Ed,"ImagePosition"),Zi(Md,"ImageAtlas");const Td={horizontal:1,vertical:2,horizontalOnly:3},wd=-17;class Fd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new Fd;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new Fd;return t.imageName=e,t}}class Bd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new Bd;for(let o=0;o<e.sections.length;o++){const i=e.sections[o];i.image?r.addImageSection(i):r.addTextSection(i,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let r="";for(let o=0;o<e.length;o++){const i=e.charCodeAt(o+1)||null,s=e.charCodeAt(o-1)||null;r+=!t&&(i&&ss(i)&&!$p[e[o+1]]||s&&ss(s)&&!$p[e[o-1]])||!$p[e[o]]?e[o]:$p[e[o]]}return r}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&Ld[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&Ld[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new Bd;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Fd.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void q("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Fd.forImage(t)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cd(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g){const f=Bd.fromFeature(e,i);p===Td.vertical&&f.verticalizePunctuation(d);let _=[];const m=function(e,t,r,o,i,s){if(!e)return[];const n=[],a=function(e,t,r,o,i,s){let n=0;for(let r=0;r<e.length();r++){const a=e.getSection(r);n+=Id(e.getCharCode(r),a,o,i,t,s)}return n/Math.max(1,Math.ceil(n/r))}(e,t,r,o,i,s),l=e.text.indexOf("")>=0;let c=0;for(let r=0;r<e.length();r++){const p=e.getSection(r),d=e.getCharCode(r);if(Ld[d]||(c+=Id(d,p,o,i,t,s)),r<e.length()-1){const t=!((u=d)<11904||!(es["Bopomofo Extended"](u)||es.Bopomofo(u)||es["CJK Compatibility Forms"](u)||es["CJK Compatibility Ideographs"](u)||es["CJK Compatibility"](u)||es["CJK Radicals Supplement"](u)||es["CJK Strokes"](u)||es["CJK Symbols and Punctuation"](u)||es["CJK Unified Ideographs Extension A"](u)||es["CJK Unified Ideographs"](u)||es["Enclosed CJK Letters and Months"](u)||es["Halfwidth and Fullwidth Forms"](u)||es.Hiragana(u)||es["Ideographic Description Characters"](u)||es["Kangxi Radicals"](u)||es["Katakana Phonetic Extensions"](u)||es.Katakana(u)||es["Vertical Forms"](u)||es["Yi Radicals"](u)||es["Yi Syllables"](u)));(Dd[d]||t||p.imageName)&&n.push(Ad(r+1,c,a,n,Pd(d,e.getCharCode(r+1),t&&l),!1))}}var u;return kd(Ad(e.length(),c,a,n,0,!0))}(f,c,s,t,o,h),{processBidirectionalText:y,processStyledBidirectionalText:b}=Ss;if(y&&1===f.sections.length){const e=y(f.toString(),m);for(const t of e){const e=new Bd;e.text=t,e.sections=f.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);_.push(e)}}else if(b){const e=b(f.text,f.sectionIndex,m);for(const t of e){const e=new Bd;e.text=t[0],e.sectionIndex=t[1],e.sections=f.sections,_.push(e)}}else _=function(e,t){const r=[],o=e.text;let i=0;for(const o of t)r.push(e.substring(i,o)),i=o;return i<o.length&&r.push(e.substring(i,o.length)),r}(f,m);const S=[],R={positionedLines:S,text:f.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,o,i,s,n,a,l,c,u,p){let d=0,h=0,g=0;const f="right"===a?1:"left"===a?0:.5;let _=!1;for(const e of i){const r=e.getSections();for(const e of r){if(e.imageName)continue;const r=t[e.fontStack];if(r&&(_=void 0!==r.ascender&&void 0!==r.descender,!_))break}if(!_)break}let m=0;for(const n of i){n.trim();const i=n.getMaxScale(),a=(i-1)*zp,b={positionedGlyphs:[],lineOffset:0};e.positionedLines[m]=b;const S=b.positionedGlyphs;let R=0;if(!n.length()){h+=s,++m;continue}let v=0,x=0;for(let s=0;s<n.length();s++){const a=n.getSection(s),g=n.getSectionIndex(s),f=n.getCharCode(s);let m=a.scale,b=null,E=null,M=null,T=zp,w=0;const F=!(l===Td.horizontal||!u&&!is(f)||u&&(Ld[f]||(y=f,es.Arabic(y)||es["Arabic Supplement"](y)||es["Arabic Extended-A"](y)||es["Arabic Presentation Forms-A"](y)||es["Arabic Presentation Forms-B"](y))));if(a.imageName){const t=o[a.imageName];if(!t)continue;M=a.imageName,e.iconsInText=e.iconsInText||!0,E=t.paddedRect;const r=t.displaySize;m=m*zp/p,b={width:r[0],height:r[1],left:xd,top:-Rd,advance:F?r[1]:r[0],localGlyph:!1},w=_?-b.height*m:wd+i*zp-r[1]*m,T=b.advance;const s=(F?r[0]:r[1])*m-zp*i;s>0&&s>R&&(R=s)}else{const e=r[a.fontStack];if(!e)continue;e[f]&&(E=e[f]);const o=t[a.fontStack];if(!o)continue;const s=o.glyphs[f];if(!s)continue;if(b=s.metrics,T=8203!==f?zp:0,_){const e=void 0!==o.ascender?Math.abs(o.ascender):0,t=void 0!==o.descender?Math.abs(o.descender):0,r=(e+t)*m;v<r&&(v=r,x=(e-t)/2*m),w=-e*m}else w=wd+(i-m)*zp}F?(e.verticalizable=!0,S.push({glyph:f,imageName:M,x:d,y:h+w,vertical:F,scale:m,localGlyph:b.localGlyph,fontStack:a.fontStack,sectionIndex:g,metrics:b,rect:E}),d+=T*m+c):(S.push({glyph:f,imageName:M,x:d,y:h+w,vertical:F,scale:m,localGlyph:b.localGlyph,fontStack:a.fontStack,sectionIndex:g,metrics:b,rect:E}),d+=b.advance*m+c)}0!==S.length&&(g=Math.max(d-c,g),_?Nd(S,f,R,x,s*i/2):Nd(S,f,R,0,s/2)),d=0;const E=s*i+R;b.lineOffset=Math.max(R,a),h+=E,++m}var y;const b=h,{horizontalAlign:S,verticalAlign:R}=zd(n);(function(e,t,r,o,i,s){const n=(t-r)*i,a=-s*o;for(const t of e)for(const e of t.positionedGlyphs)e.x+=n,e.y+=a})(e.positionedLines,f,S,R,g,b),e.top+=-R*b,e.bottom=e.top+b,e.left+=-S*g,e.right=e.left+g,e.hasBaseline=_}(R,t,r,o,_,n,a,l,p,c,d,g),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(S)&&R}const Ld={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Dd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Id(e,t,r,o,i,s){if(t.imageName){const e=o[t.imageName];return e?e.displaySize[0]*t.scale*zp/s+i:0}{const o=r[t.fontStack],s=o&&o.glyphs[e];return s?s.metrics.advance*t.scale+i:0}}function Od(e,t,r,o){const i=Math.pow(e-t,2);return o?e<t?i/2:2*i:i+Math.abs(r)*r}function Pd(e,t,r){let o=0;return 10===e&&(o-=1e4),r&&(o+=150),40!==e&&65288!==e||(o+=50),41!==t&&65289!==t||(o+=50),o}function Ad(e,t,r,o,i,s){let n=null,a=Od(t,r,i,s);for(const e of o){const o=Od(t-e.x,r,i,s)+e.badness;o<=a&&(n=e,a=o)}return{index:e,x:t,priorBreak:n,badness:a}}function kd(e){return e?kd(e.priorBreak).concat(e.index):[]}function zd(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Nd(e,t,r,o,i){if(!(t||r||o||i))return;const s=e.length-1,n=e[s],a=(n.x+n.metrics.advance*n.scale)*t;for(let t=0;t<=s;t++)e[t].x-=a,e[t].y+=r+o+i}function jd(e,t,r){const{horizontalAlign:o,verticalAlign:i}=zd(r),s=t[0]-e.displaySize[0]*o,n=t[1]-e.displaySize[1]*i;return{image:e,top:n,bottom:n+e.displaySize[1],left:s,right:s+e.displaySize[0]}}function Ud(e,t,r,o,i,s){const n=e.image;let a;if(n.content){const e=n.content,t=n.pixelRatio||1;a=[e[0]/t,e[1]/t,n.displaySize[0]-e[2]/t,n.displaySize[1]-e[3]/t]}const l=t.left*s,c=t.right*s;let u,p,d,h;"width"===r||"both"===r?(h=i[0]+l-o[3],p=i[0]+c+o[1]):(h=i[0]+(l+c-n.displaySize[0])/2,p=h+n.displaySize[0]);const g=t.top*s,f=t.bottom*s;return"height"===r||"both"===r?(u=i[1]+g-o[0],d=i[1]+f+o[2]):(u=i[1]+(g+f-n.displaySize[1])/2,d=u+n.displaySize[1]),{image:n,top:u,right:p,bottom:d,left:h,collisionPadding:a}}class Gd extends y{constructor(e,t,r,o,i){super(e,t),this.angle=o,this.z=r,void 0!==i&&(this.segment=i)}clone(){return new Gd(this.x,this.y,this.z,this.angle,this.segment)}}function Wd(e,t,r,o,i){if(void 0===t.segment)return!0;let s=t,n=t.segment+1,a=0;for(;a>-r/2;){if(n--,n<0)return!1;a-=e[n].dist(s),s=e[n]}a+=e[n].dist(e[n+1]),n++;const l=[];let c=0;for(;a<r/2;){const t=e[n],r=e[n+1];if(!r)return!1;let s=e[n-1].angleTo(t)-t.angleTo(r);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:s}),c+=s;a-l[0].distance>o;)c-=l.shift().angleDelta;if(c>i)return!1;n++,a+=t.dist(r)}return!0}function qd(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function $d(e,t,r){return e?.6*t*r:0}function Vd(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Hd(e,t,r,o,i,s){const n=$d(r,i,s),a=Vd(r,o)*s;let l=0;const c=qd(e)/2;for(let r=0;r<e.length-1;r++){const o=e[r],i=e[r+1],s=o.dist(i);if(l+s>c){const u=(c-l)/s,p=Lr(o.x,i.x,u),d=Lr(o.y,i.y,u),h=new Gd(p,d,0,i.angleTo(o),r);return!n||Wd(e,h,a,n,t)?h:void 0}l+=s}}function Kd(e,t,r,o,i,s,n,a,l){const c=$d(o,s,n),u=Vd(o,i),p=u*n,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-p<t/4&&(t=p+t/4),Zd(e,d?t/2*a%t:(u/2+2*s)*n*a%t,t,c,r,p,d,!1,l)}function Zd(e,t,r,o,i,s,n,a,l){const c=s/2,u=qd(e);let p=0,d=t-r,h=[];for(let t=0;t<e.length-1;t++){const n=e[t],a=e[t+1],g=n.dist(a),f=a.angleTo(n);for(;d+r<p+g;){d+=r;const _=(d-p)/g,m=Lr(n.x,a.x,_),y=Lr(n.y,a.y,_);if(m>=0&&m<l&&y>=0&&y<l&&d-c>=0&&d+c<=u){const r=new Gd(m,y,0,f,t);r._round(),o&&!Wd(e,r,s,o,i)||h.push(r)}}p+=g}return a||h.length||n||(h=Zd(e,p/2,r,o,i,s,n,!0,l)),h}function Xd(e,t,r,o,i){const s=[];for(let n=0;n<e.length;n++){const a=e[n];let l;for(let e=0;e<a.length-1;e++){let n=a[e],c=a[e+1];n.x<t&&c.x<t||(n.x<t?n=new y(t,n.y+(t-n.x)/(c.x-n.x)*(c.y-n.y))._round():c.x<t&&(c=new y(t,n.y+(t-n.x)/(c.x-n.x)*(c.y-n.y))._round()),n.y<r&&c.y<r||(n.y<r?n=new y(n.x+(r-n.y)/(c.y-n.y)*(c.x-n.x),r)._round():c.y<r&&(c=new y(n.x+(r-n.y)/(c.y-n.y)*(c.x-n.x),r)._round()),n.x>=o&&c.x>=o||(n.x>=o?n=new y(o,n.y+(o-n.x)/(c.x-n.x)*(c.y-n.y))._round():c.x>=o&&(c=new y(o,n.y+(o-n.x)/(c.x-n.x)*(c.y-n.y))._round()),n.y>=i&&c.y>=i||(n.y>=i?n=new y(n.x+(i-n.y)/(c.y-n.y)*(c.x-n.x),i)._round():c.y>=i&&(c=new y(n.x+(i-n.y)/(c.y-n.y)*(c.x-n.x),i)._round()),l&&n.equals(l[l.length-1])||(l=[n],s.push(l)),l.push(c)))))}}return s}Zi(Gd,"Anchor");const Jd=1e20;function Yd(e,t,r,o,i,s,n,a,l){for(let c=t;c<t+o;c++)Qd(e,r*s+c,s,i,n,a,l);for(let c=r;c<r+i;c++)Qd(e,c*s+t,1,o,n,a,l)}function Qd(e,t,r,o,i,s,n){s[0]=0,n[0]=-Jd,n[1]=Jd,i[0]=e[t];for(let a=1,l=0,c=0;a<o;a++){i[a]=e[t+a*r];const o=a*a;do{const e=s[l];c=(i[a]-i[e]+o-e*e)/(a-e)/2}while(c<=n[l]&&--l>-1);l++,s[l]=a,n[l]=c,n[l+1]=Jd}for(let a=0,l=0;a<o;a++){for(;n[l+1]<a;)l++;const o=s[l],c=a-o;e[t+a*r]=i[o]+c*c}}const eh=2,th={none:0,ideographs:1,all:2};class rh{constructor(e,t,r){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const t in e)for(const o of e[t])r.push({stack:t,id:o});C(r,(({stack:e,id:t},r)=>{let o=this.entries[e];o||(o=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=o.glyphs[t];if(void 0!==i)return void r(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(o,e,t),i)return o.glyphs[t]=i,void r(null,{stack:e,id:t,glyph:i});const s=Math.floor(t/256);if(256*s>65535)return void r(new Error("glyphs > 65535 not supported"));if(o.ranges[s])return void r(null,{stack:e,id:t,glyph:i});let n=o.requests[s];n||(n=o.requests[s]=[],rh.loadGlyphRange(e,s,this.url,this.requestManager,((e,t)=>{if(t){o.ascender=t.ascender,o.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(o.glyphs[+e]=t.glyphs[+e]);o.ranges[s]=!0}for(const r of n)r(e,t);delete o.requests[s]}))),n.push(((o,i)=>{o?r(o):i&&r(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:o,glyph:i}of r)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[o]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==th.none&&(this.localGlyphMode===th.all?!!this.localFontFamily:!!this.localFontFamily&&(es["CJK Unified Ideographs"](e)||es["Hangul Syllables"](e)||es.Hiragana(e)||es.Katakana(e)||es["CJK Symbols and Punctuation"](e)))}_tinySDF(e,t,r){const o=this.localFontFamily;if(!o||!this._doesCharSupportLocalGlyph(r))return;let i=e.tinySDF;if(!i){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),i=e.tinySDF=new rh.TinySDF({fontFamily:o,fontWeight:r,fontSize:24*eh,buffer:3*eh,radius:8*eh}),i.fontWeight=r}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const s=String.fromCharCode(r),{data:n,width:a,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:p,glyphTop:d,glyphAdvance:h}=i.draw(s);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new zc({width:a,height:l},n),metrics:{width:c/eh,height:u/eh,left:p/eh,top:d/eh-27,advance:h/eh,localGlyph:!0}}}}rh.loadGlyphRange=function(e,t,r,o,i){const s=256*t,n=s+255,a=o.transformRequest(o.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",`${s}-${n}`),le.Glyphs);de(a,((e,t)=>{if(e)i(e);else if(t){const e={},r=function(e){return new _d(e).readFields(yd,{})}(t);for(const t of r.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}}))},rh.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:o=.25,fontFamily:i="sans-serif",fontWeight:s="normal",fontStyle:n="normal"}={}){this.buffer=t,this.cutoff=o,this.radius=r;const a=this.size=e+4*t,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${n} ${s} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:o,actualBoundingBoxLeft:i,actualBoundingBoxRight:s}=this.ctx.measureText(e),n=Math.ceil(r),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-i))),l=Math.min(this.size-this.buffer,n+Math.ceil(o)),c=a+2*this.buffer,u=l+2*this.buffer,p=Math.max(c*u,0),d=new Uint8ClampedArray(p),h={data:d,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:n,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return h;const{ctx:g,buffer:f,gridInner:_,gridOuter:m}=this;g.clearRect(f,f,a,l),g.fillText(e,f,f+n);const y=g.getImageData(f,f,a,l);m.fill(Jd,0,p),_.fill(0,0,p);for(let e=0;e<l;e++)for(let t=0;t<a;t++){const r=y.data[4*(e*a+t)+3]/255;if(0===r)continue;const o=(e+f)*c+t+f;if(1===r)m[o]=0,_[o]=Jd;else{const e=.5-r;m[o]=e>0?e*e:0,_[o]=e<0?e*e:0}}Yd(m,0,0,c,u,c,this.f,this.v,this.z),Yd(_,f,f,a,l,c,this.f,this.v,this.z);for(let e=0;e<p;e++){const t=Math.sqrt(m[e])-Math.sqrt(_[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return h}};const oh=xd;function ih(e,t,r,o){const i=[],s=e.image,n=s.pixelRatio,a=s.paddedRect.w-2*oh,l=s.paddedRect.h-2*oh,c=e.right-e.left,u=e.bottom-e.top,p=s.stretchX||[[0,a]],d=s.stretchY||[[0,l]],h=(e,t)=>e+t[1]-t[0],g=p.reduce(h,0),f=d.reduce(h,0),_=a-g,m=l-f;let b=0,S=g,R=0,v=f,x=0,E=_,M=0,T=m;if(s.content&&o){const e=s.content;b=sh(p,0,e[0]),R=sh(d,0,e[1]),S=sh(p,e[0],e[2]),v=sh(d,e[1],e[3]),x=e[0]-b,M=e[1]-R,E=e[2]-e[0]-S,T=e[3]-e[1]-v}const w=(o,i,a,l)=>{const p=ah(o.stretch-b,S,c,e.left),d=lh(o.fixed-x,E,o.stretch,g),h=ah(i.stretch-R,v,u,e.top),_=lh(i.fixed-M,T,i.stretch,f),m=ah(a.stretch-b,S,c,e.left),w=lh(a.fixed-x,E,a.stretch,g),F=ah(l.stretch-R,v,u,e.top),B=lh(l.fixed-M,T,l.stretch,f),C=new y(p,h),L=new y(m,h),D=new y(m,F),I=new y(p,F),O=new y(d/n,_/n),P=new y(w/n,B/n),A=t*Math.PI/180;if(A){const e=Math.sin(A),t=Math.cos(A),r=[t,-e,e,t];C._matMult(r),L._matMult(r),I._matMult(r),D._matMult(r)}const k=o.stretch+o.fixed,z=i.stretch+i.fixed;return{tl:C,tr:L,bl:I,br:D,tex:{x:s.paddedRect.x+oh+k,y:s.paddedRect.y+oh+z,w:a.stretch+a.fixed-k,h:l.stretch+l.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:P,minFontScaleX:E/n/c,minFontScaleY:T/n/u,isSDF:r}};if(o&&(s.stretchX||s.stretchY)){const e=nh(p,_,g),t=nh(d,m,f);for(let r=0;r<e.length-1;r++){const o=e[r],s=e[r+1];for(let e=0;e<t.length-1;e++)i.push(w(o,t[e],s,t[e+1]))}}else i.push(w({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:l+1}));return i}function sh(e,t,r){let o=0;for(const i of e)o+=Math.max(t,Math.min(r,i[1]))-Math.max(t,Math.min(r,i[0]));return o}function nh(e,t,r){const o=[{fixed:-oh,stretch:0}];for(const[t,r]of e){const e=o[o.length-1];o.push({fixed:t-e.stretch,stretch:e.stretch}),o.push({fixed:t-e.stretch,stretch:e.stretch+(r-t)})}return o.push({fixed:t+oh,stretch:r}),o}function ah(e,t,r,o){return e/t*r+o}function lh(e,t,r,o){return e-t*r/o}function ch(e,t,r,o){const i=t+e.positionedLines[o].lineOffset;return 0===o?r+i/2:r+(i+(t+e.positionedLines[o-1].lineOffset))/2}class uh{constructor(e=[],t=ph){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,o=t[e];for(;e>0;){const i=e-1>>1,s=t[i];if(r(o,s)>=0)break;t[e]=s,e=i}t[e]=o}_down(e){const{data:t,compare:r}=this,o=this.length>>1,i=t[e];for(;e<o;){let o=1+(e<<1),s=t[o];const n=o+1;if(n<this.length&&r(t[n],s)<0&&(o=n,s=t[n]),r(s,i)>=0)break;t[e]=s,e=o}t[e]=i}}function ph(e,t){return e<t?-1:e>t?1:0}function dh(e,t=1,r=!1){let o=1/0,i=1/0,s=-1/0,n=-1/0;const a=e[0];for(let e=0;e<a.length;e++){const t=a[e];(!e||t.x<o)&&(o=t.x),(!e||t.y<i)&&(i=t.y),(!e||t.x>s)&&(s=t.x),(!e||t.y>n)&&(n=t.y)}const l=Math.min(s-o,n-i);let c=l/2;const u=new uh([],hh);if(0===l)return new y(o,i);for(let t=o;t<s;t+=l)for(let r=i;r<n;r+=l)u.push(new gh(t+c,r+c,c,e));let p=function(e){let t=0,r=0,o=0;const i=e[0];for(let e=0,s=i.length,n=s-1;e<s;n=e++){const s=i[e],a=i[n],l=s.x*a.y-a.x*s.y;r+=(s.x+a.x)*l,o+=(s.y+a.y)*l,t+=3*l}return new gh(r/t,o/t,0,e)}(e),d=u.length;for(;u.length;){const r=u.pop();(r.d>p.d||!p.d)&&(p=r),r.max-p.d<=t||(c=r.h/2,u.push(new gh(r.p.x-c,r.p.y-c,c,e)),u.push(new gh(r.p.x+c,r.p.y-c,c,e)),u.push(new gh(r.p.x-c,r.p.y+c,c,e)),u.push(new gh(r.p.x+c,r.p.y+c,c,e)),d+=4)}return p.p}function hh(e,t){return t.max-e.max}class gh{constructor(e,t,r,o){this.p=new y(e,t),this.h=r,this.d=function(e,t){let r=!1,o=1/0;for(let i=0;i<t.length;i++){const s=t[i];for(let t=0,i=s.length,n=i-1;t<i;n=t++){const i=s[t],a=s[n];i.y>e.y!=a.y>e.y&&e.x<(a.x-i.x)*(e.y-i.y)/(a.y-i.y)+i.x&&(r=!r),o=Math.min(o,yc(e,i,a))}}return(r?1:-1)*Math.sqrt(o)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}}const fh=7,_h=Number.POSITIVE_INFINITY,mh=Math.sqrt(2);function yh(e,[t,r]){let o=0,i=0;if(r===_h){t<0&&(t=0);const r=t/mh;switch(e){case"top-right":case"top-left":i=r-fh;break;case"bottom-right":case"bottom-left":i=-r+fh;break;case"bottom":i=-t+fh;break;case"top":i=t-fh}switch(e){case"top-right":case"bottom-right":o=-r;break;case"top-left":case"bottom-left":o=r;break;case"left":o=t;break;case"right":o=-t}}else{switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-fh;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+fh}switch(e){case"top-right":case"bottom-right":case"right":o=-t;break;case"top-left":case"bottom-left":case"left":o=t}}return[o,i]}function bh(e,t,r,o,i,s,n,a,l,c){e.createArrays(),e.tilePixelRatio=aa/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,p=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.textSizeData;d.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Rs(t),a),p["text-size"].possiblyEvaluate(new Rs(r),a)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.iconSizeData;d.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Rs(t),a),p["icon-size"].possiblyEvaluate(new Rs(r),a)]}d.layoutTextSize=p["text-size"].possiblyEvaluate(new Rs(l+1),a),d.layoutIconSize=p["icon-size"].possiblyEvaluate(new Rs(l+1),a),d.textMaxSize=p["text-size"].possiblyEvaluate(new Rs(18),a);const h="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),g=u.get("text-size");for(const s of e.features){const l=u.get("text-font").evaluate(s,{},a).join(","),p=g.evaluate(s,{},a),f=d.layoutTextSize.evaluate(s,{},a),_=(d.layoutIconSize.evaluate(s,{},a),{horizontal:{},vertical:void 0}),m=s.text;let y,b=[0,0];if(m){const o=m.toString(),n=u.get("text-letter-spacing").evaluate(s,{},a)*zp,c=u.get("text-line-height").evaluate(s,{},a)*zp,d=rs(o)?n:0,g=u.get("text-anchor").evaluate(s,{},a),y=u.get("text-variable-anchor");if(!y){const e=u.get("text-radial-offset").evaluate(s,{},a);b=e?yh(g,[e*zp,_h]):u.get("text-offset").evaluate(s,{},a).map((e=>e*zp))}let S=h?"center":u.get("text-justify").evaluate(s,{},a);const R="point"===u.get("symbol-placement"),v=R?u.get("text-max-width").evaluate(s,{},a)*zp:1/0,x=s=>{e.allowVerticalPlacement&&ts(o)&&(_.vertical=Cd(m,t,r,i,l,v,c,g,s,d,b,Td.vertical,!0,f,p))};if(!h&&y){const e="auto"===S?y.map((e=>Sh(e))):[S];let o=!1;for(let s=0;s<e.length;s++){const n=e[s];if(!_.horizontal[n])if(o)_.horizontal[n]=_.horizontal[0];else{const e=Cd(m,t,r,i,l,v,c,"center",n,d,b,Td.horizontal,!1,f,p);e&&(_.horizontal[n]=e,o=1===e.positionedLines.length)}}x("left")}else{if("auto"===S&&(S=Sh(g)),R||u.get("text-writing-mode").indexOf("horizontal")>=0||!ts(o)){const e=Cd(m,t,r,i,l,v,c,g,S,d,b,Td.horizontal,!1,f,p);e&&(_.horizontal[S]=e)}x(R?"left":S)}}let S=!1;if(s.icon&&s.icon.name){const t=o[s.icon.name];t&&(y=jd(i[s.icon.name],u.get("icon-offset").evaluate(s,{},a),u.get("icon-anchor").evaluate(s,{},a)),S=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const R=Mh(_.horizontal)||_.vertical;e.iconsInText||(e.iconsInText=!!R&&R.iconsInText),(R||y)&&Rh(e,s,_,y,o,d,f,0,b,S,n,a,c)}s&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Sh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rh(e,t,r,o,i,s,n,a,l,c,u,p,d){let h=s.textMaxSize.evaluate(t,{},p);void 0===h&&(h=n);const g=e.layers[0].layout,f=g.get("icon-offset").evaluate(t,{},p),_=Mh(r.horizontal)||r.vertical,m="globe"===d.name,y=zp,b=n/y,S=e.tilePixelRatio*h/y,v=(C=e.overscaling,e.zoom>18&&C>2&&(C>>=1),Math.max(aa/(512*C),1)*g.get("symbol-spacing")),x=g.get("text-padding")*e.tilePixelRatio,E=g.get("icon-padding")*e.tilePixelRatio,M=R(g.get("text-max-angle")),T="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),w="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),F=g.get("symbol-placement"),B=v/2;var C;const L=g.get("icon-text-fit");let D;o&&"none"!==L&&(e.allowVerticalPlacement&&r.vertical&&(D=Ud(o,r.vertical,L,g.get("icon-text-fit-padding"),f,b)),_&&(o=Ud(o,_,L,g.get("icon-text-fit-padding"),f,b)));const I=(n,a,h)=>{if(a.x<0||a.x>=aa||a.y<0||a.y>=aa)return;let g=null;if(m){const{x:e,y:t,z:r}=d.projectTilePoint(a.x,a.y,h);g={anchor:new Gd(e,t,r,0,void 0),up:d.upVector(h,a.x,a.y)}}!function(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b,S,R,v,x,E){const M=e.addToLineVertexArray(t,o);let T,w,F,B,C,L,D,I=0,O=0,P=0,A=0,k=-1,z=-1;const N={};let j=Ln("");const U=r?r.anchor:t;let G=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,W]=l.layout.get("text-offset").evaluate(S,{},E).map((e=>e*zp)):(G=l.layout.get("text-radial-offset").evaluate(S,{},E)*zp,W=_h),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(g)L=wh(e),a&&(D=wh(a));else{const r=l.layout.get("text-rotate").evaluate(S,{},E)+90;F=Th(c,U,t,u,p,d,e,h,r,f),a&&(B=Th(c,U,t,u,p,d,a,m,r))}}if(s){const o=l.layout.get("icon-rotate").evaluate(S,{},E),i="none"!==l.layout.get("icon-text-fit"),n=ih(s,o,v,i),h=a?ih(a,o,v,i):void 0;w=Th(c,U,t,u,p,d,s,m,o),I=4*n.length;const g=e.iconSizeData;let f=null;"source"===g.kind?(f=[Np*l.layout.get("icon-size").evaluate(S,{},E)],f[0]>xh&&q(`${e.layerIds[0]}: Value for "icon-size" is >= ${vh}. Reduce your "icon-size".`)):"composite"===g.kind&&(f=[Np*R.compositeIconSizes[0].evaluate(S,{},E),Np*R.compositeIconSizes[1].evaluate(S,{},E)],(f[0]>xh||f[1]>xh)&&q(`${e.layerIds[0]}: Value for "icon-size" is >= ${vh}. Reduce your "icon-size".`)),e.addSymbols(e.icon,n,f,b,y,S,!1,r,t,M.lineStartIndex,M.lineLength,-1,x,E),k=e.icon.placedSymbolArray.length-1,h&&(O=4*h.length,e.addSymbols(e.icon,h,f,b,y,S,Td.vertical,r,t,M.lineStartIndex,M.lineLength,-1,x,E),z=e.icon.placedSymbolArray.length-1)}for(const o in i.horizontal){const s=i.horizontal[o];T||(j=Ln(s.text),g?C=wh(s):T=Th(c,U,t,u,p,d,s,h,l.layout.get("text-rotate").evaluate(S,{},E),f));const a=1===s.positionedLines.length;if(P+=Eh(e,r,t,s,n,l,g,S,f,M,i.vertical?Td.horizontal:Td.horizontalOnly,a?Object.keys(i.horizontal):[o],N,k,R,x,E),a)break}i.vertical&&(A+=Eh(e,r,t,i.vertical,n,l,g,S,f,M,Td.vertical,["vertical"],N,z,R,x,E));let $=-1;const V=(e,t)=>e?Math.max(e,t):t;$=V(C,$),$=V(L,$),$=V(D,$);const H=$>-1?1:0;e.glyphOffsetArray.length>=ng.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==S.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,S.sortKey),e.symbolInstances.emplaceBack(U.x,U.y,U.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,k,z,j,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==F?F:e.collisionBoxArray.length,void 0!==F?F+1:e.collisionBoxArray.length,void 0!==w?w:e.collisionBoxArray.length,void 0!==w?w+1:e.collisionBoxArray.length,B||e.collisionBoxArray.length,B?B+1:e.collisionBoxArray.length,u,P,A,I,O,H,0,G,W,$)}(e,a,g,n,r,o,i,D,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,x,T,l,0,E,w,f,t,s,c,u,p)};if("line"===F)for(const i of Xd(t.geometry,0,0,aa,aa)){const t=Kd(i,v,M,r.vertical||_,o,y,S,e.overscaling,aa);for(const r of t)_&&Fh(e,_.text,B,r)||I(i,r,p)}else if("line-center"===F){for(const e of t.geometry)if(e.length>1){const t=Hd(e,M,r.vertical||_,o,y,S);t&&I(e,t,p)}}else if("Polygon"===t.type)for(const e of xu(t.geometry,0)){const t=dh(e,16);I(e[0],new Gd(t.x,t.y,0,0,void 0),p)}else if("LineString"===t.type)for(const e of t.geometry)I(e,new Gd(e[0].x,e[0].y,0,0,void 0),p);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)I([t],new Gd(t.x,t.y,0,0,void 0),p)}const vh=255,xh=vh*Np;function Eh(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_){const m=function(e,t,r,o,i,s,n,a){const l=[];if(0===t.positionedLines.length)return l;const c=o.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,u=function(e){const t=e[0],r=e[1],o=t*r;return o>0?[t,-r]:o<0?[-t,r]:0===t?[r,t]:[r,-t]}(r);let p=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)p-=e.lineOffset;const d=t.positionedLines.length,h=p/d;let g=t.top-r[1];for(let e=0;e<d;++e){const o=t.positionedLines[e];g=ch(t,h,g,e);for(const e of o.positionedGlyphs){if(!e.rect)continue;const o=e.rect||{};let s=Rd+1,p=!0,d=1,h=0;if(e.imageName){const t=n[e.imageName];if(!t)continue;if(t.sdf){q("SDF images are not supported in formatted text and will be ignored.");continue}p=!1,d=t.pixelRatio,s=xd/d}const f=(i||a)&&e.vertical,_=e.metrics.advance*e.scale/2,m=e.metrics,b=e.rect;if(null===b)continue;a&&t.verticalizable&&(h=e.imageName?_-e.metrics.width*e.scale/2:0);const S=i?[e.x+_,e.y]:[0,0];let R=[0,0],v=[0,0],x=!1;i||(f?(v=[e.x+_+u[0],e.y+u[1]-h],x=!0):R=[e.x+_+r[0],e.y+r[1]-h]);const E=b.w*e.scale/(d*(e.localGlyph?eh:1)),M=b.h*e.scale/(d*(e.localGlyph?eh:1));let T,w,F,B;if(f){const t=e.y-g,r=new y(-_,_-t),o=-Math.PI/2,i=new y(...v);T=new y(-_+R[0],R[1]),T._rotateAround(o,r)._add(i),T.x+=-t+_,T.y-=(m.left-s)*e.scale;const n=e.imageName?m.advance*e.scale:zp*e.scale,a=String.fromCharCode(e.glyph);Vp(a)?T.x+=(1-s)*e.scale:Hp(a)?T.x+=n-m.height*e.scale+(-s-1)*e.scale:T.x+=e.imageName||m.width+2*s===b.w&&m.height+2*s===b.h?(n-M)/2:(n-(m.height+2*s)*e.scale)/2,w=new y(T.x,T.y-E),F=new y(T.x+M,T.y),B=new y(T.x+M,T.y-E)}else{const t=(m.left-s)*e.scale-_+R[0],r=(-m.top-s)*e.scale+R[1],o=t+E,i=r+M;T=new y(t,r),w=new y(o,r),F=new y(t,i),B=new y(o,i)}if(c){let e;e=i?new y(0,0):x?new y(u[0],u[1]):new y(r[0],r[1]),T._rotateAround(c,e),w._rotateAround(c,e),F._rotateAround(c,e),B._rotateAround(c,e)}const C=new y(0,0),L=new y(0,0);l.push({tl:T,tr:w,bl:F,br:B,tex:o,writingMode:t.writingMode,glyphOffset:S,sectionIndex:e.sectionIndex,isSDF:p,pixelOffsetTL:C,pixelOffsetBR:L,minFontScaleX:0,minFontScaleY:0})}}return l}(0,o,l,s,n,a,i,e.allowVerticalPlacement),b=e.textSizeData;let S=null;"source"===b.kind?(S=[Np*s.layout.get("text-size").evaluate(a,{},_)],S[0]>xh&&q(`${e.layerIds[0]}: Value for "text-size" is >= ${vh}. Reduce your "text-size".`)):"composite"===b.kind&&(S=[Np*g.compositeTextSizes[0].evaluate(a,{},_),Np*g.compositeTextSizes[1].evaluate(a,{},_)],(S[0]>xh||S[1]>xh)&&q(`${e.layerIds[0]}: Value for "text-size" is >= ${vh}. Reduce your "text-size".`)),e.addSymbols(e.text,m,S,l,n,a,u,t,r,c.lineStartIndex,c.lineLength,h,f,_);for(const t of p)d[t]=e.text.placedSymbolArray.length-1;return 4*m.length}function Mh(e){for(const t in e)return e[t];return null}function Th(e,t,r,o,i,s,n,a,l,c){let u=n.top,p=n.bottom,d=n.left,h=n.right;const g=n.collisionPadding;if(g&&(d-=g[0],u-=g[1],h+=g[2],p+=g[3]),l){const e=new y(d,u),t=new y(h,u),r=new y(d,p),o=new y(h,p),i=R(l);let s=new y(0,0);c&&(s=new y(c[0],c[1])),e._rotateAround(i,s),t._rotateAround(i,s),r._rotateAround(i,s),o._rotateAround(i,s),d=Math.min(e.x,t.x,r.x,o.x),h=Math.max(e.x,t.x,r.x,o.x),u=Math.min(e.y,t.y,r.y,o.y),p=Math.max(e.y,t.y,r.y,o.y)}return e.emplaceBack(t.x,t.y,t.z,r.x,r.y,d,u,h,p,a,o,i,s),e.length-1}function wh(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Fh(e,t,r,o){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(o.dist(e[t])<r)return!0}else i[t]=[];return i[t].push(o),!1}function Bh(e,t){const r=e.fovAboveCenter,o=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-o)/Math.cos(e._pitch),s=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01)),n=Math.sin(e._pitch)*s+i;return Math.min(1.01*n,i*(1/e._horizonShift))}function Ch(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const r=Math.pow(2,-e.z),o=e.x*r,i=(e.x+1)*r,s=e.y*r,n=(e.y+1)*r,a=Hl(o),l=Hl(i),c=Kl(s),u=Kl(n),p=t.project(a,c),d=t.project(l,c),h=t.project(l,u),g=t.project(a,u);let f=Math.min(p.x,d.x,h.x,g.x),_=Math.min(p.y,d.y,h.y,g.y),m=Math.max(p.x,d.x,h.x,g.x),y=Math.max(p.y,d.y,h.y,g.y);const b=r/16;function S(e,r,o,i,s,n){const a=(o+s)/2,l=(i+n)/2,c=t.project(Hl(a),Kl(l)),u=Math.max(0,f-c.x,_-c.y,c.x-m,c.y-y);f=Math.min(f,c.x),m=Math.max(m,c.x),_=Math.min(_,c.y),y=Math.max(y,c.y),u>b&&(S(e,c,o,i,a,l),S(c,r,a,l,s,n))}S(p,d,o,s,i,s),S(d,h,i,s,i,n),S(h,g,i,n,o,n),S(g,p,o,n,o,s),f-=b,_-=b,m+=b,y+=b;const R=1/Math.max(m-f,y-_);return{scale:R,x:f*R,y:_*R,x2:m*R,y2:y*R,projection:t}}const Lh=ha(new Float32Array(16));class Dh{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Gl(0,0)}projectTilePoint(e,t,r){return{x:e,y:t,z:0}}locationPoint(e,t,r=!0){return e._coordinatePoint(e.locationCoordinate(t),r)}pixelsPerMeter(e,t){return Vl(1,e)*t}pixelSpaceConversion(e,t,r){return 1}farthestPixelDistance(e){return Bh(e,e.pixelsPerMeter)}pointCoordinate(e,t,r,o){const i=e.horizonLineFromTop(!1),s=new y(t,Math.max(i,r));return e.rayIntersectionCoordinate(e.pointRayIntersection(s,o))}pointCoordinate3D(e,t,r){const o=new y(t,r);if(e.elevation)return e.elevation.pointCoordinate(o);{const t=this.pointCoordinate(e,o.x,o.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const r=e.horizonLineFromTop();return t.y<r}createInversionMatrix(e,t){return Lh}createTileMatrix(e,t,r){let o,i,s;const n=r.canonical,a=ha(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Ch(n,this);o=1,i=l.x+r.wrap*l.scale,s=l.y,ma(a,a,[o/l.scale,o/l.scale,e.pixelsPerMeter/t])}else o=t/e.zoomScale(n.z),i=(n.x+Math.pow(2,n.z)*r.wrap)*o,s=n.y*o;return _a(a,a,[i,s,0]),ma(a,a,[o/aa,o/aa,1]),a}upVector(e,t,r){return[0,0,1]}upVectorScale(e,t,r){return{metersToTile:1}}}class Ih extends Dh{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,r]=this.parallels=e.parallels||[29.5,45.5],o=Math.sin(R(t));this.n=(o+Math.sin(R(r)))/2,this.c=1+o*(2*this.n-o),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:r,c:o,r0:i}=this,s=R(e-this.center[0]),n=R(t),a=Math.sqrt(o-2*r*Math.sin(n))/r;return{x:a*Math.sin(s*r),y:a*Math.cos(s*r)-i,z:0}}unproject(e,t){const{n:r,c:o,r0:i}=this,s=i+t;let n=Math.atan2(e,Math.abs(s))*Math.sign(s);s*r<0&&(n-=Math.PI*Math.sign(e)*Math.sign(s));const a=R(this.center[0])*r;n=B(n,-Math.PI-a,Math.PI-a);const l=w(v(n/r)+this.center[0],-180,180),c=Math.asin(w((o-(e*e+s*s)*r*r)/(2*r),-1,1)),u=w(v(c),-Xl,Xl);return new Gl(l,u)}}const Oh=1.340264,Ph=-.081106,Ah=893e-6,kh=.003796,zh=Math.sqrt(3)/2;class Nh extends Dh{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const r=Math.asin(zh*Math.sin(t)),o=r*r,i=o*o*o;return{x:.5*(e*Math.cos(r)/(zh*(Oh+3*Ph*o+i*(7*Ah+9*kh*o)))/Math.PI+.5),y:1-.5*(r*(Oh+Ph*o+i*(Ah+kh*o))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,o=r*r,i=o*o*o;for(let e,s,n,a=0;a<12&&(s=r*(Oh+Ph*o+i*(Ah+kh*o))-t,n=Oh+3*Ph*o+i*(7*Ah+9*kh*o),e=s/n,r=w(r-e,-Math.PI/3,Math.PI/3),o=r*r,i=o*o*o,!(Math.abs(e)<1e-12));++a);const s=zh*e*(Oh+3*Ph*o+i*(7*Ah+9*kh*o))/Math.cos(r),n=Math.asin(Math.sin(r)/zh),a=w(180*s/Math.PI,-180,180),l=w(180*n/Math.PI,-Xl,Xl);return new Gl(a,l)}}class jh extends Dh{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const r=360*(e-.5),o=w(360*(.5-t),-Xl,Xl);return new Gl(r,o)}}const Uh=Math.PI/2;function Gh(e){return Math.tan((Uh+e)/2)}class Wh extends Dh{constructor(e){super(e),this.center=e.center||[0,30];const[t,r]=this.parallels=e.parallels||[30,30];let o=R(t),i=R(r);this.southernCenter=o+i<0,this.southernCenter&&(o=-o,i=-i);const s=Math.cos(o),n=Gh(o);this.n=o===i?Math.sin(o):Math.log(s/Math.cos(i))/Math.log(Gh(i)/n),this.f=s*Math.pow(Gh(o),this.n)/this.n}project(e,t){t=R(t),this.southernCenter&&(t=-t),e=R(e-this.center[0]);const r=1e-6,{n:o,f:i}=this;i>0?t<-Uh+r&&(t=-Uh+r):t>Uh-r&&(t=Uh-r);const s=i/Math.pow(Gh(t),o);let n=s*Math.sin(o*e),a=i-s*Math.cos(o*e);return n=.5*(n/Math.PI+.5),a=.5*(a/Math.PI+.5),{x:n,y:this.southernCenter?a:1-a,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:r,f:o}=this,i=o-t,s=Math.sign(i),n=Math.sign(r)*Math.sqrt(e*e+i*i);let a=Math.atan2(e,Math.abs(i))*s;i*r<0&&(a-=Math.PI*Math.sign(e)*s);const l=w(v(a/r)+this.center[0],-180,180),c=w(v(2*Math.atan(Math.pow(o/n,1/r))-Uh),-Xl,Xl);return new Gl(l,this.southernCenter?-c:c)}}class qh extends Dh{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ql(e),y:$l(t),z:0}}unproject(e,t){const r=Hl(e),o=Kl(t);return new Gl(r,o)}}const $h=R(Xl);class Vh extends Dh{project(e,t){const r=(t=R(t))*t,o=r*r;return{x:.5*((e=R(e))*(.8707-.131979*r+o*(o*(.003971*r-.001529*o)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+r*(.015085+o*(.028874*r-.044475-.005916*o)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,o=25,i=0,s=r*r;do{s=r*r;const e=s*s;i=(r*(1.007226+s*(.015085+e*(.028874*s-.044475-.005916*e)))-t)/(1.007226+s*(.045255+e*(.259866*s-.311325-.005916*11*e))),r=w(r-i,-$h,$h)}while(Math.abs(i)>1e-6&&--o>0);s=r*r;const n=w(v(e/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))),-180,180),a=v(r);return new Gl(n,a)}}const Hh=R(Xl);class Kh extends Dh{project(e,t){t=R(t),e=R(e);const r=Math.cos(t),o=2/Math.PI,i=Math.acos(r*Math.cos(e/2)),s=Math.sin(i)/i,n=.5*(e*o+2*r*Math.sin(e/2)/s)||0,a=.5*(t+Math.sin(t)/s)||0;return{x:.5*(n/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(e,t){let r=e=(2*e-.5)*Math.PI,o=t=(2*(1-t)-1)*Math.PI,i=25;const s=1e-6;let n=0,a=0;do{const i=Math.cos(o),s=Math.sin(o),l=2*s*i,c=s*s,u=i*i,p=Math.cos(r/2),d=Math.sin(r/2),h=2*p*d,g=d*d,f=1-u*p*p,_=f?1/f:0,m=f?Math.acos(i*p)*Math.sqrt(1/f):0,y=.5*(2*m*i*d+2*r/Math.PI)-e,b=.5*(m*s+o)-t,S=.5*_*(u*g+m*i*p*c)+1/Math.PI,R=_*(h*l/4-m*s*d),v=.125*_*(l*d-m*s*u*h),x=.5*_*(c*p+m*g*i)+.5,E=R*v-x*S;n=(b*R-y*x)/E,a=(y*v-b*S)/E,r=w(r-n,-Math.PI,Math.PI),o=w(o-a,-Hh,Hh)}while((Math.abs(n)>s||Math.abs(a)>s)&&--i>0);return new Gl(v(r),v(o))}}class Zh extends Dh{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(R(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:r,cosPhi:o}=this;return{x:R(e)*o*r+.5,y:-Math.sin(R(t))/o*r+.5,z:0}}unproject(e,t){const{scale:r,cosPhi:o}=this,i=-(t-.5)/r,s=w(v((e-.5)/r)/o,-180,180),n=Math.asin(w(i*o,-1,1)),a=w(v(n),-Xl,Xl);return new Gl(s,a)}}class Xh extends qh{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,r){const o=wl(e,t,r);return ka(o,o,Cl(yl(r))),{x:o[0],y:o[1],z:o[2]}}locationPoint(e,t){const r=Tl(t.lat,t.lng),o=Oa([],r),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Ia(r,r,o,Vl(1,0)*aa*i);const s=ha(new Float64Array(16));return fa(s,e.pixelMatrix,e.globeMatrix),ka(r,r,s),new y(r[0],r[1])}pixelsPerMeter(e,t){return Vl(1,0)*t}pixelSpaceConversion(e,t,r){const o=Vl(1,e)*t,i=Lr(Vl(1,45)*t,o,r);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,r){const o=Ll(yl(r.canonical));return fa(new Float64Array(16),e.globeMatrix,o)}createInversionMatrix(e,t){const{center:r}=e,o=Cl(yl(t));return ba(o,o,R(r.lng)),ya(o,o,R(r.lat)),ma(o,o,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(o)}pointCoordinate(e,t,r,o){return fl(e,t,r,!0)||new Yl(0,0)}pointCoordinate3D(e,t,r){const o=this.pointCoordinate(e,t,r,0);return[o.x,o.y,o.z]}isPointAboveHorizon(e,t){return!fl(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const r=e.cameraToCenterDistance,o=e._centerAltitude*t,i=e._camera,s=e._camera.forward(),n=wa([],Da([],s,-r),[0,0,o]),a=e.worldSize/(2*Math.PI),l=[0,0,-a],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),p=Da([],i.up(),u),d=Da([],i.right(),u*c),h=Oa([],wa([],wa([],s,p),d)),g=[];let f;if(new tl(n,h).closestPointOnSphere(l,a,g)){const t=wa([],g,l),r=ja([],t,n);f=Math.cos(e.fovAboveCenter)*Ma(r)}else{const e=ja([],n,l),t=ja([],l,n);Oa(t,t);const r=Ma(e)-a;f=Math.sqrt(r*(r+2*a));const o=Math.acos(f/(a+r))-Math.acos(Pa(s,t));f*=Math.cos(o)}return 1.01*f}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),r=Il(e.zoom);if(r>0){const o=Bh(e,Vl(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),s=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Lr(t,o+i*(1-Math.cos(s)),Math.pow(r,10))}return t}upVector(e,t,r){return wl(t,r,e,1)}upVectorScale(e){return{metersToTile:gl(Fl(yl(e)))}}}function Jh(e){const t=e.parallels,r=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new qh(e);case"equirectangular":return new jh(e);case"naturalEarth":return new Vh(e);case"equalEarth":return new Nh(e);case"winkelTripel":return new Kh(e);case"albers":return r?new Zh(e):new Ih(e);case"lambertConformalConic":return r?new Zh(e):new Wh(e);case"globe":return new Xh(e)}throw new Error(`Invalid projection name: ${e.name}`)}const Yh=Hu.types,Qh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function eg(e,t,r,o,i,s,n,a,l,c,u,p,d){const h=a?Math.min(xh,Math.round(a[0])):0,g=a?Math.min(xh,Math.round(a[1])):0;e.emplaceBack(t,r,Math.round(32*o),Math.round(32*i),s,n,(h<<1)+(l?1:0),g,16*c,16*u,256*p,256*d)}function tg(e,t,r,o,i,s,n){e.emplaceBack(t,r,o,i,s,n)}function rg(e,t,r,o,i){e.emplaceBack(t,r,o,i),e.emplaceBack(t,r,o,i),e.emplaceBack(t,r,o,i),e.emplaceBack(t,r,o,i)}function og(e){for(const t of e.sections)if(ls(t.text))return!0;return!1}class ig{constructor(e){this.layoutVertexArray=new Ks,this.indexArray=new rn,this.programConfigurations=e,this.segments=new na,this.dynamicLayoutVertexArray=new qs,this.opacityVertexArray=new Xs,this.placedSymbolArray=new fn,this.globeExtVertexArray=new Zs}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,o){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Ip.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qh,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Dp.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||o)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Zi(ig,"SymbolBuffers");class sg{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new na,this.collisionVertexArray=new en,this.collisionVertexArrayExt=new tn}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Op.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Pp.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Zi(sg,"CollisionBuffers");class ng{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ha([]),this.placementViewportMatrix=ha([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jp(this.zoom,t["text-size"]),this.iconSizeData=jp(this.zoom,t["icon-size"]);const r=this.layers[0].layout,o=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==o.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((e=>Td[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new ig(new Xn(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new ig(new Xn(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new yn,this.lineVertexArray=new bn,this.symbolInstances=new mn}calculateGlyphDependencies(e,t,r,o,i){for(let r=0;r<e.length;r++)if(t[e.charCodeAt(r)]=!0,o&&i){const o=$p[e.charAt(r)];o&&(t[o.charCodeAt(0)]=!0)}}populate(e,t,r,o){const i=this.layers[0],s=i.layout,n="globe"===this.projection.name,a=s.get("text-font"),l=s.get("text-field"),c=s.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Ot&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),p="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=s.get("symbol-sort-key");if(this.features=[],!u&&!p)return;const h=t.iconDependencies,g=t.glyphDependencies,f=t.availableImages,_=new Rs(this.zoom);for(const{feature:t,id:l,index:c,sourceLayerIndex:m}of e){const e=i._featureFilter.needGeometry,y=ac(t,e);if(!i._featureFilter.filter(_,y,r))continue;if(e||(y.geometry=nc(t,r,o)),n&&1!==t.type&&r.z<=5){const e=y.geometry,t=.98078528056,o=(e,o)=>Pa(wl(e.x,e.y,r,1),wl(o.x,o.y,r,1))<t;for(let t=0;t<e.length;t++)e[t]=rc(e[t],o)}let b,S;if(u){const e=i.getValueAndResolveTokens("text-field",y,r,f),t=Ot.factory(e);og(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ys()||this.hasRTLText&&Ss.isParsed())&&(b=qp(t,i,y))}if(p){const e=i.getValueAndResolveTokens("icon-image",y,r,f);S=e instanceof Pt?e:Pt.fromString(e)}if(!b&&!S)continue;const R=this.sortFeaturesByKey?d.evaluate(y,{},r):void 0;if(this.features.push({id:l,text:b,icon:S,index:c,sourceLayerIndex:m,geometry:y.geometry,properties:t.properties,type:Yh[t.type],sortKey:R}),S&&(h[S.name]=!0),b){const e=a.evaluate(y,{},r).join(","),t="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Td.vertical)>=0;for(const r of b.sections)if(r.image)h[r.image.name]=!0;else{const o=ts(b.toString()),i=r.fontStack||e,s=g[i]=g[i]||{};this.calculateGlyphDependencies(r.text,s,t,this.allowVerticalPlacement,o)}}}"line"===s.get("symbol-placement")&&(this.features=function(e){const t={},r={},o=[];let i=0;function s(t){o.push(e[t]),i++}function n(e,t,i){const s=r[e];return delete r[e],r[t]=s,o[s].geometry[0].pop(),o[s].geometry[0]=o[s].geometry[0].concat(i[0]),s}function a(e,r,i){const s=t[r];return delete t[r],t[e]=s,o[s].geometry[0].shift(),o[s].geometry[0]=i[0].concat(o[s].geometry[0]),s}function l(e,t,r){const o=r?t[0][t[0].length-1]:t[0][0];return`${e}:${o.x}:${o.y}`}for(let c=0;c<e.length;c++){const u=e[c],p=u.geometry,d=u.text?u.text.toString():null;if(!d){s(c);continue}const h=l(d,p),g=l(d,p,!0);if(h in r&&g in t&&r[h]!==t[g]){const e=a(h,g,p),i=n(h,g,o[e].geometry);delete t[h],delete r[g],r[l(d,o[i].geometry,!0)]=i,o[e].geometry=null}else h in r?n(h,g,p):g in t?a(h,g,p):(s(c),t[h]=i-1,r[g]=i-1)}return o.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r,o),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r,o))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Jh(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:e,y:r}of t)this.lineVertexArray.emplaceBack(e,r);return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,o,i,s,n,a,l,c,u,p,d,h){const g=e.indexArray,f=e.layoutVertexArray,_=e.globeExtVertexArray,m=e.segments.prepareSegment(4*t.length,f,g,this.canOverlap?s.sortKey:void 0),y=this.glyphOffsetArray.length,b=m.vertexLength,S=this.allowVerticalPlacement&&n===Td.vertical?Math.PI/2:0,R=s.text&&s.text.sections;for(let o=0;o<t.length;o++){const{tl:i,tr:n,bl:c,br:u,tex:p,pixelOffsetTL:y,pixelOffsetBR:b,minFontScaleX:v,minFontScaleY:x,glyphOffset:E,isSDF:M,sectionIndex:T}=t[o],w=m.vertexLength,F=E[1];if(eg(f,l.x,l.y,i.x,F+i.y,p.x,p.y,r,M,y.x,y.y,v,x),eg(f,l.x,l.y,n.x,F+n.y,p.x+p.w,p.y,r,M,b.x,y.y,v,x),eg(f,l.x,l.y,c.x,F+c.y,p.x,p.y+p.h,r,M,y.x,b.y,v,x),eg(f,l.x,l.y,u.x,F+u.y,p.x+p.w,p.y+p.h,r,M,b.x,b.y,v,x),a){const{x:t,y:r,z:o}=a.anchor,[i,s,n]=a.up;tg(_,t,r,o,i,s,n),tg(_,t,r,o,i,s,n),tg(_,t,r,o,i,s,n),tg(_,t,r,o,i,s,n),rg(e.dynamicLayoutVertexArray,t,r,o,S)}else rg(e.dynamicLayoutVertexArray,l.x,l.y,l.z,S);g.emplaceBack(w,w+1,w+2),g.emplaceBack(w+1,w+2,w+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),o!==t.length-1&&T===t[o+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,s,s.index,{},d,h,R&&R[T])}const v=a?a.anchor:l;e.placedSymbolArray.emplaceBack(v.x,v.y,v.z,l.x,l.y,y,this.glyphOffsetArray.length-y,b,c,u,l.segment,r?r[0]:0,r?r[1]:0,o[0],o[1],n,0,!1,0,p,0)}_commitLayoutVertex(e,t,r,o,i,s,n){e.emplaceBack(t,r,o,i,s,Math.round(n.x),Math.round(n.y))}_addCollisionDebugVertices(e,t,r,o,i,s,n){const a=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=a.vertexLength,c=n.tileAnchorX,u=n.tileAnchorY;for(let e=0;e<4;e++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,o,i,s,c,u,new y(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,o,i,s,c,u,new y(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,o,i,s,c,u,new y(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,o,i,s,c,u,new y(e.x1,e.y2)),a.vertexLength+=4;const p=r.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),a.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,r,o,i,s){for(let n=o;n<i;n++){const o=r.get(n),i=this.getSymbolInstanceTextSize(e,s,t,n);this._addCollisionDebugVertices(o,i,this.textCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,s)}}_addIconDebugCollisionBoxes(e,t,r,o,i,s){for(let n=o;n<i;n++){const o=r.get(n),i=this.getSymbolInstanceIconSize(e,t,s.placedIconSymbolIndex);this._addCollisionDebugVertices(o,i,this.iconCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,s)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sg(Ys,Ap.members,cn),this.iconCollisionBox=new sg(Ys,Ap.members,cn);const r=Gp(this.iconSizeData,e),o=Gp(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(o,e,t,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(o,e,t,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,e,t,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,e,t,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(e,t,r,o){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:o),s=Up(this.textSizeData,e,i)/zp;return this.tilePixelRatio*s}getSymbolInstanceIconSize(e,t,r){const o=this.icon.placedSymbolArray.get(r),i=Up(this.iconSizeData,e,o);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}_updateTextDebugCollisionBoxes(e,t,r,o,i,s){for(let n=o;n<i;n++){const o=r.get(n),i=this.getSymbolInstanceTextSize(e,s,t,n);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,o.padding)}}_updateIconDebugCollisionBoxes(e,t,r,o,i,s){for(let n=o;n<i;n++){const o=r.get(n),i=this.getSymbolInstanceIconSize(e,t,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,o.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Gp(this.iconSizeData,e),o=Gp(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(o,e,t,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(o,e,t,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(r,e,t,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,e,t,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,r,o,i,s,n,a,l){const c={};if(t<r){const{x1:r,y1:o,x2:i,y2:s,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d,featureIndex:h}=e.get(t);c.textBox={x1:r,y1:o,x2:i,y2:s,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d},c.textFeatureIndex=h}if(o<i){const{x1:t,y1:r,x2:i,y2:s,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d,featureIndex:h}=e.get(o);c.verticalTextBox={x1:t,y1:r,x2:i,y2:s,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d},c.verticalTextFeatureIndex=h}if(s<n){const{x1:t,y1:r,x2:o,y2:i,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d,featureIndex:h}=e.get(s);c.iconBox={x1:t,y1:r,x2:o,y2:i,padding:n,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d},c.iconFeatureIndex=h}if(a<l){const{x1:t,y1:r,x2:o,y2:i,padding:s,projectedAnchorX:n,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d,featureIndex:h}=e.get(a);c.verticalIconBox={x1:t,y1:r,x2:o,y2:i,padding:s,projectedAnchorX:n,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:p,tileAnchorY:d},c.verticalIconFeatureIndex=h}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),o=r.vertexStartIndex+4*r.numGlyphs;for(let t=r.vertexStartIndex;t<o;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),o=[],i=[],s=[];for(let e=0;e<this.symbolInstances.length;++e){s.push(e);const n=this.symbolInstances.get(e);o.push(0|Math.round(t*n.tileAnchorX+r*n.tileAnchorY)),i.push(n.featureIndex)}return s.sort(((e,t)=>o[e]-o[t]||i[t]-i[e])),s}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:o,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:a}=t;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),o>=0&&o!==r&&this.addIndicesForPlacedSymbol(this.text,o),i>=0&&i!==o&&i!==r&&this.addIndicesForPlacedSymbol(this.text,i),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),n>=0&&this.addIndicesForPlacedSymbol(this.icon,n),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Zi(ng,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ng.MAX_GLYPHS=65535,ng.addDynamicAttributes=rg;const ag=new Is({"symbol-placement":new Cs(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Cs(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Cs(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ls(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Cs(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Cs(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Cs(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Cs(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Cs(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ls(et.layout_symbol["icon-size"]),"icon-text-fit":new Cs(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Cs(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ls(et.layout_symbol["icon-image"]),"icon-rotate":new Ls(et.layout_symbol["icon-rotate"]),"icon-padding":new Cs(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Cs(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Ls(et.layout_symbol["icon-offset"]),"icon-anchor":new Ls(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Cs(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Cs(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Cs(et.layout_symbol["text-rotation-alignment"]),"text-field":new Ls(et.layout_symbol["text-field"]),"text-font":new Ls(et.layout_symbol["text-font"]),"text-size":new Ls(et.layout_symbol["text-size"]),"text-max-width":new Ls(et.layout_symbol["text-max-width"]),"text-line-height":new Ls(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Ls(et.layout_symbol["text-letter-spacing"]),"text-justify":new Ls(et.layout_symbol["text-justify"]),"text-radial-offset":new Ls(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Cs(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Ls(et.layout_symbol["text-anchor"]),"text-max-angle":new Cs(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Cs(et.layout_symbol["text-writing-mode"]),"text-rotate":new Ls(et.layout_symbol["text-rotate"]),"text-padding":new Cs(et.layout_symbol["text-padding"]),"text-keep-upright":new Cs(et.layout_symbol["text-keep-upright"]),"text-transform":new Ls(et.layout_symbol["text-transform"]),"text-offset":new Ls(et.layout_symbol["text-offset"]),"text-allow-overlap":new Cs(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Cs(et.layout_symbol["text-ignore-placement"]),"text-optional":new Cs(et.layout_symbol["text-optional"])});var lg={paint:new Is({"icon-opacity":new Ls(et.paint_symbol["icon-opacity"]),"icon-color":new Ls(et.paint_symbol["icon-color"]),"icon-halo-color":new Ls(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ls(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ls(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Cs(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Cs(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ls(et.paint_symbol["text-opacity"]),"text-color":new Ls(et.paint_symbol["text-color"],{runtimeType:dt,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ls(et.paint_symbol["text-halo-color"]),"text-halo-width":new Ls(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Ls(et.paint_symbol["text-halo-blur"]),"text-translate":new Cs(et.paint_symbol["text-translate"]),"text-translate-anchor":new Cs(et.paint_symbol["text-translate-anchor"])}),layout:ag};class cg{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Zi(cg,"FormatSectionOverride",{omit:["defaultValue"]});class ug extends oa{constructor(e){super(e,lg)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const e=[];for(const t of r)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,o){const i=this.layout.get(e).evaluate(t,{},r,o),s=this._unevaluatedLayout._values[e];return s.isDataDriven()||Zo(s.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,i)}createBucket(e){return new ng(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of lg.paint.overridableProperties){if(!ug.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new cg(t),o=new Ko(r,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Jo("source",o):new Yo("composite",o,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Fs(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&ug.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),o=lg.paint.properties[t];let i=!1;const s=e=>{for(const t of e)if(o.overrides&&o.overrides.hasOverride(t))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof Ot)s(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{i||(t instanceof Ut&&zt(t.value)===_t?s(t.value.sections):t instanceof Vt?s(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new Zn(this,e)}}var pg={paint:new Is({"background-color":new Cs(et.paint_background["background-color"]),"background-pattern":new Cs(et.paint_background["background-pattern"]),"background-opacity":new Cs(et.paint_background["background-opacity"])})},dg={paint:new Is({"raster-opacity":new Cs(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Cs(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Cs(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Cs(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Cs(et.paint_raster["raster-saturation"]),"raster-contrast":new Cs(et.paint_raster["raster-contrast"]),"raster-resampling":new Cs(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Cs(et.paint_raster["raster-fade-duration"])})};class hg extends oa{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var gg={paint:new Is({"sky-type":new Cs(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Cs(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Cs(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Cs(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Cs(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ds(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Cs(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Cs(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Cs(et.paint_sky["sky-opacity"])})};function fg(e,t,r){const o=[0,0,1],i=Ha([]);return Za(i,i,r?-R(e)+Math.PI:R(e)),Ka(i,i,-R(t)),za(o,o,i),Oa(o,o)}const _g={circle:class extends oa{constructor(e){super(e,Fc)}createBucket(e){return new uc(e)}queryRadius(e){const t=e;return xc("circle-radius",this,t)+xc("circle-stroke-width",this,t)+Ec(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,o,i,s,n,a){const l=Tc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r);return Bc(e,o,s,n,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Zn(this,e)}},heatmap:class extends oa{createBucket(e){return new Oc(e)}constructor(e){super(e,jc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return xc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,r,o,i,s,n,a){const l=this.paint.get("heatmap-radius").evaluate(t,r);return Bc(e,o,s,n,a,!0,!0,new y(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Zn(this,e)}},hillshade:class extends oa{constructor(e){super(e,Gc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends oa{constructor(e){super(e,Bu)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(e){return new Zn(this,e)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new wu(e)}queryRadius(){return Ec(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,o,i,s){return!e.queryGeometry.isAboveHorizon&&hc(Mc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends oa{constructor(e){super(e,up)}createBucket(e){return new ep(e)}queryRadius(){return Ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Zn(this,e)}queryIntersectsFeature(e,t,r,o,i,s,n,a,l){const c=Tc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,r),p=this.paint.get("fill-extrusion-base").evaluate(t,r),d=[0,0],h=a&&s.elevation,g=s.elevation?s.elevation.exaggeration():1,f=e.tile.getBucket(this);if(h&&f instanceof ep){const e=f.centroidVertexArray,t=l+1;t<e.length&&(d[0]=e.geta_centroid_pos0(t),d[1]=e.geta_centroid_pos1(t))}if(0===d[0]&&1===d[1])return!1;"globe"===s.projection.name&&(o=lp([o],[new y(0,0),new y(aa,aa)],e.tileID.canonical).map((e=>e.polygon)).flat());const _=h?a:null,[m,b]=function(e,t,r,o,i,s,n,a,l,c,u){return"globe"===e.projection.name?function(e,t,r,o,i,s,n,a,l,c,u){const p=[],d=[],h=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,g=[0,0,0,1],f=[0,0,0,1],_=(e,t,r,o)=>{e[0]=t,e[1]=r,e[2]=o,e[3]=1},m=ap();r>0&&(r+=m),o+=m;for(const m of t){const t=[],y=[];for(const p of m){const d=p.x+i.x,m=p.y+i.y,b=e.projection.projectTilePoint(d,m,u),S=e.projection.upVector(u,p.x,p.y);let R=r,v=o;if(n){const e=bp(d,m,r,o,n,a,l,c);R+=e.base,v+=e.top}0!==r?_(g,b.x+S[0]*h*R,b.y+S[1]*h*R,b.z+S[2]*h*R):_(g,b.x,b.y,b.z),_(f,b.x+S[0]*h*v,b.y+S[1]*h*v,b.z+S[2]*h*v),ka(g,g,s),ka(f,f,s),t.push(new _p(g[0],g[1],g[2])),y.push(new _p(f[0],f[1],f[2]))}p.push(t),d.push(y)}return[p,d]}(e,t,r,o,i,s,n,a,l,c,u):n?function(e,t,r,o,i,s,n,a,l){const c=[],u=[],p=[0,0,0,1];for(const d of e){const e=[],h=[];for(const c of d){const u=c.x+o.x,d=c.y+o.y,g=bp(u,d,t,r,s,n,a,l);p[0]=u,p[1]=d,p[2]=g.base,p[3]=1,$a(p,p,i),p[3]=Math.max(p[3],1e-5);const f=new _p(p[0]/p[3],p[1]/p[3],p[2]/p[3]);p[0]=u,p[1]=d,p[2]=g.top,p[3]=1,$a(p,p,i),p[3]=Math.max(p[3],1e-5);const _=new _p(p[0]/p[3],p[1]/p[3],p[2]/p[3]);e.push(f),h.push(_)}c.push(e),u.push(h)}return[c,u]}(t,r,o,i,s,n,a,l,c):function(e,t,r,o,i){const s=[],n=[],a=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,p=i[8]*r,d=i[9]*r,h=i[10]*r,g=i[11]*r;for(const t of e){const e=[],r=[];for(const s of t){const t=s.x+o.x,n=s.y+o.y,f=i[0]*t+i[4]*n+i[12],_=i[1]*t+i[5]*n+i[13],m=i[2]*t+i[6]*n+i[14],y=i[3]*t+i[7]*n+i[15],b=f+a,S=_+l,R=m+c,v=Math.max(y+u,1e-5),x=f+p,E=_+d,M=m+h,T=Math.max(y+g,1e-5);e.push(new _p(b/v,S/v,R/v)),r.push(new _p(x/T,E/T,M/T))}s.push(e),n.push(r)}return[s,n]}(t,r,o,i,s)}(s,o,p,u,c,n,_,d,g,s.center.lat,e.tileID.canonical),S=e.queryGeometry;return function(e,t,r){let o=1/0;hc(r,t)&&(o=yp(r,t[0]));for(let i=0;i<t.length;i++){const s=t[i],n=e[i];for(let e=0;e<s.length-1;e++){const t=s[e],i=[t,s[e+1],n[e+1],n[e],t];pc(r,i)&&(o=Math.min(o,yp(r,i)))}}return o!==1/0&&o}(m,b,S.isPointQuery()?S.screenBounds:S.screenGeometry)}},line:class extends oa{constructor(e){super(e,Fp),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Cr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Bp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Tp(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Zn(this,e)}queryRadius(e){const t=e,r=Cp(xc("line-width",this,t),xc("line-gap-width",this,t)),o=xc("line-offset",this,t);return r/2+Math.abs(o)+Ec(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,o,i,s){if(e.queryGeometry.isAboveHorizon)return!1;const n=Mc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),a=e.pixelToTileUnitsFactor/2*Cp(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),l=this.paint.get("line-offset").evaluate(t,r);return l&&(o=function(e,t){const r=[],o=new y(0,0);for(let i=0;i<e.length;i++){const s=e[i],n=[];for(let e=0;e<s.length;e++){const r=s[e],i=s[e+1],a=0===e?o:r.sub(s[e-1])._unit()._perp(),l=e===s.length-1?o:i.sub(r)._unit()._perp(),c=a._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),n.push(c._mult(t)._add(r))}r.push(n)}return r}(o,l*e.pixelToTileUnitsFactor)),function(e,t,r){for(let o=0;o<t.length;o++){const i=t[o];if(e.length>=3)for(let t=0;t<i.length;t++)if(Sc(e,i[t]))return!0;if(gc(e,i,r))return!0}return!1}(n,o,a)}isTileClipped(){return!0}},symbol:ug,background:class extends oa{constructor(e){super(e,pg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends oa{constructor(e){super(e,dg)}getProgramIds(){return["raster"]}},sky:class extends oa{constructor(e){super(e,gg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),o=!r,i=e.style.light,s=i.properties.get("position");return o&&"viewport"===i.properties.get("anchor")&&q("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),o?fg(s.azimuthal,90-s.polar,t):fg(r[0],90-r[1],t)}const r=this.paint.get("sky-gradient-center");return fg(r[0],90-r[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class mg{constructor(e,t,r,o){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,o)}update(e,r,o){const{width:i,height:s}=e,{context:n}=this,{gl:a}=n,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:p,ImageBitmap:d}=t;if(a.bindTexture(a.TEXTURE_2D,this.texture),n.pixelStoreUnpackFlipY.set(!1),n.pixelStoreUnpack.set(1),n.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!r||!1!==r.premultiply)),o||this.size&&this.size[0]===i&&this.size[1]===s){const{x:t,y:r}=o||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof p||d&&e instanceof d?a.texSubImage2D(a.TEXTURE_2D,0,t,r,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,t,r,i,s,a.RGBA,a.UNSIGNED_BYTE,e.data)}else this.size=[i,s],e instanceof l||e instanceof c||e instanceof u||e instanceof p||d&&e instanceof d?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,i,s,0,this.format,a.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(e,t){const{context:r}=this,{gl:o}=r;o.bindTexture(o.TEXTURE_2D,this.texture),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.useMipmap?e===o.NEAREST?o.NEAREST_MIPMAP_NEAREST:o.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class yg{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class bg{constructor(){this.tasks={},this.taskQueue=[],z(["process"],this),this.invoker=new yg(this.process),this.nextId=0}add(e,t){const r=this.nextId++,o=function({type:e,isSymbolTile:t,zoom:r}){return r=r||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-r:"maybePrepare"===e&&t?400-r:500:200-r:100-r}(t);if(0===o){H();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:e,metadata:t,priority:o,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){H();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const o=this.tasks[this.taskQueue[r]];o.priority<t&&(t=o.priority,e=r)}if(null===e)return null;const r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}class Sg{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Rg=["tile","layer","source","sourceLayer","state"];class vg{constructor(e,t,r,o,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=r,this._y=o,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Rg)void 0!==this[t]&&(e[t]=this[t]);return e}}const xg=32,Eg=33,Mg=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,r=0,o=0,i=0,s=0,n=0,a=0;for(1&t?i=s=n=xg:r=o=a=xg;(t>>=1)>1;){const e=r+i>>1,l=o+s>>1;1&t?(i=r,s=o,r=n,o=a):(r=i,o=s,i=n,s=a),n=e,a=l}const l=4*e;Mg[l+0]=r,Mg[l+1]=o,Mg[l+2]=i,Mg[l+3]=s}const Tg=new Uint16Array(2178),wg=new Uint8Array(1089),Fg=new Uint16Array(1089);function Bg(e){return 0===e?-.03125:32===e?.03125:0}var Cg=zs([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Lg={type:2,extent:aa,loadGeometry:()=>[[new y(0,0),new y(aa+1,0),new y(aa+1,aa+1),new y(0,aa+1),new y(0,0)]]};class Dg{constructor(e,t,r,o,i){this.tileID=e,this.uid=O(),this.uses=0,this.tileSize=t,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",o&&o.transform&&(this.projection=o.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ke.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Ch(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,r){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const o of e){const e=o.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){o.layers=e,o.stateDependentLayerIds&&(o.stateDependentLayers=o.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=o}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ng){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ng&&t.hasRTLText){this.hasRTLText=!0,Ss.isLoading()||Ss.isLoaded()||"deferred"!==ys()||bs();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new hn}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mg(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mg(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new mg(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,o,i,s,n,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:o,pixelPosMatrix:n,transform:s,params:i,tileTransform:this.tileTransform},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const o=r.loadVTLayers(),i=t?t.sourceLayer:"",s=o._geojsonTileLayer||o[i];if(!s)return;const n=pi(t&&t.filter),{z:a,x:l,y:c}=this.tileID.canonical,u={z:a,x:l,y:c};for(let t=0;t<s.length;t++){const o=s.feature(t);if(n.needGeometry){const e=ac(o,!0);if(!n.filter(new Rs(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!n.filter(new Rs(this.tileID.overscaledZ),o))continue;const p=r.getId(o,i),d=new vg(o,a,l,c,p);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=K(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const o=this.expirationTime-t;o?this.expirationTime=e+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const r=this.latestFeatureIndex.loadVTLayers(),o=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const s=this.buckets[i],n=s.layers[0].sourceLayer||"_geojsonTileLayer",a=r[n],l=e[n];if(!a||!l||0===Object.keys(l).length)continue;if(s.update(l,a,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof Tp||s instanceof wu){const e=t.style._getSourceCache(s.layers[0].source);t._terrain&&t._terrain.enabled&&e&&s.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ke.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ke.now()+e}setTexture(e,t){const r=t.context,o=r.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new mg(r,e,o.RGBA,{useMipmap:!0}),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE))}setDependencies(e,t){const r={};for(const e of t)r[e]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const r=nc(Lg,this.tileID.canonical,this.tileTransform)[0],o=new js,i=new un;for(let e=0;e<r.length;e++){const{x:t,y:s}=r[e];o.emplaceBack(t,s),i.emplaceBack(e)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(o,el.members),this._tileDebugSegments=na.simpleSegment(0,0,o.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const r=nc(Lg,this.tileID.canonical,this.tileTransform)[0];let o,i;if(this.isRaster){const e=function(e,t){const r=Ch(e,t),o=Math.pow(2,e.z);for(let i=0;i<Eg;i++)for(let s=0;s<Eg;s++){const n=Hl((e.x+(s+Bg(s))/xg)/o),a=Kl((e.y+(i+Bg(i))/xg)/o),l=t.project(n,a),c=i*Eg+s;Tg[2*c+0]=Math.round((l.x*r.scale-r.x)*aa),Tg[2*c+1]=Math.round((l.y*r.scale-r.y)*aa)}wg.fill(0),Fg.fill(0);for(let e=2045;e>=0;e--){const t=4*e,r=Mg[t+0],o=Mg[t+1],i=Mg[t+2],s=Mg[t+3],n=r+i>>1,a=o+s>>1,l=n+a-o,c=a+r-n,u=o*Eg+r,p=s*Eg+i,d=a*Eg+n,h=Math.hypot((Tg[2*u+0]+Tg[2*p+0])/2-Tg[2*d+0],(Tg[2*u+1]+Tg[2*p+1])/2-Tg[2*d+1])>=16;wg[d]=wg[d]||(h?1:0),e<1022&&(wg[d]=wg[d]||wg[(o+c>>1)*Eg+(r+l>>1)]||wg[(s+c>>1)*Eg+(i+l>>1)])}const i=new Gs,s=new rn;let n=0;function a(e,t){const r=t*Eg+e;return 0===Fg[r]&&(i.emplaceBack(Tg[2*r+0],Tg[2*r+1],e*aa/xg,t*aa/xg),Fg[r]=++n),Fg[r]-1}function l(e,t,r,o,i,n){const c=e+r>>1,u=t+o>>1;if(Math.abs(e-i)+Math.abs(t-n)>1&&wg[u*Eg+c])l(i,n,e,t,c,u),l(r,o,i,n,c,u);else{const l=a(e,t),c=a(r,o),u=a(i,n);s.emplaceBack(l,c,u)}}return l(0,0,xg,xg,xg,0),l(xg,xg,0,0,0,xg),{vertices:i,indices:s}}(this.tileID.canonical,t);o=e.vertices,i=e.indices}else{o=new Gs,i=new rn;for(const{x:e,y:t}of r)o.emplaceBack(e,t,0,0);const e=yu(o.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(o,Cg.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=na.simpleSegment(0,0,o.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const r=t.projection;if(!r||"globe"!==r.name||t.freezeTileCoverage)return;const o=this.tileID.canonical,i=Cl(Sl(o,t)),s=Il(t.zoom);let n;s>0&&(n=ga(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,o,t,i,n,s),this._makeGlobeTileDebugTextBuffer(e,o,t,i,n,s)}_globePoint(e,t,r,o,i,s,n){let a=wl(e,t,r);if(s){const i=1<<r.z,l=ql(o.center.lng),c=$l(o.center.lat),u=(r.x+.5)/i-l;let p=0;u>.5?p=-1:u<-.5&&(p=1);let d=(e/aa+r.x)/i+p,h=(t/aa+r.y)/i;d=(d-l)*o._pixelsPerMercatorPixel+l,h=(h-c)*o._pixelsPerMercatorPixel+c;const g=[d*o.worldSize,h*o.worldSize,0];ka(g,g,s),a=bl(a,g,n)}return ka(a,a,i)}_makeGlobeTileDebugBorderBuffer(e,t,r,o,i,s){const n=new js,a=new un,l=new Us,c=(e,c,u,p,d)=>{const h=(u-e)/(d-1),g=(p-c)/(d-1),f=n.length;for(let u=0;u<d;u++){const p=e+u*h,d=c+u*g;n.emplaceBack(p,d);const _=this._globePoint(p,d,t,r,o,i,s);l.emplaceBack(_[0],_[1],_[2]),a.emplaceBack(f+u)}},u=aa;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(a),this._tileDebugBuffer=e.createVertexBuffer(n,el.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Qa.members),this._tileDebugSegments=na.simpleSegment(0,0,n.length,a.length)}_makeGlobeTileDebugTextBuffer(e,t,r,o,i,s){const n=aa/4,a=new js,l=new rn,c=new Us,u=25;l.reserve(32),a.reserve(u),c.reserve(u);const p=(e,t)=>u*e+t;for(let e=0;e<u;e++){const l=e*n;for(let e=0;e<u;e++){const u=e*n;a.emplaceBack(u,l);const p=this._globePoint(u,l,t,r,o,i,s);c.emplaceBack(p[0],p[1],p[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const r=p(e,t),o=p(e,t+1),i=p(e+1,t),s=p(e+1,t+1);l.emplaceBack(r,o,i),l.emplaceBack(i,o,s)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(a,el.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(c,Qa.members),this._tileDebugTextSegments=na.simpleSegment(0,0,u,32)}}class Ig{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const o=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][o]=this.stateChanges[e][o]||{},D(this.stateChanges[e][o],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==o&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][o]){this.deletedStates[e][o]={};for(const t in this.state[e][o])r[t]||(this.deletedStates[e][o][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][o]&&null===this.deletedStates[e][o][t]&&delete this.deletedStates[e][o][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const o=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][o]&&(this.deletedStates[e][o]=this.deletedStates[e][o]||{},this.deletedStates[e][o][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][o])for(r in this.deletedStates[e][o]={},this.stateChanges[e][o])this.deletedStates[e][o][r]=null;else this.deletedStates[e][o]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),o=D({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete o[e]}return o}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),D(this.state[e][r],this.stateChanges[e][r]),t[r]=this.state[e][r];r[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const r in this.state[e])t[r]={},this.state[e][r]={};else for(const r in this.deletedStates[e]){if(null===this.deletedStates[e][r])this.state[e][r]={};else if(this.state[e][r])for(const t of Object.keys(this.deletedStates[e][r]))delete this.state[e][r][t];t[r]=this.state[e][r]}r[e]=r[e]||{},D(r[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const o in e)e[o].setFeatureState(r,t)}}class Og{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Pg(e,t,r,o){let i=0,s=Number.MAX_VALUE;for(let n=0;n<3;n++)if(Math.abs(o[n])<1e-15){if(r[n]<e[n]||r[n]>t[n])return null}else{const a=1/o[n];let l=(e[n]-r[n])*a,c=(t[n]-r[n])*a;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<s&&(s=c),i>s)return null}return i}function Ag(e,t,r,o,i,s,n,a,l,c,u){const p=o-e,d=i-t,h=s-r,g=n-e,f=a-t,_=l-r,m=u[1]*_-u[2]*f,y=u[2]*g-u[0]*_,b=u[0]*f-u[1]*g,S=p*m+d*y+h*b;if(Math.abs(S)<1e-15)return null;const R=1/S,v=c[0]-e,x=c[1]-t,E=c[2]-r,M=(v*m+x*y+E*b)*R;if(M<0||M>1)return null;const T=x*h-E*d,w=E*p-v*h,F=v*d-x*p,B=(u[0]*T+u[1]*w+u[2]*F)*R;return B<0||M+B>1?null:(g*T+f*w+_*F)*R}function kg(e,t,r){return(e-t)/(r-t)}function zg(e,t,r,o,i,s,n,a,l){const c=1<<r,u=s-o,p=n-i,d=(e+1)/c*u+o,h=(t+0)/c*p+i,g=(t+1)/c*p+i;a[0]=(e+0)/c*u+o,a[1]=h,l[0]=d,l[1]=g}class Ng{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),r=[];let o=Math.ceil(Math.pow(2,t));const i=1/o,s=(e,t,r,o,i)=>{const s=o?1:0,n=(e+1)*r-s,a=t*r,l=(t+1)*r-s;i[0]=e*r,i[1]=a,i[2]=n,i[3]=l};let n=new Og(o);const a=[];for(let t=0;t<o*o;t++){s(t%o,Math.floor(t/o),i,!1,a);const r=Ug(a[0],a[1],e),l=Ug(a[2],a[1],e),c=Ug(a[2],a[3],e),u=Ug(a[0],a[3],e);n.minimums.push(Math.min(r,l,c,u)),n.maximums.push(Math.max(r,l,c,u)),n.leaves.push(1)}for(r.push(n),o/=2;o>=1;o/=2){const e=r[r.length-1];n=new Og(o);for(let t=0;t<o*o;t++){s(t%o,Math.floor(t/o),2,!0,a);const r=e.getElevation(a[0],a[1]),i=e.getElevation(a[2],a[1]),l=e.getElevation(a[2],a[3]),c=e.getElevation(a[0],a[3]),u=e.isLeaf(a[0],a[1]),p=e.isLeaf(a[2],a[1]),d=e.isLeaf(a[2],a[3]),h=e.isLeaf(a[0],a[3]),g=Math.min(r.min,i.min,l.min,c.min),f=Math.max(r.max,i.max,l.max,c.max),_=u&&p&&d&&h;n.maximums.push(f),n.minimums.push(g),n.leaves.push(f-g<=5&&_?1:0)}r.push(n)}return r}(this.dem),r=t.length-1,o=t[r];this._addNode(o.minimums[0],o.maximums[0],o.leaves[0]),this._construct(t,0,0,r,0)}raycastRoot(e,t,r,o,i,s,n=1){return Pg([e,t,-100],[r,o,this.maximums[0]*n],i,s)}raycast(e,t,r,o,i,s,n=1){if(!this.nodeCount)return null;const a=this.raycastRoot(e,t,r,o,i,s,n);if(null==a)return null;const l=[],c=[],u=[],p=[],d=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:a,t:h,nodex:g,nodey:f,depth:_}=d.pop();if(this.leaves[a]){zg(g,f,_,e,t,r,o,u,p);const a=1<<_,l=(g+0)/a,c=(g+1)/a,d=(f+0)/a,m=(f+1)/a,y=Ug(l,d,this.dem)*n,b=Ug(c,d,this.dem)*n,S=Ug(c,m,this.dem)*n,R=Ug(l,m,this.dem)*n,v=Ag(u[0],u[1],y,p[0],u[1],b,p[0],p[1],S,i,s),x=Ag(p[0],p[1],S,u[0],p[1],R,u[0],u[1],y,i,s),E=Math.min(null!==v?v:Number.MAX_VALUE,null!==x?x:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const e=Ia([],i,s,h);if(jg(y,b,R,S,kg(e[0],u[0],p[0]),kg(e[1],u[1],p[1]))>=e[2])return h}continue}let m=0;for(let d=0;d<this._siblingOffset.length;d++){zg((g<<1)+this._siblingOffset[d][0],(f<<1)+this._siblingOffset[d][1],_+1,e,t,r,o,u,p),u[2]=-100,p[2]=this.maximums[this.childOffsets[a]+d]*n;const h=Pg(u,p,i,s);if(null!=h){const e=h;l[d]=e;let t=!1;for(let r=0;r<m&&!t;r++)e>=l[c[r]]&&(c.splice(r,0,d),t=!0);t||(c[m]=d),m++}}for(let e=0;e<m;e++){const t=c[e];d.push({idx:this.childOffsets[a]+t,t:l[t],nodex:(g<<1)+this._siblingOffset[t][0],nodey:(f<<1)+this._siblingOffset[t][1],depth:_+1})}}return null}_addNode(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,r,o,i){if(1===e[o].isLeaf(t,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const s=o-1,n=e[s];let a=0,l=0;for(let e=0;e<this._siblingOffset.length;e++){const o=2*t+this._siblingOffset[e][0],i=2*r+this._siblingOffset[e][1],s=n.getElevation(o,i),c=n.isLeaf(o,i),u=this._addNode(s.min,s.max,c);c&&(a|=1<<e),l||(l=u)}for(let o=0;o<this._siblingOffset.length;o++)a&1<<o||this._construct(e,2*t+this._siblingOffset[o][0],2*r+this._siblingOffset[o][1],s,l+o)}}function jg(e,t,r,o,i,s){return Lr(Lr(e,r,s),Lr(t,o,s),i)}function Ug(e,t,r){const o=r.dim,i=w(e*o-.5,0,o-1),s=w(t*o-.5,0,o-1),n=Math.floor(i),a=Math.floor(s),l=Math.min(n+1,o-1),c=Math.min(a+1,o-1);return jg(r.get(n,a),r.get(l,a),r.get(n,c),r.get(l,c),i-n,s-a)}const Gg={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Wg(e,t,r){return(256*e*256+256*t+r)/10-1e4}function qg(e,t,r){return 256*e+t+r/256-32768}class $g{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,r,o=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return q(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const s=this.dim=t.height-2,n=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=r||"mapbox",this.borderReady=o,!o){for(let e=0;e<s;e++)n[this._idx(-1,e)]=n[this._idx(0,e)],n[this._idx(s,e)]=n[this._idx(s-1,e)],n[this._idx(e,-1)]=n[this._idx(e,0)],n[this._idx(e,s)]=n[this._idx(e,s-1)];n[this._idx(-1,-1)]=n[this._idx(0,0)],n[this._idx(s,-1)]=n[this._idx(s-1,0)],n[this._idx(-1,s)]=n[this._idx(0,s-1)],n[this._idx(s,s)]=n[this._idx(s-1,s-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Ng(this)}get(e,t,r=!1){r&&(e=w(e,-1,this.dim),t=w(t,-1,this.dim));const o=4*this._idx(e,t);return("terrarium"===this.encoding?qg:Wg)(this.pixels[o],this.pixels[o+1],this.pixels[o+2])}static getUnpackVector(e){return Gg[e]}get unpackVector(){return Gg[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const r=[0,0,0,0],o=$g.getUnpackVector(t);let i=Math.floor((e+o[3])/o[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new Nc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let o=t*this.dim,i=t*this.dim+this.dim,s=r*this.dim,n=r*this.dim+this.dim;switch(t){case-1:o=i-1;break;case 1:i=o+1}switch(r){case-1:s=n-1;break;case 1:n=s+1}const a=-t*this.dim,l=-r*this.dim;for(let t=s;t<n;t++)for(let r=o;r<i;r++){const o=4*this._idx(r,t),i=4*this._idx(r+a,t+l);this.pixels[o+0]=e.pixels[i+0],this.pixels[o+1]=e.pixels[i+1],this.pixels[o+2]=e.pixels[i+2],this.pixels[o+3]=e.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Zi($g,"DEMData"),Zi(Ng,"DemMinMaxQuadTree",{omit:["dem"]});class Vg{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const o=e.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);const i={value:t,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),r)),this.data[o].push(i),this.order.push(o),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,o=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][o];return this.data[r].splice(o,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const o of this.data[r])e(o.value)||t.push(o);for(const e of t)this.remove(e.value.tileID,e)}}class Hg{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Hg.ReadOnly=!1,Hg.ReadWrite=!0,Hg.disabled=new Hg(519,Hg.ReadOnly,[0,1]);const Kg=7680;class Zg{constructor(e,t,r,o,i,s){this.test=e,this.ref=t,this.mask=r,this.fail=o,this.depthFail=i,this.pass=s}}Zg.disabled=new Zg({func:519,mask:0},0,0,Kg,Kg,Kg);class Xg{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}Xg.Replace=[1,0],Xg.disabled=new Xg(Xg.Replace,Lt.transparent,[!1,!1,!1,!1]),Xg.unblended=new Xg(Xg.Replace,Lt.transparent,[!0,!0,!0,!0]),Xg.alphaBlended=new Xg([1,771],Lt.transparent,[!0,!0,!0,!0]);const Jg=1029,Yg=2305;class Qg{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}Qg.disabled=new Qg(!1,Jg,Yg),Qg.backCCW=new Qg(!0,Jg,Yg),Qg.backCW=new Qg(!0,Jg,2304),Qg.frontCW=new Qg(!0,1028,2304),Qg.frontCCW=new Qg(!0,1028,Yg);class ef extends Qe{constructor(e,t,r){super(),this.id=e,this._onlySymbols=r,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Vg(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ig,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return L(this._tiles).map((e=>e.tileID)).sort(tf).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(+r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,o=t.tileID,i=new y(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new y(o.canonical.x,o.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-i.y||s.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(tf).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,o){if(o)if(e.state="errored",404!==o.status)this._source.fire(new Ye(o,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ke.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Je("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let o=0;o<t.length;o++){const i=t[o];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);r(e,t),r(t,e)}}function r(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const o=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),s=t.tileID.key;0===r&&0===o||Math.abs(o)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,o),e.neighboringTiles&&e.neighboringTiles[s]&&(e.neighboringTiles[s].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,o){for(const i in this._tiles){let s=this._tiles[i];if(o[i]||!s.hasData()||s.tileID.overscaledZ<=t||s.tileID.overscaledZ>r)continue;let n=s.tileID;for(;s&&s.tileID.overscaledZ>t+1;){const e=s.tileID.scaledTo(s.tileID.overscaledZ-1);s=this._tiles[e.key],s&&s.hasData()&&(n=e)}let a=n;for(;a.overscaledZ>t;)if(a=a.scaledTo(a.overscaledZ-1),e[a.key]){o[n.key]=n;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),o=this._getLoadedTile(t);if(o)return o}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const r=Math.ceil(e.width/t)+1,o=Math.ceil(e.height/t)+1,i=Math.floor(r*o*5),s="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(n)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const o=this._tiles[r];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),e[o.tileID.key]=o}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,r){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let o;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new gp(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(o=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(o=o.filter((e=>this._source.hasTile(e))))):o=[];const i=this._updateRetainedTiles(o);if(rf(this._source.type)&&0!==o.length){const e={},t={},r=Object.keys(i);for(const o of r){const r=i[o],s=this._tiles[o];if(!s||s.fadeEndTime&&s.fadeEndTime<=Ke.now())continue;const n=this.findLoadedParent(r,Math.max(r.overscaledZ-ef.maxOverzooming,this._source.minzoom));n&&(this._addTile(n.tileID),e[n.tileID.key]=n.tileID),t[o]=r}const s=o[o.length-1].overscaledZ;for(const e in this._tiles){const r=this._tiles[e];if(i[e]||!r.hasData())continue;let o=r.tileID;for(;o.overscaledZ>s;){o=o.scaledTo(o.overscaledZ-1);const s=this._tiles[o.key];if(s&&s.hasData()&&t[o.key]){i[e]=r.tileID;break}}}for(const t in e)i[t]||(this._coveredTiles[t]=!0,i[t]=e[t])}for(const e in i)this._tiles[e].clearFadeHold();const s=function(e,t){const r=[];for(const o in e)o in t||r.push(o);return r}(this._tiles,i);for(const e of s){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const r={},o=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,s=Math.max(i-ef.maxOverzooming,this._source.minzoom),n=Math.max(i+ef.maxUnderzooming,this._source.minzoom),a={};for(const r of e){const e=this._addTile(r);t[r.key]=r,e.hasData()||o<this._source.maxzoom&&(a[r.key]=r)}this._retainLoadedChildren(a,o,n,t);for(const o of e){let e=this._tiles[o.key];if(e.hasData())continue;if(o.canonical.z>=this._source.maxzoom){const e=o.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){t[e.key]=e;continue}}else{const e=o.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let i=e.wasRequested();for(let n=o.overscaledZ-1;n>=s;--n){const s=o.scaledTo(n);if(r[s.key])break;if(r[s.key]=!0,e=this.getTile(s),!e&&i&&(e=this._addTile(s)),e&&(t[s.key]=s,i=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,o=this._tiles[e].tileID;for(;o.overscaledZ>0;){if(o.key in this._loadedParentTiles){r=this._loadedParentTiles[o.key];break}t.push(o.key);const e=o.scaledTo(o.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;o=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=Boolean(t);if(!r){const r=this.map?this.map.painter:null;t=new Dg(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new Je("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,r){const o=[],i=this.transform;if(!i)return o;const s="globe"===i.projection.name,n=ql(i.center.lng);for(const a in this._tiles){const l=this._tiles[a];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(s){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(w(n,...of(e,-1))-n),Math.abs(w(n,...of(e,1))-n)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(w(n,...of(e,-1))-n),Math.abs(w(n,...of(e,0))-n),Math.abs(w(n,...of(e,1))-n)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const r of c){const s=e.containsTile(l,i,t,r);s&&o.push(s)}}return o}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(rf(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ke.now())return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const o=this._tiles[e];o&&o.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}_preloadTiles(e,t){if(!this._sourceLoaded){const r=()=>{this._sourceLoaded&&(this._source.off("data",r),this._preloadTiles(e,t))};return void this._source.on("data",r)}const r=new Map,o=Array.isArray(e)?e:[e],i=this.map.painter.terrain,s=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const e of o){const t=e.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)r.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}C(Array.from(r.values()),((e,t)=>{const r=new Dg(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(e=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),t(e,r)}))}),t)}}function tf(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),o=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||o-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function rf(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function of(e,t){const r=1<<e.z;return[e.x/r+t,(e.x+1)/r+t]}ef.maxOverzooming=10,ef.maxUnderzooming=3;class sf{constructor(e,t,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=r}static create(e,t,r){const o=r||e.findDEMTileFor(t);if(!o||!o.dem)return;const i=o.dem,s=o.tileID,n=1<<t.canonical.z-s.canonical.z;return new sf(o,o.tileSize/aa/n,[(t.canonical.x/n-s.canonical.x)*i.dim,(t.canonical.y/n-s.canonical.y)*i.dim])}tileCoordToPixel(e,t){const r=t*this._scale+this._offset[1],o=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(r);return new y(o,i)}getElevationAt(e,t,r,o){const i=e*this._scale+this._offset[0],s=t*this._scale+this._offset[1],n=Math.floor(i),a=Math.floor(s),l=this._dem;return o=!!o,r?Lr(Lr(l.get(n,a,o),l.get(n,a+1,o),s-a),Lr(l.get(n+1,a,o),l.get(n+1,a+1,o),s-a),i-n):l.get(n,a,o)}getElevationAtPixel(e,t,r){return this._dem.get(e,t,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Vl(1,e)*this._dem.stride}}class nf{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Hi(aa,16,0),this.featureIndexArray=new Rn,this.promoteId=t}insert(e,t,r,o,i,s=0){const n=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,o,i,s);const a=this.grid;for(let e=0;e<t.length;e++){const r=t[e],o=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){const t=r[e];o[0]=Math.min(o[0],t.x),o[1]=Math.min(o[1],t.y),o[2]=Math.max(o[2],t.x),o[3]=Math.max(o[3],t.y)}o[0]<aa&&o[1]<aa&&o[2]>=0&&o[3]>=0&&a.insert(n,o[0],o[1],o[2],o[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Vu(new _d(this.rawTileData)).layers,this.sourceLayerCoder=new Sg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,r,o){this.loadVTLayers();const i=e.params||{},s=pi(i.filter),n=e.tileResult,a=e.transform,l=n.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,r,o)=>Rc(n.bufferedTilespaceGeometry,e,t,r,o)));c.sort(lf);let u=null;a.elevation&&c.length>0&&(u=sf.create(a.elevation,this.tileID));const p={};let d;for(let a=0;a<c.length;a++){const l=c[a];if(l===d)continue;d=l;const h=this.featureIndexArray.get(l);let g=null;this.loadMatchingFeature(p,h,s,i.layers,i.availableImages,t,r,o,((t,r,o,i=0)=>(g||(g=nc(t,this.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(n,t,o,g,this.z,e.transform,e.pixelPosMatrix,u,i))))}return p}loadMatchingFeature(e,t,r,o,i,s,n,a,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:p,layoutVertexArrayOffset:d}=t,h=this.bucketLayerIDs[u];if(o&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(o,h))return;const g=this.sourceLayerCoder.decode(p),f=this.vtLayers[g].feature(c);if(r.needGeometry){const e=ac(f,!0);if(!r.filter(new Rs(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new Rs(this.tileID.overscaledZ),f))return;const _=this.getId(f,g);for(let t=0;t<h.length;t++){const r=h[t];if(o&&o.indexOf(r)<0)continue;const u=s[r];if(!u)continue;let p={};void 0!==_&&a&&(p=a.getState(u.sourceLayer||"_geojsonTileLayer",_));const g=D({},n[r]);g.paint=af(g.paint,u.paint,f,p,i),g.layout=af(g.layout,u.layout,f,p,i);const m=!l||l(f,u,p,d);if(!m)continue;const y=new vg(f,this.z,this.x,this.y,_);y.layer=g;let b=e[r];void 0===b&&(b=e[r]=[]),b.push({featureIndex:c,feature:y,intersectionZ:m})}}lookupSymbolFeatures(e,t,r,o,i,s,n,a){const l={};this.loadVTLayers();const c=pi(i);for(const i of e)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:o,featureIndex:i,layoutVertexArrayOffset:0},c,s,n,a,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:r}=e;this.loadVTLayers();const o=this.sourceLayerCoder.decode(r),i=this.vtFeatures[o];if(i[t])return i[t];const s=this.vtLayers[o].feature(t);return i[t]=s,s}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;if(this.promoteId){const o="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=o&&(r=e.properties[o]),"boolean"==typeof r&&(r=Number(r))}return r}}function af(e,t,r,o,i){return j(e,((e,s)=>{const n=t instanceof Bs?t.get(s):null;return n&&n.evaluate?n.evaluate(r,o,i):n}))}function lf(e,t){return t-e}Zi(nf,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cf{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new zc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const r=this.getKey(e,t);return this.positions[r]}trim(){const e=this.width,t=this.height=A(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,r){const o=[];let i=e.length%2==1?-e[e.length-1]*r:0,s=e[0]*r,n=!0;o.push({left:i,right:s,isDash:n,zeroLength:0===e[0]});let a=e[0];for(let t=1;t<e.length;t++){n=!n;const l=e[t];i=a*r,a+=l,s=a*r,o.push({left:i,right:s,isDash:n,zeroLength:0===l})}return o}addRoundDash(e,t,r){const o=t/2;for(let t=-r;t<=r;t++){const i=this.width*(this.nextRow+r+t);let s=0,n=e[s];for(let a=0;a<this.width;a++){a/n.right>1&&(n=e[++s]);const l=Math.abs(a-n.left),c=Math.abs(a-n.right),u=Math.min(l,c);let p;const d=t/r*(o+1);if(n.isDash){const e=o-Math.abs(d);p=Math.sqrt(u*u+e*e)}else p=o-Math.sqrt(u*u+d*d);this.image.data[i+a]=Math.max(0,Math.min(255,p+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const r=e[t],o=e[t+1];r.zeroLength?e.splice(t,1):o&&o.isDash===r.isDash&&(o.left=r.left,e.splice(t,1))}const r=e[0],o=e[e.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);const i=this.width*this.nextRow;let s=0,n=e[s];for(let r=0;r<this.width;r++){r/n.right>1&&(n=e[++s]);const o=Math.abs(r-n.left),a=Math.abs(r-n.right),l=Math.min(o,a);this.image.data[i+r]=Math.max(0,Math.min(255,(n.isDash?l:-l)+t+128))}}addDash(e,t){const r=this.getKey(e,t);if(this.positions[r])return this.positions[r];const o="round"===t,i=o?7:0,s=2*i+1;if(this.nextRow+s>this.height)return q("LineAtlas out of space"),null;0===e.length&&e.push(1);let n=0;for(let t=0;t<e.length;t++)e[t]<0&&(q("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),n+=e[t];if(0!==n){const r=this.width/n,s=this.getDashRanges(e,this.width,r);o?this.addRoundDash(s,r,i):this.addRegularDash(s,"square"===t?.5*r:0)}const a=this.nextRow+i;this.nextRow+=s;const l={tl:[a,i],br:[n,0]};return this.positions[r]=l,l}}Zi(cf,"LineAtlas");const uf=1*eh;class pf{constructor(e){const t={},r=[];for(const o in e){const i=e[o],s=t[o]={};for(const e in i.glyphs){const t=i.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o=t.metrics.localGlyph?uf:1,n={x:0,y:0,w:t.bitmap.width+2*o,h:t.bitmap.height+2*o};r.push(n),s[e]=n}}const{w:o,h:i}=vd(r),s=new zc({width:o||1,height:i||1});for(const r in e){const o=e[r];for(const e in o.glyphs){const i=o.glyphs[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const n=t[r][e],a=i.metrics.localGlyph?uf:1;zc.copy(i.bitmap,s,{x:0,y:0},{x:n.x+a,y:n.y+a},i.bitmap)}}this.image=s,this.positions=t}}Zi(pf,"GlyphAtlas");class df{constructor(e){this.tileID=new gp(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Ch(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,r,o,i){this.status="parsing",this.data=e,this.collisionBoxArray=new hn;const s=new Sg(Object.keys(e.layers).sort()),n=new nf(this.tileID,this.promoteId);n.bucketLayerIDs=[];const a={},l=new cf(256,256),c={featureIndex:n,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},u=t.familiesBySource[this.source];for(const t in u){const o=e.layers[t];if(!o)continue;let i=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===o.version&&q(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const p=s.encode(t),d=[];for(let e=0;e<o.length;e++){const r=o.feature(e),i=n.getId(r,t);d.push({feature:r,id:i,index:e,sourceLayerIndex:p})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(hf(e,this.zoom,r),(a[t.id]=t.createBucket({index:n.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:p,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(d,c,this.tileID.canonical,this.tileTransform),n.bucketLayerIDs.push(e.map((e=>e.id))))}}let p,d,h,g;l.trim();const f={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},_=()=>{if(p)return i(p);if(d&&h&&g){const e=new pf(d),t=new Md(h,g);for(const o in a){const i=a[o];i instanceof ng?(hf(i.layers,this.zoom,r),bh(i,d,e.positions,h,t.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Tp||i instanceof wu||i instanceof ep)&&(hf(i.layers,this.zoom,r),i.addFeatures(c,this.tileID.canonical,t.patternPositions,r,this.tileTransform))}this.status="done",i(null,{buckets:L(a).filter((e=>!e.isEmpty())),featureIndex:n,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?e.positions:null})}},m=j(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(m).length?o.send("getGlyphs",{uid:this.uid,stacks:m},((e,t)=>{p||(p=e,d=t,_())}),void 0,!1,f):d={};const y=Object.keys(c.iconDependencies);y.length?o.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{p||(p=e,h=t,_())}),void 0,!1,f):h={};const b=Object.keys(c.patternDependencies);b.length?o.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{p||(p=e,g=t,_())}),void 0,!1,f):g={},_()}}function hf(e,t,r){const o=new Rs(t);for(const t of e)t.recalculate(o,r)}class gf{constructor(e){this.entries={},this.scheduler=e}request(e,t,r,o){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,r]=i.result;return this.scheduler?this.scheduler.add((()=>{o(e,r)}),t):o(e,r),()=>{}}return i.callbacks.push(o),i.cancel||(i.cancel=r(((r,o)=>{i.result=[r,o];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(r,o)}),t):e(r,o);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==o)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function ff(e,t,r){const o=JSON.stringify(e.request);return e.data&&(this.deduped.entries[o]={result:[null,e.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const o=de(e.request,((e,o,i,s)=>{e?t(e):o&&t(null,{vectorTile:r?void 0:new Vu(new _d(o)),rawData:o,cacheControl:i,expires:s})}));return()=>{o.cancel(),t()}}),t)}const _f=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class mf{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const o=r>>4;if(1!==o)throw new Error(`Got v${o} data when expected v1.`);const i=_f[15&r];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[n]=new Uint32Array(e,4,1);return new mf(n,s,i,e)}constructor(e,t=64,r=Float64Array,o){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=_f.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,n=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-n%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+n+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+n+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+n+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return yf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:n}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,u=a.pop()||0,p=a.pop()||0;if(u-p<=n){for(let n=p;n<=u;n++){const a=s[2*n],c=s[2*n+1];a>=e&&a<=r&&c>=t&&c<=o&&l.push(i[n])}continue}const d=p+u>>1,h=s[2*d],g=s[2*d+1];h>=e&&h<=r&&g>=t&&g<=o&&l.push(i[d]),(0===c?e<=h:t<=g)&&(a.push(p),a.push(d-1),a.push(1-c)),(0===c?r>=h:o>=g)&&(a.push(d+1),a.push(u),a.push(1-c))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:i,nodeSize:s}=this,n=[0,o.length-1,0],a=[],l=r*r;for(;n.length;){const c=n.pop()||0,u=n.pop()||0,p=n.pop()||0;if(u-p<=s){for(let r=p;r<=u;r++)vf(i[2*r],i[2*r+1],e,t)<=l&&a.push(o[r]);continue}const d=p+u>>1,h=i[2*d],g=i[2*d+1];vf(h,g,e,t)<=l&&a.push(o[d]),(0===c?e-r<=h:t-r<=g)&&(n.push(p),n.push(d-1),n.push(1-c)),(0===c?e+r>=h:t+r>=g)&&(n.push(d+1),n.push(u),n.push(1-c))}return a}}function yf(e,t,r,o,i,s){if(i-o<=r)return;const n=o+i>>1;bf(e,t,n,o,i,s),yf(e,t,r,o,n-1,1-s),yf(e,t,r,n+1,i,1-s)}function bf(e,t,r,o,i,s){for(;i>o;){if(i-o>600){const n=i-o+1,a=r-o+1,l=Math.log(n),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(n-c)/n)*(a-n/2<0?-1:1);bf(e,t,r,Math.max(o,Math.floor(r-a*c/n+u)),Math.min(i,Math.floor(r+(n-a)*c/n+u)),s)}const n=t[2*r+s];let a=o,l=i;for(Sf(e,t,o,r),t[2*i+s]>n&&Sf(e,t,o,i);a<l;){for(Sf(e,t,a,l),a++,l--;t[2*a+s]<n;)a++;for(;t[2*l+s]>n;)l--}t[2*o+s]===n?Sf(e,t,o,l):(l++,Sf(e,t,l,i)),l<=r&&(o=l+1),r<=l&&(i=l-1)}}function Sf(e,t,r,o){Rf(e,r,o),Rf(t,2*r,2*o),Rf(t,2*r+1,2*o+1)}function Rf(e,t,r){const o=e[t];e[t]=e[r],e[r]=o}function vf(e,t,r,o){const i=e-r,s=t-o;return i*i+s*s}e.ARRAY_TYPE=ua,e.AUTH_ERR_MSG=ye,e.Aabb=il,e.Actor=class{constructor(e,r,o){this.target=e,this.parent=r,this.mapId=o,this.callbacks={},this.cancelCallbacks={},z(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?e:t,this.scheduler=new bg}send(e,t,r,o,i=!1,s){const n=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=s,this.callbacks[n]=r);const a=X(this.globalScope)?void 0:[];return this.target.postMessage({id:n,type:e,hasCallback:!!r,targetMapId:o,mustQueue:i,sourceMapId:this.mapId,data:Yi(t,a)},a),{cancel:()=>{r&&delete this.callbacks[n],this.target.postMessage({id:n,type:"<cancel>",targetMapId:o,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(t.mustQueue||H()){const e=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,t)),e&&e.metadata||{type:"message"})}else this.processTask(r,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Qi(t.error)):r(null,Qi(t.data)))}else{const r=X(this.globalScope)?void 0:[],o=t.hasCallback?(t,o)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Yi(t):null,data:Yi(o,r)},r)}:e=>{},i=Qi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,o);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,o)}else o(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=dp,e.Color=Lt,e.ColorMode=Xg,e.CullFaceMode=Qg,e.DEMData=$g,e.DataConstantProperty=Cs,e.DedupedRequest=gf,e.DepthMode=Hg,e.EXTENT=aa,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const r=t.getSource().maxzoom,o=1<<r,i=Math.floor(e.x),s=Math.floor((e.x-i)*o),n=Math.floor(e.y*o),a=this.findDEMTileFor(new gp(r,i,r,s,n));return!(!a||!a.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,r=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const o=this._source();if(!o)return t;if(e.y<0||e.y>1)return t;const i=o.getSource().maxzoom,s=1<<i,n=Math.floor(e.x),a=e.x-n,l=new gp(i,n,i,Math.floor(a*s),Math.floor(e.y*s)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,p=1<<c.tileID.canonical.z,d=(a*p-c.tileID.canonical.x)*u.dim,h=(e.y*p-c.tileID.canonical.y)*u.dim,g=Math.floor(d),f=Math.floor(h);return(r?this.exaggeration():1)*Lr(Lr(u.get(g,f),u.get(g,f+1),h-f),Lr(u.get(g+1,f),u.get(g+1,f+1),h-f),d-g)}getAtTileOffset(e,t,r){const o=1<<e.canonical.z;return this.getAtPointOrZero(new Yl(e.wrap+(e.canonical.x+t/aa)/o,(e.canonical.y+r/aa)/o))}getAtTileOffsetFunc(e,t,r,o){return i=>{const s=this.getAtTileOffset(e,i.x,i.y),n=o.upVector(e.canonical,i.x,i.y);return Da(n,n,s*o.upVectorScale(e.canonical,t,r).metersToTile),n}}getForTilePoints(e,t,r,o){if(this.isUsingMockSource())return!1;const i=sf.create(this,e,o);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],r)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const r=t.dem.tree,o=t.tileID,i=1<<e.canonical.z-o.canonical.z;let s=e.canonical.x/i-o.canonical.x,n=e.canonical.y/i-o.canonical.y,a=0;for(let t=0;t<e.canonical.z-o.canonical.z&&!r.leaves[a];t++){s*=2,n*=2;const e=2*Math.floor(n)+Math.floor(s);a=r.childOffsets[a]+e,s%=1,n%=1}return{min:this.exaggeration()*r.minimums[a],max:this.exaggeration()*r.maximums[a]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,r){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Ye,e.EvaluationParameters=Rs,e.Event=Je,e.Evented=Qe,e.FillExtrusionBucket=ep,e.Frustum=ol,e.FrustumCorners=rl,e.GLOBE_RADIUS=al,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=nl,e.GLOBE_ZOOM_THRESHOLD_MIN=sl,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const r=new js,o=new rn,i=[],s=e+1+2,n=t[0]+1,a=t[0]+1+(1+t.length),l=(e,t,r)=>{let o=e===s-1?e-2:0===e?e:e-1;return o+=r?24575:0,[o,t]};for(let e=0;e<s;++e)r.emplaceBack(...l(e,0,!0));for(let e=0;e<n;++e)for(let t=0;t<s;++t)r.emplaceBack(...l(t,e,(0===t||t===s-1)&&!0));for(let e=0;e<t.length;++e){const o=t[e];for(let e=0;e<s;++e)r.emplaceBack(...l(e,o,!0))}for(let e=0;e<t.length;++e){const n=o.length,l=t[e]+1+2,c=new rn;for(let r=0;r<l-1;r++){const i=r===l-2,n=i?s*(a-t.length+e-r):s;for(let e=0;e<s-1;e++){const t=r*s+e;0===r||i||0===e||e===s-2?(c.emplaceBack(t+1,t,t+n),c.emplaceBack(t+n,t+n+1,t+1)):(o.emplaceBack(t+1,t,t+n),o.emplaceBack(t+n,t+n+1,t+1))}}const u=na.simpleSegment(0,n,r.length,o.length-n);for(let e=0;e<c.uint16.length;e+=3)o.emplaceBack(c.uint16[e],c.uint16[e+1],c.uint16[e+2]);const p=na.simpleSegment(0,n,r.length,o.length-n);i.push({withoutSkirts:u,withSkirts:p})}return{vertices:r,indices:o,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(cl,ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,el.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new rn;for(let e=0;e<=cl;e++)t.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const r=new an,o=new an;this._poleSegments=[];for(let e=0,t=0;e<sl;e++){const i=360/(1<<e);r.emplaceBack(0,-al,0,.5,0),o.emplaceBack(0,-al,0,.5,1);for(let e=0;e<=cl;e++){const t=e/cl,s=Lr(0,i,t),[n,a,l]=Ml(kl,zl,s,al);r.emplaceBack(n,a,l,t,0),o.emplaceBack(n,a,l,t,1)}this._poleSegments.push(na.simpleSegment(t,0,66,64)),t+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,Ya,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(o,Ya,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new cn,r=cl,o=r+1+2,i=1;this._wireframeSegments=[];for(let e=0,s=0;e<ul.length;e++){const n=ul[e];for(let e=i;e<n+i;e++)for(let s=i;s<r+i;s++){const r=e*o+s;t.emplaceBack(r,r+1),t.emplaceBack(r,r+o),t.emplaceBack(r,r+o+1)}const a=n*r*3;this._wireframeSegments.push(na.simpleSegment(0,s,(n+1)*o,a)),s+=a}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=rh,e.ImagePosition=Ed,e.KDBush=mf,e.LivePerformanceUtils=je,e.LngLat=Gl,e.LngLatBounds=la,e.LocalGlyphMode=th,e.MAX_MERCATOR_LATITUDE=Xl,e.MercatorCoordinate=Yl,e.ONE_EM=zp,e.OverscaledTileID=gp,e.PerformanceMarkers=Ne,e.Point=y,e.Properties=Is,e.RGBAImage=Nc,e.Ray=tl,e.RequestManager=class{constructor(e,t,r){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",p,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!be(e))return e;const r=Me(e);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!be(e))return e;const r=Me(e);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeSourceURL(e,t,r,o){if(!be(e))return e;const i=Me(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),r&&i.params.push(`language=${r}`),o&&i.params.push(`worldview=${o}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,r,o){const i=Me(e);return be(e)?(i.path=`/styles/v1${i.path}/sprite${t}${r}`,this._makeAPIURL(i,this._customAccessToken||o)):(i.path+=`${t}${r}`,Te(i))}normalizeTileURL(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!be(e))return e;const o=Me(e);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||r&&"raster"!==o.authority&&512===r?"@2x":""}${s.supported?".webp":"$1"}`),"raster"===o.authority?o.path=`/${i.RASTER_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${i.TILE_URL_VERSION}${o.path}`);const n=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(o.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&o.params.push(`sku=${this._skuToken}`),this._makeAPIURL(o,n)}canonicalizeTileURL(e,t){const r=Me(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let o="mapbox://";r.path.match(/^\/raster\/v1\//)?o+=`raster/${r.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:o+=`tiles/${r.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let s=r.params;return t&&(s=s.filter((e=>!e.match(/^access_token=/)))),s.length&&(o+=`?${s.join("&")}`),o}canonicalizeTileset(e,t){const r=!!t&&be(t),o=[];for(const t of e.tiles||[])Se(t)?o.push(this.canonicalizeTileURL(t,r)):o.push(t);return o}_makeAPIURL(e,t){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",o=Me(i.API_URL);if(e.protocol=o.protocol,e.authority=o.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==o.path&&(e.path=`${o.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return Te(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),Te(e)}},e.ResourceType=le,e.SegmentVector=na,e.SourceCache=ef,e.StencilMode=Zg,e.StructArrayLayout1ui2=un,e.StructArrayLayout2f1f2i16=Qs,e.StructArrayLayout2i4=js,e.StructArrayLayout2ui4=cn,e.StructArrayLayout3f12=tn,e.StructArrayLayout3ui6=rn,e.StructArrayLayout4i8=Gs,e.StructArrayLayout5f20=an,e.Texture=mg,e.Tile=Dg,e.Transitionable=Es,e.Uniform1f=kn,e.Uniform1i=class extends An{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},e.Uniform2f=class extends An{constructor(e){super(e),this.current=[0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},e.Uniform3f=class extends An{constructor(e){super(e),this.current=[0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},e.Uniform4f=zn,e.UniformColor=Nn,e.UniformMatrix2f=class extends An{constructor(e){super(e),this.current=Gn}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},e.UniformMatrix3f=class extends An{constructor(e){super(e),this.current=Un}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},e.UniformMatrix4f=class extends An{constructor(e){super(e),this.current=jn}set(e,t,r){if(this.fetchUniformLocation(e,t)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},e.UnwrappedTileID=hp,e.ValidationError=ri,e.VectorTileFeature=Hu,e.VectorTileWorkerSource=class extends Qe{constructor(e,t,r,o,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=i||ff,this.loading={},this.loaded={},this.deduped=new gf(e.scheduler),this.isSpriteLoaded=o,this.scheduler=e.scheduler}loadTile(e,t){const r=e.uid,o=e&&e.request,i=o&&o.collectResourceTiming,s=this.loading[r]=new df(e);s.abort=this.loadVectorData(e,((n,a)=>{const l=!this.loading[r];if(delete this.loading[r],l||n||!a)return s.status="done",l||(this.loaded[r]=s),t(n);const c=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl),s.vectorTile=a.vectorTile||new Vu(new _d(c));const p=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return t(e);const s={};if(i){const e=We(o);e.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,D({rawTileData:c.slice(0)},r,u,s))}))};this.isSpriteLoaded?p():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(p,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):p()})),this.loaded=this.loaded||{},this.loaded[r]=s}))}reloadTile(e,t){const r=this.loaded,o=e.uid,i=this;if(r&&r[o]){const s=r[o];s.showCollisionBoxes=e.showCollisionBoxes,s.enableTerrain=!!e.enableTerrain,s.projection=e.projection,s.tileTransform=Ch(e.tileID.canonical,e.projection);const n=(e,r)=>{const o=s.reloadCallback;o&&(delete s.reloadCallback,s.parse(s.vectorTile,i.layerIndex,this.availableImages,i.actor,o)),t(e,r)};"parsing"===s.status?s.reloadCallback=n:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,n):n())}}abortTile(e,t){const r=e.uid,o=this.loading[r];o&&(o.abort&&o.abort(),delete this.loading[r]),t()}removeTile(e,t){const r=this.loaded,o=e.uid;r&&r[o]&&delete r[o],t()}},e.WritingMode=Td,e.ZoomDependentExpression=Yo,e.add=wa,e.addDynamicAttributes=rg,e.adjoint=function(e,t){var r=t[0],o=t[1],i=t[2],s=t[3],n=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e[0]=n*u-a*c,e[1]=i*c-o*u,e[2]=o*a-i*n,e[3]=a*l-s*u,e[4]=r*u-i*l,e[5]=i*s-r*a,e[6]=s*c-n*l,e[7]=o*l-r*c,e[8]=r*n-o*s,e},e.asyncAll=C,e.bezier=M,e.bindAll=z,e.boundsAttributes=Cg,e.bufferConvexPolygon=function(e,t){const r=[];for(let o=0;o<e.length;o++){const i=B(o-1,-1,e.length-1),s=B(o+1,-1,e.length-1),n=e[o],a=e[s],l=e[i].sub(n).unit(),c=a.sub(n).unit(),u=c.angleWithSep(l.x,l.y),p=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(n.add(p))}return r},e.cacheEntryPossiblyAdded=function(e){ae++,ae>oe&&(e.getActor().send("enforceCacheSizeLimit",re),ae=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:r,y:o}=e.point,i=Dl(r,o,e.worldSize/e._pixelsPerMercatorPixel,0,0);return fa(i,i,Ll(yl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:r}=e.point,{lng:o,lat:i}=e._center;return Dl(t,r,e.worldSize,o,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,r=t/Vl(1,e.center.lat),o=ha(new Float64Array(16));return _a(o,o,[e.point.x,e.point.y,0]),ma(o,o,[r,r,t]),Float32Array.from(o)},e.circumferenceAtLatitude=Wl,e.clamp=w,e.clearTileCache=function(e){if(!ie())return;const r=t.caches.delete(Q);e&&r.catch(e).then((()=>e()))},e.clipLine=Xd,e.clone=function(e){var t=new ua(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=G,e.collisionCircleLayout=kp,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new ua(16);return ua!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=pa,e.createExpression=Xo,e.createLayout=zs,e.createStyleLayer=function(e){return"custom"===e.type?new hg(e):new _g[e.type](e)},e.cross=Aa,e.degToRad=R,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=Pa,e.earthRadius=Nl,e.ease=T,e.easeCubicInOut=E,e.ecefToLatLng=function([e,t,r]){const o=Math.hypot(e,t,r),i=Math.atan2(e,r),s=.5*Math.PI-Math.acos(-t/o);return new Gl(v(i),v(s))},e.emitValidationErrors=Wi,e.endsWith=N,e.enforceCacheSizeLimit=function(e){se(),ee&&ee.then((t=>{t.keys().then((r=>{for(let o=0;o<r.length-e;o++)t.delete(r[o])}))}))},e.evaluateSizeForFeature=Up,e.evaluateSizeForZoom=Gp,e.evaluateVariableOffset=yh,e.evented=ms,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ke,e.exported$1=s,e.extend=D,e.extend$1=tt,e.fillExtrusionHeightLift=ap,e.filterObject=U,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],o=t[1],i=t[2],s=t[3],n=r+r,a=o+o,l=i+i,c=r*n,u=o*n,p=o*a,d=i*n,h=i*a,g=i*l,f=s*n,_=s*a,m=s*l;return e[0]=1-p-g,e[1]=u+m,e[2]=d-_,e[3]=0,e[4]=u-m,e[5]=1-c-g,e[6]=h+f,e[7]=0,e[8]=d+_,e[9]=h-f,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=r,e[2]=0,e[3]=-r,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=Sa,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return x[t]},e.getAABBPointSquareDist=function(e,t,r){let o=0;for(let i=0;i<2;++i){const s=r?r[i]:0;e[i]>s&&(o+=(e[i]-s)*(e[i]-s)),t[i]<s&&(o+=(s-t[i])*(s-t[i]))}return o},e.getAnchorAlignment=zd,e.getAnchorJustification=Sh,e.getBounds=function(e){let t=1/0,r=1/0,o=-1/0,i=-1/0;for(const s of e)t=Math.min(t,s.x),r=Math.min(r,s.y),o=Math.max(o,s.x),i=Math.max(i,s.y);return{min:new y(t,r),max:new y(o,i)}},e.getColumn=Y,e.getDefaultExportFromCjs=d,e.getGridMatrix=function(e,t,r,o){const i=t.getNorth(),s=t.getSouth(),n=t.getWest(),a=t.getEast(),l=1<<e.z,c=a-n,u=i-s,p=c/cl,d=-u/ul[r],h=[0,p,0,d,0,0,i,n,0];if(e.z>0){const e=180/o;da(h,h,[e/c+1,0,0,0,e/u+1,0,-.5*e/p,.5*e/d,1])}return h[2]=l,h[5]=e.x,h[8]=e.y,h},e.getImage=me,e.getJSON=function(e,t){return pe(D(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Xl-5;e=w(e,-t,t)/t*90;const r=Math.pow(Math.abs(Math.sin(R(e))),3);return Math.round(r*(ul.length-1))},e.getMapSessionAPI=ke,e.getPerformanceMeasurement=We,e.getProjection=Jh,e.getRTLTextPluginStatus=ys,e.getReferrer=ue,e.getTilePoint=function(e,{x:t,y:r},o=0){return new y(((t-o)*e.scale-e.x)*aa,(r*e.scale-e.y)*aa)},e.getTileVec3=function(e,t,r=0){return Ta(((t.x-r)*e.scale-e.x)*aa,(t.y*e.scale-e.y)*aa,Zl(t.z,t.y))},e.getVideo=function(e,r){const o=t.document.createElement("video");o.muted=!0,o.onloadstart=function(){r(null,o)};for(let r=0;r<e.length;r++){const i=t.document.createElement("source");he(e[r])||(o.crossOrigin="Anonymous"),i.src=e[r],o.appendChild(i)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],r=ha(new Float64Array(16));return fa(r,e.pixelMatrix,e.globeMatrix),ka(t,t,r),new y(t[0],t[1])},e.globeDenormalizeECEF=Ll,e.globeECEFOrigin=function(e,t){const r=[0,0,0];return ka(r,r,Cl(yl(t.canonical))),ka(r,r,e),r},e.globeMetersToEcef=gl,e.globeNormalizeECEF=Cl,e.globePixelsToTileUnits=function(e,t){return aa/(512*Math.pow(2,e))*Fl(yl(t))},e.globePoleMatrixForTile=function(e,t,r){const o=ha(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return ba(o,r.globeMatrix,i),Float32Array.from(o)},e.globeTileBounds=yl,e.globeTiltAtLngLat=Ol,e.globeToMercatorTransition=Il,e.globeUseCustomAntiAliasing=function(e,t,r){const o=Il(r.zoom),i=e.style.map._antialias,s=!!t.extStandardDerivatives,n=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===o&&!i&&!n&&s},e.identity=ha,e.identity$1=Ha,e.invert=ga,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Pl,e.isMapAuthenticated=function(e){return ze.has(e)},e.isMapboxURL=be,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!X(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Kl,e.latLngToECEF=Tl,e.len=Ga,e.length=Ma,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=Hl,e.loadVectorTile=ff,e.makeRequest=pe,e.mapValue=function(e,t,r,o,i){return w((e-t)/(r-t)*(i-o)+o,o,i)},e.mercatorScale=Jl,e.mercatorXfromLng=ql,e.mercatorYfromLat=$l,e.mercatorZfromAltitude=Vl,e.mul=va,e.mul$1=Ua,e.multiply=fa,e.multiply$1=da,e.multiply$2=Ba,e.nextPowerOfTwo=A,e.normalize=Oa,e.normalize$1=Xa,e.normalize$2=qa,e.number=Lr,e.ortho=function(e,t,r,o,i,s,n){var a=1/(t-r),l=1/(o-i),c=1/(s-n);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(i+o)*l,e[14]=(n+s)*c,e[15]=1,e},e.pbf=Kp,e.perspective=function(e,t,r,o,i){var s,n=1/Math.tan(t/2);return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+o)*(s=1/(o-i)),e[14]=2*i*o*s):(e[10]=-1,e[14]=-2*o),e},e.pick=function(e,t){const r={};for(let o=0;o<t.length;o++){const i=t[o];i in e&&(r[i]=e[i])}return r},e.plugin=Ss,e.pointGeometry=_,e.polesInViewport=function(e){const t=ha(new Float64Array(16));fa(t,e.pixelMatrix,e.globeMatrix);const r=[0,pl,0],o=[0,dl,0];return ka(r,r,t),ka(o,o,t),[r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Pl(e,new Gl(e.center.lat,90)),o[0]>0&&o[0]<=e.width&&o[1]>0&&o[1]<=e.height&&!Pl(e,new Gl(e.center.lat,-90))]},e.polygonContainsPoint=Sc,e.polygonIntersectsBox=Rc,e.polygonIntersectsPolygon=pc,e.polygonizeBounds=function(e,t,r=0,o=!0){const i=new y(r,r),s=e.sub(i),n=t.add(i),a=[s,new y(n.x,s.y),n,new y(s.x,n.y)];return o&&a.push(s.clone()),a},e.posAttributes=el,e.postMapLoadEvent=Ie,e.postPerformanceEvent=Pe,e.postTurnstileEvent=Le,e.potpack=vd,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=v,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:hs,pluginURL:gs}),ms.on("pluginStateChange",e),e},e.removeAuthState=function(e){ze.delete(e)},e.renderColorRamp=Uc,e.resample=ec,e.rotateX=ya,e.rotateX$1=Ka,e.rotateY=ba,e.rotateY$1=Za,e.rotateZ=function(e,t,r){var o=Math.sin(r),i=Math.cos(r),s=t[0],n=t[1],a=t[2],l=t[3],c=t[4],u=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*o,e[1]=n*i+u*o,e[2]=a*i+p*o,e[3]=l*i+d*o,e[4]=c*i-s*o,e[5]=u*i-n*o,e[6]=p*i-a*o,e[7]=d*i-l*o,e},e.rotateZ$1=function(e,t,r){r*=.5;var o=t[0],i=t[1],s=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l+i*a,e[1]=i*l-o*a,e[2]=s*l+n*a,e[3]=n*l-s*a,e},e.scale=ma,e.scale$1=Wa,e.scale$2=Da,e.scaleAndAdd=Ia,e.set=function(e,t,r,o){return e[0]=t,e[1]=r,e[2]=o,e},e.setCacheLimits=function(e,t){re=e,oe=t},e.setColumn=function(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]},e.setRTLTextPlugin=function(e,t,r=!1){if(hs===cs||hs===us||hs===ps)throw new Error("setRTLTextPlugin cannot be called multiple times.");gs=Ke.resolveURL(e),hs=cs,ds=t,_s(),r||bs()},e.smoothstep=F,e.spec=et,e.squaredLength=function(e){var t=e[0],r=e[1],o=e[2];return t*t+r*r+o*o},e.storeAuthState=function(e,t){t?ze.add(e):ze.delete(e)},e.sub=ja,e.subtract=Fa,e.symbolSize=Wp,e.tileAABB=function(e,t,r,o,i,s,n,a,l){if("globe"===l.name)return vl(e,t,new dp(r,o,i));const c=Ch({z:r,x:o,y:i},l);return new il([(s+c.x/c.scale)*t,t*(c.y/c.scale),n],[(s+c.x2/c.scale)*t,t*(c.y2/c.scale),a])},e.tileCornersToBounds=xl,e.tileTransform=Ch,e.transformMat3=function(e,t,r){var o=t[0],i=t[1],s=t[2];return e[0]=o*r[0]+i*r[3]+s*r[6],e[1]=o*r[1]+i*r[4]+s*r[7],e[2]=o*r[2]+i*r[5]+s*r[8],e},e.transformMat4=ka,e.transformMat4$1=$a,e.transformQuat=za,e.transitionTileAABBinECEF=Sl,e.translate=_a,e.transpose=function(e,t){if(e===t){var r=t[1],o=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=o,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=fs,e.uniqueId=O,e.updateGlobeVertexNormal=function(e,t,r,o,i){const s=5*t+2;e.float32[s+0]=r,e.float32[s+1]=o,e.float32[s+2]=i},e.validateCustomStyleLayer=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Gi(xi(e)),e.validateFog=e=>Gi(Pi(e)),e.validateLayer=e=>Gi(Fi(e)),e.validateLight=e=>Gi(Ii(e)),e.validateSource=e=>Gi(Li(e)),e.validateStyle=Ni,e.validateTerrain=e=>Gi(Oi(e)),e.values=L,e.vectorTile=Ou,e.version=r,e.warnOnce=q,e.window=t,e.wrap=B})),o(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const o of e)r+=`${t(o)},`;return`${r}]`}let r="{";for(const o of Object.keys(e).sort())r+=`${o}:${t(e[o])},`;return`${r}}`}function r(r){let o="";for(const i of e.refProperties)o+=`/${t(r[i])}`;return o}class o{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,o){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of o)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const o={};for(let i=0;i<e.length;i++){const s=t&&t[e[i].id]||r(e[i]);t&&(t[e[i].id]=s);let n=o[s];n||(n=o[s]=[]),n.push(e[i])}const i=[];for(const e in o)i.push(o[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const o=r.source||"";let i=this.familiesBySource[o];i||(i=this.familiesBySource[o]={});const s=r.sourceLayer||"_geojsonTileLayer";let n=i[s];n||(n=i[s]=[]),n.push(t)}}}class i{loadTile(t,r){const{uid:o,encoding:i,rawImageData:s,padding:n,buildQuadTree:a}=t,l=e.window.ImageBitmap&&s instanceof e.window.ImageBitmap?this.getImageData(s,n):s;r(null,new e.DEMData(o,l,i,n<1,a))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}function s(e,t){if(0!==e.length){n(e[0],t);for(var r=1;r<e.length;r++)n(e[r],!t)}}function n(e,t){for(var r=0,o=0,i=0,s=e.length,n=s-1;i<s;n=i++){var a=(e[i][0]-e[n][0])*(e[n][1]+e[i][1]),l=r+a;o+=Math.abs(r)>=Math.abs(a)?r-l+a:a-l+r,r=l}r+o>=0!=!!t&&e.reverse()}var a=e.getDefaultExportFromCjs((function e(t,r){var o,i=t&&t.type;if("FeatureCollection"===i)for(o=0;o<t.features.length;o++)e(t.features[o],r);else if("GeometryCollection"===i)for(o=0;o<t.geometries.length;o++)e(t.geometries[o],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)s(t.coordinates,r);else if("MultiPolygon"===i)for(o=0;o<t.coordinates.length;o++)s(t.coordinates[o],r);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,p=e.vectorTile.VectorTileFeature,d=h;function h(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}h.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],o=[],i=0;i<r.length;i++)o.push(new u(r[i][0],r[i][1]));this.geometry.push(o)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,o=1/0,i=-1/0,s=0;s<e.length;s++)for(var n=e[s],a=0;a<n.length;a++){var l=n[a];t=Math.min(t,l.x),r=Math.max(r,l.x),o=Math.min(o,l.y),i=Math.max(i,l.y)}return[t,o,r,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var f=e.pbf,_=d;function m(e){var t=new f;return function(e,t){for(var r in e.layers)t.writeMessage(3,y,e.layers[r])}(e,t),t.finish()}function y(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var o={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)o.feature=e.feature(r),t.writeMessage(2,b,o);var i=o.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var s=o.values;for(r=0;r<s.length;r++)t.writeMessage(4,E,s[r])}function b(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,S,e),t.writeVarintField(3,r.type),t.writeMessage(4,x,r)}function S(e,t){var r=e.feature,o=e.keys,i=e.values,s=e.keycache,n=e.valuecache;for(var a in r.properties){var l=r.properties[a],c=s[a];if(null!==l){void 0===c&&(o.push(a),s[a]=c=o.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var p=u+":"+l,d=n[p];void 0===d&&(i.push(l),n[p]=d=i.length-1),t.writeVarint(d)}}}function R(e,t){return(t<<3)+(7&e)}function v(e){return e<<1^e>>31}function x(e,t){for(var r=e.loadGeometry(),o=e.type,i=0,s=0,n=r.length,a=0;a<n;a++){var l=r[a],c=1;1===o&&(c=l.length),t.writeVarint(R(1,c));for(var u=3===o?l.length-1:l.length,p=0;p<u;p++){1===p&&1!==o&&t.writeVarint(R(2,u-1));var d=l[p].x-i,h=l[p].y-s;t.writeVarint(v(d)),t.writeVarint(v(h)),i+=d,s+=h}3===o&&t.writeVarint(R(7,1))}}function E(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=m,c.exports.fromVectorTileJs=m,c.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var o in e)r[o]=new _(e[o].features,t),r[o].name=o,r[o].version=t.version,r[o].extent=t.extent;return m({layers:r})},c.exports.GeoJSONWrapper=_;var M=e.getDefaultExportFromCjs(c.exports);const T={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},w=Math.fround||(F=new Float32Array(1),e=>(F[0]=+e,F[0]));var F;const B=3,C=5,L=6;class D{constructor(e){this.options=Object.assign(Object.create(T),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{minZoom:t,maxZoom:r}=this.options;this.points=e;const o=[];for(let t=0;t<e.length;t++){const r=e[t];if(!r.geometry)continue;const[i,s]=r.geometry.coordinates,n=w(P(i)),a=w(A(s));o.push(n,a,1/0,t,-1,1),this.options.reduce&&o.push(0)}let i=this.trees[r+1]=this._createTree(o);for(let e=r;e>=t;e--)i=this.trees[e]=this._createTree(this._cluster(i,e));return this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,o,180,s],t),n=this.getClusters([-180,o,i,s],t);return e.concat(n)}const n=this.trees[this._limitZoom(t)],a=n.range(P(r),A(s),P(i),A(o)),l=n.data,c=[];for(const e of a){const t=this.stride*e;c.push(l[t+C]>1?I(l,t,this.clusterProps):this.points[l[t+B]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),o="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(o);const s=i.data;if(t*this.stride>=s.length)throw new Error(o);const n=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=i.within(s[t*this.stride],s[t*this.stride+1],n),l=[];for(const t of a){const r=t*this.stride;s[r+4]===e&&l.push(s[r+C]>1?I(s,r,this.clusterProps):this.points[s[r+B]])}if(0===l.length)throw new Error(o);return l}getLeaves(e,t,r){const o=[];return this._appendLeaves(o,e,t=t||10,r=r||0,0),o}getTile(e,t,r){const o=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:s,radius:n}=this.options,a=n/s,l=(r-a)/i,c=(r+1+a)/i,u={features:[]};return this._addTileFeatures(o.range((t-a)/i,l,(t+1+a)/i,c),o.data,t,r,i,u),0===t&&this._addTileFeatures(o.range(1-a/i,l,1,c),o.data,i,r,i,u),t===i-1&&this._addTileFeatures(o.range(0,l,a/i,c),o.data,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,o,i){const s=this.getChildren(t);for(const t of s){const s=t.properties;if(s&&s.cluster?i+s.point_count<=o?i+=s.point_count:i=this._appendLeaves(e,s.cluster_id,r,o,i):i<o?i++:e.push(t),e.length===r)break}return i}_createTree(t){const r=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,o,i,s){for(const n of e){const e=n*this.stride,a=t[e+C]>1;let l,c,u;if(a)l=O(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const r=this.points[t[e+B]];l=r.properties;const[o,i]=r.geometry.coordinates;c=P(o),u=A(i)}const p={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(u*i-o))]],tags:l};let d;d=a||this.options.generateId?t[e+B]:this.points[t[e+B]].id,void 0!==d&&(p.id=d),s.features.push(p)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:o,reduce:i,minPoints:s}=this.options,n=r/(o*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let r=0;r<a.length;r+=c){if(a[r+2]<=t)continue;a[r+2]=t;const o=a[r],u=a[r+1],p=e.within(a[r],a[r+1],n),d=a[r+C];let h=d;for(const e of p){const r=e*c;a[r+2]>t&&(h+=a[r+C])}if(h>d&&h>=s){let e,s=o*d,n=u*d,g=-1;const f=((r/c|0)<<5)+(t+1)+this.points.length;for(const o of p){const l=o*c;if(a[l+2]<=t)continue;a[l+2]=t;const u=a[l+C];s+=a[l]*u,n+=a[l+1]*u,a[l+4]=f,i&&(e||(e=this._map(a,r,!0),g=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,l)))}a[r+4]=f,l.push(s/h,n/h,1/0,f,-1,h),i&&l.push(g)}else{for(let e=0;e<c;e++)l.push(a[r+e]);if(h>1)for(const e of p){const r=e*c;if(!(a[r+2]<=t)){a[r+2]=t;for(let e=0;e<c;e++)l.push(a[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+C]>1){const o=this.clusterProps[e[t+L]];return r?Object.assign({},o):o}const o=this.points[e[t+B]].properties,i=this.options.map(o);return r&&i===o?Object.assign({},i):i}}function I(e,t,r){return{type:"Feature",id:e[t+B],properties:O(e,t,r),geometry:{type:"Point",coordinates:[(o=e[t],360*(o-.5)),k(e[t+1])]}};var o}function O(e,t,r){const o=e[t+C],i=o>=1e4?`${Math.round(o/1e3)}k`:o>=1e3?Math.round(o/100)/10+"k":o,s=e[t+L],n=-1===s?{}:Object.assign({},r[s]);return Object.assign(n,{cluster:!0,cluster_id:e[t+B],point_count:o,point_count_abbreviated:i})}function P(e){return e/360+.5}function A(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function k(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function z(e,t,r,o){for(var i,s=o,n=r-t>>1,a=r-t,l=e[t],c=e[t+1],u=e[r],p=e[r+1],d=t+3;d<r;d+=3){var h=N(e[d],e[d+1],l,c,u,p);if(h>s)i=d,s=h;else if(h===s){var g=Math.abs(d-n);g<a&&(i=d,a=g)}}s>o&&(i-t>3&&z(e,t,i,o),e[i+2]=s,r-i>3&&z(e,i,r,o))}function N(e,t,r,o,i,s){var n=i-r,a=s-o;if(0!==n||0!==a){var l=((e-r)*n+(t-o)*a)/(n*n+a*a);l>1?(r=i,o=s):l>0&&(r+=n*l,o+=a*l)}return(n=e-r)*n+(a=t-o)*a}function j(e,t,r,o){var i={id:void 0===e?null:e,type:t,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)U(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var o=0;o<t.length;o++)U(e,t[o]);else if("MultiPolygon"===r)for(o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++)U(e,t[o][i])}(i),i}function U(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function G(e,t,r,o){if(t.geometry){var i=t.geometry.coordinates,s=t.geometry.type,n=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=o||0),"Point"===s)W(i,a);else if("MultiPoint"===s)for(var c=0;c<i.length;c++)W(i[c],a);else if("LineString"===s)q(i,a,n,!1);else if("MultiLineString"===s){if(r.lineMetrics){for(c=0;c<i.length;c++)q(i[c],a=[],n,!1),e.push(j(l,"LineString",a,t.properties));return}$(i,a,n,!1)}else if("Polygon"===s)$(i,a,n,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(c=0;c<t.geometry.geometries.length;c++)G(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,o);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];$(i[c],u,n,!0),a.push(u)}}e.push(j(l,s,a,t.properties))}}function W(e,t){t.push(V(e[0])),t.push(H(e[1])),t.push(0)}function q(e,t,r,o){for(var i,s,n=0,a=0;a<e.length;a++){var l=V(e[a][0]),c=H(e[a][1]);t.push(l),t.push(c),t.push(0),a>0&&(n+=o?(i*c-l*s)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-s,2))),i=l,s=c}var u=t.length-3;t[2]=1,z(t,0,u,r),t[u+2]=1,t.size=Math.abs(n),t.start=0,t.end=t.size}function $(e,t,r,o){for(var i=0;i<e.length;i++){var s=[];q(e[i],s,r,o),t.push(s)}}function V(e){return e/360+.5}function H(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function K(e,t,r,o,i,s,n,a){if(o/=t,s>=(r/=t)&&n<o)return e;if(n<r||s>=o)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],p=u.geometry,d=u.type,h=0===i?u.minX:u.minY,g=0===i?u.maxX:u.maxY;if(h>=r&&g<o)l.push(u);else if(!(g<r||h>=o)){var f=[];if("Point"===d||"MultiPoint"===d)Z(p,f,r,o,i);else if("LineString"===d)X(p,f,r,o,i,!1,a.lineMetrics);else if("MultiLineString"===d)Y(p,f,r,o,i,!1);else if("Polygon"===d)Y(p,f,r,o,i,!0);else if("MultiPolygon"===d)for(var _=0;_<p.length;_++){var m=[];Y(p[_],m,r,o,i,!0),m.length&&f.push(m)}if(f.length){if(a.lineMetrics&&"LineString"===d){for(_=0;_<f.length;_++)l.push(j(u.id,d,f[_],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===f.length?(d="LineString",f=f[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===f.length?"Point":"MultiPoint"),l.push(j(u.id,d,f,u.tags))}}}return l.length?l:null}function Z(e,t,r,o,i){for(var s=0;s<e.length;s+=3){var n=e[s+i];n>=r&&n<=o&&(t.push(e[s]),t.push(e[s+1]),t.push(e[s+2]))}}function X(e,t,r,o,i,s,n){for(var a,l,c=J(e),u=0===i?ee:te,p=e.start,d=0;d<e.length-3;d+=3){var h=e[d],g=e[d+1],f=e[d+2],_=e[d+3],m=e[d+4],y=0===i?h:g,b=0===i?_:m,S=!1;n&&(a=Math.sqrt(Math.pow(h-_,2)+Math.pow(g-m,2))),y<r?b>r&&(l=u(c,h,g,_,m,r),n&&(c.start=p+a*l)):y>o?b<o&&(l=u(c,h,g,_,m,o),n&&(c.start=p+a*l)):Q(c,h,g,f),b<r&&y>=r&&(l=u(c,h,g,_,m,r),S=!0),b>o&&y<=o&&(l=u(c,h,g,_,m,o),S=!0),!s&&S&&(n&&(c.end=p+a*l),t.push(c),c=J(e)),n&&(p+=a)}var R=e.length-3;h=e[R],g=e[R+1],f=e[R+2],(y=0===i?h:g)>=r&&y<=o&&Q(c,h,g,f),R=c.length-3,s&&R>=3&&(c[R]!==c[0]||c[R+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&t.push(c)}function J(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Y(e,t,r,o,i,s){for(var n=0;n<e.length;n++)X(e[n],t,r,o,i,s,!1)}function Q(e,t,r,o){e.push(t),e.push(r),e.push(o)}function ee(e,t,r,o,i,s){var n=(s-t)/(o-t);return e.push(s),e.push(r+(i-r)*n),e.push(1),n}function te(e,t,r,o,i,s){var n=(s-r)/(i-r);return e.push(t+(o-t)*n),e.push(s),e.push(1),n}function re(e,t){for(var r=[],o=0;o<e.length;o++){var i,s=e[o],n=s.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)i=oe(s.geometry,t);else if("MultiLineString"===n||"Polygon"===n){i=[];for(var a=0;a<s.geometry.length;a++)i.push(oe(s.geometry[a],t))}else if("MultiPolygon"===n)for(i=[],a=0;a<s.geometry.length;a++){for(var l=[],c=0;c<s.geometry[a].length;c++)l.push(oe(s.geometry[a][c],t));i.push(l)}r.push(j(s.id,n,i,s.tags))}return r}function oe(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+t,e[o+1],e[o+2]);return r}function ie(e,t){if(e.transformed)return e;var r,o,i,s=1<<e.z,n=e.x,a=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(o=0;o<c.length;o+=2)l.geometry.push(se(c[o],c[o+1],t,s,n,a));else for(o=0;o<c.length;o++){var p=[];for(i=0;i<c[o].length;i+=2)p.push(se(c[o][i],c[o][i+1],t,s,n,a));l.geometry.push(p)}}return e.transformed=!0,e}function se(e,t,r,o,i,s){return[Math.round(r*(e*o-i)),Math.round(r*(t*o-s))]}function ne(e,t,r,o,i){for(var s=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),n={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){n.numFeatures++,ae(n,e[a],s,i);var l=e[a].minX,c=e[a].minY,u=e[a].maxX,p=e[a].maxY;l<n.minX&&(n.minX=l),c<n.minY&&(n.minY=c),u>n.maxX&&(n.maxX=u),p>n.maxY&&(n.maxY=p)}return n}function ae(e,t,r,o){var i=t.geometry,s=t.type,n=[];if("Point"===s||"MultiPoint"===s)for(var a=0;a<i.length;a+=3)n.push(i[a]),n.push(i[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===s)le(n,i,e,r,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(a=0;a<i.length;a++)le(n,i[a],e,r,"Polygon"===s,0===a);else if("MultiPolygon"===s)for(var l=0;l<i.length;l++){var c=i[l];for(a=0;a<c.length;a++)le(n,c[a],e,r,!0,0===a)}if(n.length){var u=t.tags||null;if("LineString"===s&&o.lineMetrics){for(var p in u={},t.tags)u[p]=t.tags[p];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:n,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function le(e,t,r,o,i,s){var n=o*o;if(o>0&&t.size<(i?n:o))r.numPoints+=t.length/3;else{for(var a=[],l=0;l<t.length;l+=3)(0===o||t[l+2]>n)&&(r.numSimplified++,a.push(t[l]),a.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,o=0,i=e.length,s=i-2;o<i;s=o,o+=2)r+=(e[o]-e[s])*(e[o+1]+e[s+1]);if(r>0===t)for(o=0,i=e.length;o<i/2;o+=2){var n=e[o],a=e[o+1];e[o]=e[i-2-o],e[o+1]=e[i-1-o],e[i-2-o]=n,e[i-1-o]=a}}(a,s),e.push(a)}}function ce(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var o=0;o<e.features.length;o++)G(r,e.features[o],t,o);else G(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(this.stats={},this.total=0),o=function(e,t){var r=t.buffer/t.extent,o=e,i=K(e,1,-1-r,r,0,-1,2,t),s=K(e,1,1-r,2+r,0,-1,2,t);return(i||s)&&(o=K(e,1,-r,1+r,0,-1,2,t)||[],i&&(o=re(i,1).concat(o)),s&&(o=o.concat(re(s,-1)))),o}(o,t),o.length&&this.splitTile(o,0,0,0)}function ue(e,t,r){return 32*((1<<e)*r+t)+e}function pe(t,r){const o=t.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);const i=this._geoJSONIndex.getTile(o.z,o.x,o.y);if(!i)return r(null,null);const s=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.Point(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const o=[];for(const t of r)o.push(new e.Point(t[0],t[1]));t.push(o)}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}(this._features[t])}}(i.features);let n=M(s);0===n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n)),r(null,{vectorTile:s,rawData:n.buffer})}ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ce.prototype.splitTile=function(e,t,r,o,i,s,n){for(var a=[e,t,r,o],l=this.options,c=l.debug;a.length;){o=a.pop(),r=a.pop(),t=a.pop(),e=a.pop();var u=1<<t,p=ue(t,r,o),d=this.tiles[p];if(!d&&(d=this.tiles[p]=ne(e,t,r,o,l),this.tileCoords.push({z:t,x:r,y:o}),c)){var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var g=1<<i-t;if(r!==Math.floor(s/g)||o!==Math.floor(n/g))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){var f,_,m,y,b,S,R=.5*l.buffer/l.extent,v=.5-R,x=.5+R,E=1+R;f=_=m=y=null,b=K(e,u,r-R,r+x,0,d.minX,d.maxX,l),S=K(e,u,r+v,r+E,0,d.minX,d.maxX,l),e=null,b&&(f=K(b,u,o-R,o+x,1,d.minY,d.maxY,l),_=K(b,u,o+v,o+E,1,d.minY,d.maxY,l),b=null),S&&(m=K(S,u,o-R,o+x,1,d.minY,d.maxY,l),y=K(S,u,o+v,o+E,1,d.minY,d.maxY,l),S=null),a.push(f||[],t+1,2*r,2*o),a.push(_||[],t+1,2*r,2*o+1),a.push(m||[],t+1,2*r+1,2*o),a.push(y||[],t+1,2*r+1,2*o+1)}}},ce.prototype.getTile=function(e,t,r){var o=this.options,i=o.extent;if(e<0||e>24)return null;var s=1<<e,n=ue(e,t=(t%s+s)%s,r);if(this.tiles[n])return ie(this.tiles[n],i);for(var a,l=e,c=t,u=r;!a&&l>0;)l--,c=Math.floor(c/2),u=Math.floor(u/2),a=this.tiles[ue(l,c,u)];return a&&a.source?(this.splitTile(a.source,l,c,u,e,t,r),this.tiles[n]?ie(this.tiles[n],i):null):null};class de extends e.VectorTileWorkerSource{constructor(e,t,r,o,i){super(e,t,r,o,pe),i&&(this.loadGeoJSON=i)}loadData(t,r){const o=t&&t.request,i=o&&o.collectResourceTiming;this.loadGeoJSON(t,((s,n)=>{if(s||!n)return r(s);if("object"!=typeof n)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{a(n,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const o=n.features.filter((e=>r.value.evaluate({zoom:0},e)));n={type:"FeatureCollection",features:o}}this._geoJSONIndex=t.cluster?new D(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const o={},i={},s={accumulated:null,zoom:0},n={properties:null},a=Object.keys(r);for(const t of a){const[s,n]=r[t],a=e.createExpression(n),l=e.createExpression("string"==typeof s?[s,["accumulated"],["get",t]]:s);o[t]=a.value,i[t]=l.value}return t.map=e=>{n.properties=e;const t={};for(const e of a)t[e]=o[e].evaluate(s,n);return t},t.reduce=(e,t)=>{n.properties=t;for(const t of a)s.accumulated=e[t],e[t]=i[t].evaluate(s,n)},t}(t)).load(n.features):function(e,t){return new ce(e,t)}(n,t.geojsonVtOptions)}catch(s){return r(s)}this.loaded={};const l={};if(i){const r=e.getPerformanceMeasurement(o);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class he{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:de},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}checkIfReady(e,t,r){r()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const o in this.workerSources[t]){const i=this.workerSources[t][o];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=r,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,r){this.availableImages[e]=t;for(const r in this.workerSources[e]){const o=this.workerSources[e][r];for(const e in o)o[e].availableImages=t}r()}enableTerrain(e,t,r){this.terrain=t,r()}setProjection(t,r){this.projections[t]=e.getProjection(r)}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r()}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}loadTile(t,r,o){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(i,o)}loadDEMTile(t,r,o){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(i,o)}reloadTile(t,r,o){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(i,o)}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const o=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==o.removeSource?o.removeSource(t,r):r()}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}syncRTLPluginState(t,r,o){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();o(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r)}}catch(e){o(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const o={send:(t,r,o,i,s,n)=>{this.actor.send(t,r,o,e,s,n)},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](o,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new he(self)),he})),o(["./shared"],(function(e){function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(!t(e[o],r[o]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const o in e)if(!t(e[o],r[o]))return!1;return!0}return e===r}var r=o;function o(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(r);try{t=new Worker(o),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(o),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(o.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function s(t,r,o){const i=e.window.document.createElement(t);return void 0!==r&&(i.className=r),o&&o.appendChild(i),i}function n(t,r,o){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(r))i.setAttributeNS(null,e,r[e]);return o&&o.appendChild(i),i}o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=e.window.document&&e.window.document.documentElement.style,l=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){a&&l&&(c=a[l],a[l]="none")}function p(){a&&l&&(a[l]=c)}function d(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",d,!0)}function h(){e.window.addEventListener("click",d,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",d,!0)}),0)}function g(e,t){const r=e.getBoundingClientRect();return m(e,r,t)}function f(e,t){const r=e.getBoundingClientRect(),o=[];for(let i=0;i<t.length;i++)o.push(m(e,r,t[i]));return o}function _(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function m(t,r,o){const i=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.Point((o.clientX-r.left)*i,(o.clientY-r.top)*i)}function y(e,t){var r=t[0],o=t[1],i=t[2],s=t[3],n=r*s-i*o;return n?(e[0]=s*(n=1/n),e[1]=-o*n,e[2]=-i*n,e[3]=r*n,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class S extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,r){let o=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),o=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),o=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),o=!1),o}_validateStretch(e,t){if(!e)return!0;let r=0;for(const o of e){if(o[0]<r||o[1]<o[0]||t<o[1])return!1;r=o[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,r){const o={};for(const r of t){this.images[r]||this.fire(new e.Event("styleimagemissing",{id:r}));const t=this.images[r];t?o[r]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}r(null,o)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const r=this.patterns[t],o=this.getImage(t);if(!o)return null;if(r&&r.position.version===o.version)return r.position;if(r)r.position.version=o.version;else{const r={w:o.data.width+2,h:o.data.height+2,x:0,y:0},i=new e.ImagePosition(r,o);this.patterns[t]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture&&this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:r,h:o}=e.potpack(t),i=this.atlasImage;i.resize({width:r||1,height:o||1});for(const t in this.patterns){const{bin:r}=this.patterns[t],o=r.x+1,s=r.y+1,n=this.images[t].data,a=n.width,l=n.height;e.RGBAImage.copy(n,i,{x:0,y:0},{x:o,y:s},{width:a,height:l}),e.RGBAImage.copy(n,i,{x:0,y:l-1},{x:o,y:s-1},{width:a,height:1}),e.RGBAImage.copy(n,i,{x:0,y:0},{x:o,y:s+l},{width:a,height:1}),e.RGBAImage.copy(n,i,{x:a-1,y:0},{x:o-1,y:s},{width:1,height:l}),e.RGBAImage.copy(n,i,{x:0,y:0},{x:o+a,y:s},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const R=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,r){return function([t,r,o]){const i=e.degToRad(r+90),s=e.degToRad(o);return{x:t*Math.cos(i)*Math.sin(s),y:t*Math.sin(i)*Math.sin(s),z:t*Math.cos(s),azimuthal:r,polar:o}}(t.expression.evaluate(r))}interpolate(t,r,o){return{x:e.number(t.x,r.x,o),y:e.number(t.y,r.y,o),z:e.number(t.z,r.z,o),azimuthal:e.number(t.azimuthal,r.azimuthal,o),polar:e.number(t.polar,r.polar,o)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class v extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(R),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,r={}){if(!this._validate(e.validateLight,t,r))for(const r in t){const o=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),o):this._transitionable.setValue(r,o)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,o){return(!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const x=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let E=class extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(x),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(t){for(const r in t){const o=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),o):this._transitionable.setValue(r,o)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function M(t,r,o,i){const s=e.smoothstep(45,65,o),[n,a]=T(t,i),l=e.length(r);let c=1-Math.min(1,Math.exp((l-n)/(a-n)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*s*t.alpha}function T(e,t){const r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}const w=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class F extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(w),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){const t=this._transform,r="globe"===t.projection.name,o=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),s=[.5,3];return{range:r?[e.number(s[0],i[0],o),e.number(s[1],i[1],o)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,r={}){if(!this._validate(e.validateFog,t,r)){for(const r of Object.keys(e.spec.fog))t&&void 0===t[r]&&(t[r]=e.spec.fog[r].default);for(const r in t){const o=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),o):this._transitionable.setValue(r,o)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*r.a}getOpacityAtLatLng(t,r){return this._transform.projection.supportsFog?function(t,r,o){const i=e.MercatorCoordinate.fromLngLat(r),s=o.elevation?o.elevation.getAtPointOrZero(i):0,n=[i.x,i.y,s];return e.transformMat4(n,n,o.mercatorFogMatrix),M(t,n,o.pitch,o._fov)}(this.state,t,r):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?T(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,o){return(!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class B{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const o=this.workerPool.acquire(this.id);for(let e=0;e<o.length;e++){const t=new B.Actor(o[e],r,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,r,o){e.asyncAll(this.actors,((e,o)=>{e.send(t,r,o)}),o=o||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function C(t,r,o){return r*(e.EXTENT/(t.tileSize*Math.pow(2,o-t.tileID.overscaledZ)))}B.Actor=e.Actor;class L{constructor(e,t,r,o){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,o)}static createFromScreenPoints(t,r){let o,i;if(t instanceof e.Point||"number"==typeof t[0]){const s=e.Point.convert(t);o=[s],i=r.isPointAboveHorizon(s)}else{const s=e.Point.convert(t[0]),n=e.Point.convert(t[1]);o=[s,n],i=e.polygonizeBounds(s,n).every((e=>r.isPointAboveHorizon(e)))}return new L(o,r.getCameraPoint(),i,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const r=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,o,0,!1);return this.cameraPoint.y>o.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<o.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=o.x?i[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const r=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,o,t),s=this.cameraPoint.clone();switch(3*((s.y>r.y)+(s.y>o.y))+((s.x>r.x)+(s.x>o.x))){case 0:i[0]=s,i[4]=s.clone();break;case 1:i.splice(1,0,s);break;case 2:i[1]=s;break;case 3:i.splice(4,0,s);break;case 5:i.splice(2,0,s);break;case 6:i[3]=s;break;case 7:i.splice(3,0,s);break;case 8:i[2]=s}return i}containsTile(t,r,o,i=0){const s=t.queryPadding/r._pixelsPerMercatorPixel+1,n=o?this._bufferedCameraMercator(s,r):this._bufferedScreenMercator(s,r);let a=t.tileID.wrap+(n.unwrapped?i:0);const l=n.polygon.map((r=>e.getTilePoint(t.tileTransform,r,a)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;a=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((r=>e.getTileVec3(t.tileTransform,r,a))),u=c.map((t=>new e.Point(t[0],t[1]))),p=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),d=e.getTileVec3(t.tileTransform,p,a),h=c.map((t=>{const r=e.sub(t,t,d);return e.normalize(r,r),new e.Ray(d,r)})),g=C(t,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:h,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(f=e.getBounds(l),f.min.x=e.clamp(f.min.x,0,e.EXTENT),f.min.y=e.clamp(f.min.y,0,e.EXTENT),f.max.x=e.clamp(f.max.x,0,e.EXTENT),f.max.y=e.clamp(f.max.y,0,e.EXTENT),f),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:g};var f}_bufferedScreenMercator(e,t){const r=O(e);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let o;return o="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[r]=o,o}}_bufferedCameraMercator(e,t){const r=O(e);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let o;return o="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[r]=o,o}}_projectAndResample(t,r){const o=function(t,r){const o=e.multiply([],r.pixelMatrix,r.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],s=[0,e.GLOBE_RADIUS,0,1],n=[0,0,0,1];e.transformMat4$1(i,i,o),e.transformMat4$1(s,s,o),e.transformMat4$1(n,n,o);const a=new e.Point(i[0]/i[3],i[1]/i[3]),l=new e.Point(s[0]/s[3],s[1]/s[3]),c=e.polygonContainsPoint(t,a)&&i[3]<n[3],u=e.polygonContainsPoint(t,l)&&s[3]<n[3];if(!c&&!u)return null;const p=function(e,t,r){for(let o=1;o<e.length;o++){const i=I(t.pointCoordinate3D(e[o-1]).x),s=I(t.pointCoordinate3D(e[o]).x);if(r<0){if(i<s)return{idx:o,t:-i/(s-1-i)}}else if(s<i)return{idx:o,t:(1-i)/(s+1-i)}}return null}(t,r,c?-1:1);if(!p)return null;const{idx:d,t:h}=p;let g=d>1?D(t.slice(0,d),r):[],f=d<t.length?D(t.slice(d),r):[];g=g.map((t=>new e.Point(I(t.x),t.y))),f=f.map((t=>new e.Point(I(t.x),t.y)));const _=[...g];0===_.length&&_.push(f[f.length-1]);const m=e.number(_[_.length-1].y,(0===f.length?g[0]:f[0]).y,h);let y;return y=c?[new e.Point(0,m),new e.Point(0,0),new e.Point(1,0),new e.Point(1,m)]:[new e.Point(1,m),new e.Point(1,1),new e.Point(0,1),new e.Point(0,m)],_.push(...y),0===f.length?_.push(g[0]):_.push(...f),{polygon:_.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,r);if(o)return o;const i=function(t,r){let o=!1,i=-1/0,s=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,s=e);for(let e=0;e<t.length-1;e++){const r=(s+e)%(t.length-1),i=t[r],n=t[r+1];Math.abs(i.x-n.x)>.5&&(i.x<n.x?(i.x+=1,0===r&&(t[t.length-1].x+=1)):(n.x+=1,r+1===t.length-1&&(t[0].x+=1)),o=!0)}const n=e.mercatorXfromLng(r.center.lng);return o&&n<Math.abs(n-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:o}}(D(t,r).map((t=>new e.Point(I(t.x),t.y))),r);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function D(t,r){return e.resample(t,(e=>{const t=r.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function I(e){return e<0?1+e%1:e%1}function O(e){return 100*e|0}function P(t,r,o,i,s){const n=function(o,i){if(o)return s(o);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((e=>e.id))),o.tiles=r.canonicalizeTileset(o,t.url),s(null,o)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url,null,o,i),e.ResourceType.Source),n):e.exported.frame((()=>n(null,t)))}class A{constructor(t,r,o){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=o||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),o=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),s=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),n=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=o&&t.x<s&&t.y>=i&&t.y<n}}class k{constructor(e,t,r){this.context=e;const o=e.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const z={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class N{constructor(e,t,r,o){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=o,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const o=t.attributes[this.attributes[r].name];void 0!==o&&e.enableVertexAttribArray(o)}}setVertexAttribPointers(e,t,r){for(let o=0;o<this.attributes.length;o++){const i=this.attributes[o],s=t.attributes[i.name];void 0!==s&&e.vertexAttribPointer(s,i.components,e[z[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class j{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends j{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class G extends j{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends j{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class q extends j{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class $ extends j{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class V extends j{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class H extends j{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class K extends j{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Z extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class X extends j{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class J extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Y extends j{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends j{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends j{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class re extends j{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class oe extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ie extends j{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class se extends j{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let ne,ae=class extends j{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends j{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends j{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class pe extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class de extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class he extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ge extends j{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class fe extends j{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class _e extends j{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class me extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ye extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends j{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Se extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Re extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ve extends Re{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class xe{constructor(e,t,r,o){this.context=e,this.width=t,this.height=r;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new Se(e,i),o&&(this.depthAttachment=new Re(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ee{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new U(this),this.clearDepth=new G(this),this.clearStencil=new W(this),this.colorMask=new q(this),this.depthMask=new $(this),this.stencilMask=new V(this),this.stencilFunc=new H(this),this.stencilOp=new K(this),this.stencilTest=new Z(this),this.depthRange=new X(this),this.depthTest=new J(this),this.depthFunc=new Y(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new re(this),this.cullFace=new oe(this),this.cullFaceSide=new ie(this),this.frontFace=new se(this),this.program=new ae(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new pe(this),this.bindTexture=new de(this),this.bindVertexBuffer=new he(this),this.bindElementBuffer=new ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new fe(this),this.pixelStoreUnpack=new _e(this),this.pixelStoreUnpackPremultiplyAlpha=new me(this),this.pixelStoreUnpackFlipY=new ye(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new k(this,e,t)}createVertexBuffer(e,t,r){return new N(this,e,t,r)}createRenderbuffer(e,t,r){const o=this.gl,i=o.createRenderbuffer();return this.bindRenderbuffer.set(i),o.renderbufferStorage(o.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,r){return new xe(this,e,t,r)}clear({color:e,depth:t,stencil:r}){const o=this.gl;let i=0;e&&(i|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(i|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),o.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(r){t(r.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Me extends e.Evented{constructor(t,r,o,i){if(super(),this.id=t,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map._worldview;this._tileJSONRequest=P(this._options,this.map._requestManager,r,o,((r,o)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new A(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,r){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(o,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",i,s.bind(this));else if(t.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,s.bind(this),void 0,!0);else{const r=e.loadVectorTile.call({deduped:this._deduped},i,((e,r)=>{e||!r?s.call(this,e):(i.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,s.bind(this),void 0,!0))}),!0);t.request={cancel:r}}function s(o,i){return delete t.request,t.aborted?r(null):o&&404!==o.status?r(o):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Te extends e.Evented{constructor(t,r,o,i){super(),this.id=t,this.dispatcher=o,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,null,null,((r,o)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new A(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const o=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),o,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((o,i,s,n)=>(delete t.request,t.aborted?(t.state="unloaded",r(null)):o?(t.state="errored",r(o)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:s,expires:n}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void r(null)):r(null))))}static loadTileData(e,t,r){e.setTexture(t,r)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function we(t,r,o,i,s,n,a,l){const c=[t,o,s,r,i,n,1,1,1],u=[a,l,1],p=e.adjoint([],c),[d,h,g]=e.transformMat3(u,u,e.transpose(p,p));return e.multiply$1(c,[d,0,0,0,h,0,0,0,g],c)}class Fe extends e.Evented{constructor(e,t,r,o){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=t,this._dirty=!1}load(t,r){this._loaded=r||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,o)=>{if(this._imageRequest=null,this._loaded=!0,r)this.fire(new e.ErrorEvent(r));else if(o){const{HTMLImageElement:r}=e.window;this.image=o instanceof r?e.exported.getImageData(o):o,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const r=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let r=1/0,o=1/0,i=-1/0,s=-1/0;for(const e of t)r=Math.min(r,e.x),o=Math.min(o,e.y),i=Math.max(i,e.x),s=Math.max(s,e.y);const n=Math.max(i-r,s-o),a=Math.max(0,Math.floor(-Math.log(n)/Math.LN2)),l=Math.pow(2,a);return new e.CanonicalTileID(a,Math.floor((r+i)/2*l),Math.floor((o+s)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const r=e.tileTransform(this.tileID,this.map.transform.projection),[o,i,s,n]=this.coordinates.map((t=>{const o=r.projection.project(t[0],t[1]);return e.getTilePoint(r,o)._round()}));this.perspectiveTransform=function(t,r,o,i,s,n,a,l,c,u){const p=we(0,0,t,0,0,r,t,r),d=we(o,i,s,n,a,l,c,u);return e.multiply$1(d,e.adjoint(p,p),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*r/e.EXTENT]}(this.width,this.height,o.x,o.y,i.x,i.y,n.x,n.y,s.x,s.y);const a=this._boundsArray=new e.StructArrayLayout4i8;a.emplaceBack(o.x,o.y,0,0),a.emplaceBack(i.x,i.y,e.EXTENT,0),a.emplaceBack(n.x,n.y,0,e.EXTENT),a.emplaceBack(s.x,s.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,r=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Be={vector:Me,raster:Te,"raster-dem":class extends Te{constructor(t,r,o,i){super(t,r,o,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(t,r){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,o){e&&(t.state="errored",r(e)),o&&(t.dem=o,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),function(o,s,n,a){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(o)t.state="errored",r(o);else if(s){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:n,expires:a});const r=e.window.ImageBitmap&&s instanceof e.window.ImageBitmap&&(null==ne&&(ne=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),ne),o=1-(s.width-e.prevPowerOfTwo(s.width))/2;o<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=r?s:e.exported.getImageData(s,o),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:o};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const r=t.canonical,o=Math.pow(2,r.z),i=(r.x-1+o)%o,s=0===r.x?t.wrap-1:t.wrap,n=(r.x+1+o)%o,a=r.x+1===o?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,s,r.z,i,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,r.z,n,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,s,r.z,i,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,r.z,n,r.y-1).key]={backfilled:!1}),r.y+1<o&&(l[new e.OverscaledTileID(t.overscaledZ,s,r.z,i,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,r.z,n,r.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,r,o,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(i),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const s=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*s,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},o),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,r)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(t.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,r){const o=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(o,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===o),r(null)))),void 0,"loadTile"===o)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Fe{constructor(e,t,r,o){super(e,t,r,o),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url);e.getVideo(this.urls,((t,r)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Fe,canvas:class extends Fe{constructor(t,r,o,i){super(t,r,o,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,r,o,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=r,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new A(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:r,z:o}=e.canonical;return this._implementation.hasTile({x:t,y:r,z:o})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const{x:o,y:i,z:s}=t.tileID.canonical,n=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:o,y:i,z:s},{signal:n.signal})).then(function(o){return delete t.request,t.aborted?(t.state="unloaded",r(null)):void 0===o?(t.state="errored",r(null)):null===o?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",r(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(o)?(this.loadTileData(t,o),t.state="loaded",void r(null)):(t.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",r(e))})),t.request.cancel=()=>n.abort()}loadTileData(e,t){Te.loadTileData(e,t,this._map.painter)}unloadTileData(e){Te.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:r,z:o}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:r,z:o})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ce=function(t,r,o,i){const s=new Be[r.type](t,r,o,i);if(s.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${s.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],s),s};function Le(t,r){const o=e.identity([]);return e.scale(o,o,[.5*t.width,.5*-t.height,1]),e.translate(o,o,[1,-1,0]),e.multiply(o,o,t.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(o)}function De(e,t,r,o,i,s,n,a=!1){const l=e.tilesIn(o,n,a);l.sort(Oe);const c=[];for(const o of l)c.push({wrappedTileID:o.tile.tileID.wrapped().key,queryResults:o.tile.queryRenderedFeatures(t,r,e._state,o,i,s,Le(e.transform,o.tile.tileID),a)});const u=function(e){const t={},r={};for(const o of e){const e=o.queryResults,i=o.wrappedTileID,s=r[i]=r[i]||{};for(const r in e){const o=e[r],i=s[r]=s[r]||{},n=t[r]=t[r]||[];for(const e of o)i[e.featureIndex]||(i[e.featureIndex]=!0,n.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const r=t.feature,o=r.layer;o&&"background"!==o.type&&"sky"!==o.type&&(r.source=o.source,o["source-layer"]&&(r.sourceLayer=o["source-layer"]),r.state=void 0!==r.id?e.getFeatureState(o["source-layer"],r.id):{})}));return u}function Ie(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),o=[],i={};for(let e=0;e<r.length;e++){const s=r[e],n=s.tileID.canonical.key;i[n]||(i[n]=!0,s.querySourceFeatures(o,t))}return o}function Oe(e,t){const r=e.tileID,o=t.tileID;return r.overscaledZ-o.overscaledZ||r.canonical.y-o.canonical.y||r.wrap-o.wrap||r.canonical.x-o.canonical.x}function Pe(){return null!=ds.workerClass?new ds.workerClass:new e.window.Worker(ds.workerUrl)}const Ae="mapboxgl_preloaded_worker_pool";class ke{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ke.workerCount;)this.workers.push(new Pe);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ae]}numActive(){return Object.keys(this.active).length}}let ze;function Ne(){return ze||(ze=new ke),ze}function je(t,r){const o={};for(const e in t)"ref"!==e&&(o[e]=t[e]);return e.refProperties.forEach((e=>{e in r&&(o[e]=r[e])})),o}function Ue(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=je(e[r],t[e[r].ref]));return e}ke.workerCount=2;const Ge={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,r){r.push({command:Ge.addSource,args:[e,t[e]]})}function qe(e,t,r){t.push({command:Ge.removeSource,args:[e]}),r[e]=!0}function $e(e,t,r,o){qe(e,r,o),We(e,t,r)}function Ve(e,r,o){let i;for(i in e[o])if(e[o].hasOwnProperty(i)&&"data"!==i&&!t(e[o][i],r[o][i]))return!1;for(i in r[o])if(r[o].hasOwnProperty(i)&&"data"!==i&&!t(e[o][i],r[o][i]))return!1;return!0}function He(e,r,o,i,s,n){let a;for(a in r=r||{},e=e||{})e.hasOwnProperty(a)&&(t(e[a],r[a])||o.push({command:n,args:[i,a,r[a],s]}));for(a in r)r.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(t(e[a],r[a])||o.push({command:n,args:[i,a,r[a],s]}))}function Ke(e){return e.id}function Ze(e,t){return e[t.id]=t,e}class Xe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let r=1,o=this._distances[r];const i=t*this.paddedLength+this.padding;for(;o<i&&r<this._distances.length;)o=this._distances[++r];const s=r-1,n=this._distances[s],a=o-n,l=a>0?(i-n)/a:0;return this.points[s].mult(1-l).add(this.points[r].mult(l))}}class Je{constructor(e,t,r){const o=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)o.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,o,i){this._forEachCell(t,r,o,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(i)}insertCircle(e,t,r,o){this._forEachCell(t-o,r-o,t+o,r+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(o)}_insertBoxCell(e,t,r,o,i,s){this.boxCells[i].push(s)}_insertCircleCell(e,t,r,o,i,s){this.circleCells[i].push(s)}_query(e,t,r,o,i,s){if(r<0||e>this.width||o<0||t>this.height)return!i&&[];const n=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=o){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)n.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],o=this.circles[3*e+2];n.push({key:this.circleKeys[e],x1:t-o,y1:r-o,x2:t+o,y2:r+o})}return s?n.filter(s):n}return this._forEachCell(e,t,r,o,this._queryCell,n,{hitTest:i,seenUids:{box:{},circle:{}}},s),i?n.length>0:n}_queryCircle(e,t,r,o,i){const s=e-r,n=e+r,a=t-r,l=t+r;if(n<0||s>this.width||l<0||a>this.height)return!o&&[];const c=[];return this._forEachCell(s,a,n,l,this._queryCellCircle,c,{hitTest:o,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),o?c.length>0:c}query(e,t,r,o,i){return this._query(e,t,r,o,!1,i)}hitTest(e,t,r,o,i){return this._query(e,t,r,o,!0,i)}hitTestCircle(e,t,r,o){return this._queryCircle(e,t,r,!0,o)}_queryCell(e,t,r,o,i,s,n,a){const l=n.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&r>=i[c+0]&&o>=i[c+1]&&(!a||a(this.boxKeys[u]))){if(n.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,r,o)&&(!a||a(this.circleKeys[c]))){if(n.hitTest)return s.push(!0),!0;{const e=i[u],t=i[u+1],r=i[u+2];s.push({key:this.circleKeys[c],x1:e-r,y1:t-r,x2:e+r,y2:t+r})}}}}}_queryCellCircle(e,t,r,o,i,s,n,a){const l=n.circle,c=n.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const r=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!a||a(this.boxKeys[t])))return s.push(!0),!0}}const p=this.circleCells[i];if(null!==p){const e=this.circles;for(const t of p)if(!c.circle[t]){c.circle[t]=!0;const r=3*t;if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[t])))return s.push(!0),!0}}}_forEachCell(e,t,r,o,i,s,n,a){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),p=this._convertToYCellCoord(o);for(let d=l;d<=u;d++)for(let l=c;l<=p;l++)if(i.call(this,e,t,r,o,this.xCellCount*l+d,s,n,a))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,o,i,s){const n=o-e,a=i-t,l=r+s;return l*l>n*n+a*a}_circleAndRectCollide(e,t,r,o,i,s,n){const a=(s-o)/2,l=Math.abs(e-(o+a));if(l>a+r)return!1;const c=(n-i)/2,u=Math.abs(t-(i+c));if(u>c+r)return!1;if(l<=a||u<=c)return!0;const p=l-a,d=u-c;return p*p+d*d<=r*r}}const Ye={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,r,o,i,s,n,a){const l=e.create();if(o)if("globe"===n.name){const t=e.calculateGlobeLabelMatrix(s,r);e.multiply(l,l,t)}else{const t=y([],a);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,s.angle)}else e.multiply(l,s.labelPlaneMatrix,t);return l}function tt(e,t,r,o,i,s,n){const a=et(e,t,r,o,i,s,n);return"globe"===s.name&&r||(a[2]=a[6]=a[10]=a[14]=0),a}function rt(t,r,o,i,s,n,a){if(o){if("globe"===n.name){const l=et(t,r,o,i,s,n,a);return e.invert(l,l),e.multiply(l,t,l),l}{const r=e.clone(t),o=e.identity([]);return o[0]=a[0],o[1]=a[1],o[4]=a[2],o[5]=a[3],e.multiply(r,r,o),i||e.rotateZ(r,r,-s.angle),r}}return s.glCoordMatrix}function ot(t,r,o,i){const s=[t,r,o,1];o?e.transformMat4$1(s,s,i):gt(s,s,i);const n=s[3];return s[0]/=n,s[1]/=n,s[2]/=n,s}function it(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const r=e[0]/e[3],o=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&o>=-t[1]&&o<=t[1]}function nt(t,r,o,i,s,n,a,l,c,u){const p=o.transform,d=i?t.textSizeData:t.iconSizeData,h=e.evaluateSizeForZoom(d,o.transform.zoom),g="globe"===p.projection.name,f=[256/o.width*2+1,256/o.height*2+1],_=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;_.clear();let m=null;g&&(m=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const y=t.lineVertexArray,b=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,S=o.transform.width/o.transform.height;let R,v=!1;for(let i=0;i<b.length;i++){const g=b.get(i),{numGlyphs:x,writingMode:E}=g;if(E!==e.WritingMode.vertical||v||R===e.WritingMode.horizontal||(v=!0),R=E,(g.hidden||E===e.WritingMode.vertical)&&!v){ht(x,_);continue}v=!1;const M=new e.Point(g.tileAnchorX,g.tileAnchorY);let{x:T,y:w,z:F}=p.projection.projectTilePoint(M.x,M.y,u.canonical);if(c){const[e,t,r]=c(M);T+=e,w+=t,F+=r}const B=[T,w,F,1];if(e.transformMat4$1(B,B,r),!st(B,f)){ht(x,_);continue}const C=it(o.transform.cameraToCenterDistance,B[3]),L=e.evaluateSizeForFeature(d,h,g),D=a?L/C:L*C,I=ot(T,w,F,s);if(I[3]<=0){ht(x,_);continue}let O={};const P=a?null:c,A=ct(g,D,!1,l,r,s,n,t.glyphOffsetArray,y,_,m,I,M,O,S,P,p.projection,u,a);v=A.useVertical,P&&A.needsFlipping&&(O={}),(A.notEnoughRoom||v||A.needsFlipping&&ct(g,D,!0,l,r,s,n,t.glyphOffsetArray,y,_,m,I,M,O,S,P,p.projection,u,a).notEnoughRoom)&&ht(x,_)}i?(t.text.dynamicLayoutVertexBuffer.updateData(_),m&&t.text.globeExtVertexBuffer.updateData(m)):(t.icon.dynamicLayoutVertexBuffer.updateData(_),m&&t.icon.globeExtVertexBuffer.updateData(m))}function at(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f){const{lineStartIndex:_,glyphStartIndex:m,segment:y}=a,b=m+a.numGlyphs,S=_+a.lineLength,R=t.getoffsetX(m),v=t.getoffsetX(b-1),x=dt(e*R,r,o,i,s,n,y,_,S,l,c,u,p,d,!0,h,g,f);if(!x)return null;const E=dt(e*v,r,o,i,s,n,y,_,S,l,c,u,p,d,!0,h,g,f);return E?{first:x,last:E}:null}function lt(t,r,o,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(o)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:r!==Ye.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(o,i)?r===Ye.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function ct(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y,b){const S=r/24,R=t.lineOffsetX*S,v=t.lineOffsetY*S,{lineStartIndex:x,glyphStartIndex:E,numGlyphs:M,segment:T,writingMode:w,flipState:F}=t,B=x+t.lineLength,C=t=>{if(p){const[r,o,i]=t.up,s=u.length;e.updateGlobeVertexNormal(p,s+0,r,o,i),e.updateGlobeVertexNormal(p,s+1,r,o,i),e.updateGlobeVertexNormal(p,s+2,r,o,i),e.updateGlobeVertexNormal(p,s+3,r,o,i)}const[r,o,i]=t.point;e.addDynamicAttributes(u,r,o,i,t.angle)};if(M>1){const e=at(S,l,R,v,o,d,h,t,c,n,g,_,!1,m,y,b);if(!e)return{notEnoughRoom:!0};if(i&&!o){let[r,o,i]=e.first.point,[s,n,l]=e.last.point;[r,o]=ot(r,o,i,a),[s,n]=ot(s,n,l,a);const c=lt(w,F,(s-r)*f,n-o);if(t.flipState=c&&c.needsFlipping?Ye.flipRequired:Ye.flipNotRequired,c)return c}C(e.first);for(let e=E+1;e<E+M-1;e++){const t=dt(S*l.getoffsetX(e),R,v,o,d,h,T,x,B,c,n,g,_,!1,!1,m,y,b);if(!t)return u.length-=4*(e-E),{notEnoughRoom:!0};C(t)}C(e.last)}else{if(i&&!o){const r=ot(h.x,h.y,0,s),o=x+T+1,i=new e.Point(c.getx(o),c.gety(o)),n=ot(i.x,i.y,0,s),a=n[3]>0?n:pt(h,i,r,1,s,void 0,m,y.canonical),l=lt(w,F,(a[0]-r[0])*f,a[1]-r[1]);if(t.flipState=l&&l.needsFlipping?Ye.flipRequired:Ye.flipNotRequired,l)return l}const r=dt(S*l.getoffsetX(E),R,v,o,d,h,T,x,B,c,n,g,_,!1,!1,m,y,b);if(!r)return{notEnoughRoom:!0};C(r)}return{}}function ut(e,t,r,o,i){const{x:s,y:n,z:a}=o.projectTilePoint(e.x,e.y,t);if(!i)return ot(s,n,a,r);const[l,c,u]=i(e);return ot(s+l,n+c,a+u,r)}function pt(t,r,o,i,s,n,a,l){const c=ut(t.sub(r)._unit()._add(t),l,s,a,n);return e.sub(c,o,c),e.normalize(c,c),e.scaleAndAdd(c,o,c,i)}function dt(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m,y){const b=i?t-r:t+r;let S=b>0?1:-1,R=0;i&&(S*=-1,R=Math.PI),S<0&&(R+=Math.PI);let v=l+a+(S>0?0:1)|0,x=s,E=s,M=0,T=0;const w=Math.abs(b),F=[],B=[];let C=n,L=C;const D=()=>pt(L,C,E,w-M+1,p,h,_,m.canonical);for(;M+T<=w;){if(v+=S,v<l||v>=c)return null;if(E=x,L=C,F.push(E),g&&B.push(L),C=new e.Point(u.getx(v),u.gety(v)),x=d[v],!x){const e=ut(C,m.canonical,p,_,h);x=e[3]>0?d[v]=e:D()}M+=T,T=e.distance(E,x)}f&&h&&(d[v]&&(x=D(),T=e.distance(E,x)),d[v]=x);const I=(w-M)/T,O=C.sub(L)._mult(I)._add(L),P=e.sub([],x,E),A=e.scaleAndAdd([],E,P,I);let k=[0,0,1],z=P[0],N=P[1];if(y&&(k=_.upVector(m.canonical,O.x,O.y),0!==k[0]||0!==k[1]||1!==k[2])){const t=[k[2],0,-k[0]],r=e.cross([],k,t);e.normalize(t,t),e.normalize(r,r),z=e.dot(P,t),N=e.dot(P,r)}if(o){const t=e.cross([],k,P);e.normalize(t,t),e.scaleAndAdd(A,A,t,o*S)}const j=R+Math.atan2(N,z);return F.push(A),g&&B.push(O),{point:A,angle:j,path:F,tilePath:B,up:k}}function ht(e,t){const r=t.length,o=r+4*e;t.resize(o),t.float32.fill(-1/0,4*r,4*o)}function gt(e,t,r){const o=t[0],i=t[1];return e[0]=r[0]*o+r[4]*i+r[12],e[1]=r[1]*o+r[5]*i+r[13],e[3]=r[3]*o+r[7]*i+r[15],e}const ft=100;class _t{constructor(e,t,r=new Je(e.width+200,e.height+200,25),o=new Je(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=o,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ft,this.screenBottomBoundary=e.height+ft,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,r,o,i,s,n,a){let l=r.projectedAnchorX,c=r.projectedAnchorY,u=r.projectedAnchorZ;const p=r.elevation,d=r.tileID,h=e.getProjection();if(p&&d){const[e,t,o]=h.upVector(d.canonical,r.tileAnchorX,r.tileAnchorY),i=h.upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*p*i,c+=t*p*i,u+=o*p*i}const g=this.projectAndGetPerspectiveRatio(n,l,c,u,r.tileID,"globe"===h.name||!!p||this.transform.pitch>0,h),f=s*g.perspectiveRatio,_=(r.x1*t+o.x-r.padding)*f+g.point.x,m=(r.y1*t+o.y-r.padding)*f+g.point.y,y=(r.x2*t+o.x+r.padding)*f+g.point.x,b=(r.y2*t+o.y+r.padding)*f+g.point.y,S=g.perspectiveRatio<=.55||g.occluded;return!this.isInsideGrid(_,m,y,b)||!i&&this.grid.hitTest(_,m,y,b,a)||S?{box:[],offscreen:!1,occluded:g.occluded}:{box:[_,m,y,b],offscreen:this.isOffscreen(_,m,y,b),occluded:!1}}placeCollisionCircles(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f){const _=[],m=this.transform.elevation,y=t.getProjection(),b=m?m.getAtTileOffsetFunc(f,this.transform.center.lat,this.transform.worldSize,y):null,S=new e.Point(o.tileAnchorX,o.tileAnchorY);let{x:R,y:v,z:x}=y.projectTilePoint(S.x,S.y,f.canonical);if(b){const[e,t,r]=b(S);R+=e,v+=t,x+=r}const E="globe"===y.name,M=this.projectAndGetPerspectiveRatio(a,R,v,x,f,E||!!m||this.transform.pitch>0,y),{perspectiveRatio:T}=M,w=(p?n/T:n*T)/e.ONE_EM,F=ot(R,v,x,l),B=M.signedDistanceFromCamera>0?at(w,s,o.lineOffsetX*w,o.lineOffsetY*w,!1,F,S,o,i,l,{},m&&!p?b:null,p&&!!m,y,f,p):null;let C=!1,L=!1,D=!0;if(B&&!M.occluded){const t=.5*h*T+g,o=new e.Point(-100,-100),i=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),s=new Xe,{first:n,last:a}=B,l=n.path.length;let p=[];for(let e=l-1;e>=1;e--)p.push(n.path[e]);for(let e=1;e<a.path.length;e++)p.push(a.path[e]);const f=2.5*t;c&&(p=p.map((([e,t,r],o)=>(b&&!E&&(r=b(o<l-1?n.tilePath[l-1-o]:a.tilePath[o-l+2])[2]),ot(e,t,r,c)))),p.some((e=>e[3]<=0))&&(p=[]));let m=[];if(p.length>0){let t=1/0,r=-1/0,s=1/0,n=-1/0;for(const e of p)t=Math.min(t,e[0]),s=Math.min(s,e[1]),r=Math.max(r,e[0]),n=Math.max(n,e[1]);r>=o.x&&t<=i.x&&n>=o.y&&s<=i.y&&(m=[p.map((t=>new e.Point(t[0],t[1])))],(t<o.x||r>i.x||s<o.y||n>i.y)&&(m=e.clipLine(m,o.x,o.y,i.x,i.y)))}for(const e of m){s.reset(e,.25*t);let o=0;o=s.length<=.5*t?1:Math.ceil(s.paddedLength/f)+1;for(let e=0;e<o;e++){const i=e/Math.max(o-1,1),n=s.lerp(i),a=n.x+ft,l=n.y+ft;_.push(a,l,t,0);const c=a-t,p=l-t,h=a+t,g=l+t;if(D=D&&this.isOffscreen(c,p,h,g),L=L||this.isInsideGrid(c,p,h,g),!r&&this.grid.hitTestCircle(a,l,t,d)&&(C=!0,!u))return{circles:[],offscreen:!1,collisionDetected:C,occluded:!1}}}}return{circles:!u&&C||!L?[]:_,offscreen:D,collisionDetected:C,occluded:M.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let o=1/0,i=1/0,s=-1/0,n=-1/0;for(const a of t){const t=new e.Point(a.x+ft,a.y+ft);o=Math.min(o,t.x),i=Math.min(i,t.y),s=Math.max(s,t.x),n=Math.max(n,t.y),r.push(t)}const a=this.grid.query(o,i,s,n).concat(this.ignoredGrid.query(o,i,s,n)),l={},c={};for(const t of a){const o=t.key;if(void 0===l[o.bucketInstanceId]&&(l[o.bucketInstanceId]={}),l[o.bucketInstanceId][o.featureIndex])continue;const i=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(r,i)&&(l[o.bucketInstanceId][o.featureIndex]=!0,void 0===c[o.bucketInstanceId]&&(c[o.bucketInstanceId]=[]),c[o.bucketInstanceId].push(o.featureIndex))}return c}insertCollisionBox(e,t,r,o,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:o,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,o,i){const s=t?this.ignoredGrid:this.grid,n={bucketInstanceId:r,featureIndex:o,collisionGroupID:i};for(let t=0;t<e.length;t+=4)s.insertCircle(n,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,r,o,i,s,n,a){const l=[r,o,i,1];let c=!1;if(i||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&s&&"globe"!==a.name){const t=function(t,r,o,i,s,n){const a=n.calculateFogTileMatrix(s),l=[r,o,i];return e.transformMat4(l,l,a),M(t,l,n.pitch,n._fov)}(this.fogState,r,o,i,s.toUnwrapped(),this.transform);c=t>.9}}else gt(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+ft,(-l[1]/u+1)/2*this.transform.height+ft),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/u*.5,1.5),signedDistanceFromCamera:u,occluded:n&&l[2]>u||c}}isOffscreen(e,t,r,o){return r<ft||e>=this.screenRightBoundary||o<ft||t>this.screenBottomBoundary}isInsideGrid(e,t,r,o){return r>=0&&e<this.gridRightBoundary&&o>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function mt(t,r,o){const i=r.createTileMatrix(t,t.worldSize,o.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function yt(e,t,r){if(t.projection.name===r.projection.name)return e.projMatrix;const o=r.clone();return o.setProjection(t.projection),mt(o,t.getProjection(),e)}function bt(e,t,r){return t.name===r.projection.name?e.projMatrix:mt(r,t,e)}class St{constructor(e,t,r,o){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):o&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Rt{constructor(e,t,r,o,i,s=!1){this.text=new St(e?e.text:null,t,r,i),this.icon=new St(e?e.icon:null,t,o,i),this.clipped=s}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class vt{constructor(e,t,r,o=!1){this.text=e,this.icon=t,this.skipFade=r,this.clipped=o}}class xt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Et{constructor(e,t,r,o,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=o,this.tileID=i}}class Mt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Tt(t,r,o,i,s){const{horizontalAlign:n,verticalAlign:a}=e.getAnchorAlignment(t),l=-(n-.5)*r,c=-(a-.5)*o,u=e.evaluateVariableOffset(t,i);return new e.Point(l+u[0]*s,c+u[1]*s)}function wt(t,r,o,i,s){const n=new e.Point(t,r);return o&&n._rotate(i?s:-s),n}class Ft{constructor(e,t,r,o,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new _t(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Mt(r),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,r,o,i){const s=o.getBucket(r),n=o.latestFeatureIndex;if(!s||!n||r.id!==s.layerIds[0])return;const a=s.layers[0].layout,l=o.collisionBoxArray,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),u=o.tileSize/e.EXTENT,p=o.tileID.toUnwrapped();this.transform.setProjection(s.projection);const d=(h=o.tileID,g=s.getProjection(),f=this.transform,g.name===this.projection?f.calculateProjMatrix(h.toUnwrapped()):mt(f,g,h));var h,g,f;const _="map"===a.get("text-pitch-alignment"),m="map"===a.get("text-rotation-alignment");r.compileFilter();const y=r.dynamicFilter(),b=r.dynamicFilterNeedsFeature(),S=this.transform.calculatePixelsToTileUnitsMatrix(o),R=tt(d,o.tileID.canonical,_,m,this.transform,s.getProjection(),S);let v=null;if(_){const t=rt(d,o.tileID.canonical,_,m,this.transform,s.getProjection(),S);v=e.multiply([],this.transform.labelPlaneMatrix,t)}let x=null;y&&o.latestFeatureIndex&&(x={unwrappedTileID:p,dynamicFilter:y,dynamicFilterNeedsFeature:b,featureIndex:o.latestFeatureIndex}),this.retainedQueryData[s.bucketInstanceId]=new Et(s.bucketInstanceId,n,s.sourceLayerIndex,s.index,o.tileID);const E={bucket:s,layout:a,posMatrix:d,textLabelPlaneMatrix:R,labelToScreenMatrix:v,clippingData:x,scale:c,textPixelRatio:u,holdingForFade:o.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(s.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(i)for(const e of s.sortKeyRanges){const{sortKey:r,symbolInstanceStart:o,symbolInstanceEnd:i}=e;t.push({sortKey:r,symbolInstanceStart:o,symbolInstanceEnd:i,parameters:E})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:E})}attemptAnchorPlacement(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m){const{textOffset0:y,textOffset1:b,crossTileID:S}=p,R=[y,b],v=Tt(e,r,o,R,i),x=this.collisionIndex.placeCollisionBox(h,i,t,wt(v.x,v.y,s,n,this.transform.angle),u,a,l,c.predicate);if(f){const e=h.getSymbolInstanceIconSize(m,this.transform.zoom,p.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(h,e,f,wt(v.x,v.y,s,n,this.transform.angle),u,a,l,c.predicate).box.length)return}if(x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[S]&&this.prevPlacement.placements[S]&&this.prevPlacement.placements[S].text&&(t=this.prevPlacement.variableOffsets[S].anchor),this.variableOffsets[S]={textOffset:R,width:r,height:o,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(h,e,p,g),h.allowVerticalPlacement&&(this.markUsedOrientation(h,g,p),this.placedOrientations[S]=g),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(t,r,o,i){const{bucket:s,layout:n,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:p,holdingForFade:d,collisionBoxArray:h,partiallyEvaluatedTextSize:g,partiallyEvaluatedIconSize:f,collisionGroup:_}=t.parameters,m=n.get("text-optional"),y=n.get("icon-optional"),b=n.get("text-allow-overlap"),S=n.get("icon-allow-overlap"),R="map"===n.get("text-rotation-alignment"),v="map"===n.get("text-pitch-alignment"),x="none"!==n.get("icon-text-fit"),E="viewport-y"===n.get("symbol-z-order");this.transform.setProjection(s.projection);let M=b&&(S||!s.hasIconData()||y),T=S&&(b||!s.hasTextData()||m);!s.collisionArrays&&h&&s.deserializeCollisionBoxes(h),o&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,h);const w=(t,i,h)=>{const{crossTileID:E,numVerticalGlyphVertices:w}=t;if(u){const o={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[s.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(o,i,this.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[E]=new vt(!1,!1,!1,!0),void r.add(E)}if(r.has(E))return;if(d)return void(this.placements[E]=new vt(!1,!1,!1));let F=!1,B=!1,C=!0,L=!1,D=!1,I=null,O={box:null,offscreen:null,occluded:null},P={box:null,offscreen:null,occluded:null},A=null,k=null,z=null,N=0,j=0,U=0;h.textFeatureIndex?N=h.textFeatureIndex:t.useRuntimeCollisionCircles&&(N=t.featureIndex),h.verticalTextFeatureIndex&&(j=h.verticalTextFeatureIndex);const G=e=>{e.tileID=this.retainedQueryData[s.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=h.textBox;if(W){G(W);const r=r=>{let o=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!r&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[E];e&&(this.placedOrientations[E]=e,o=e,this.markUsedOrientation(s,o,t))}return o},o=(t,r)=>{if(s.allowVerticalPlacement&&w>0&&h.verticalTextBox){for(const o of s.writingModes)if(o===e.WritingMode.vertical?(O=r(),P=O):O=t(),O&&O.box&&O.box.length)break}else O=t()};if(n.get("text-variable-anchor")){let l=n.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const e=this.prevPlacement.variableOffsets[E];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,r,o)=>{const n=s.getSymbolInstanceTextSize(g,t,this.transform.zoom,i),c=(e.x2-e.x1)*n+2*e.padding,u=(e.y2-e.y1)*n+2*e.padding,d=x&&!S?r:null;d&&G(d);let h={box:[],offscreen:!1,occluded:!1};const m=b?2*l.length:l.length;for(let r=0;r<m;++r){const m=this.attemptAnchorPlacement(l[r%l.length],e,c,u,n,R,v,p,a,_,r>=l.length,t,i,s,o,d,g,f);if(m&&(h=m.placedGlyphBoxes,h&&h.box&&h.box.length)){F=!0,I=m.shift;break}}return h};o((()=>c(W,h.iconBox,e.WritingMode.horizontal)),(()=>{const t=h.verticalTextBox;return t&&G(t),s.allowVerticalPlacement&&!(O&&O.box&&O.box.length)&&w>0&&t?c(t,h.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),O&&(F=O.box,C=O.offscreen,L=O.occluded);const u=r(!(!O||!O.box));if(!F&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[E];e&&(this.variableOffsets[E]=e,this.markUsedJustification(s,e.anchor,t,u))}}else{const n=(r,o)=>{const n=s.getSymbolInstanceTextSize(g,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(s,n,r,new e.Point(0,0),b,p,a,_.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(s,o,t),this.placedOrientations[E]=o),l};o((()=>n(W,e.WritingMode.horizontal)),(()=>{const t=h.verticalTextBox;return s.allowVerticalPlacement&&w>0&&t?(G(t),n(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),r(!!(O&&O.box&&O.box.length))}}if(A=O,F=A&&A.box&&A.box.length>0,C=A&&A.offscreen,L=A&&A.occluded,t.useRuntimeCollisionCircles){const r=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(s.textSizeData,g,r),u=n.get("text-padding");k=this.collisionIndex.placeCollisionCircles(s,b,r,s.lineVertexArray,s.glyphOffsetArray,i,a,l,c,o,v,_.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[s.bucketInstanceId].tileID),F=b||k.circles.length>0&&!k.collisionDetected,C=C&&k.offscreen,L=k.occluded}if(h.iconFeatureIndex&&(U=h.iconFeatureIndex),h.iconBox){const r=r=>{G(r);const o=x&&I?wt(I.x,I.y,R,v,this.transform.angle):new e.Point(0,0),i=s.getSymbolInstanceIconSize(f,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(s,i,r,o,S,p,a,_.predicate)};P&&P.box&&P.box.length&&h.verticalIconBox?(z=r(h.verticalIconBox),B=z.box.length>0):(z=r(h.iconBox),B=z.box.length>0),C=C&&z.offscreen,D=z.occluded}const q=m||0===t.numHorizontalGlyphVertices&&0===w,$=y||0===t.numIconVertices;if(q||$?$?q||(B=B&&F):F=B&&F:B=F=B&&F,F&&A&&A.box&&this.collisionIndex.insertCollisionBox(A.box,n.get("text-ignore-placement"),s.bucketInstanceId,P&&P.box&&j?j:N,_.ID),B&&z&&this.collisionIndex.insertCollisionBox(z.box,n.get("icon-ignore-placement"),s.bucketInstanceId,U,_.ID),k&&(F&&this.collisionIndex.insertCollisionCircles(k.circles,n.get("text-ignore-placement"),s.bucketInstanceId,N,_.ID),o)){const e=s.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new xt);for(let e=0;e<k.circles.length;e+=4)t.circles.push(k.circles[e+0]),t.circles.push(k.circles[e+1]),t.circles.push(k.circles[e+2]),t.circles.push(k.collisionDetected?1:0)}const V="globe"!==s.projection.name;M=M&&(V||!L),T=T&&(V||!D),this.placements[E]=new vt(F||M,B||T,C||s.justReloaded),r.add(E)};if(E){const e=s.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const r=e[t];w(s.symbolInstances.get(r),r,s.collisionArrays[r])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)w(s.symbolInstances.get(e),e,s.collisionArrays[e]);if(o&&s.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[s.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(t,r,o,i){const{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:n,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:l,crossTileID:c}=o,u=e.getAnchorJustification(r),p=i===e.WritingMode.vertical?l:"left"===u?s:"center"===u?n:"right"===u?a:-1;s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=p>=0&&s!==p?0:c),n>=0&&(t.text.placedSymbolArray.get(n).crossTileID=p>=0&&n!==p?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=p>=0&&a!==p?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=p>=0&&l!==p?0:c)}markUsedOrientation(t,r,o){const i=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,s=r===e.WritingMode.vertical?r:0,{leftJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=o,u=t.text.placedSymbolArray;n>=0&&(u.get(n).placedOrientation=i),a>=0&&(u.get(a).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=s)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const o=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},s=t?t.variableOffsets:{},n=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],s=i[e];s?(this.opacities[e]=new Rt(s,o,t.text,t.icon,null,t.clipped),r=r||t.text!==s.text.placed||t.icon!==s.icon.placed):(this.opacities[e]=new Rt(null,o,t.text,t.icon,t.skipFade,t.clipped),r=r||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new Rt(t,o,!1,!1);i.isHidden()||(this.opacities[e]=i,r=r||t.text.placed||t.icon.placed)}}for(const e in s)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=s[e]);for(const e in n)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=n[e]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r=new Set;for(const o of t){const t=o.getBucket(e);t&&o.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,o.collisionBoxArray)}}updateBucketOpacities(t,r,o){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,s=!!t.layers[0].dynamicFilter(),n=new Rt(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),p="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),h=new Rt(null,0,a&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(a||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&o&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(o);const g=(e,t,r)=>{for(let o=0;o<t/4;o++)e.opacityVertexArray.emplaceBack(r)};let f=0;for(let o=0;o<t.symbolInstances.length;o++){const i=t.symbolInstances.get(o),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:l,crossTileID:_,numIconVertices:m}=i,y=r.has(_);let b=this.opacities[_];y?b=n:b||(b=h,this.opacities[_]=b),r.add(_);const S=a>0||l>0,R=m>0,v=this.placedOrientations[_],x=v===e.WritingMode.vertical,E=v===e.WritingMode.horizontal||v===e.WritingMode.horizontalOnly;if(!S&&!R||b.isHidden()||f++,S){const e=kt(b.text);g(t.text,a,x?zt:e),g(t.text,l,E?zt:e);const r=b.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:n,verticalPlacedTextSymbolIndex:c}=i,u=t.text.placedSymbolArray,p=r||x?1:0;o>=0&&(u.get(o).hidden=p),s>=0&&(u.get(s).hidden=p),n>=0&&(u.get(n).hidden=p),c>=0&&(u.get(c).hidden=r||E?1:0);const d=this.variableOffsets[_];d&&this.markUsedJustification(t,d.anchor,i,v);const h=this.placedOrientations[_];h&&(this.markUsedJustification(t,"left",i,h),this.markUsedOrientation(t,h,i))}if(R){const e=kt(b.icon),{placedIconSymbolIndex:r,verticalPlacedIconSymbolIndex:o}=i,s=t.icon.placedSymbolArray,n=b.icon.isHidden()?1:0;r>=0&&(g(t.icon,m,x?zt:e),s.get(r).hidden=n),o>=0&&(g(t.icon,i.numVerticalIconVertices,E?zt:e),s.get(o).hidden=n)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const r=t.collisionArrays[o];if(r){let o=new e.Point(0,0),i=!0;if(r.textBox||r.verticalTextBox){if(c){const e=this.variableOffsets[_];e?(o=Tt(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&o._rotate(p?this.transform.angle:-this.transform.angle)):i=!1}s&&(i=!b.clipped),r.textBox&&Bt(t.textCollisionBox.collisionVertexArray,b.text.placed,!i||x,o.x,o.y),r.verticalTextBox&&Bt(t.textCollisionBox.collisionVertexArray,b.text.placed,!i||E,o.x,o.y)}const n=i&&Boolean(!E&&r.verticalIconBox);r.iconBox&&Bt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,n,d?o.x:0,d?o.y:0),r.verticalIconBox&&Bt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,!n,d?o.x:0,d?o.y:0)}}}if(t.fullyClipped=0===f,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function Bt(e,t,r,o,i){e.emplaceBack(t?1:0,r?1:0,o||0,i||0),e.emplaceBack(t?1:0,r?1:0,o||0,i||0),e.emplaceBack(t?1:0,r?1:0,o||0,i||0),e.emplaceBack(t?1:0,r?1:0,o||0,i||0)}const Ct=Math.pow(2,25),Lt=Math.pow(2,24),Dt=Math.pow(2,17),It=Math.pow(2,16),Ot=Math.pow(2,9),Pt=Math.pow(2,8),At=Math.pow(2,1);function kt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Ct+t*Lt+r*Dt+t*It+r*Ot+t*Pt+r*At+t}const zt=0;class Nt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,r,o,i){const s=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(s,o,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<s.length;){const e=s[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,r,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class jt{constructor(e,t,r,o,i,s,n,a){this.placement=new Ft(e,i,s,n,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=o,this._done=!1}isDone(){return this._done}continuePlacement(t,r,o){const i=e.exported.now(),s=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=r[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(e)),this._inProgressLayer.continuePlacement(o[e.source],this.placement,this._showCollisionBoxes,e,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ut=512/e.EXTENT/2;class Gt{constructor(t,r,o){this.tileID=t,this.bucketInstanceId=o,this.index=new e.KDBush(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=t.canonical.x*e.EXTENT,s=t.canonical.y*e.EXTENT;for(let e=0;e<r.length;e++){const{key:t,crossTileID:o,tileAnchorX:n,tileAnchorY:a}=r.get(e),l=Math.floor((i+n)*Ut),c=Math.floor((s+a)*Ut);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(o)}this.index.finish()}findMatches(t,r,o){const i=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z),s=Ut/Math.pow(2,r.canonical.z-this.tileID.canonical.z),n=r.canonical.x*e.EXTENT,a=r.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const r=t.get(e);if(r.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=r,p=Math.floor((n+c)*s),d=Math.floor((a+u)*s),h=this.index.range(p-i,d-i,p+i,d+i);for(const e of h){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!o.has(t)){o.add(t),r.crossTileID=t;break}}}}}class Wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const r=this.indexes[e],o={};for(const e in r){const i=r[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),o[i.tileID.key]=i}this.indexes[e]=o}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const o=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const i=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in i){const s=i[r];s.tileID.isChildOf(e)&&s.findMatches(t.symbolInstances,e,o)}else{const s=i[e.scaledTo(Number(r)).key];s&&s.findMatches(t.symbolInstances,e,o)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=r.generate(),o.add(i.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Gt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.crossTileIDs)this.usedCrossTileIDs[e].delete(r)}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const o=this.indexes[r];for(const i in o)e[o[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,o[i]),delete o[i],t=!0)}return t}}class $t{constructor(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r,o){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new qt);let s=!1;const n={};"globe"!==o.name&&i.handleWrapJump(r);for(const r of t){const t=r.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(r.tileID,t,this.crossTileIDs)&&(s=!0),n[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(n)&&(s=!0),s}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Vt=(t,r)=>e.emitValidationErrors(t,r&&r.filter((e=>"source.canvas"!==e.identifier))),Ht=e.pick(Ge,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Kt=e.pick(Ge,["setCenter","setZoom","setBearing","setPitch"]),Zt={version:8,layers:[],sources:{}},Xt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Jt extends e.Evented{constructor(t,r={}){super(),this.map=t,this.dispatcher=new B(Ne(),this),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,r.localFontFamily?e.LocalGlyphMode.all:r.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.crossTileSymbolIndex=new $t,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const o=this;this._rtlTextPluginCallback=Jt.registerForPluginStateChange((t=>{o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,r)=>{if(e.triggerPluginCompletionEvent(t),r&&r.every((e=>e)))for(const e in o._sourceCaches){const t=o._sourceCaches[e],r=t.getSource().type;"vector"!==r&&"geojson"!==r||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const r=this._layers[e];r.source===t.id&&this._validateLayer(r)}}))}loadURL(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const o="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,r)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):r&&this._load(r,o)}))}loadJSON(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==r.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Zt,!1)}_updateLayerCount(e,t){const r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}_load(t,r){if(r&&Vt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const o=Ue(this.stylesheet.layers);this._order=o.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const t of o){const r=e.createStyleLayer(t);r.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=r,this._serializedLayers[r.id]=r.serialize(),this._updateLayerCount(r,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new v(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,r,o){let i,s,n;const a=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,a,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,n||(n=e,i=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,a,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,n||(n=e,s=t,u())}));function u(){if(n)o(n);else if(i&&s){const t=e.exported.getImageData(s),r={};for(const o in i){const{width:s,height:n,x:a,y:l,sdf:c,pixelRatio:u,stretchX:p,stretchY:d,content:h}=i[o],g=new e.RGBAImage({width:s,height:n});e.RGBAImage.copy(t,g,{x:a,y:l},{x:0,y:0},{width:s,height:n}),r[o]={data:g,pixelRatio:u,sdf:c,stretchX:p,stretchY:d,content:h}}o(null,r)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,r)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(r)for(const e in r)this.imageManager.addImage(e,r[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const r=this.getSource(t.source);if(!r)return;const o=t.sourceLayer;o&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(o))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${o}" does not exist on source "${r.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const r of e){const e=this._layers[r];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Xt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const r=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(e.length||r.length)&&this._updateWorkerLayers(e,r);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const o={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];o[e]=t.used,t.used=!1}for(const e of this._order){const r=this._layers[e];if(r.recalculate(t,this._availableImages),!r.isHidden(t.zoom)){const e=this._getLayerSourceCache(r);e&&(e.used=!0)}const o=this.map.painter;if(o){const e=r.getProgramIds();if(!e)continue;const i=r.getProgramConfiguration(t.zoom);for(const t of e)o.useProgram(t,i)}}for(const t in o){const r=this._sourceCaches[t];o[t]!==r.used&&r.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:r.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Vt(this,e.validateStyle(r)))return!1;(r=e.clone$1(r)).layers=Ue(r.layers);const o=function(e,r){if(!e)return[{command:Ge.setStyle,args:[r]}];let o=[];try{if(!t(e.version,r.version))return[{command:Ge.setStyle,args:[r]}];t(e.center,r.center)||o.push({command:Ge.setCenter,args:[r.center]}),t(e.zoom,r.zoom)||o.push({command:Ge.setZoom,args:[r.zoom]}),t(e.bearing,r.bearing)||o.push({command:Ge.setBearing,args:[r.bearing]}),t(e.pitch,r.pitch)||o.push({command:Ge.setPitch,args:[r.pitch]}),t(e.sprite,r.sprite)||o.push({command:Ge.setSprite,args:[r.sprite]}),t(e.glyphs,r.glyphs)||o.push({command:Ge.setGlyphs,args:[r.glyphs]}),t(e.transition,r.transition)||o.push({command:Ge.setTransition,args:[r.transition]}),t(e.light,r.light)||o.push({command:Ge.setLight,args:[r.light]}),t(e.fog,r.fog)||o.push({command:Ge.setFog,args:[r.fog]}),t(e.projection,r.projection)||o.push({command:Ge.setProjection,args:[r.projection]});const i={},s=[];!function(e,r,o,i){let s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(r.hasOwnProperty(s)||qe(s,o,i));for(s in r){if(!r.hasOwnProperty(s))continue;const n=r[s];e.hasOwnProperty(s)?t(e[s],n)||("geojson"===e[s].type&&"geojson"===n.type&&Ve(e,r,s)?o.push({command:Ge.setGeoJSONSourceData,args:[s,n.data]}):$e(s,r,o,i)):We(s,r,o)}}(e.sources,r.sources,s,i);const n=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?o.push({command:Ge.removeLayer,args:[e.id]}):n.push(e)}));let a=e.terrain;a&&i[a.source]&&(o.push({command:Ge.setTerrain,args:[void 0]}),a=void 0),o=o.concat(s),t(a,r.terrain)||o.push({command:Ge.setTerrain,args:[r.terrain]}),function(e,r,o){r=r||[];const i=(e=e||[]).map(Ke),s=r.map(Ke),n=e.reduce(Ze,{}),a=r.reduce(Ze,{}),l=i.slice(),c=Object.create(null);let u,p,d,h,g,f,_;for(u=0,p=0;u<i.length;u++)d=i[u],a.hasOwnProperty(d)?p++:(o.push({command:Ge.removeLayer,args:[d]}),l.splice(l.indexOf(d,p),1));for(u=0,p=0;u<s.length;u++)d=s[s.length-1-u],l[l.length-1-u]!==d&&(n.hasOwnProperty(d)?(o.push({command:Ge.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-p),1)):p++,f=l[l.length-u],o.push({command:Ge.addLayer,args:[a[d],f]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<s.length;u++)if(d=s[u],h=n[d],g=a[d],!c[d]&&!t(h,g))if(t(h.source,g.source)&&t(h["source-layer"],g["source-layer"])&&t(h.type,g.type)){for(_ in He(h.layout,g.layout,o,d,null,Ge.setLayoutProperty),He(h.paint,g.paint,o,d,null,Ge.setPaintProperty),t(h.filter,g.filter)||o.push({command:Ge.setFilter,args:[d,g.filter]}),t(h.minzoom,g.minzoom)&&t(h.maxzoom,g.maxzoom)||o.push({command:Ge.setLayerZoomRange,args:[d,g.minzoom,g.maxzoom]}),h)h.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?He(h[_],g[_],o,d,_.slice(6),Ge.setPaintProperty):t(h[_],g[_])||o.push({command:Ge.setLayerProperty,args:[d,_,g[_]]}));for(_ in g)g.hasOwnProperty(_)&&!h.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?He(h[_],g[_],o,d,_.slice(6),Ge.setPaintProperty):t(h[_],g[_])||o.push({command:Ge.setLayerProperty,args:[d,_,g[_]]}))}else o.push({command:Ge.removeLayer,args:[d]}),f=l[l.lastIndexOf(d)+1],o.push({command:Ge.addLayer,args:[g,f]})}(n,r.layers,o)}catch(e){o=[{command:Ge.setStyle,args:[r]}]}return o}(this.serialize(),r).filter((e=>!(e.command in Kt)));if(0===o.length)return!1;const i=o.filter((e=>!(e.command in Ht)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return o.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=r,this._updateMapProjection(),!0}addImage(t,r){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,r),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,r,o={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateSource,`sources.${t}`,r,null,o))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=Ce(t,r,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const s=r=>{const o=(r?"symbol:":"other:")+t,s=this._sourceCaches[o]=new e.SourceCache(o,i,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[t]=s,s.style=this,s.onAdd(this.map)};s(!1),"vector"!==r.type&&"geojson"!==r.type||s(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const r=this.getSource(t);if(!r)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${r}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const o=this._getSourceCaches(t);for(const t of o)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const r=this._getSourceCache(t);r&&e.push(r.getSource())}return e}addLayer(t,r,o={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let s;if("custom"===t.type){if(Vt(this,e.validateCustomStyleLayer(t)))return;s=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},o))return;s=e.createStyleLayer(t),this._validateLayer(s),s.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}const n=r?this._order.indexOf(r):this._order.length;if(r&&-1===n)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`)));this._order.splice(n,0,i),this._layerOrderChanged=!0,this._layers[i]=s;const a=this._getLayerSourceCache(s);if(this._removedLayers[i]&&s.source&&a&&"custom"!==s.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",a.pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===r)return;const o=this._order.indexOf(t);this._order.splice(o,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));r.setEventedParent(null),this._updateLayerCount(r,!1);const o=this._order.indexOf(t);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,r,o){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===r&&i.maxzoom===o||(null!=r&&(i.minzoom=r),null!=o&&(i.maxzoom=o),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(r,o,i={}){this._checkLoaded();const s=this.getLayer(r);if(s){if(!t(s.filter,o))return null==o?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(e.validateFilter,`layers.${s.id}.filter`,o,{layerType:s.type},i)||(s.filter=e.clone$1(o),this._updateLayer(s)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const r=this.getLayer(t);return r&&e.clone$1(r.filter)}setLayoutProperty(r,o,i,s={}){this._checkLoaded();const n=this.getLayer(r);n?t(n.getLayoutProperty(o),i)||(n.setLayoutProperty(o,i,s),this._updateLayer(n)):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,r){const o=this.getLayer(t);if(o)return o.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(r,o,i,s={}){this._checkLoaded();const n=this.getLayer(r);n?t(n.getPaintProperty(o),i)||(n.setPaintProperty(o,i,s)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const r=this.getLayer(e);return r&&r.getPaintProperty(t)}setFeatureState(t,r){this._checkLoaded();const o=t.source,i=t.sourceLayer,s=this.getSource(o);if(!s)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const n=s.type;if("geojson"===n&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===n&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(o);for(const e of a)e.setFeatureState(i,t.id,r)}removeFeatureState(t,r){this._checkLoaded();const o=t.source,i=this.getSource(o);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const s=i.type,n="vector"===s?t.sourceLayer:void 0;if("vector"===s&&!n)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(o);for(const e of a)e.removeFeatureState(n,t.id,r)}getFeatureState(t){this._checkLoaded();const r=t.source,o=t.sourceLayer,i=this.getSource(r);if(i){if("vector"!==i.type||o)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(o,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const r=this._sourceCaches[e].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},o=[];for(let i=this._order.length-1;i>=0;i--){const s=this._order[i];if(t(s)){r[s]=i;for(const t of e){const e=t[s];if(e)for(const t of e)o.push(t)}}}o.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let s=this._order.length-1;s>=0;s--){const n=this._order[s];if(t(n))for(let e=o.length-1;e>=0;e--){const t=o[e].feature;if(r[t.layer.id]<s)break;i.push(t),o.pop()}else for(const t of e){const e=t[n];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,r,o){r&&r.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of r.layers){const r=this._layers[t];if(!r)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const s=[];r.availableImages=this._availableImages;const n=r&&r.layers?r.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),a=L.createFromScreenPoints(t,o);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;r.layers&&!i[t]||s.push(De(this._sourceCaches[e],this._layers,this._serializedLayers,a,r,o,n,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(e,t,r,o,i,s,n){const a={},l=s.queryRenderedSymbols(o),c=[];for(const e of Object.keys(l).map(Number))c.push(n[e]);c.sort(Oe);for(const r of c){const o=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in o){const t=a[e]=a[e]||[],i=o[e];i.sort(((e,t)=>{const o=r.featureSortOrder;if(o){const r=o.indexOf(e.featureIndex);return o.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in a)a[t].forEach((o=>{const i=o.feature,s=r(e[t]);if(!s)return;const n=s.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(t,r){r&&r.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",r.filter,null,r);const o=this._getSourceCaches(t);let i=[];for(const e of o)i=i.concat(Ie(e,r));return i}addSourceType(e,t,r){return Jt.getSourceType(e)?r(new Error(`A source type called "${e}" already exists.`)):(Jt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const o=this.light.getLight();let i=!1;for(const r in e)if(!t(e[r],o[r])){i=!0;break}if(!i)return;const s=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,r),this.light.updateTransitions(s)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(r,o=1){if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=r;if(1===o){if("object"==typeof i.source){const t="terrain-dem-src";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&o!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,o)}else{const r=this.terrain,o=r.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],o[e])){r.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});r.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new F(e,this.map.transform);this.stylesheet.fog=e;const r=this._setTransitionParameters({duration:0});t.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,o=r.get();0===Object.keys(e).length&&r.set(e);for(const i in e)if(!t(e[i],o[i])){r.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});r.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const r=this.terrain=new E(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const o=this._setTransitionParameters({duration:0});r.updateTransitions(o)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,r,o,i,s={}){return(!s||!1!==s.validate)&&Vt(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:o,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,r,o,i,s=!1){let n=!1,a=!1;const l={};for(const e of this._order){const r=this._layers[e];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this._getLayerSourceCache(r);if(!e)continue;l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const o=this.crossTileSymbolIndex.addLayer(r,l[r.source],t.center.lng,t.projection);n=n||o}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===o,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new jt(t,this._order,s,r,o,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),a=!0),n&&this.pauseablePlacement.placement.setStale()),a||n)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const o=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};o(this._otherSourceCaches[t.source]),o(this._symbolSourceCaches[t.source])}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}getResource(t,r,o){return e.makeRequest(r,o)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const r=this._getSourceCaches(t);return 0===r.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):r.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Jt.getSourceType=function(e){return Be[e]},Jt.setSourceType=function(e,t){Be[e]=t},Jt.registerForPluginStateChange=e.registerForPluginStateChange;var Yt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",er="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",rr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let or={},ir={};const sr=[];ur(Yt,sr),ur(er,sr),ur(tr,sr),ur(rr,sr),or=pr("",er),ir=pr(rr,tr);const nr=pr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ar=Yt,lr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var cr={background:pr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:pr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:pr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:pr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:pr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:pr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:pr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:pr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:pr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:pr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:pr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:pr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:pr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:pr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:pr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:pr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:pr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:pr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:pr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:pr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:pr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:pr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:pr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:pr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:pr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ur(e,t){const r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let e of r)if(e=e.trim(),"#"===e[0]&&e.includes("if")&&!e.includes("endif")){e=e.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const r=e.split(" ");for(const e of r)t.includes(e)||t.push(e)}}function pr(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},s=[...sr];return ur(e,s),ur(t,s),{fragmentSource:e=e.replace(r,((e,t,r,o,s)=>(i[s]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nvarying ${r} ${o} ${s};\n#else\nuniform ${r} ${o} u_${s};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${s}\n    ${r} ${o} ${s} = u_${s};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,o,s)=>{const n="float"===o?"vec2":"vec4",a=s.match(/color/)?"color":n;return i[s]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${r} ${n} a_${s};\nvarying ${r} ${o} ${s};\n#else\nuniform ${r} ${o} u_${s};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = a_${s};\n#else\n    ${r} ${o} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = unpack_mix_${a}(a_${s}, u_${s}_t);\n#else\n    ${r} ${o} ${s} = u_${s};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${r} ${n} a_${s};\n#else\nuniform ${r} ${o} u_${s};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${r} ${o} ${s} = a_${s};\n#else\n    ${r} ${o} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${r} ${o} ${s} = unpack_mix_${a}(a_${s}, u_${s}_t);\n#else\n    ${r} ${o} ${s} = u_${s};\n#endif\n`})),staticAttributes:o,usedDefines:s}}class dr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,r,o,i,s,n){this.context=e;let a=this.boundPaintVertexBuffers.length!==o.length;for(let e=0;!a&&e<o.length;e++)this.boundPaintVertexBuffers[e]!==o[e]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==n.length;for(let e=0;!l&&e<n.length;e++)this.boundDynamicVertexBuffers[e]!==n[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||a||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==s)this.freshBind(t,r,o,i,s,n);else{e.bindVertexArrayOES.set(this.vao);for(const e of n)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,r,o,i,s){let n;const a=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),n=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=o,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=s;else{n=l.currentNumAttributes||0;for(let e=a;e<n;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const t of r)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const t of s)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i));o&&o.bind(),l.currentNumAttributes=a}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hr(t,r){const o=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new e.MercatorCoordinate(0,i/o).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/o).toLngLat().lat]}function gr(t,r,o,i,s,n,a){const l=t.context,c=l.gl,u=o.fbo;if(!u)return;t.prepareDrawTile();const p=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,r,o)=>{const i=r.paint.get("hillshade-shadow-color"),s=r.paint.get("hillshade-highlight-color"),n=r.paint.get("hillshade-accent-color");let a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);const l=!e.options.moving;return{u_matrix:o||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:hr(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:s,u_accent:n}})(t,o,i,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,p,r.toUnwrapped());const{tileBoundsBuffer:h,tileBoundsIndexBuffer:g,tileBoundsSegments:f}=t.getTileBoundsBuffers(o);p.draw(l,c.TRIANGLES,s,n,a,e.CullFaceMode.disabled,d,i.id,h,g,f)}function fr(t,r,o){if(!r.needsDEMTextureUpload)return;const i=t.context,s=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(o.stride);const n=o.getPixels();r.demTexture?r.demTexture.update(n,{premultiply:!1}):r.demTexture=new e.Texture(i,n,s.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function _r(t,r,o,i,s,n){const a=t.context,l=a.gl;if(!r.dem)return;const c=r.dem;if(a.activeTexture.set(l.TEXTURE1),fr(t,r,c),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;a.activeTexture.set(l.TEXTURE0);let p=r.fbo;if(!p){const t=new e.Texture(a,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=r.fbo=a.createFramebuffer(u,u,!0),p.colorAttachment.set(t.texture)}a.bindFramebuffer.set(p.framebuffer),a.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:h,tileBoundsSegments:g}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,i,s,n,e.CullFaceMode.disabled,((t,r)=>{const o=r.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[o,o],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,c),o.id,d,h,g),r.needsHillshadePrepare=!1}const mr=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),yr=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),br=(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(o),u_merc_matrix:r,u_zoom_transition:i,u_merc_center:s,u_image0:0,u_frustum_tl:n,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:p,u_viewport:d,u_grid_matrix:g?Float32Array.from(g):new Float32Array(9),u_skirt_height:h});function Sr(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const Rr=new class{constructor(){this.operations={}}newMorphing(e,t,r,o,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==r.tileID.key&&(t.queued=r)}else this.operations[e]={startTime:o,phase:0,duration:i,from:t,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},vr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function xr(e){return 6*Math.pow(1.5,22-e)}function Er(e,t){const r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}const Mr=e=>({u_matrix:e});function Tr(t,r,o,i,s){if(s>0){const n=e.exported.now(),a=(n-t.timeAdded)/s,l=r?(n-r.timeAdded)/s:-1,c=o.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=p&&t.refreshedUponExpiration?1:e.clamp(p?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class wr extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},r=new B(Ne(),null),o=Ce("mock-dem",t,r,e.style);super("mock-dem",o,!1),o.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Fr extends e.SourceCache{constructor(e){const t=Ce("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new B(Ne(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,r,o){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,o)=>{if(r[o.key]="",!this._tiles[o.key]){const r=new e.Tile(o,this._source.tileSize*o.overscaleFactor(),t.tileZoom);r.state="loaded",this._tiles[o.key]=r}return r}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const r=Object.values(t);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Br extends e.OverscaledTileID{constructor(e,t,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=r}}class Cr extends e.Elevation{constructor(t,r){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[o,i,s]=function(t){const r=new e.StructArrayLayout2i4,o=new e.StructArrayLayout3ui6,i=131;r.reserve(17161),o.reserve(33800);const s=e.EXTENT/128,n=e.EXTENT+s/2,a=n+s;for(let t=-s;t<a;t+=s)for(let o=-s;o<a;o+=s){const i=o<0||o>n||t<0||t>n?24575:0,s=e.clamp(Math.round(o),0,e.EXTENT),a=e.clamp(Math.round(t),0,e.EXTENT);r.emplaceBack(s+i,a)}const l=(e,t)=>{const r=t*i+e;o.emplaceBack(r+1,r,r+i),o.emplaceBack(r+i,r+i+1,r+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[r,o,32768]}(),n=t.context;this.gridBuffer=n.createVertexBuffer(o,e.posAttributes.members),this.gridIndexBuffer=n.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,o.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,o.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Fr(r.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const a=n.gl;this._overlapStencilMode=new e.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new wr(r.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,r,o){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const s=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(r,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),r.updateElevation(!0,o),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,o=this.painter.transform;this._initializing&&(this._initializing=0===o._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(o.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=r.getIds().map((e=>{const t=r.getTileByID(e).tileID;return t.projMatrix=o.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){const o=r.transform.pointCoordinate(r.transform.getCameraPoint()),i=new e.Point(o.x,o.y);t.sort(((t,r)=>{if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;const o=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),s=new e.Point(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),n=i.mult(1<<t.canonical.z);return n.x-=.5,n.y-=.5,n.distSqr(o)-n.distSqr(s)}))}(i,this.painter),this._previousZoom=o.zoom;const s=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const n=this._style._sourceCaches;for(const e in n){const r=n[e];if(!r.used)continue;if(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,t[e],s),r.usedForTerrain)continue;const o=t[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(o)}this.proxiedCoords[r.id]=i.map((e=>new Br(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const a={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const r=t.tileID.key;r in a||(this._visibleDemTiles.push(t),a[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const r in this.terrainTileForTile){const o=this.terrainTileForTile[r],i=o.dem;!i||o.demTexture&&!o.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),fr(this.painter,o,i))}}_prepareDemTileUniforms(e,t,r,o){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,s=Math.pow(2,t.tileID.canonical.z-i.z),n=o||"";return r[`u_dem_tl${n}`]=[i.x*s%1,i.y*s%1],r[`u_dem_scale${n}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,r=t.gl;if(!this._emptyDepthBufferTexture){const o=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,o,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,r)=>{if(!r.dem)return t;const o=r.dem.tree.minimums[0];return o>0&&e++,t+o}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);const o=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(o,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let s=this._emptyDEMTexture;return s?s.update(i,{premultiply:!1}):s=this._emptyDEMTexture=new e.Texture(t,i,r.RGBA,{premultiply:!1}),s}setupElevationDraw(t,r,o){const i=this.painter.context,s=i.gl,n=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;n.u_dem_size=this.sourceCache.getSource().tileSize,n.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(o&&o.morphing&&this._useVertexMorphing){const e=o.morphing.srcDemTile,r=o.morphing.dstDemTile;u=o.morphing.phase,e&&r&&(this._prepareDemTileUniforms(t,e,n,"_prev")&&(c=e),this._prepareDemTileUniforms(t,r,n)&&(l=r))}if(c&&l?(i.activeTexture.set(s.TEXTURE2),l.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),i.activeTexture.set(s.TEXTURE4),c.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),n.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(s.TEXTURE2),(this._prepareDemTileUniforms(t,l,n)?l.demTexture:this.emptyDEMTexture).bind(s.NEAREST,s.CLAMP_TO_EDGE)),i.activeTexture.set(s.TEXTURE3),o&&o.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),this._depthFBO&&(n.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),n.u_depth_size_inv=[1,1]),o&&o.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;n.u_meter_to_dem=t}if(o&&o.labelPlaneMatrixInv&&(n.u_label_plane_matrix_inv=o.labelPlaneMatrixInv),r.setTerrainUniformValues(i,n),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,o&&o.useDenormalizedUpVectorScale);r.setGlobeUniformValues(i,e)}}globeUniformValues(t,r,o){const i=t.projection;return{u_tile_tl_up:i.upVector(r,0,0),u_tile_tr_up:i.upVector(r,e.EXTENT,0),u_tile_br_up:i.upVector(r,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(r,0,e.EXTENT),u_tile_up_scale:o?e.globeMetersToEcef(1):i.upVectorScale(r,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const r=this.painter,o=this.painter.context;0!==t.length&&(o.bindFramebuffer.set(null),o.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,r,o,i,s){if("globe"===t.transform.projection.name)!function(t,r,o,i,s){const n=t.context,a=n.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,p=t.transform,d=e.globeUseCustomAntiAliasing(t,n,p),h=(e,r)=>{if(c===e)return;const o=[vr[e],"PROJECTION_GLOBE_VIEW"];d&&o.push("CUSTOM_ANTIALIASING"),r&&o.push(vr[u]),l=t.useProgram("globeRaster",null,o),c=e},g=t.colorModeForRenderPass(),f=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Rr.update(s);const _=e.calculateGlobeMercatorMatrix(p),m=[e.mercatorXfromLng(p.center.lng),e.mercatorYfromLat(p.center.lat)],y=u?[!1,!0]:[!1],b=t.globeSharedBuffers,S=[p.width*e.exported.devicePixelRatio,p.height*e.exported.devicePixelRatio],R=Float32Array.from(p.globeMatrix),v={useDenormalizedUpVectorScale:!0};if(y.forEach((u=>{const p=t.transform,d=xr(p.zoom)*r.exaggeration();c=-1;const y=u?a.LINES:a.TRIANGLES;for(const c of i){const i=o.getTile(c),x=e.StencilMode.disabled,E=r.prevTerrainTileForTile[c.key],M=r.terrainTileForTile[c.key];Sr(E,M)&&Rr.newMorphing(c.key,E,M,s,250),n.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const T=Rr.getMorphValuesForProxy(c.key),w=T?1:0;T&&e.extend$1(v,{morphing:{srcDemTile:T.from,dstDemTile:T.to,phase:e.easeCubicInOut(T.phase)}});const F=e.tileCornersToBounds(c.canonical),B=e.getLatitudinalLod(F.getCenter().lat),C=e.getGridMatrix(c.canonical,F,B,p.worldSize/p._pixelsPerMercatorPixel),L=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),D=br(p.projMatrix,R,_,L,e.globeToMercatorTransition(p.zoom),m,p.frustumCorners.TL,p.frustumCorners.TR,p.frustumCorners.BR,p.frustumCorners.BL,p.globeCenterInViewSpace,p.globeRadius,S,d,C);if(h(w,u),r.setupElevationDraw(i,l,v),t.prepareDrawProgram(n,l,c.toUnwrapped()),b){const[r,o,i]=u?b.getWirefameBuffers(t.context,B):b.getGridBuffers(B,0!==d);l.draw(n,y,f,x,g,e.CullFaceMode.backCCW,D,"globe_raster",r,o,i)}}})),b){const s=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&s.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,s);for(const s of i){const{x:i,y:c,z:u}=s.canonical,d=0===c,h=c===(1<<u)-1,[_,y,R,x]=b.getPoleBuffers(u);if(x&&(d||h)){const c=o.getTile(s);n.activeTexture.set(a.TEXTURE0),c.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(u,i,p);const E=e.globeNormalizeECEF(e.globeTileBounds(s.canonical)),M=(t,r)=>t.draw(n,a.TRIANGLES,f,e.StencilMode.disabled,g,e.CullFaceMode.disabled,br(p.projMatrix,b,b,E,0,m,p.frustumCorners.TL,p.frustumCorners.TR,p.frustumCorners.BR,p.frustumCorners.BL,p.globeCenterInViewSpace,p.globeRadius,S,0),"globe_pole_raster",r,R,x);r.setupElevationDraw(c,l,v),t.prepareDrawProgram(n,l,s.toUnwrapped()),d&&M(l,_),h&&(b=e.scale(e.create(),b,[1,-1,1]),M(l,y))}}}}(t,r,o,i,s);else{const n=t.context,a=n.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,p=(e,r)=>{if(c===e)return;const o=[vr[e]];r&&o.push(vr[u]),l=t.useProgram("terrainRaster",null,o),c=e},d=t.colorModeForRenderPass(),h=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Rr.update(s);const g=t.transform,f=xr(g.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const _=u?a.LINES:a.TRIANGLES,[m,y]=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const c of i){const i=o.getTile(c),b=e.StencilMode.disabled,S=r.prevTerrainTileForTile[c.key],R=r.terrainTileForTile[c.key];Sr(S,R)&&Rr.newMorphing(c.key,S,R,s,250),n.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const v=Rr.getMorphValuesForProxy(c.key),x=v?1:0;let E;v&&(E={morphing:{srcDemTile:v.from,dstDemTile:v.to,phase:e.easeCubicInOut(v.phase)}});const M=yr(c.projMatrix,Er(c.canonical,g.renderWorldCopies)?f/10:f);p(x,u),r.setupElevationDraw(i,l,E),t.prepareDrawProgram(n,l,c.toUnwrapped()),l.draw(n,_,h,b,d,e.CullFaceMode.backCCW,M,"terrain_raster",r.gridBuffer,m,y)}}))}}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const r=this.painter,o=this.painter.context,i=this.proxySourceCache,s=this.proxiedCoords[i.id],n=this._drapedRenderBatches.shift(),a=[],l=r.style.order;let c=0;for(const u of s){const s=i.getTileByID(u.proxyTileKey),p=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,d=void 0!==p?i.renderCache[p]:this.pool[c++],h=void 0!==p;if(s.texture=d.tex,h&&!d.dirty){a.push(s.tileID);continue}let g;o.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(o.clear({color:e.Color.transparent,stencil:0}),d.dirty=!1);for(let e=n.start;e<=n.end;++e){const t=r.style._layers[l[e]];if(t.isHidden(r.transform.zoom))continue;const i=r.style._getLayerSourceCache(t),s=i?this.proxyToSource[u.key][i.id]:[u];if(!s)continue;const n=s;o.viewport.set([0,0,d.fb.width,d.fb.height]),g!==(i?i.id:null)&&(this._setupStencil(d,s,t,i),g=i?i.id:null),r.renderLayer(r,i,t,n)}this.renderedToTile?(d.dirty=!0,a.push(s.tileID)):h||--c,5===c&&(c=0,this.renderToBackBuffer(a))}return this.renderToBackBuffer(a),this.renderingToTexture=!1,o.bindFramebuffer.set(null),o.viewport.set([0,0,r.width,r.height]),n.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let r,o=0,i=0,s=!1;for(let n=0;n<t;++n){const t=e._layers[e.order[n]];this._style.isLayerDraped(t)?(s&&++o,++i):s||(s=!0,r=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-o/i),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,r){if(!this._visibleDemTiles)return null;const o=this._visibleDemTiles.filter((e=>e.dem)).map((o=>{const i=o.tileID,s=1<<i.overscaledZ,{x:n,y:a}=i.canonical,l=n/s,c=(n+1)/s,u=a/s,p=(a+1)/s;return{minx:l,miny:u,maxx:c,maxy:p,t:o.dem.tree.raycastRoot(l,u,c,p,e,t,r),tile:o}}));o.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of o){if(null==i.t)return null;const o=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,r);if(null!=o)return o}return null}_createFBO(){const t=this.painter.context,r=t.gl,o=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);const i=new e.Texture(t,{width:o[0],height:o[1],data:null},r.RGBA);i.bind(r.LINEAR,r.CLAMP_TO_EDGE);const s=t.createFramebuffer(o[0],o[1],!1);return s.colorAttachment.set(i.texture),s.depthAttachment=new ve(t,s.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,o[0],o[1]),this._stencilRef=0,s.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):s.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:s,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],r=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!r&&t.shouldRedrape():!r&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Me){t=!0;break}if(!t)return;const r={};for(let t=0;t<this._style.order.length;++t){const o=this._style._layers[this._style.order[t]],i=this._style._getLayerSourceCache(o);if(i&&!r[i.id]&&!o.isHidden(this.painter.transform.zoom)&&"line"===o.type&&o.widthExpression()instanceof e.ZoomDependentExpression){r[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Te){e=!0;break}if(!e)return;const t={};for(let e=0;e<this._style.order.length;++e){const r=this._style._layers[this._style.order[e]],o=this._style._getLayerSourceCache(r);if(!o||t[o.id])continue;if(r.isHidden(this.painter.transform.zoom)||"raster"!==r.type)continue;const i=r.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][o.id];if(t)for(const e of t){const t=Tr(o.getTile(e),o.findLoadedParent(e,0),o,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(o.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const r=[];let o,i=0,s=this._style._layers[e[i]];for(;!this._style.isLayerDraped(s)&&s.isHidden(this.painter.transform.zoom)&&++i<t;)s=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===o&&(o=i):void 0!==o&&(r.push({start:o,end:i-1}),o=void 0))}void 0!==o&&r.push({start:o,end:i-1}),this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let r=0;r<e.length;++r){const o=Object.values(e[r]);t.renderCachePool.push(...o)}}return}this._clearRasterLayersFromRenderCache();const r=this.proxyCoords,o=this._tilesDirty;for(let i=r.length-1;i>=0;i--){const s=r[i];if(t.getTileByID(s.key),void 0!==t.proxyCachedFBO[s.key]){const r=e[s.key],i=this.proxyToSource[s.key];let n=0;for(const e in i){const t=i[e],s=r[e];if(!s||s.length!==t.length||t.some(((t,r)=>t!==s[r]||o[e]&&o[e].hasOwnProperty(t.key)))){n=-1;break}++n}for(const e in t.proxyCachedFBO[s.key])t.renderCache[t.proxyCachedFBO[s.key][e]].dirty=n<0||n!==Object.values(r).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of i)for(const o of r){if(t.proxyCachedFBO[o.key])continue;let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(t.proxyCachedFBO[o.key]={},t.proxyCachedFBO[o.key][e.start]=r,t.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,r,o){if(!o||!this._sourceTilesOverlap[o.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,s=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let n;if(r.isTileClipped())n=t.length,this._overlapStencilMode.test={func:s.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);n=1,this._overlapStencilMode.test={func:s.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+n>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=n,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,r){const o=this.painter,i=this.painter.context,s=i.gl;o._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const n=o.useProgram("clippingMask");for(const a of t){const t=o._tileClippingMaskIDs[a.key]=--r;n.draw(i,s.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:s.ALWAYS,mask:0},t,255,s.KEEP,s.KEEP,s.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Mr(a.projMatrix),"$clipping",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}pointCoordinate(t){const r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;const o=[t.x,t.y,1,1];e.transformMat4$1(o,o,r.pixelMatrixInverse),e.scale$1(o,o,1/o[3]),o[0]/=r.worldSize,o[1]/=r.worldSize;const i=r._camera.position,s=e.mercatorZfromAltitude(1,r.center.lat),n=[i[0],i[1],i[2]/s,0],a=e.subtract([],o.slice(0,3),n);e.normalize(a,a);const l=this.raycast(n,a,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(n,n,a,l),n[3]=n[2],n[2]*=s,n):null}drawDepth(){const t=this.painter,r=t.context,o=this.proxySourceCache,i=Math.ceil(t.width),s=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===s||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=r.gl,o=r.createFramebuffer(i,s,!0);r.activeTexture.set(t.TEXTURE0);const n=new e.Texture(r,{width:i,height:s,data:null},t.RGBA);n.bind(t.NEAREST,t.CLAMP_TO_EDGE),o.colorAttachment.set(n.texture);const a=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,i,s);o.depthAttachment.set(a),this._depthFBO=o,this._depthTexture=n}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,i,s]),function(t,r,o,i){if("globe"===t.transform.projection.name)return;const s=t.context,n=s.gl;s.clear({depth:1});const a=t.useProgram("terrainDepth"),l=new e.DepthMode(n.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of i){const i=o.getTile(t),c=yr(t.projMatrix,0);r.setupElevationDraw(i,a),a.draw(s,n.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(t,this,o,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,r){if(e.getSource()instanceof Fe)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const o=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let t=0;t<i.length;t++){const s=i[t],n=this._findTileCoveringTileID(s,e);if(n){const t=this._createProxiedId(s,n,r[s.key]&&r[s.key][e.id]);o.push(t),this.proxyToSource[s.key][e.id]=[t]}}let s=!1;for(let i=0;i<t.length;i++){const n=e.getTile(t[i]);if(!n||!n.hasData())continue;const a=this._findTileCoveringTileID(n.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==n.tileID.canonical.z){const t=this.proxyToSource[a.tileID.key][e.id],i=this._createProxiedId(a.tileID,n,r[a.tileID.key]&&r[a.tileID.key][e.id]);t?t.splice(t.length-1,0,i):this.proxyToSource[a.tileID.key][e.id]=[i],o.push(i),s=!0}}this._sourceTilesOverlap[e.id]=s}_setupProxiedCoordsForImageSource(t,r,o){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],s=this.proxyCoords,n=t.getSource(),a=new e.Point(n.tileID.x,n.tileID.y)._div(1<<n.tileID.z),l=n.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-a.x),e.min.y=Math.min(e.min.y,t.y-a.y),e.max.x=Math.max(e.max.x,t.x-a.x),e.max.y=Math.max(e.max.y,t.y-a.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,r)=>{const o=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),s=e.EXTENT/(1<<t.canonical.z),n=r.wrap+r.canonical.x/(1<<r.canonical.z),a=r.canonical.y/(1<<r.canonical.z);return o+s<n+l.min.x||o>n+l.max.x||i+s<a+l.min.y||i>a+l.max.y};for(let e=0;e<s.length;e++){const n=s[e];for(let e=0;e<r.length;e++){const s=t.getTile(r[e]);if(!s||!s.hasData())continue;if(c(n,s.tileID))continue;const a=this._createProxiedId(n,s,o[n.key]&&o[n.key][t.id]),l=this.proxyToSource[n.key][t.id];l?l.push(a):this.proxyToSource[n.key][t.id]=[a],i.push(a)}}}_createProxiedId(t,r,o){let i=this.orthoMatrix;if(o){const e=o.find((e=>e.key===r.tileID.key));if(e)return e}if(r.tileID.key!==t.key){const o=t.canonical.z-r.tileID.canonical.z;let s,n,a;i=e.create();const l=r.tileID.wrap-t.wrap<<t.overscaledZ;o>0?(s=e.EXTENT>>o,n=s*((r.tileID.canonical.x<<o)-t.canonical.x+l),a=s*((r.tileID.canonical.y<<o)-t.canonical.y)):(s=e.EXTENT<<-o,n=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+l<<-o)),a=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-o))),e.ortho(i,0,s,0,s,0,1),e.translate(i,i,[n,a,0])}return new Br(r.tileID,t.key,i)}_findTileCoveringTileID(t,r){let o=r.getTile(t);if(o&&o.hasData())return o;const i=this._findCoveringTileCache[r.id],s=i[t.key];if(o=s?r.getTileByID(s):null,o&&o.hasData()||null===s)return o;let n=o?o.tileID:t,a=n.overscaledZ;const l=r.getSource().minzoom,c=[];if(!s){const i=r.getSource().maxzoom;if(t.canonical.z>=i){const o=t.canonical.z-i;r.getSource().reparseOverscaled?(a=Math.max(t.canonical.z+2,r.transform.tileZoom),n=new e.OverscaledTileID(a,t.wrap,i,t.canonical.x>>o,t.canonical.y>>o)):0!==o&&(a=i,n=new e.OverscaledTileID(a,t.wrap,i,t.canonical.x>>o,t.canonical.y>>o))}n.key!==t.key&&(c.push(n.key),o=r.getTile(n))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(a-=1;a>=l&&(!o||!o.hasData());a--){o&&u(o.tileID.key);const e=n.calculateScaledKey(a);if(o=r.getTileByID(e),o&&o.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):o=r.getTileByID(t)}return u(o?o.tileID.key:null),o&&o.hasData()?o:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let r=0;const o=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)r=e*i+t,o.emplaceBack(r,r+1),o.emplaceBack(r,r+i),o.emplaceBack(r+1,r+i),128===e&&o.emplaceBack(r+i,r+i+1);o.emplaceBack(r+1,r+1+i)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Lr{static cacheKey(e,t,r,o){let i=`${t}${o?o.cacheKey:""}`;for(const t of r)e.usedDefines.includes(t)&&(i+=`/${t}`);return i}constructor(t,r,o,i,s,n){const a=t.gl;this.program=a.createProgram();const l=function(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const o=e[r].split(" ");t.push(o.pop())}return t}(o.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let p=i?i.defines():[];p=p.concat(n.map((e=>`#define ${e}`)));const d=t.isWebGL2?"#version 300 es\n":"",h=d+p.concat(t.extStandardDerivatives&&0===d.length?"#extension GL_OES_standard_derivatives : enable\n".concat(lr):lr,lr,ar,nr.fragmentSource,ir.fragmentSource,o.fragmentSource).join("\n"),g=d+p.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ar,nr.vertexSource,ir.vertexSource,or.vertexSource,o.vertexSource).join("\n"),f=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(f,h),a.compileShader(f),a.attachShader(this.program,f);const _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,g),a.compileShader(_),a.attachShader(this.program,_),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(a.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(f),this.fixedUniforms=s(t),this.binderUniforms=i?i.getUniforms(t):[],n.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),n.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),n.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const r=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].set(this.program,e,t[e])}}draw(e,t,r,o,i,s,n,a,l,c,u,p,d,h,g){const f=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(o),e.setColorMode(i),e.setCullFace(s);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,n[e]);h&&h.setUniforms(this.program,e,this.binderUniforms,p,{zoom:d});const _={[f.LINES]:2,[f.TRIANGLES]:3,[f.LINE_STRIP]:1}[t];for(const r of u.get()){const o=r.vaos||(r.vaos={});(o[a]||(o[a]=new dr)).bind(e,this,l,h?h.getPaintVertexBuffers():[],c,r.vertexOffset,g||[]),f.drawElements(t,r.primitiveLength*_,f.UNSIGNED_SHORT,r.primitiveOffset*_*2)}}}function Dr(e,t){const r=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/r,i=o*(t.tileID.canonical.x+t.tileID.wrap*r),s=o*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/C(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,s>>16],u_pixel_coord_lower:[65535&i,65535&s]}}const Ir=e.create(),Or=(t,r,o,i,s,n,a,l,c,u,p)=>{const d=r.style.light,h=d.properties.get("position"),g=[h.x,h.y,h.z],f=e.create$1();"viewport"===d.properties.get("anchor")&&(e.fromRotation(f,-r.transform.angle),e.transformMat3(g,g,f));const _=d.properties.get("color"),m=r.transform,y={u_matrix:t,u_lightpos:g,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[_.r,_.g,_.b],u_vertical_gradient:+o,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ir,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:s,u_edge_radius:n};return"globe"===m.projection.name&&(y.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],y.u_zoom_transition=c,y.u_inv_rot_matrix=p,y.u_merc_center=u,y.u_up_dir=m.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),y.u_height_lift=l),y},Pr=(t,r,o,i,s,n,a,l,c,u,p,d)=>{const h=Or(t,r,o,i,s,n,a,c,u,p,d),g={u_height_factor:-Math.pow(2,a.overscaledZ)/l.tileSize/8};return e.extend(h,Dr(r,l),g)},Ar=e=>({u_matrix:e}),kr=(t,r,o)=>e.extend(Ar(t),Dr(r,o)),zr=(e,t)=>({u_matrix:e,u_world:t}),Nr=(t,r,o,i)=>e.extend(kr(t,r,o),{u_world:i}),jr=e.create(),Ur=(t,r,o,i,s,n)=>{const a=t.transform,l="globe"===a.projection.name;let c;if("map"===n.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(a.zoom,r.canonical)*a._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=a.calculatePixelsToTileUnitsMatrix(o);else c=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,o,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:jr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=s,u.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(a.zoom);const t=s[0]*e.EXTENT,o=s[1]*e.EXTENT;u.u_up_dir=a.projection.upVector(new e.CanonicalTileID(0,0,0),t,o)}return u},Gr=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Wr=(t,r,o,i)=>{const s=e.EXTENT/o.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.getCameraToCenterDistance(i),u_extrude_scale:[r.pixelsToGLUnits[0]/s,r.pixelsToGLUnits[1]/s]}},qr=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),$r=e.create(),Vr=(t,r,o,i,s,n,a)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:C(o,1,n),p={u_matrix:r.projMatrix,u_extrude_scale:u,u_intensity:a,u_inv_rot_matrix:$r,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){p.u_inv_rot_matrix=i,p.u_merc_center=s,p.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],p.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=s[0]*e.EXTENT,o=s[1]*e.EXTENT;p.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,o)}return p},Hr=(e,t,r,o,i,s,n)=>{const a=e.transform,l=a.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Xr(e,t,r,o),u_pixels_to_tile_units:l,u_device_pixel_ratio:s,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Jr(r)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Zr(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:n}},Kr=(e,t,r,o,i)=>{const s=e.transform;return{u_matrix:Xr(e,t,r,o),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Zr(t,s),u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Zr(e,t){return 1/C(e,1,t.tileZoom)}function Xr(e,t,r,o){return e.translatePosMatrix(o||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function Jr(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Yr=(e,t,r,o,i,s)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_fade_t:o.mix,u_opacity:o.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(n=i.paint.get("raster-contrast"),n>0?1/(1-n):1+n),u_spin_weights:Qr(i.paint.get("raster-hue-rotate")),u_perspective_transform:s};var n,a};function Qr(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const eo=e.create(),to=(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_)=>{const m=s.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:m.cameraToCenterDistance,u_rotate_symbol:+o,u_aspect_ratio:m.width/m.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:n,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:eo,u_up_vector:[0,-1,0]};return"globe"===_.name&&(y.u_tile_id=[p.canonical.x,p.canonical.y,1<<p.canonical.z],y.u_zoom_transition=d,y.u_inv_rot_matrix=g,y.u_merc_center=h,y.u_camera_forward=m._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(m.globeMatrix,p.toUnwrapped()),y.u_tile_matrix=Float32Array.from(m.globeMatrix),y.u_up_vector=f),y},ro=(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_,m)=>e.extend(to(t,r,o,i,s,n,a,l,c,u,d,h,g,f,_,m),{u_gamma_scale:i?s.transform.cameraToCenterDistance*Math.cos(s.terrain?0:s.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+p}),oo=(t,r,o,i,s,n,a,l,c,u,p,d,h,g,f,_)=>e.extend(ro(t,r,o,i,s,n,a,l,!0,c,!0,p,d,h,g,f,_),{u_texsize_icon:u,u_texture_icon:1}),io=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),so=(t,r,o,i,s)=>e.extend(function(e,t,r){const o=t.imageManager.getPattern(e.toString()),{width:i,height:s}=t.imageManager.getPixelSize(),n=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,t.transform.tileZoom)/n,l=a*(r.tileID.canonical.x+r.tileID.wrap*n),c=a*r.tileID.canonical.y;return{u_image:0,u_pattern_tl:o.tl,u_pattern_br:o.br,u_texsize:[i,s],u_pattern_size:o.displaySize,u_tile_units_to_pixels:1/C(r,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,o,s),{u_matrix:t,u_opacity:r}),no={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:mr,terrainDepth:mr,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ao;function lo(t,r,o,i,s,n,a){const l=t.context,c=l.gl,u=t.transform,p=t.useProgram("collisionBox"),d=[];let h=0,g=0;for(let f=0;f<i.length;f++){const _=i[f],m=r.getTile(_),y=m.getBucket(o);if(!y)continue;const b=yt(_,y,u);let S=b;0===s[0]&&0===s[1]||(S=t.translatePosMatrix(b,m,s,n));const R=a?y.textCollisionBox:y.iconCollisionBox,v=y.collisionCircleArray;if(v.length>0){const t=e.create(),r=S;e.mul(t,y.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,y.placementViewportMatrix),d.push({circleArray:v,circleOffset:g,transform:r,invTransform:t,projection:y.getProjection()}),h+=v.length/4,g=h}R&&(t.terrain&&t.terrain.setupElevationDraw(m,p),p.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Wr(S,u,m,y.getProjection()),o.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,null,u.zoom,null,[R.collisionVertexBuffer,R.collisionVertexBufferExt]))}if(!a||!d.length)return;const f=t.useProgram("collisionCircle"),_=new e.StructArrayLayout2f1f2i16;_.resize(4*h),_._trim();let m=0;for(const e of d)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,o=e.circleArray[r+0],i=e.circleArray[r+1],s=e.circleArray[r+2],n=e.circleArray[r+3];_.emplace(m++,o,i,s,n,0),_.emplace(m++,o,i,s,n,1),_.emplace(m++,o,i,s,n,2),_.emplace(m++,o,i,s,n,3)}(!ao||ao.length<2*h)&&(ao=function(t){const r=2*t,o=new e.StructArrayLayout3ui6;o.resize(r),o._trim();for(let e=0;e<r;e++){const t=6*e;o.uint16[t+0]=4*e+0,o.uint16[t+1]=4*e+1,o.uint16[t+2]=4*e+2,o.uint16[t+3]=4*e+2,o.uint16[t+4]=4*e+3,o.uint16[t+5]=4*e+0}return o}(h));const y=l.createIndexBuffer(ao,!0),b=l.createVertexBuffer(_,e.collisionCircleLayout.members,!0);for(const r of d){const i={u_matrix:r.transform,u_inv_matrix:r.invTransform,u_camera_to_center_distance:(S=u).getCameraToCenterDistance(r.projection),u_viewport_size:[S.width,S.height]};f.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,i,o.id,b,y,e.SegmentVector.simpleSegment(0,2*r.circleOffset,r.circleArray.length,r.circleArray.length/2),null,u.zoom)}var S;b.destroy(),y.destroy()}const co=e.create();function uo({width:t,height:r,anchor:o,textOffset:i,textScale:s},n){const{horizontalAlign:a,verticalAlign:l}=e.getAnchorAlignment(o),c=-(a-.5)*t,u=-(l-.5)*r,p=e.evaluateVariableOffset(o,i);return new e.Point((c/s+p[0])*n,(u/s+p[1])*n)}function po(t,r,o,i,s,n,a,l,c,u,p){const d=t.text.placedSymbolArray,h=t.text.dynamicLayoutVertexArray,g=t.icon.dynamicLayoutVertexArray,f={},_=t.getProjection(),m=bt(l,_,n),y=n.elevation,b=_.upVectorScale(l.canonical,n.center.lat,n.worldSize).metersToTile;h.clear();for(let g=0;g<d.length;g++){const S=d.get(g),{tileAnchorX:R,tileAnchorY:v,numGlyphs:x}=S,E=S.hidden||!S.crossTileID||t.allowVerticalPlacement&&!S.placedOrientation?null:i[S.crossTileID];if(E){let i=0,d=0,g=0;if(y){const e=y?y.getAtTileOffset(l,R,v):0,[t,r,o]=_.upVector(l.canonical,R,v);i=e*t*b,d=e*r*b,g=e*o*b}let[M,T,w,F]=ot(S.projectedAnchorX+i,S.projectedAnchorY+d,S.projectedAnchorZ+g,o?m:a);const B=it(n.getCameraToCenterDistance(_),F);let C=s.evaluateSizeForFeature(t.textSizeData,u,S)*B/e.ONE_EM;o&&(C*=t.tilePixelRatio/c);const L=uo(E,C);o?(({x:M,y:T,z:w}=_.projectTilePoint(R+L.x,v+L.y,l.canonical)),[M,T,w]=ot(M+i,T+d,w+g,a)):(r&&L._rotate(-n.angle),M+=L.x,T+=L.y,w=0);const D=t.allowVerticalPlacement&&S.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<x;t++)e.addDynamicAttributes(h,M,T,w,D);p&&S.associatedIconIndex>=0&&(f[S.associatedIconIndex]={x:M,y:T,z:w,angle:D})}else ht(x,h)}if(p){g.clear();const r=t.icon.placedSymbolArray;for(let t=0;t<r.length;t++){const o=r.get(t),{numGlyphs:i}=o,s=f[t];if(o.hidden||!s)ht(i,g);else{const{x:t,y:r,z:o,angle:n}=s;for(let s=0;s<i;s++)e.addDynamicAttributes(g,t,r,o,n)}}t.icon.dynamicLayoutVertexBuffer.updateData(g)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function ho(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function go(t,r,o,i,s,n,a,l,c,u,p,d){const h=t.context,g=h.gl,f=t.transform,_="map"===l,m="map"===c,y=_&&"point"!==o.layout.get("symbol-placement"),b=_&&!m&&!y,S=void 0!==o.layout.get("symbol-sort-key").constantOr(1);let R=!1;const v=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),x=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],E=o.layout.get("text-variable-anchor"),M="globe"===f.projection.name,T=[],w=[0,-1,0];let F=w;!M&&!f.mercatorFromTransition||_||(F=function(t){const r=t._camera.getWorldToCamera(t.worldSize,1),o=e.multiply([],r,t.globeMatrix);e.invert(o,o);const i=[0,0,0],s=[0,1,0,0];return e.transformMat4$1(s,s,o),i[0]=s[0],i[1]=s[1],i[2]=s[2],e.normalize(i,i),i}(f));for(const l of i){const i=r.getTile(l),c=i.getBucket(o);if(!c)continue;if("mercator"===c.projection.name&&M)continue;const p=s?c.text:c.icon;if(!p||c.fullyClipped||!p.segments.get().length)continue;const d=p.programConfigurations.get(o.id),h=s||c.sdfIcons,v=s?c.textSizeData:c.iconSizeData,B=m||0!==f.pitch,C=e.evaluateSizeForZoom(v,f.zoom);let L,D,I,O,P=[0,0],A=null;if(s)D=i.glyphAtlasTexture,I=g.LINEAR,L=i.glyphAtlasTexture.size,c.iconsInText&&(P=i.imageAtlasTexture.size,A=i.imageAtlasTexture,O=B||t.options.rotating||t.options.zooming||"composite"===v.kind||"camera"===v.kind?g.LINEAR:g.NEAREST);else{const e=1!==o.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;D=i.imageAtlasTexture,I=h||t.options.rotating||t.options.zooming||e||B?g.LINEAR:g.NEAREST,L=i.imageAtlasTexture.size}const k="globe"===c.projection.name,z=k?F:w,N=k?e.globeToMercatorTransition(f.zoom):0,j=bt(l,c.getProjection(),f),U=f.calculatePixelsToTileUnitsMatrix(i),G=et(j,i.tileID.canonical,m,_,f,c.getProjection(),U),W=t.terrain&&m&&y?e.invert(e.create(),G):co,q=rt(j,i.tileID.canonical,m,_,f,c.getProjection(),U),$=E&&c.hasTextData(),V="none"!==o.layout.get("icon-text-fit")&&$&&c.hasIconData();if(y){const e=f.elevation,r=e?e.getAtTileOffsetFunc(l,f.center.lat,f.worldSize,c.getProjection()):null,o=tt(j,i.tileID.canonical,m,_,f,c.getProjection(),U);nt(c,j,t,s,o,q,m,u,r,l)}const H=y||s&&E||V,K=t.translatePosMatrix(j,i,n,a),Z=H?co:G,X=t.translatePosMatrix(q,i,n,a,!0),J=c.getProjection().createInversionMatrix(f,l.canonical),Y=[];t.terrainRenderModeElevated()&&m&&Y.push("PITCH_WITH_MAP_TERRAIN"),k&&Y.push("PROJECTION_GLOBE_VIEW"),H&&Y.push("PROJECTED_POS_ON_VIEWPORT");const Q=h&&0!==o.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?c.iconsInText?oo(v.kind,C,b,m,t,K,Z,X,L,P,l,N,x,J,z,c.getProjection()):ro(v.kind,C,b,m,t,K,Z,X,s,L,!0,l,N,x,J,z,c.getProjection()):to(v.kind,C,b,m,t,K,Z,X,s,L,l,N,x,J,z,c.getProjection());const te={program:t.useProgram(ho(h,s,c),d,Y),buffers:p,uniformValues:ee,atlasTexture:D,atlasTextureIcon:A,atlasInterpolation:I,atlasInterpolationIcon:O,isSDF:h,hasHalo:Q,tile:i,labelPlaneMatrixInv:W};if(S&&c.canOverlap){R=!0;const t=p.segments.get();for(const r of t)T.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:te})}else T.push({segments:p.segments,sortKey:0,state:te})}R&&T.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of T){const r=e.state;if(t.terrain&&t.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!M,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),h.activeTexture.set(g.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,g.CLAMP_TO_EDGE),r.atlasTextureIcon&&(h.activeTexture.set(g.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,fo(r.buffers,e.segments,o,t,r.program,v,p,d,i)),i.u_is_halo=0}fo(r.buffers,e.segments,o,t,r.program,v,p,d,r.uniformValues)}}function fo(t,r,o,i,s,n,a,l,c){const u=i.context,p=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];s.draw(u,u.gl.TRIANGLES,n,a,l,e.CullFaceMode.disabled,c,o.id,t.layoutVertexBuffer,t.indexBuffer,r,o.paint,i.transform.zoom,t.programConfigurations.get(o.id),p)}function _o(t,r,o,i,s,n,a){const l=t.context.gl,c=o.paint.get("fill-pattern"),u=c&&c.constantOr(1);let p,d,h,g,f;a?(d=u&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",p=l.LINES):(d=u?"fillPattern":"fill",p=l.TRIANGLES);for(const _ of i){const i=r.getTile(_);if(u&&!i.patternsLoaded())continue;const m=i.getBucket(o);if(!m)continue;t.prepareDrawTile();const y=m.programConfigurations.get(o.id),b=t.useProgram(d,y);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers());const S=c.constantOr(null);if(S&&i.imageAtlas){const e=i.imageAtlas.patternPositions[S.toString()];e&&y.setConstantPatternPositions(e)}const R=t.translatePosMatrix(_.projMatrix,i,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(a){g=m.indexBuffer2,f=m.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];h="fillOutlinePattern"===d&&u?Nr(R,t,i,e):zr(R,e)}else g=m.indexBuffer,f=m.segments,h=u?kr(R,t,i):Ar(R);t.prepareDrawProgram(t.context,b,_.toUnwrapped()),b.draw(t.context,p,s,t.stencilModeForClipping(_),n,e.CullFaceMode.disabled,h,o.id,m.layoutVertexBuffer,g,f,o.paint,t.transform.zoom,y)}}function mo(t,r,o,i,s,n,a){const l=t.context,c=l.gl,u=t.transform,p=o.paint.get("fill-extrusion-pattern"),d=p.constantOr(1),h=o.paint.get("fill-extrusion-opacity"),g=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),o.paint.get("fill-extrusion-ambient-occlusion-radius")],f=o.layout.get("fill-extrusion-edge-radius"),_=f>0&&!o.paint.get("fill-extrusion-rounded-roof"),m=_?0:f,y="globe"===u.projection.name?e.fillExtrusionHeightLift():0,b="globe"===u.projection.name,S=b?e.globeToMercatorTransition(u.zoom):0,R=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],v=[];b&&v.push("PROJECTION_GLOBE_VIEW"),g[0]>0&&v.push("FAUX_AO"),_&&v.push("ZERO_ROOF_RADIUS");for(const f of i){const i=r.getTile(f),_=i.getBucket(o);if(!_||_.projection.name!==u.projection.name)continue;const x=_.programConfigurations.get(o.id),E=t.useProgram(d?"fillExtrusionPattern":"fillExtrusion",x,v);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,E,{useMeterToDem:!0});else{if(!_.enableTerrain)continue;if(e.setupElevationDraw(i,E,{useMeterToDem:!0}),yo(l,r,f,_,o,e),!_.centroidVertexBuffer){const e=E.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}d&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),x.updatePaintBuffers());const M=p.constantOr(null);if(M&&i.imageAtlas){const e=i.imageAtlas.patternPositions[M.toString()];e&&x.setConstantPatternPositions(e)}const T=t.translatePosMatrix(f.projMatrix,i,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),w=u.projection.createInversionMatrix(u,f.canonical),F=o.paint.get("fill-extrusion-vertical-gradient"),B=d?Pr(T,t,F,h,g,m,f,i,y,S,R,w):Or(T,t,F,h,g,m,f,y,S,R,w);t.prepareDrawProgram(l,E,f.toUnwrapped());const C=[];t.terrain&&C.push(_.centroidVertexBuffer),b&&C.push(_.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,s,n,a,e.CullFaceMode.backCCW,B,o.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,o.paint,t.transform.zoom,x,C)}}function yo(t,r,o,i,s,n){const a=[t=>{let r=t.canonical.x-1,o=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,o--),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,r,t.canonical.y)},t=>{let r=t.canonical.x+1,o=t.wrap;return r===1<<t.canonical.z&&(r=0,o++),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,r,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=r.getSource().minzoom,o=e=>{const t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(s)},i=[0,-1,1];for(const r of i){if(e.overscaledZ+r<t)continue;const i=o(e.calculateScaledKey(e.overscaledZ+r));if(i)return i}},c=[0,0,0],u=(t,r)=>(c[0]=Math.min(t.min.y,r.min.y),c[1]=Math.max(t.max.y,r.max.y),c[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,c),p=(t,r)=>(c[0]=Math.min(t.min.x,r.min.x),c[1]=Math.max(t.max.x,r.max.x),c[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>p(e,t),(e,t)=>p(t,e)],h=new e.Point(0,0);let g,f,_;const m=(t,r,i,s,a)=>{const l=[[s?i:t,s?t:i,0],[s?i:r,s?r:i,0]],c=a<0?e.EXTENT+a:a,u=[s?c:(t+r)/2,s?(t+r)/2:c,0];return 0===i&&a<0||0!==i&&a>0?n.getForTilePoints(_,[u],!0,f):l.push(u),n.getForTilePoints(o,l,!0,g),Math.max(l[0][2],l[1][2],u[2])/n.exaggeration()};for(let t=0;t<4;t++){const r=(t<2?1:5)-t,s=i.borders[t];if(0===s.length)continue;const c=_=a[t](o),u=l(c);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[t]===u.canonical.z&&u.borderDoneWithNeighborZ[r]===i.canonical.z)continue;if(f=n.findDEMTileFor(c),!f||!f.dem)continue;if(!g){const e=n.findDEMTileFor(o);if(!e||!e.dem)return;g=e}const p=u.borders[r];let y=0;const b=u.borderDoneWithNeighborZ[r]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let o=0;o<s.length;o++){const n=i.featuresOnBorder[s[o]],a=n.borders[t];let l;for(;y<p.length&&(l=u.featuresOnBorder[p[y]],!(l.borders[r][1]>a[0]+3));)b&&u.encodeCentroid(void 0,l,!1),y++;if(l&&y<p.length){const o=y;let s=0;for(;!(l.borders[r][0]>a[1]-3)&&(s++,++y!==p.length);)l=u.featuresOnBorder[p[y]];if(l=u.featuresOnBorder[p[o]],n.intersectsCount()>1||l.intersectsCount()>1||1!==s){1!==s&&(y=o),i.encodeCentroid(void 0,n,!1),b&&u.encodeCentroid(void 0,l,!1);continue}const c=d[t](n,l),g=t%2?e.EXTENT-1:0;h.x=m(c[0],Math.min(e.EXTENT-1,c[1]),g,t<2,c[2]),h.y=0,i.encodeCentroid(h,n,!1),b&&u.encodeCentroid(h,l,!1)}else i.encodeCentroid(void 0,n,!1)}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0,b&&(u.borderDoneWithNeighborZ[r]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of s)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(b){for(const e of p)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[r]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const bo=new e.Color(1,0,0,1),So=new e.Color(0,1,0,1),Ro=new e.Color(0,0,1,1),vo=new e.Color(1,0,1,1),xo=new e.Color(0,1,1,1);function Eo(t,r,o){const i=t.context,s=t.transform,n=i.gl,a="globe"===s.projection.name,l=a?["PROJECTION_GLOBE_VIEW"]:null;let c=o.projMatrix;if(a&&e.globeToMercatorTransition(s.zoom)>0){const t=e.transitionTileAABBinECEF(o.canonical,s),r=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),s.globeMatrix,r),e.multiply(c,s.projMatrix,c)}const u=t.useProgram("debug",null,l),p=r.getTileByID(o.key);t.terrain&&t.terrain.setupElevationDraw(p,u);const d=e.DepthMode.disabled,h=e.StencilMode.disabled,g=t.colorModeForRenderPass(),f="$debug";i.activeTexture.set(n.TEXTURE0),t.emptyTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),a?p._makeGlobeTileDebugBuffers(t.context,s):p._makeDebugTileBoundsBuffers(t.context,s.projection);const _=p._tileDebugBuffer||t.debugBuffer,m=p._tileDebugIndexBuffer||t.debugIndexBuffer,y=p._tileDebugSegments||t.debugSegments;u.draw(i,n.LINE_STRIP,d,h,g,e.CullFaceMode.disabled,qr(c,e.Color.red),f,_,m,y,null,null,null,[p._globeTileDebugBorderBuffer]);const b=p.latestRawTileData,S=Math.floor((b&&b.byteLength||0)/1024),R=r.getTile(o).tileSize,v=512/Math.min(R,512)*(o.overscaledZ/s.zoom)*.5;let x=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(x+=` => ${o.overscaledZ}`),x+=` ${S}kb`,function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,o=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}(t,x);const E=p._tileDebugTextBuffer||t.debugBuffer,M=p._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,T=p._tileDebugTextSegments||t.debugSegments;u.draw(i,n.TRIANGLES,d,h,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,qr(c,e.Color.transparent,v),f,E,M,T,null,null,null,[p._globeTileDebugTextBuffer])}function Mo(e,t,r,o){wo(e,0,t+r/2,e.transform.width,r,o)}function To(e,t,r,o){wo(e,t-r/2,0,r,e.transform.height,o)}function wo(t,r,o,i,s,n){const a=t.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,s*e.exported.devicePixelRatio),a.clear({color:n}),l.disable(l.SCISSOR_TEST)}const Fo=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Bo}=Fo;function Co(e,t,r,o){e.emplaceBack(t,r,o)}class Lo{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Co(this.vertexArray,-1,-1,1),Co(this.vertexArray,1,-1,1),Co(this.vertexArray,-1,1,1),Co(this.vertexArray,1,1,1),Co(this.vertexArray,-1,-1,-1),Co(this.vertexArray,1,-1,-1),Co(this.vertexArray,-1,1,-1),Co(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Bo),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Do(t,r,o,i,s,n){const a=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),p=((e,t,r,o,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[o.r,o.g,o.b,o.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),s,u,l,c);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.skyboxTexture,0),o.draw(t,a.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,p,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const Io=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Oo{constructor(t){const r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);const o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(r,Io.members),this.indexBuffer=t.createIndexBuffer(o),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Po={symbol:function(t,r,o,i,s){if("translucent"!==t.renderPass)return;const n=e.StencilMode.disabled,a=t.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(t,r,o,i,s,n,a){const l=r.transform,c="map"===s,u="map"===n;for(const r of t){const t=i.getTile(r),s=t.getBucket(o);if(!s||!s.text||!s.text.segments.get().length)continue;const n=e.evaluateSizeForZoom(s.textSizeData,l.zoom),p=bt(r,s.getProjection(),l),d=l.calculatePixelsToTileUnitsMatrix(t),h=et(p,t.tileID.canonical,u,c,l,s.getProjection(),d),g="none"!==o.layout.get("icon-text-fit")&&s.hasIconData();if(n){const o=Math.pow(2,l.zoom-t.tileID.overscaledZ);po(s,c,u,a,e.symbolSize,l,h,r,o,n,g)}}}(i,t,o,r,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),s),0!==o.paint.get("icon-opacity").constantOr(1)&&go(t,r,o,i,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),n,a),0!==o.paint.get("text-opacity").constantOr(1)&&go(t,r,o,i,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),n,a),r.map.showCollisionBoxes&&(lo(t,r,o,i,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),lo(t,r,o,i,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(t,r,o,i){if("translucent"!==t.renderPass)return;const s=o.paint.get("circle-opacity"),n=o.paint.get("circle-stroke-width"),a=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0===s.constantOr(1)&&(0===n.constantOr(1)||0===a.constantOr(1)))return;const c=t.context,u=c.gl,p=t.transform,d=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),h=e.StencilMode.disabled,g=t.colorModeForRenderPass(),f="globe"===p.projection.name,_=[e.mercatorXfromLng(p.center.lng),e.mercatorYfromLat(p.center.lat)],m=[];for(let s=0;s<i.length;s++){const n=i[s],a=r.getTile(n),c=a.getBucket(o);if(!c||c.projection.name!==p.projection.name)continue;const u=c.programConfigurations.get(o.id),d=Gr(o);f&&d.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",u,d),g=c.layoutVertexBuffer,y=c.globeExtVertexBuffer,b=c.indexBuffer,S=p.projection.createInversionMatrix(p,n.canonical),R={programConfiguration:u,program:h,layoutVertexBuffer:g,globeExtVertexBuffer:y,indexBuffer:b,uniformValues:Ur(t,n,a,S,_,o),tile:a};if(l){const t=c.segments.get();for(const r of t)m.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:R})}else m.push({segments:c.segments,sortKey:0,state:R})}l&&m.sort(((e,t)=>e.sortKey-t.sortKey));const y={useDepthForOcclusion:!f};for(const r of m){const{programConfiguration:i,program:s,layoutVertexBuffer:n,globeExtVertexBuffer:a,indexBuffer:l,uniformValues:f,tile:_}=r.state,m=r.segments;t.terrain&&t.terrain.setupElevationDraw(_,s,y),t.prepareDrawProgram(c,s,_.tileID.toUnwrapped()),s.draw(c,u.TRIANGLES,d,h,g,e.CullFaceMode.disabled,f,o.id,n,l,m,o.paint,p.zoom,i,[a])}},heatmap:function(t,r,o,i){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const s=t.context,n=s.gl,a=e.StencilMode.disabled,l=new e.ColorMode([n.ONE,n.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r,o){const i=e.gl,s=t.width*o,n=t.height*o;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,s,n]);let a=r.heatmapFbo;if(!a||a&&(a.width!==s||a.height!==n)){a&&a.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),a=r.heatmapFbo=e.createFramebuffer(s,n,!1),function(e,t,r,o,i,s){const n=e.gl;n.texImage2D(n.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?n.RGBA16F:n.RGBA,i,s,0,n.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?n.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),o.colorAttachment.set(r)}(e,0,t,a,s,n)}else i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer)}(s,t,o,"globe"===t.transform.projection.name?.5:.25),s.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,p=u?["PROJECTION_GLOBE_VIEW"]:null,d=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,h=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let g=0;g<i.length;g++){const f=i[g];if(r.hasRenderableParent(f))continue;const _=r.getTile(f),m=_.getBucket(o);if(!m||m.projection.name!==c.projection.name)continue;const y=m.programConfigurations.get(o.id),b=t.useProgram("heatmap",y,p),{zoom:S}=t.transform;t.terrain&&t.terrain.setupElevationDraw(_,b),t.prepareDrawProgram(s,b,f.toUnwrapped());const R=c.projection.createInversionMatrix(c,f.canonical);b.draw(s,n.TRIANGLES,e.DepthMode.disabled,a,l,d,Vr(t,f,_,R,h,S,o.paint.get("heatmap-intensity")),o.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,o.paint,t.transform.zoom,y,u?[m.globeExtVertexBuffer]:null)}s.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){const o=t.context,i=o.gl,s=r.heatmapFbo;if(!s)return;o.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),o.activeTexture.set(i.TEXTURE1);let n=r.colorRampTexture;n||(n=r.colorRampTexture=new e.Texture(o,r.colorRamp,i.RGBA)),n.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(o,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,r,o)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}(t,o))},line:function(t,r,o,i){if("translucent"!==t.renderPass)return;const s=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0===s.constantOr(1)||0===n.constantOr(1))return;const a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=o.paint.get("line-dasharray"),p=u.constantOr(1),d=o.layout.get("line-cap"),h=o.paint.get("line-pattern"),g=h.constantOr(1),f=o.paint.get("line-gradient"),_=g?"linePattern":"line",m=t.context,y=m.gl,b=(e=>{const t=[];Jr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const r=e.paint.get("line-trim-offset");0===r[0]&&0===r[1]||t.push("RENDER_LINE_TRIM_OFFSET");const o=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!o&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(o);let S=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(S=!1);for(const s of i){const i=r.getTile(s);if(g&&!i.patternsLoaded())continue;const n=i.getBucket(o);if(!n)continue;t.prepareDrawTile();const R=n.programConfigurations.get(o.id),v=t.useProgram(_,R,b),x=h.constantOr(null);if(x&&i.imageAtlas){const e=i.imageAtlas.patternPositions[x.toString()];e&&R.setConstantPatternPositions(e)}const E=u.constantOr(null),M=d.constantOr(null);if(!g&&E&&M&&i.lineAtlas){const e=i.lineAtlas.getDash(E,M);e&&R.setConstantPatternPositions(e)}let[T,w]=o.paint.get("line-trim-offset");if("round"===M||"square"===M){const e=1;T!==w&&(0===T&&(T-=e),1===w&&(w+=e))}const F=t.terrain?s.projMatrix:null,B=g?Kr(t,i,o,F,c):Hr(t,i,o,F,n.lineClipsArray.length,c,[T,w]);if(f){const i=n.gradients[o.id];let a=i.texture;if(o.gradientVersion!==i.version){let l=256;if(o.stepInterpolant){const o=r.getSource().maxzoom,i=s.canonical.z===o?Math.ceil(1<<t.transform.maxZoom-s.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(n.maxLineLength/e.EXTENT*1024*i),256,m.maxTextureSize)}i.gradient=e.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:n.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(m,i.gradient,y.RGBA),i.version=o.gradientVersion,a=i.texture}m.activeTexture.set(y.TEXTURE1),a.bind(o.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}p&&(m.activeTexture.set(y.TEXTURE0),i.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),R.updatePaintBuffers()),g&&(m.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),R.updatePaintBuffers()),t.prepareDrawProgram(m,v,s.toUnwrapped());const C=r=>{v.draw(m,y.TRIANGLES,a,r,l,e.CullFaceMode.disabled,B,o.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,o.paint,t.transform.zoom,R,[n.layoutVertexBuffer2])};if(S){const r=t.stencilModeForClipping(s).ref;0===r&&t.terrain&&m.clear({stencil:0});const o={func:y.EQUAL,mask:255};B.u_alpha_discard_threshold=.8,C(new e.StencilMode(o,r,255,y.KEEP,y.KEEP,y.INVERT)),B.u_alpha_discard_threshold=0,C(new e.StencilMode(o,r,255,y.KEEP,y.KEEP,y.KEEP))}else C(t.stencilModeForClipping(s))}S&&(t.resetStencilClippingMasks(),t.terrain&&m.clear({stencil:0}))},fill:function(t,r,o,i){const s=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0===n.constantOr(1))return;const a=t.colorModeForRenderPass(),l=o.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===s.constantOr(e.Color.transparent).a&&1===n.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const s=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);_o(t,r,o,i,s,a,!1)}if("translucent"===t.renderPass&&o.paint.get("fill-antialias")){const s=t.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);_o(t,r,o,i,s,a,!0)}},"fill-extrusion":function(t,r,o,i){const s=o.paint.get("fill-extrusion-opacity");if(0!==s&&"translucent"===t.renderPass){const n=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==s||o.paint.get("fill-extrusion-pattern").constantOr(1))mo(t,r,o,i,n,e.StencilMode.disabled,e.ColorMode.disabled),mo(t,r,o,i,n,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const s=t.colorModeForRenderPass();mo(t,r,o,i,n,e.StencilMode.disabled,s)}}},hillshade:function(t,r,o,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const s=t.context,n=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),a=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const i of u){const s=r.getTile(i);if(s.needsHillshadePrepare&&"offscreen"===t.renderPass)_r(t,s,o,n,e.StencilMode.disabled,a);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];gr(t,i,s,o,n,e,a)}}s.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,r,o,i,s,n){if("translucent"!==t.renderPass)return;if(0===o.paint.get("raster-opacity"))return;if(!i.length)return;const a=t.context,l=a.gl,c=r.getSource(),u=t.useProgram("raster"),p=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[h,g]=c instanceof Fe||d?[{},i]:t.stencilConfigForOverlap(i),f=g[g.length-1].overscaledZ,_=!t.options.moving;for(const i of g){const s=d?e.DepthMode.disabled:t.depthModeForSublayer(i.overscaledZ-f,1===o.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),g=i.toUnwrapped(),m=r.getTile(i);if(d&&(!m||!m.hasData()))continue;const y=d?i.projMatrix:t.transform.calculateProjMatrix(g,_),b=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(i):h[i.overscaledZ],S=n?0:o.paint.get("raster-fade-duration");m.registerFadeDuration(S);const R=r.findLoadedParent(i,0),v=Tr(m,R,r,t.transform,S);let x,E;t.terrain&&t.terrain.prepareDrawTile();const M="nearest"===o.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),m.texture.bind(M,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),R?(R.texture.bind(M,l.CLAMP_TO_EDGE),x=Math.pow(2,R.tileID.overscaledZ-m.tileID.overscaledZ),E=[m.tileID.canonical.x*x%1,m.tileID.canonical.y*x%1]):m.texture.bind(M,l.CLAMP_TO_EDGE),m.texture.useMipmap&&a.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax);const T=Yr(y,E||[0,0],x||1,v,o,c instanceof Fe?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(a,u,g),c instanceof Fe)c.boundsBuffer&&c.boundsSegments&&u.draw(a,l.TRIANGLES,s,e.StencilMode.disabled,p,e.CullFaceMode.disabled,T,o.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:r,tileBoundsIndexBuffer:i,tileBoundsSegments:n}=t.getTileBoundsBuffers(m);u.draw(a,l.TRIANGLES,s,b,p,e.CullFaceMode.disabled,T,o.id,r,i,n)}}t.resetStencilClippingMasks()},background:function(t,r,o,i){const s=o.paint.get("background-color"),n=o.paint.get("background-opacity");if(0===n)return;const a=t.context,l=a.gl,c=t.transform,u=c.tileSize,p=o.paint.get("background-pattern");if(t.isPatternMissing(p))return;const d=!p&&1===s.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const h=e.StencilMode.disabled,g=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),f=t.colorModeForRenderPass(),_=t.useProgram(p?"backgroundPattern":"background");let m,y=i;y||(m=t.getBackgroundTiles(),y=Object.values(m).map((e=>e.tileID))),p&&(a.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const d of y){const y=d.toUnwrapped(),b=i?d.projMatrix:t.transform.calculateProjMatrix(y);t.prepareDrawTile();const S=r?r.getTile(d):m?m[d.key]:new e.Tile(d,u,c.zoom,t),R=p?so(b,n,t,p,{tileID:d,tileSize:u}):io(b,n,s);t.prepareDrawProgram(a,_,y);const{tileBoundsBuffer:v,tileBoundsIndexBuffer:x,tileBoundsSegments:E}=t.getTileBoundsBuffers(S);_.draw(a,l.TRIANGLES,g,h,f,e.CullFaceMode.disabled,R,o.id,v,x,E)}},sky:function(t,r,o){const i=t.transform,s="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),n=o.paint.get("sky-opacity")*s;if(0===n)return;const a=t.context,l=o.paint.get("sky-type"),c=new e.DepthMode(a.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?o.needsSkyboxCapture(t)&&(function(t,r,o,i){const s=t.context,n=s.gl;let a=r.skyboxFbo;if(!a){a=r.skyboxFbo=s.createFramebuffer(32,32,!1),r.skyboxGeometry=new Lo(s),r.skyboxTexture=s.gl.createTexture(),n.bindTexture(n.TEXTURE_CUBE_MAP,r.skyboxTexture),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR);for(let e=0;e<6;++e)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,n.RGBA,32,32,0,n.RGBA,n.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(a.framebuffer),s.viewport.set([0,0,32,32]);const l=r.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Do(s,r,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Do(s,r,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Do(s,r,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Do(s,r,c,u,l,3),e.identity(u),Do(s,r,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Do(s,r,c,u,l,5),s.viewport.set([0,0,t.width,t.height])}(t,o),o.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,o,i,s){const n=t.context,a=n.gl,l=t.transform,c=t.useProgram("skybox");n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,r.skyboxTexture);const u=((e,t,r,o,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:o,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(t,!1),0,i,s);t.prepareDrawProgram(n,c),c.draw(n,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,o,c,n,u):"gradient"===l&&"sky"===t.renderPass&&function(t,r,o,i,s){const n=t.context,a=n.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new Lo(n)),n.activeTexture.set(a.TEXTURE0);let u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(n,r.colorRamp,a.RGBA)),u.bind(a.LINEAR,a.CLAMP_TO_EDGE);const p=((t,r,o,i,s)=>({u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(o),u_opacity:i,u_temporal_offset:s}))(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),i,s);t.prepareDrawProgram(n,c),c.draw(n,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,p,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,o,c,n,u)},debug:function(e,t,r){for(let o=0;o<r.length;o++)Eo(e,t,r[o])},custom:function(t,r,o,i){const s=t.context,n=o.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&o.isLayerDraped()){if("offscreen"===t.renderPass){const r=n.prerender;if(r){if(t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const o=t.transform.pointMerc;r.call(n,s.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[o.x,o.y],t.transform.pixelsPerMeterRatio)}else r.call(n,s.gl,t.transform.customLayerMatrix());s.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const r=n.renderToTile;if(r){const o=i[0].canonical,a=new e.MercatorCoordinate(o.x+i[0].wrap*(1<<o.z),o.y,o.z);s.setDepthMode(e.DepthMode.disabled),s.setStencilMode(e.StencilMode.disabled),s.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),r.call(n,s.gl,a),s.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),s.setStencilMode(e.StencilMode.disabled);const r="3d"===n.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(s.setDepthMode(r),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;n.render(s.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else n.render(s.gl,t.transform.customLayerMatrix());s.setDirty(),t.setBaseState(),s.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Ao{constructor(t,r,o=!1){this.context=new Ee(t,o),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Cr(this,e));const o=this._terrain;this.transform.elevation=r?o:null,o.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,o]=t.getFovAdjustedRange(this.transform._fov);if(r>o)return void(this.transform.fogCullDistSq=null);const i=r+.78*(o-r);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(e.EXTENT,0),o.emplaceBack(0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const s=new e.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(e.EXTENT,0,e.EXTENT,0),s.emplaceBack(0,e.EXTENT,0,e.EXTENT),s.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(n);const a=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])a.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Oo(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Mr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,r,o){if(!r||this.currentStencilSource===r.id||!t.isTileClipped()||!o||0===o.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of o)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=r.id;const i=this.context,s=i.gl;this.nextStencilID+o.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of o){const o=r.getTile(t),a=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(o);n.draw(i,s.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:s.ALWAYS,mask:0},a,255,s.KEEP,s.KEEP,s.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Mr(t.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,o=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=o[o.length-1].overscaledZ,s=o[0].overscaledZ-i+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();const t={};for(let o=0;o<s;o++)t[o+i]=new e.StencilMode({func:r.GEQUAL,mask:255},o+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=s,[t,o]}return[{[i]:e.StencilMode.disabled},o]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,r,o){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(o||this.context.gl.LEQUAL,r,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const o=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const s={},n={},a={};for(const e in i){const t=i[e];s[e]=t.getVisibleCoordinates(),n[e]=s[e].slice().reverse(),a[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<o.length;e++)if(this.style._layers[o[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of o){const r=this.style._layers[e],o=t._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const i=o?n[o.id]:void 0;("custom"===r.type||r.isSky()||i&&i.length)&&this.renderLayer(this,o,r,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky())continue;const i=r?n[r.id]:void 0;this._renderTileClippingMasks(e,r,i),this.renderLayer(this,r,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,r){const o=t.context,i=o.gl,s=t.transform,n=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),a=t.useProgram("globeAtmosphere",null,"globe"===s.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(s.zoom),c=r.properties.get("color").toArray01(),u=r.properties.get("high-color").toArray01(),p=r.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.identity$1([]);e.rotateY$1(d,d,-e.degToRad(s._center.lng)),e.rotateX$1(d,d,e.degToRad(s._center.lat)),e.rotateZ$1(d,d,s.angle),e.rotateX$1(d,d,-s._pitch);const h=e.fromQuat(new Float32Array(16),d),g=e.mapValue(r.properties.get("star-intensity"),0,1,0,.25),f=5e-4,_=e.mapValue(r.properties.get("horizon-blend"),0,1,f,.25),m=e.globeUseCustomAntiAliasing(t,o,s)&&_===f?s.worldSize/(2*Math.PI*1.025)-1:s.globeRadius,y=t.frameCounter/1e3%1,b=e.length(s.globeCenterInViewSpace),S=Math.sqrt(Math.pow(b,2)-Math.pow(m,2)),R=Math.acos(S/b),v=((t,r,o,i,s,n,a,l,c,u,p,d,h,g)=>({u_frustum_tl:t,u_frustum_tr:r,u_frustum_br:o,u_frustum_bl:i,u_horizon:s,u_transition:n,u_fadeout_range:a,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:p,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:h,u_rotation_matrix:g}))(s.frustumCorners.TL,s.frustumCorners.TR,s.frustumCorners.BR,s.frustumCorners.BL,s.frustumCorners.horizon,l,_,c,u,p,g,y,R,h);t.prepareDrawProgram(o,a);const x=t.atmosphereBuffer;x&&a.draw(o,i.TRIANGLES,n,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,v,"skybox",x.vertexBuffer,x.indexBuffer,x.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],r=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?n[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;){const e=this.style._layers[o[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=r?("symbol"===e.type?a:n)[r.id]:void 0;this._renderTileClippingMasks(e,r,r?s[r.id]:void 0),this.renderLayer(this,r,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let r=null;e.values(this.style._layers).forEach((e=>{const o=t._getLayerSourceCache(e);o&&!e.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<o.getSource().maxzoom)&&(r=o)})),r&&this.options.showTileBoundaries&&Po.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Mo(e,e.transform.height-(t.top||0),3,bo),Mo(e,t.bottom||0,3,So),To(e,t.left||0,3,Ro),To(e,e.transform.width-(t.right||0),3,vo);const r=e.transform.centerPoint;!function(e,t,r,o){wo(e,t-1,r-10,2,20,o),wo(e,t-10,r-1,20,2,o)}(e,r.x,e.transform.height-r.y,xo)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,r,o){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||o&&o.length)&&(this.id=r.id,this.gpuTimingStart(r),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(r.type)||e.terrain&&"custom"===r.type)&&Po[r.type](e,t,r,o,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const r in e){const o=e[r],i=this.context.extTimerQuery,s=i.getQueryObjectEXT(o.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(o.query),t[r]=s}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let r=0;for(const o of e)r+=t.getQueryObjectEXT(o,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(o);return r}translatePosMatrix(t,r,o,i,s){if(!o[0]&&!o[1])return t;const n=s?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(n){const e=Math.sin(n),t=Math.cos(n);o=[o[0]*t-o[1]*e,o[0]*e+o[1]*t]}const a=[s?o[0]:C(r,o[0],this.transform.zoom),s?o[1]:C(r,o[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,a),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),r=this.style&&this.style.fog,o=[];return this.terrainRenderModeElevated()&&o.push("TERRAIN"),"globe"===this.transform.projection.name&&o.push("GLOBE"),t&&o.push("ZERO_EXAGGERATION"),r&&!e&&0!==r.getOpacity(this.transform.pitch)&&o.push("FOG"),e&&o.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&o.push("OVERDRAW_INSPECTOR"),o}useProgram(e,t,r){this.cache=this.cache||{};const o=r||[],i=this.currentGlobalDefines().concat(o),s=Lr.cacheKey(cr[e],e,i,t);return this.cache[s]||(this.cache[s]=new Lr(this.context,e,cr[e],t,no[e],i)),this.cache[s]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,r,o){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const s=i.getOpacity(this.transform.pitch),n=((t,r,o,i,s,n,a,l,c,u,p)=>{const d=t.transform,h=r.properties.get("color").toArray01();h[3]=i;const g=t.frameCounter/1e3%1;return{u_fog_matrix:o?d.calculateFogTileMatrix(o):t.identityMat,u_fog_range:r.getFovAdjustedRange(d._fov),u_fog_color:h,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:g,u_frustum_tl:s,u_frustum_tr:n,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:p,u_globe_transition:e.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}})(this,i,o,s,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);r.setFogUniformValues(t,n)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,r=this._backgroundTiles={},o=this.transform.coveringTiles({tileSize:512});for(const i of o)r[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}}class ko{constructor(e=0,t=0,r=0,o=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(o)||o<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=o}interpolate(t,r,o){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,o)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,o)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,o)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,o)),this}getCenter(t,r){const o=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.Point(o,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function zo(t,r){const o=e.getColumn(t,3);e.fromQuat(t,r),e.setColumn(t,3,o)}function No(t,r){const o=e.identity$1([]);return e.rotateZ$1(o,o,-r),e.rotateX$1(o,o,-t),o}function jo(t,r){const o=[t[0],t[1],0],i=[r[0],r[1],0];if(e.length(o)>=1e-15){const t=e.normalize([],o);e.scale$2(i,t,e.dot(i,t)),r[0]=i[0],r[1]=i[1]}const s=e.cross([],r,t);if(e.len(s)<1e-15)return null;const n=Math.atan2(-s[1],s[0]);return No(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),n)}class Uo{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const r=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(r.x=e.wrap(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(t,r){if(this.orientation=null,!this.position)return;const o=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,s=e.MercatorCoordinate.fromLngLat(t,i),n=[s.x-o.x,s.y-o.y,s.z-o.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=jo(n,r)}setPitchBearing(t,r){this.orientation=No(e.degToRad(t),e.degToRad(-r))}}class Go{constructor(t,r){this._transform=e.identity([]),this.orientation=r,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var r;t&&e.setColumn(this._transform,3,[(r=t)[0],r[1],r[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&zo(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=No(e,t),zo(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,r){const o=new Float64Array(16);return e.invert(o,this.getWorldToCamera(t,r)),o}getWorldToCameraPosition(t,r,o){const i=this.position;e.scale$2(i,i,-t);const s=new Float64Array(16);return e.fromScaling(s,[o,o,o]),e.translate(s,s,i),s[10]*=r,s}getWorldToCamera(t,r){const o=new Float64Array(16),i=new Float64Array(4),s=this.position;return e.conjugate(i,this._orientation),e.scale$2(s,s,-t),e.fromQuat(o,i),e.translate(o,o,s),o[1]*=-1,o[5]*=-1,o[9]*=-1,o[13]*=-1,o[8]*=r,o[9]*=r,o[10]*=r,o[11]*=r,o}getCameraToClipPerspective(t,r,o,i){const s=new Float64Array(16);return e.perspective(s,t,r,o,i),s}getDistanceToElevation(t,r=!1){const o=0===t?0:e.mercatorZfromAltitude(t,r?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(o-this.position[2])/i[2]}clone(){return new Go([...this.position],[...this.orientation])}}function Wo(t,r){const o=$o(t.projection,t.zoom,t.width,t.height),i=function(t,r,o,i,s){const n=new e.LngLat(o.lng-180*Vo,o.lat),a=new e.LngLat(o.lng+180*Vo,o.lat),l=t.project(n.lng,n.lat),c=t.project(a.lng,a.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),p=e.MercatorCoordinate.fromLngLat(o);p.y=e.clamp(p.y,-1+Vo,1-Vo);const d=p.toLngLat(),h=t.project(d.lng,d.lat),g=e.MercatorCoordinate.fromLngLat(d);g.x+=Vo;const f=g.toLngLat(),_=t.project(f.lng,f.lat),m=Ko(_.x-h.x,_.y-h.y,u),y=e.MercatorCoordinate.fromLngLat(d);y.y+=Vo;const b=y.toLngLat(),S=t.project(b.lng,b.lat),R=Ko(S.x-h.x,S.y-h.y,u),v=Math.abs(m.x)/Math.abs(R.y),x=e.identity([]);e.rotateZ(x,x,-u*(1-(s?0:i)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-v)*i,1]),E[4]=-R.x/R.y*i,e.rotateZ(E,E,u),e.multiply(E,x,E),E}(t.projection,0,t.center,o,r),s=qo(t);return e.scale(i,i,[s,s,1]),i}function qo(t){const r=t.projection,o=$o(t.projection,t.zoom,t.width,t.height),i=Ho(r,t.center),s=Ho(r,e.LngLat.convert(r.center));return Math.pow(2,i*o+(1-o)*s)}function $o(t,r,o,i,s=1/0){const n=t.range;if(!n)return 0;const a=Math.min(s,Math.max(o,i)),l=Math.log(a/1024)/Math.LN2;return e.smoothstep(n[0]+l,n[1]+l,r)}const Vo=1/4e4;function Ho(t,r){const o=e.clamp(r.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(r.lng-180*Vo,o),s=new e.LngLat(r.lng+180*Vo,o),n=t.project(i.lng,o),a=t.project(s.lng,o),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(s),u=a.x-n.x,p=a.y-n.y,d=c.x-l.x,h=c.y-l.y,g=Math.sqrt((d*d+h*h)/(u*u+p*p));return Math.log(g)/Math.LN2}function Ko(e,t,r){const o=Math.cos(r),i=Math.sin(r);return{x:e*o-t*i,y:e*i+t*o}}class Zo{constructor(t,r,o,i,s,n,a){this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==o?0:o,this._maxPitch=null==i?60:i,this.setProjection(n),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ko,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Go,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Zo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const r=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||r)&&this._updateCameraOnTerrain(),(e||r)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const o=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(o,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const r=t!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const r=-t*Math.PI/180;var o;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(o=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o),function(e,t,r){var o=t[0],i=t[1],s=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);e[0]=o*l+s*a,e[1]=i*l+n*a,e[2]=o*-a+s*l,e[3]=i*-a+n*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],o=this.horizonLineFromTop();let i=0,s=0;for(let n=0;n<r.length;n++){const a=new e.Point(r[n][0]*this.width,o+r[n][1]*(this.height-o)),l=t.pointCoordinate(a);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,s+=c}return 0===s?NaN:i/s}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*t,o=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),s=Math.max(o-r,i);this._setZoom(this._zoomFromMercatorZ(s))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let o;o=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,o));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){const o=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(o,this._camera.position)||(this._setCameraPosition(o),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,r=new Uo;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const r=e.transformQuat([],[0,0,-1],t),o=e.transformQuat([],[0,-1,0],t);if(o[2]<0)return!1;const i=jo(r,o);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const r=this.zoomScale(this.minZoom)*this.tileSize,o=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/o,i/r),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const r=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const o=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),s=this.pointCoordinate(new e.Point(this.width,this.height)),n=this.pointCoordinate(new e.Point(0,this.height)),a=Math.floor(Math.min(o.x,i.x,s.x,n.x)),l=Math.floor(Math.max(o.x,i.x,s.x,n.x)),c=1;for(let o=a-c;o<=l+c;o++)0!==o&&r.push(new e.UnwrappedTileID(o,t))}return r}coveringTiles(t){let r=this.coveringZoomLevel(t);const o=r,i=this.elevation&&!t.isTerrainDEM,s="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const n=this.locationCoordinate(this.center),a=this.center.lat,l=1<<r,c=[l*n.x,l*n.y,0],u="globe"===this.projection.name,p=!u,d=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,p),h=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),g=l*e.mercatorZfromAltitude(1,this.center.lat),f=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),_=[l*h.x,l*h.y,f*(p?1:g)],m=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),y=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,S=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,R=this.projection.isReprojectedInTileSpace?qo(this):1,v=t=>{const r=1/4e4,o=new e.MercatorCoordinate(t.x+r,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+r,t.z),s=t.toLngLat(),n=o.toLngLat(),a=i.toLngLat(),l=this.locationCoordinate(s),c=this.locationCoordinate(n),u=this.locationCoordinate(a),p=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(p*d)*R/r},x=t=>{const r=b,o=S;return{aabb:e.tileAABB(this,l,0,0,0,t,o,r,this.projection),zoom:0,x:0,y:0,minZ:o,maxZ:r,wrap:t,fullyVisible:!1}},E=[];let M=[];const T=r,w=t.reparseOverscaled?o:r,F=e=>e*e,B=F((f-this._centerAltitude)*g),C=e=>{if(!this._elevation||!e.tileID||!s)return;const t=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=L(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},L=t=>{if(t.zoom<y)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const r=t.aabb.distanceX(_),s=t.aabb.distanceY(_);let n=B,l=1;if(u){n=F(t.aabb.distanceZ(_));const r=Math.pow(2,t.zoom),o=e.latFromMercatorY((t.y+1)/r),i=e.latFromMercatorY(t.y/r),s=Math.min(Math.max(a,o),i),c=e.circumferenceAtLatitude(s)/e.circumferenceAtLatitude(a);if(l=s===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===T-1&&c>=.9)return!0}else if(i&&(n=F(t.aabb.distanceZ(_)*g)),this.projection.isReprojectedInTileSpace&&o<=5){const r=Math.pow(2,t.zoom),o=v(new e.MercatorCoordinate((t.x+.5)/r,(t.y+.5)/r));l=o>.85?1:o}const c=r*r+s*s+n,p=F((1<<T-t.zoom)*m*l*((e,t)=>{if(t*F(.707)<e)return 1;const r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(n,B),c));return c<p};if(this.renderWorldCopies)for(let e=1;e<=3;e++)E.push(x(-e)),E.push(x(e));for(E.push(x(0));E.length>0;){const o=E.pop(),n=o.x,a=o.y;let p=o.fullyVisible;if(!p){const e=o.aabb.intersects(d);if(0===e)continue;p=2===e}if(o.zoom!==T&&L(o))for(let t=0;t<4;t++){const r=(n<<1)+t%2,c=(a<<1)+(t>>1),d={aabb:s?o.aabb.quadrant(t):e.tileAABB(this,l,o.zoom+1,r,c,o.wrap,o.minZ,o.maxZ,this.projection),zoom:o.zoom+1,x:r,y:c,wrap:o.wrap,fullyVisible:p,tileID:void 0,shouldSplit:void 0,minZ:o.minZ,maxZ:o.maxZ};i&&!u&&(d.tileID=new e.OverscaledTileID(o.zoom+1===T?w:o.zoom+1,o.wrap,o.zoom+1,r,c),C(d)),E.push(d)}else{const i=o.zoom===T?w:o.zoom;if(t.minzoom&&t.minzoom>i)continue;const s=c[0]-(.5+n+(o.wrap<<o.zoom))*(1<<r-o.zoom),l=c[1]-.5-a,u=o.tileID?o.tileID:new e.OverscaledTileID(i,o.wrap,o.zoom,n,a);M.push({tileID:u,distanceSq:s*s+l*l})}}if(this.fogCullDistSq){const r=this.fogCullDistSq,o=this.horizonLineFromTop();M=M.filter((i=>{const s=[0,0,0,1],n=[e.EXTENT,e.EXTENT,0,1],a=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(s,s,a),e.transformMat4$1(n,n,a);const l=e.getAABBPointSquareDist(s,n);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>r&&0!==o){const r=this.calculateProjMatrix(i.tileID.toUnwrapped());let s;t.isTerrainDEM||(s=u.getMinMaxForTile(i.tileID)),s||(s={min:S,max:b});const n=e.furthestTileCorner(this.rotation),a=[n[0]*e.EXTENT,n[1]*e.EXTENT,s.max];e.transformMat4(a,a,r),c=(1-a[1])*this.height*.5<o}return l<r||c}))}return M.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const r=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),o=this.projection.project(t.lng,r);return new e.Point(o.x*this.worldSize,o.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,r){let o,i;const s=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;o=(r.x-s.x)/e,i=(r.y-s.y)/e}else{const e=this.pointCoordinate(r),t=this.pointCoordinate(s);o=e.x-t.x,i=e.y-t.y}const n=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(n.x-o,n.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,r){const o=r?e.mercatorZfromAltitude(r,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,o)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,r){const o=null!=r?r:this._centerAltitude,i=[t.x,t.y,0,1],s=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(s,s,this.pixelMatrixInverse);const n=s[3];e.scale$1(i,i,1/i[3]),e.scale$1(s,s,1/n);const a=i[2],l=s[2];return{p0:i,p1:s,t:a===l?0:(o-a)/(l-a)}}screenPointToMercatorRay(t){const r=[t.x,t.y,0,1],o=[t.x,t.y,1,1];return e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),e.scale$1(o,o,1/o[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,o[2]=e.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,e.scale$1(r,r,1/this.worldSize),e.scale$1(o,o,1/this.worldSize),new e.Ray([r[0],r[1],r[2]],e.normalize([],e.sub([],o,r)))}rayIntersectionCoordinate(t){const{p0:r,p1:o,t:i}=t,s=e.mercatorZfromAltitude(r[2],this._center.lat),n=e.mercatorZfromAltitude(o[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],o[0],i)/this.worldSize,e.number(r[1],o[1],i)/this.worldSize,e.number(s,n,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let o=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const s=.02*i,n=t.clone();for(let t=0;t<10&&i-o>s;t++){n.y=e.number(o,i,.66);const t=this.projection.pointCoordinate3D(this,n.x,n.y);t?(i=n.y,r=t):o=n.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const r=this.pointCoordinate(t);return r.y>=0&&r.y<=1}_coordinatePoint(t,r){const o=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,o+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:r}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,s=this.pointLocation3D(new e.Point(r,t)),n=this.pointLocation3D(new e.Point(i,t)),a=this.pointLocation3D(new e.Point(i,o)),l=this.pointLocation3D(new e.Point(r,o));let c=Math.min(s.lng,n.lng,a.lng,l.lng),u=Math.max(s.lng,n.lng,a.lng,l.lng),p=Math.min(s.lat,n.lat,a.lat,l.lat),d=Math.max(s.lat,n.lat,a.lat,l.lat);const h=Math.pow(2,-this.zoom)/16*270,g="globe"===this.projection.name?1:4,f=(t,r,o,i,s)=>{const n=(t+o)/2,a=(r+i)/2,l=new e.Point(n,a),{lng:_,lat:m}=this.pointLocation3D(l),y=Math.max(0,c-_,p-m,_-u,m-d);c=Math.min(c,_),u=Math.max(u,_),p=Math.min(p,m),d=Math.max(d,m),(s<g||y>h)&&(f(t,r,n,a,s+1),f(n,a,o,i,s+1))};if(f(r,t,i,t,1),f(i,t,i,o,1),f(i,o,r,o,1),f(r,o,r,t,1),"globe"===this.projection.name){const[t,r]=e.polesInViewport(this);t?(d=90,u=180,c=-180):r&&(p=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,p),new e.LngLat(u,d))}_getBoundsRectangular(t,r){const{top:o,left:i}=this._edgeInsets,s=this.height-this._edgeInsets.bottom,n=this.width-this._edgeInsets.right,a=new e.Point(i,o),l=new e.Point(n,o),c=new e.Point(n,s),u=new e.Point(i,s);let p=this.pointCoordinate(a,t),d=this.pointCoordinate(l,t);const h=this.pointCoordinate(c,r),g=this.pointCoordinate(u,r),f=(e,t)=>(t.y-e.y)/(t.x-e.x);return p.y>1&&d.y>=0?p=new e.MercatorCoordinate((1-g.y)/f(g,p)+g.x,1):p.y<0&&d.y<=1&&(p=new e.MercatorCoordinate(-g.y/f(g,p)+g.x,0)),d.y>1&&p.y>=0?d=new e.MercatorCoordinate((1-h.y)/f(h,d)+h.x,1):d.y<0&&p.y<=1&&(d=new e.MercatorCoordinate(-h.y/f(h,d)+h.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(g)).extend(this.coordinateLocation(h))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const r=t.key,o=this._distanceTileDataCache;if(o[r])return o[r];const i=t.canonical,s=1/this.height,n=this.cameraWorldSize,a=n/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*a,c=i.y*a,u=this.point;u.x*=n/this.worldSize,u.y*=n/this.worldSize;const p=this.angle,d=Math.sin(-p),h=-Math.cos(-p);return o[r]={bearing:[d,h],center:[(u.x-l)*s,(u.y-c)*s],scale:a/e.EXTENT*s},o[r]}calculateFogTileMatrix(t){const r=t.key,o=this._fogTileMatrixCache;if(o[r])return o[r];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),o[r]=new Float32Array(i),o[r]}calculateProjMatrix(t,r=!1){const o=t.key,i=r?this._alignedProjMatrixCache:this._projMatrixCache;if(i[o])return i[o];const s=this.calculatePosMatrix(t,this.worldSize);return e.multiply(s,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,s),i[o]=new Float32Array(s),i[o]}calculatePixelsToTileUnitsMatrix(t){const r=t.tileID.key,o=this._pixelsToTileUnitsCache;if(o[r])return o[r];const i=function(t,r){const{scale:o}=t.tileTransform,i=o*e.EXTENT/(t.tileSize*Math.pow(2,r.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return s=new Float32Array(4),l=(n=r.inverseAdjustmentMatrix)[1],c=n[2],u=n[3],d=(a=[i,i])[1],s[0]=n[0]*(p=a[0]),s[1]=l*p,s[2]=c*d,s[3]=u*d,s;var s,n,a,l,c,u,p,d}(t,this);return o[r]=i,o[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,r=e.fromScaling([],[t,t,t]);return e.multiply(r,r,this.globeMatrix),r}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,o=this._computeCameraPosition(r),i=this._camera.forward(),s=e.mercatorZfromAltitude(1,this._center.lat);o[2]/=s,i[2]/=s,e.normalize(i,i);const n=t.raycast(o,i,t.exaggeration());if(n){const t=e.scaleAndAdd([],o,i,n),r=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),a=(r.z+e.length([r.x-o[0],r.y-o[1],r.z-o[2]*s]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const r=this._elevation,o=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(o),s=r.getAtPointOrZero(new e.MercatorCoordinate(...i)),n=this.pixelsPerMeter/this.worldSize*s,a=this._minimumHeightOverTerrain(),l=i[2]-n;if(l<=a)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),r=[i[0],i[1],t.z-i[2]],o=e.length(r);r[2]-=(a-l)/this._pixelsPerMercatorPixel;const s=e.length(r);if(0===s)return;e.scale$2(r,r,o/s*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-r[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const r=this.center;return r.lat=e.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(r.lng=e.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}const r=this._unmodified,{x:o,y:i}=this.point;let s=0,n=o,a=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,p=this.worldMaxY*this.scale;if(i-c<u&&(a=u+c),i+c>p&&(a=p-c),p-u<this.height&&(s=Math.max(s,this.height/(p-u)),a=(p+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;n=(o+r+this.worldSize)%this.worldSize-r,n-l<e&&(n=e+l),n+l>t&&(n=t-l),t-e<this.width&&(s=Math.max(s,this.width/(t-e)),n=(t+e)/2)}n===o&&a===i||(this.center=this.unproject(new e.Point(n,a))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const o=$o(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,o),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?r:1,s=this._camera.getWorldToCamera(this.worldSize,i),n=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);n[8]=2*-t.x/this.width,n[9]=2*t.y/this.height;let a=e.mul([],n,s);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),r=e.identity([]);e.translate(r,r,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(r,r,Wo(this)),e.translate(r,r,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(a,a,r),this.inverseAdjustmentMatrix=function(e){const t=Wo(e,!0);return y([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],a,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=a,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],n);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),p=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+p)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const d=this.point,h=d.x,g=d.y,f=this.width%2/2,_=this.height%2/2,m=Math.cos(this.angle),b=Math.sin(this.angle),S=h-Math.round(h)+m*f+b*_,R=g-Math.round(g)+m*_+b*f,v=new Float64Array(a);if(e.translate(v,v,[S>.5?S-1:S,R>.5?R-1:R,0]),this.alignedProjMatrix=v,a=e.create(),e.scale(a,a,[this.width/2,-this.height/2,1]),e.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=e.create(),e.scale(a,a,[1,-1,1]),e.translate(a,a,[-1,-1,0]),e.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=e.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=a,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,s),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=a;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,r=this.cameraPixelsPerMeter,o=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,s=[t,t,r];e.scale$2(s,s,i),e.scale$2(o,o,-1),e.multiply$2(o,o,s);const n=e.create();e.translate(n,n,o),e.scale(n,n,s),this.mercatorFogMatrix=n,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),o=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[o.x/this.worldSize-r[0]*i,o.y/this.worldSize-r[1]*i,e/this.worldSize*this._centerAltitude-r[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),o=this._camera.position[2],i=t[2];let s=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(s=Math.min((r-o)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,s),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,r=this._camera.forward(),{pitch:o,bearing:i}=this._camera.getPitchBearing(),s=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,n=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),a=Math.max((t[2]-s)/Math.cos(o),n),l=this._zoomFromMercatorZ(a);e.scaleAndAdd(t,t,r,a),this._pitch=e.clamp(o,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let r=0,o=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,s=1/0;for(;o-r>1e-6&&o>r;){const e=r+.5*(o-r),n=this.tileSize*Math.pow(2,e),a=this.getCameraToCenterDistance(this.projection,e,n),l=this.scaleZoom(a/(t*this.tileSize)),c=Math.abs(e-l);c<s&&(s=c,i=e),e<l?r=e:o=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,r){const o=Math.min(t.x,r.x),i=Math.max(t.x,r.x),s=Math.min(t.y,r.y),n=Math.max(t.y,r.y);if(s<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const a=[new e.Point(o,s),new e.Point(i,n),new e.Point(o,n),new e.Point(i,s)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of a){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const r=this.rayIntersectionCoordinate(t);if(r.x<l||r.y<0||r.x>c||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,r){const o=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(o)+r;return o-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,r,o],i){const s=[t,r,o,1];e.transformMat4$1(s,s,i);const n=s[3]=Math.max(s[3],1e-6);return s[0]/=n,s[1]/=n,s[2]/=n,s}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,r=this.worldSize){const o=$o(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,r,o);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Xo(e,t){let r=!1,o=null;const i=()=>{o=null,r&&(e(),o=setTimeout(i,t),r=!1)};return()=>(r=!0,o||i(),o)}class Jo{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Xo(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const r=Yo(t);if(this._hashName){const t=this._hashName;let o=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(o=!0,`${i}=${r}`):e})).filter((e=>e));return o||i.push(`${t}=${r}`),`#${i.join("&")}`}return`#${r}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function Yo(e,t){const r=e.getCenter(),o=Math.round(100*e.getZoom())/100,i=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,i),n=Math.round(r.lng*s)/s,a=Math.round(r.lat*s)/s,l=e.getBearing(),c=e.getPitch();let u=t?`/${n}/${a}/${o}`:`${o}/${a}/${n}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),u}const Qo={linearity:.3,easing:e.bezier(0,0,.3,1)},ei=e.extend({deceleration:2500,maxSpeed:1400},Qo),ti=e.extend({deceleration:20,maxSpeed:1400},Qo),ri=e.extend({deceleration:1e3,maxSpeed:360},Qo),oi=e.extend({deceleration:1e3,maxSpeed:90},Qo);class ii{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=e.exported.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const s=ni(r.pan.mag(),o,e.extend({},ei,t||{}));i.offset=r.pan.mult(s.amount/r.pan.mag()),i.center=this._map.transform.center,si(i,s)}if(r.zoom){const e=ni(r.zoom,o,ti);i.zoom=this._map.transform.zoom+e.amount,si(i,e)}if(r.bearing){const t=ni(r.bearing,o,ri);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),si(i,t)}if(r.pitch){const e=ni(r.pitch,o,oi);i.pitch=this._map.transform.pitch+e.amount,si(i,e)}if(i.zoom||i.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function si(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ni(t,r,o){const{maxSpeed:i,linearity:s,deceleration:n}=o,a=e.clamp(t*s/(r/1e3),-i,i),l=Math.abs(a)/(n*s);return{easing:o.easing,duration:1e3*l,amount:a*(l/2)}}class ai extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,o,i={}){const s=g(r.getCanvasContainer(),o),n=r.unproject(s);super(t,e.extend({point:s,lngLat:n,originalEvent:o},i)),this._defaultPrevented=!1,this.target=r}}class li extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,o){const i="touchend"===t?o.changedTouches:o.touches,s=f(r.getCanvasContainer(),i),n=s.map((e=>r.unproject(e))),a=s.reduce(((e,t,r,o)=>e.add(t.div(o.length))),new e.Point(0,0));super(t,{points:s,point:a,lngLats:n,lngLat:r.unproject(a),originalEvent:o}),this._defaultPrevented=!1}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class ui{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new ci(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ai(e.type,this._map,e))}mouseup(e){this._map.fire(new ai(e.type,this._map,e))}preclick(t){const r=e.extend({},t);r.type="preclick",this._map.fire(new ai(r.type,this._map,r))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ai(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new ai(e.type,this._map,e))}mouseover(e){this._map.fire(new ai(e.type,this._map,e))}mouseout(e){this._map.fire(new ai(e.type,this._map,e))}touchstart(e){return this._firePreventable(new li(e.type,this._map,e))}touchmove(e){this._map.fire(new li(e.type,this._map,e))}touchend(e){this._map.fire(new li(e.type,this._map,e))}touchcancel(e){this._map.fire(new li(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new ai(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ai(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t,o=this._startPos,i=this._lastPos;if(!o||!i||i.equals(r)||!this._box&&r.dist(o)<this._clickTolerance)return;this._lastPos=r,this._box||(this._box=s("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const n=Math.min(o.x,r.x),a=Math.max(o.x,r.x),l=Math.min(o.y,r.y),c=Math.max(o.y,r.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${n}px,${l}px)`,this._box.style.width=a-n+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,r){if(!this._active)return;const o=this._startPos,i=r;if(o&&0===t.button){if(this.reset(),h(),o.x!==i.x||o.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(o,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),p(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}function hi(e,t){const r={};for(let o=0;o<e.length;o++)r[e[o].identifier]=t[o];return r}class gi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,r,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),o.length===this.numTouches&&(this.centroid=function(t){const r=new e.Point(0,0);for(const e of t)r._add(e);return r.div(t.length)}(r),this.touches=hi(o,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const o=hi(r,t);for(const e in this.touches){const t=o[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class fi{constructor(e){this.singleTap=new gi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const o=this.singleTap.touchend(e,t,r);if(o){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(o)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}class _i{constructor(){this._zoomIn=new fi({numTouches:1,numTaps:2}),this._zoomOut=new fi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const o=this._zoomIn.touchend(e,t,r),i=this._zoomOut.touchend(e,t,r);return o?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(o)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const mi={0:1,2:2};class yi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const r=_(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}mousemoveWindow(e,t){const r=this._lastPoint;if(r)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const r=mi[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}mouseupWindow(e){this._lastPoint&&_(e)===this._eventButton&&(this._moved&&h(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bi extends yi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Si extends yi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class Ri extends yi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class vi{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(t,r,o){if(this._active&&!(o.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===o.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,r,o)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,o){o.length>0&&(this._active=!0);const i=hi(o,r),s=new e.Point(0,0),n=new e.Point(0,0);let a=0;for(const e in i){const t=i[e],r=this._touches[e];r&&(s._add(t),n._add(t.sub(r)),a++,i[e]=t)}if(this._touches=i,a<this._minTouches||!n.mag())return;const l=n.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class xi{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){const o=this._firstTwoTouches;if(!o)return;e.preventDefault();const[i,s]=o,n=Ei(r,t,i),a=Ei(r,t,s);if(!n||!a)return;const l=this._aroundCenter?null:n.add(a).div(2);return this._move([n,a],l,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[o,i]=this._firstTwoTouches,s=Ei(r,t,o),n=Ei(r,t,i);s&&n||(this._active&&h(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ei(e,t,r){for(let o=0;o<e.length;o++)if(e[o].identifier===r)return t[o]}function Mi(e,t){return Math.log(e/t)/Math.LN2}class Ti extends xi{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mi(this._distance,r),pinchAround:t}}}function wi(e,t){return 180*e.angleWith(t)/Math.PI}class Fi extends xi{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:wi(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=this._startVector;if(!r)return!1;const o=wi(e,r);return Math.abs(o)<t}}function Bi(e){return Math.abs(e.y)>Math.abs(e.x)}class Ci extends xi{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Bi(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,r,o){const i=this._lastPoints;if(!i)return;const s=t[0].sub(i[0]),n=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&o.touches.length<3||(this._valid=this.gestureBeginsVertically(s,n,o.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(s.y+n.y)/2*-.5})}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const o=e.mag()>=2,i=t.mag()>=2;if(!o&&!i)return;if(!o||!i)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const s=e.y>0==t.y>0;return Bi(e)&&Bi(t)&&s}}const Li={panStep:100,bearingStep:15,pitchStep:10};class Di{constructor(){const e=Li;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,o=0,i=0,s=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),s=-1);break;case 40:e.shiftKey?o=-1:(e.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(r=0,o=0),{cameraAnimation:n=>{const a=n.getZoom();n.easeTo({duration:300,easeId:"keyboardHandler",easing:Ii,zoom:t?Math.round(a)+t*(e.shiftKey?2:1):a,bearing:n.getBearing()+r*this._bearingStep,pitch:n.getPitch()+o*this._pitchStep,offset:[-i*this._panStep,-s*this._panStep],center:n.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ii(e){return e*(2-e)}const Oi=4.000244140625;class Pi{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const o=e.exported.now(),i=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==r&&r%Oi==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=g(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const r=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Oi?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==o&&(o=1/o);const i=r(),s=Math.pow(2,i),n="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(n*o))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const o="number"==typeof this._targetZoom?this._targetZoom:r(),i=this._startZoom,s=this._easing;let n,a=!1;if("wheel"===this._type&&i&&s){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),r=s(t);n=e.number(i,o,r),t<1?this._frameId||(this._frameId=!0):a=!0}else n=o,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:n-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=e.ease;if(this._prevEase){const t=this._prevEase,o=(e.exported.now()-t.start)/t.duration,i=t.easing(o+.01)-t.easing(o),s=.27/Math.sqrt(i*i+1e-4)*.01,n=Math.sqrt(.0729-s*s);r=e.bezier(s,n,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Ai{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ki{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zi{constructor(){this._tap=new fi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const o=t[0],i=o.y-this._swipePoint.y;return this._swipePoint=o,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ni{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ji{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ui{constructor(e,t,r,o){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Gi=e=>e.zoom||e.drag||e.pitch||e.rotate;class Wi extends e.Event{}class qi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,r){const o=e.sub([],r,t);this.radius=e.length(o[2]<0?e.div([],o,this.constants):[o[0],o[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const r=e.scale$2([],t,this.radius);if(r[2]>0){const t=e.scale$2([],[0,0,1],e.dot(r,[0,0,1])),o=e.scale$2([],e.normalize([],[r[0],r[1],0]),this.radius),i=e.add([],r,e.scale$2([],e.sub([],e.add([],o,t),r),2));r[0]=i[0],r[1]=i[1]}return r}}function $i(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Vi{constructor(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new qi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);const o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,r,o]of this._listeners)t.addEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[t,r,o]of this._listeners)t.removeEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,o)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new ui(t,e));const o=t.boxZoom=new di(t,e);this._add("boxZoom",o);const i=new _i,s=new ki;t.doubleClickZoom=new Ai(s,i),this._add("tapZoom",i),this._add("clickZoom",s);const n=new zi;this._add("tapDragZoom",n);const a=t.touchPitch=new Ci(t);this._add("touchPitch",a);const l=new Si(e),c=new Ri(e);t.dragRotate=new ji(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new bi(e),p=new vi(t,e);t.dragPan=new Ni(r,u,p),this._add("mousePan",u),this._add("touchPan",p,["touchZoom","touchRotate"]);const d=new Fi,h=new Ti;t.touchZoomRotate=new Ui(r,h,d,n),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]),this._add("blockableMapEvent",new pi(t));const g=t.scrollZoom=new Pi(t,this);this._add("scrollZoom",g,["mousePan"]);const f=t.keyboard=new Di;this._add("keyboard",f);for(const r of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[r]&&t[r].enable(e[r])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,r){for(const o in e)if(o!==r&&(!t||t.indexOf(o)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){this._updatingCamera=!0;const r="renderFrame"===e.type,o=r?void 0:e,i={needsRenderFrame:!1},s={},n={},a=e.touches?this._getMapTouches(e.touches):void 0,l=a?f(this._el,a):r?void 0:g(this._el,e);for(const{handlerName:r,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let p;this._blockedByActive(n,u,r)?c.reset():c[t||e.type]&&(p=c[t||e.type](e,l,a),this.mergeHandlerResult(i,s,p,r,o),p&&p.needsRenderFrame&&this._triggerRenderFrame()),(p||c.isActive())&&(n[r]=c)}const c={};for(const e in this._previousActiveHandlers)n[e]||(c[e]=o);this._previousActiveHandlers=n,(Object.keys(c).length||$i(i))&&(this._changes.push([i,s,c]),this._triggerRenderFrame()),(Object.keys(n).length||$i(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,r,o,i,s){if(!o)return;e.extend(t,o);const n={handlerName:i,originalEvent:o.originalEvent||s};void 0!==o.zoomDelta&&(r.zoom=n),void 0!==o.panDelta&&(r.drag=n),void 0!==o.pitchDelta&&(r.pitch=n),void 0!==o.bearingDelta&&(r.rotate=n)}_applyChanges(){const t={},r={},o={};for(const[i,s,n]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(r,s),e.extend(o,n);this._updateMapTransform(t,r,o),this._changes=[]}_updateMapTransform(t,r,o){const i=this._map,s=i.transform,n=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!$i(t)){const e=s.zoom;s.cameraElevationReference="sea",s.recenterOnTerrain(),s.cameraElevationReference="ground",e!==s.zoom&&this._map._update(!0)}if(s._isCameraConstrained&&i._stop(!0),!$i(t))return void this._fireEvents(r,o,!0);let{panDelta:a,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:p,aroundCoord:d,pinchAround:h}=t;s._isCameraConstrained&&(l>0&&(l=0),s._isCameraConstrained=!1),void 0!==h&&(p=h),(l||(e=>r[e]&&!this._eventsInProgress[e])("drag"))&&p&&(this._dragOrigin=n(s.pointCoordinate3D(p)),this._trackingEllipsoid.setup(s._camera.position,this._dragOrigin)),s.cameraElevationReference="sea",i._stop(!0),p=p||i.transform.centerPoint,c&&(s.bearing+=c),u&&(s.pitch+=u),s._updateCameraState();const g=[0,0,0];if(a)if("mercator"===s.projection.name){const e=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(p).dir),t=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(p.sub(a)).dir);g[0]=t[0]-e[0],g[1]=t[1]-e[1]}else{const t=s.pointCoordinate(p);if("globe"===s.projection.name){a=a.rotate(-s.angle);const r=s._pixelsPerMercatorPixel/s.worldSize;g[0]=-a.x*e.mercatorScale(e.latFromMercatorY(t.y))*r,g[1]=-a.y*e.mercatorScale(s.center.lat)*r}else{const e=s.pointCoordinate(p.sub(a));t&&e&&(g[0]=e.x-t.x,g[1]=e.y-t.y)}}const f=s.zoom,_=[0,0,0];if(l){const t=n(d||s.pointCoordinate3D(p)),r={dir:e.normalize([],e.sub([],t,s._camera.position))};if(r.dir[2]<0){const o=s.zoomDeltaToMovement(t,l);e.scale$2(_,r.dir,o)}}const m=e.add(g,g,_);s._translateCameraConstrained(m),l&&Math.abs(s.zoom-f)>1e-4&&s.recenterOnTerrain(),s.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,o,!0)}_fireEvents(t,r,o){const i=Gi(this._eventsInProgress),s=Gi(t),n={};for(const e in t){const{originalEvent:r}=t[e];this._eventsInProgress[e]||(n[`${e}start`]=r),this._eventsInProgress[e]=t[e]}!i&&s&&this._fireEvent("movestart",s.originalEvent);for(const e in n)this._fireEvent(e,n[e]);s&&this._fireEvent("move",s.originalEvent);for(const e in t){const{originalEvent:r}=t[e];this._fireEvent(e,r)}const a={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:o}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=r[t]||o,a[`${e}end`]=l)}for(const e in a)this._fireEvent(e,a[e]);const c=Gi(this._eventsInProgress);if(o&&(i||s)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(r(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Wi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Hi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ki extends e.Evented{constructor(t,r){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,this._respectPrefersReducedMotion=!1!==r.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,r,o){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),o)}panTo(t,r,o){return this.easeTo(e.extend({center:t},r),o)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,r,o){return this.easeTo(e.extend({zoom:t},r),o)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,r,o){return this.easeTo(e.extend({bearing:t},r),o)}resetNorth(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,r){t=e.LngLatBounds.convert(t);const o=r&&r.bearing||0,i=r&&r.pitch||0,s=t.getNorthWest(),n=t.getSouthEast();return this._cameraForBounds(this.transform,s,n,o,i,r)}_extendCameraOptions(t){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(r,t.padding),t}_minimumAABBFrustumDistance(e,t){const r=t.max[0]-t.min[0],o=t.max[1]-t.min[1];return r/o>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):o/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,r,o,i,s,n){const a=t.clone(),l=this._extendCameraOptions(n);a.bearing=i,a.pitch=s;const c=e.LngLat.convert(r),u=e.LngLat.convert(o),p=.5*(c.lat+u.lat),d=.5*(c.lng+u.lng),h=e.latLngToECEF(p,d),g=e.normalize([],h),f=e.normalize([],e.cross([],g,[0,1,0])),_=e.cross([],f,g),m=[f[0],f[1],f[2],0,_[0],_[1],_[2],0,g[0],g[1],g[2],0,0,0,0,1],y=[h,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(p,c.lng),e.latLngToECEF(p,u.lng),e.latLngToECEF(c.lat,d),e.latLngToECEF(u.lat,d)];let b=e.Aabb.fromPoints(y.map((t=>[e.dot(f,t),e.dot(_,t),e.dot(g,t)])));const S=e.transformMat4([],b.center,m);0===e.squaredLength(S)&&e.set(S,0,0,1),e.normalize(S,S),e.scale$2(S,S,e.GLOBE_RADIUS),a.center=e.ecefToLatLng(S);const R=a.getWorldToCameraMatrix(),v=e.invert(new Float64Array(16),R);b=e.Aabb.applyTransform(b,e.multiply([],R,m)),e.transformMat4(S,S,R);const x=.5*(b.max[2]-b.min[2]),E=this._minimumAABBFrustumDistance(a,b),M=e.scale$2([],[0,0,1],x),T=e.add(M,S,M),w=E+(0===a.pitch?0:e.distance(S,T)),F=a.globeCenterInViewSpace,B=e.sub([],S,[F[0],F[1],F[2]]);e.normalize(B,B),e.scale$2(B,B,w);const C=e.add([],S,B);e.transformMat4(C,C,v);const L=e.earthRadius/e.GLOBE_RADIUS,D=e.length(C),I=e.mercatorZfromAltitude(Math.max(D*L-e.earthRadius,Number.EPSILON),0),O=Math.min(a.zoomFromMercatorZAdjusted(I),l.maxZoom);return O>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=O,this._cameraForBounds(a,r,o,i,s,n)):{center:a.center,zoom:O,bearing:i,pitch:s}}queryTerrainElevation(t,r){const o=this.transform.elevation;return o?(r=e.extend({},{exaggerated:!0},r),o.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}_cameraForBounds(t,r,o,i,s,n){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,r,o,i,s,n);const a=t.clone(),l=this._extendCameraOptions(n),c=a.padding;a.bearing=i,a.pitch=s;const u=e.LngLat.convert(r),p=e.LngLat.convert(o),d=new e.LngLat(u.lng,p.lat),h=new e.LngLat(p.lng,u.lat),g=a.project(u),f=a.project(p),_=this.queryTerrainElevation(u),m=this.queryTerrainElevation(p),y=this.queryTerrainElevation(d),b=this.queryTerrainElevation(h),S=[[g.x,g.y,Math.min(_||0,m||0,y||0,b||0)],[f.x,f.y,Math.max(_||0,m||0,y||0,b||0)]];let R=e.Aabb.fromPoints(S);const v=a.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),v);R=e.Aabb.applyTransform(R,v);const E=e.sub([],R.max,R.min),M=c.left||0,T=c.right||0,w=c.bottom||0,F=c.top||0,{left:B,right:C,top:L,bottom:D}=l.padding,I=.5*(M+T),O=.5*(F+w),P=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(M+T+B+C))/E[0],(a.height-(w+F+D+L))/E[1])),l.maxZoom),A=a.scale/a.zoomScale(P);R=new e.Aabb([R.min[0]-(B+I)*A,R.min[1]-(D+O)*A,R.min[2]],[R.max[0]+(C+I)*A,R.max[1]+(L+O)*A,R.max[2]]);const k=.5*E[2],z=this._minimumAABBFrustumDistance(a,R),N=[0,0,1,0];e.transformMat4$1(N,N,v),e.normalize$2(N,N);const j=e.scale$2([],N,z+k),U=e.add([],R.center,j),G=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(i));R.center[0]-=G.x*A,R.center[1]+=G.y*A,e.transformMat4(R.center,R.center,x),e.transformMat4(U,U,x);const W=[R.center[0],R.center[1],U[2]*a.pixelsPerMeter];e.scale$2(W,W,1/a.worldSize);const q=e.lngFromMercatorX(W[0]),$=e.latFromMercatorY(W[1]),V=Math.min(a._zoomFromMercatorZ(W[2]),l.maxZoom),H=new e.LngLat(q,$);return a.mercatorFromTransition&&V<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=V,this._cameraForBounds(a,r,o,i,s,n)):{center:H,zoom:V,bearing:i,pitch:s}}fitBounds(e,t,r){const o=this.cameraForBounds(e,t);return this._fitInternal(o,t,r)}fitScreenCoordinates(t,r,o,i,s){const n=e.Point.convert(t),a=e.Point.convert(r),l=new e.Point(Math.min(n.x,a.x),Math.min(n.y,a.y)),c=new e.Point(Math.max(n.x,a.x),Math.max(n.y,a.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(n,a))return this;const u=this.transform.pointLocation3D(l),p=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new e.Point(l.x,c.y)),h=this.transform.pointLocation3D(new e.Point(c.x,l.y)),g=[Math.min(u.lng,p.lng,d.lng,h.lng),Math.min(u.lat,p.lat,d.lat,h.lat)],f=[Math.max(u.lng,p.lng,d.lng,h.lng),Math.max(u.lat,p.lat,d.lat,h.lat)],_=i&&i.pitch?i.pitch:this.getPitch(),m=this._cameraForBounds(this.transform,g,f,o,_,i);return this._fitInternal(m,i,s)}_fitInternal(t,r,o){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,o):this.flyTo(r,o)):this}jumpTo(t,r){this.stop();const o=t.preloadOnly?this.transform.clone():this.transform;let i=!1,s=!1,n=!1;return"zoom"in t&&o.zoom!==+t.zoom&&(i=!0,o.zoom=+t.zoom),void 0!==t.center&&(o.center=e.LngLat.convert(t.center)),"bearing"in t&&o.bearing!==+t.bearing&&(s=!0,o.bearing=+t.bearing),"pitch"in t&&o.pitch!==+t.pitch&&(n=!0,o.pitch=+t.pitch),null==t.padding||o.isPaddingEqual(t.padding)||(o.padding=t.padding),t.preloadOnly?(this._preloadTiles(o),this):(this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),i&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),s&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),n&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Hi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,r){const o=this.transform;if(!o.projection.supportsFreeCamera)return e.warnOnce(Hi),this;this.stop();const i=o.zoom,s=o.pitch,n=o.bearing;o.setFreeCameraOptions(t);const a=i!==o.zoom,l=s!==o.pitch,c=n!==o.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),a&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}easeTo(t,r){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const o=this.transform,i=this.getZoom(),s=this.getBearing(),n=this.getPitch(),a=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,s):s,u="pitch"in t?+t.pitch:n,p="padding"in t?t.padding:o.padding,d=e.Point.convert(t.offset);let h,g,f;if("globe"===o.projection.name){const r=e.MercatorCoordinate.fromLngLat(o.center),i=d.rotate(-o.angle);r.x+=i.x/o.worldSize,r.y+=i.y/o.worldSize;const s=r.toLngLat(),n=e.LngLat.convert(t.center||s);this._normalizeCenter(n),h=o.centerPoint.add(i),g=new e.Point(r.x,r.y).mult(o.worldSize),f=new e.Point(e.mercatorXfromLng(n.lng),e.mercatorYfromLat(n.lat)).mult(o.worldSize).sub(g)}else{h=o.centerPoint.add(d);const r=o.pointLocation(h),i=e.LngLat.convert(t.center||r);this._normalizeCenter(i),g=o.project(r),f=o.project(i).sub(g)}const _=o.zoomScale(l-i);let m,y;t.around&&(m=e.LngLat.convert(t.around),y=o.locationPoint(m));const b=this._zooming||l!==i,S=this._rotating||s!==c,R=this._pitching||u!==n,v=!o.isPaddingEqual(p),x=o=>x=>{if(b&&(o.zoom=e.number(i,l,x)),S&&(o.bearing=e.number(s,c,x)),R&&(o.pitch=e.number(n,u,x)),v&&(o.interpolatePadding(a,p,x),h=o.centerPoint.add(d)),m)o.setLocationAtPoint(m,y);else{const e=o.zoomScale(o.zoom-i),t=l>i?Math.min(2,_):Math.max(.5,_),r=Math.pow(t,1-x),s=o.unproject(g.add(f.mult(x*r)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?s.wrap():s,h)}return t.preloadOnly||this._fireMoveEvents(r),o};if(t.preloadOnly){const e=this._emulate(x,t.duration,o);return this._preloadTiles(e),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=S,this._pitching=R,this._padding=v,this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,E),this._ease(x(o),(e=>{o.recenterOnTerrain(),this._afterEase(r,e)}),t),this}_prepareEase(t,r,o={}){this._moving=!0,this.transform.cameraElevationReference="sea",r||o.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!o.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!o.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!o.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const o=this._zooming,i=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),s&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,r){if(this._prefersReducedMotion(t)){const o=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const o=this.transform,i=this.getZoom(),s=this.getBearing(),n=this.getPitch(),a=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,s):s,u="pitch"in t?+t.pitch:n,p="padding"in t?t.padding:o.padding,d=o.zoomScale(l-i),h=e.Point.convert(t.offset);let g=o.centerPoint.add(h);const f=o.pointLocation(g),_=e.LngLat.convert(t.center||f);this._normalizeCenter(_);const m=o.project(f),y=o.project(_).sub(m);let b=t.curve;const S=Math.max(o.width,o.height),R=S/d,v=y.mag();if("minZoom"in t){const r=e.clamp(Math.min(t.minZoom,i,l),o.minZoom,o.maxZoom),s=S/o.zoomScale(r-i);b=Math.sqrt(s/v*2)}const x=b*b;function E(e){const t=(R*R-S*S+(e?-1:1)*x*x*v*v)/(2*(e?R:S)*x*v);return Math.log(Math.sqrt(t*t+1)-t)}function M(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}const w=E(0);let F=function(e){return T(w)/T(w+b*e)},B=function(e){return S*((T(w)*(M(t=w+b*e)/T(t))-M(w))/x)/v;var t},C=(E(1)-w)/b;if(Math.abs(v)<1e-6||!isFinite(C)){if(Math.abs(S-R)<1e-6)return this.easeTo(t,r);const e=R<S?-1:1;C=Math.abs(Math.log(R/S))/b,B=function(){return 0},F=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*C/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const L=s!==c,D=u!==n,I=!o.isPaddingEqual(p),O=o=>d=>{const f=d*C,b=1/F(f);o.zoom=1===d?l:i+o.scaleZoom(b),L&&(o.bearing=e.number(s,c,d)),D&&(o.pitch=e.number(n,u,d)),I&&(o.interpolatePadding(a,p,d),g=o.centerPoint.add(h));const S=1===d?_:o.unproject(m.add(y.mult(B(f))).mult(b));return o.setLocationAtPoint(o.renderWorldCopies?S.wrap():S,g),o._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(r),o};if(t.preloadOnly){const e=this._emulate(O,t.duration,o);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=L,this._pitching=D,this._padding=I,this._prepareEase(r,!1),this._ease(O(o),(()=>this._afterEase(r)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,r,o){!1===o.animate||0===o.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=o,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,r){t=e.wrap(t,-180,180);const o=Math.abs(t-r);return Math.abs(t-360-r)<o&&(t-=360),Math.abs(t+360-r)<o&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,r){const o=Math.ceil(15*t/1e3),i=[],s=e(r.clone());for(let e=0;e<=o;e++){const t=s(e/o);i.push(t.clone())}return i}}class Zi{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s("button","mapboxgl-ctrl-attrib-button",this._container),s("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",r),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const o=r.reduce(((e,t,o)=>(t.value&&(e+=`${t.key}=${t.value}${o<r.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${o}#${Yo(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const o=t[r];if(o.used){const t=o.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let o=r+1;o<e.length;o++)if(e[o].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Xi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=s("div","mapboxgl-ctrl");const t=s("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Ji{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const t of r)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Yi(t,r,o){if(t=new e.LngLat(t.lng,t.lat),r){const i=new e.LngLat(t.lng-360,t.lat),s=new e.LngLat(t.lng+360,t.lat),n=360*Math.ceil(Math.abs(t.lng-o.center.lng)/360),a=o.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>o.width||r.y>o.height;o.locationPoint(i).distSqr(r)<a&&(l||Math.abs(i.lng-o.center.lng)<n)?t=i:o.locationPoint(s).distSqr(r)<a&&(l||Math.abs(s.lng-o.center.lng)<n)&&(t=s)}for(;Math.abs(t.lng-o.center.lng)>180;){const e=o.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=o.width&&e.y<=o.height)break;t.lng>o.center.lng?t.lng-=360:t.lng+=360}return t}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class es extends e.Evented{constructor(t,r){if(super(),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=s("div");const r=41,o=27,i=n("svg",{display:"block",height:r*this._scale+"px",width:o*this._scale+"px",viewBox:`0 0 ${o} ${r}`},this._element),a=n("radialGradient",{id:"shadowGradient"},n("defs",{},i));n("stop",{offset:"10%","stop-opacity":.4},a),n("stop",{offset:"100%","stop-opacity":.05},a),n("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),n("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),n("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),n("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const o=this._element.classList;for(const e in Qi)o.remove(`mapboxgl-marker-anchor-${e}`);o.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,o=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[o,-1*(t-r+o)],"bottom-right":[-o,-1*(t-r+o)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const r=e.unproject(t),o=e.getFreeCameraOptions();if(!o.position)return!1;const i=o.position.toLngLat();return i.distanceTo(r)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const r=this._pos;if(!r||r.x<0||r.x>t.transform.width||r.y<0||r.y>t.transform.height)return void this._clearFadeTimer();const o=t.unproject(r);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(o),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${Qi[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,r=this._map,o=this.getPitchAlignment();if(!r||!t||"map"!==o)return"";if(!r._showingGlobe()){const e=r.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(r.transform,this._lngLat)),s=t.sub(e.globeCenterToScreenPoint(r.transform)),n=Math.abs(s.x)+Math.abs(s.y);if(0===n)return"";const a=i/n;return`rotateX(${-s.y*a}deg) rotateY(${s.x*a}deg)`}_calculateZTransform(){const t=this._pos,r=this._map;if(!r||!t)return"";let o=0;const i=this.getRotationAlignment();if("map"===i)if(r._showingGlobe()){const t=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);o=e.radToDeg(Math.atan2(i.y,i.x))-90}else o=-r.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,r.getZoom()),s=e.globeCenterToScreenPoint(r.transform);s.y+=i*r.transform.height;const n=t.sub(s),a=e.radToDeg(Math.atan2(n.y,n.x));o=(a>90?a-270:a+90)*(1-i)}return o+=this._rotation,o?`rotateZ(${o}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=Yi(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const r=this._map;if(!r)return;const o=this._pointerdownPos,i=this._positionDelta;if(o&&i){if(!this._isDragging){const e=this._clickTolerance||r._clickTolerance;if(t.point.dist(o)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,r=this._pos;t&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ts={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function os(t=new e.Point(0,0),r="bottom"){if("number"==typeof t){const o=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(r){case"top":return new e.Point(0,t);case"top-left":return new e.Point(o,o);case"top-right":return new e.Point(-o,o);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(o,-o);case"bottom-right":return new e.Point(-o,-o);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[r]||[0,0])}class is{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}const ss={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ns={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},as={showCompass:!0,showZoom:!0,visualizePitch:!1};class ls{constructor(t,r,o=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new Si({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,o&&(this.mousePitch=new Ri({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const r=this.map,o=this.mouseRotate.mousemoveWindow(e,t),i=o&&o.bearingDelta;if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const o=this.mousePitch.mousemoveWindow(e,t),i=o&&o.pitchDelta;i&&r.setPitch(r.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){p(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),g(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,g(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=f(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=f(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const cs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},us={maxWidth:100,unit:"metric"},ps={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ds={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Ki{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ns,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zo(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Ji,this._domRenderTaskQueue=new Ji,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ss,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new is(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Vi(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Jo("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Zi({customAttribution:t.customAttribution})),this._logoControl=new Xi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(o,i.firstChild):i.appendChild(o),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,r=t.projection.name;let o;"globe"===r&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),o=!0):"mercator"===r&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let r;if(r="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),r){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let o=!1;const i=i=>{const s=t.filter((e=>this.getLayer(e))),n=s.length?this.queryRenderedFeatures(i.point,{layers:s}):[];n.length?o||(o=!0,r.call(this,new ai(e,this,i.originalEvent,{features:n}))):o=!1},s=()=>{o=!1};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){let o=!1;const i=i=>{const s=t.filter((e=>this.getLayer(e)));(s.length?this.queryRenderedFeatures(i.point,{layers:s}):[]).length?o=!0:o&&(o=!1,r.call(this,new ai(e,this,i.originalEvent)))},s=t=>{o&&(o=!1,r.call(this,new ai(e,this,t.originalEvent)))};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:s}}}{const o=e=>{const o=t.filter((e=>this.getLayer(e))),i=o.length?this.queryRenderedFeatures(e.point,{layers:o}):[];i.length&&(e.features=i,r.call(this,e),delete e.features)};return{layers:new Set(t),listener:r,delegates:{[e]:o}}}}on(e,t,r){if(void 0===r)return super.on(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o);for(const e in o.delegates)this.on(e,o.delegates[e]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,r);for(const e in o.delegates)this.once(e,o.delegates[e]);return this}off(e,t,r){if(void 0===r)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const o=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const s=e[i];if(s.listener===r&&o(s.layers,t)){for(const e in s.delegates)this.off(e,s.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.Point||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&e.warnOnce(`${r} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,r){if("string"==typeof t){const o=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(o,e.ResourceType.Style);e.getJSON(i,((t,o)=>{t?this.fire(new e.ErrorEvent(t)):o&&this._updateDiff(o,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}_updateDiff(t,r){try{this.style.setState(t)&&this._update(!0)}catch(o){e.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(t,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,r,{pixelRatio:o=1,sdf:i=!1,stretchX:s,stretchY:n,content:a}={}){if(this._lazyInitEmptyStyle(),r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(r);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:o,stretchX:s,stretchY:n,content:a,sdf:i,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=r,u=r;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:o,stretchX:s,stretchY:n,content:a,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,r){const o=this.style.getImage(t);if(!o)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap?e.exported.getImageData(r):r,{width:s,height:n}=i;void 0!==s&&void 0!==n?s===o.data.width&&n===o.data.height?(o.data.replace(i.data,!(r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap)),this.style.updateImage(t,o)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${s}, ${n})\n                must be that same as the previous version of the image\n                (${o.data.width}, ${o.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,o)=>{r(t,o instanceof e.window.HTMLImageElement?e.exported.getImageData(o):o)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,o={}){return this.style.setPaintProperty(e,t,r,o),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,o={}){return this.style.setLayoutProperty(e,t,r,o),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let o,i,s,n=this._container;for(;n&&(!i||!s);){const t=e.window.getComputedStyle(n).transform;t&&"none"!==t&&(o=t.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&"0"!==o[0]&&"1"!==o[0]&&(i=o[0]),o[3]&&"0"!==o[3]&&"1"!==o[3]&&(s=o[3])),n=n.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=s?Math.abs(r/s):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=s("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=s("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=s("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const r=this._controlContainer=s("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=s("div",`mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,r){const o=e.exported.devicePixelRatio||1;this._canvas.width=o*Math.ceil(t),this._canvas.height=o*Math.ceil(r),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${r}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=o||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!o&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new Ao(i,this.transform,!!o),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;const o=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(r=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=this.transform.pitch,o=e.exported.now(),i=new e.EvaluationParameters(t,{now:o,fadeDuration:s,pitch:r,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let n=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),n=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):n=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const t=e.exported.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,r),setTimeout((()=>{const s=o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(r),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:s})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:s}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:r}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const r=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:r}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||n;if(a||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(n=this._updateAverageElevation(i,!0)),n)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let o=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(o)?o=0:this._averageElevationLastSampledAt=e;const s=Math.abs(t-o);if(s>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(o),r(o);this._averageElevation.easeTo(o,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(o),r(o)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Xi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const r=this.painter.context.gl,o=r.createFramebuffer();function i(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);const t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,o),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,r){let o=r[1]-r[0];const i=e.length/4;for(let s=0;s<t.length;s++){const n=t[s];let a=0;for(let t=0;t<n.length;t+=4)n[t]===e[t]&&n[t+1]===e[t+1]&&n[t+2]===e[t+2]&&n[t+3]===e[t+3]&&(a+=1);o+=(r[s+2]-r[s+1])*(1-a/i)}return o}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,((e,r)=>e._preloadTiles(t,r)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,r){e.setCacheLimits(t,r)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},as,t),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),s("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),s("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=s("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),r=t===e.getMaxZoom(),o=t===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ls(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const r=s("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){if(!this._map)return;const r=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},cs,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Xo(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const r=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>r("denied"!==e.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return!!t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude),o=t.coords.accuracy,i=this._map.getBearing(),s=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(o),s,{geolocateSource:!0})}_updateMarker(t){if(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,r=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,o=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=s("button","mapboxgl-ctrl-geolocate",this._container),s("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s("div","mapboxgl-user-location"),this._dotElement.appendChild(s("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(s("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new es({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=s("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Zi,ScaleControl:class{constructor(t){this.options=e.extend({},us,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,r=t._containerHeight/2,o=t._containerWidth/2-e/2,i=t.unproject([o,r]),s=t.unproject([o+e,r]),n=i.distanceTo(s);if("imperial"===this.options.unit){const t=3.2808*n;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,n/1852,"nautical-mile"):n>=1e3?this._setScale(e,n/1e3,"kilometer"):this._setScale(e,n,"meter")}_setScale(e,t,r){this._map._requestDomTask((()=>{const o=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(t),i=o/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:r}).format(o):`${o}&nbsp;${ps[r]}`,this._container.style.width=e*i+"px"}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=s("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ts),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const r=e.window.document.createDocumentFragment(),o=e.window.document.createElement("body");let i;for(o.innerHTML=t;i=o.firstChild,i;)r.appendChild(i);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=s("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=s("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,r=this._container,o=this._pos;if(!t||!r||!o)return"bottom";const i=r.offsetWidth,s=r.offsetHeight,n=o.x<i/2,a=o.x>t.transform.width-i/2;if(o.y+e<s)return n?"top-left":a?"top-right":"top";if(o.y>t.transform.height-s){if(n)return"bottom-left";if(a)return"bottom-right"}return n?"left":a?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const r=this._map,o=this._content;if(!r||!this._lngLat&&!this._trackPointer||!o)return;let i=this._container;if(i||(i=this._container=s("div","mapboxgl-popup",r.getContainer()),this._tip=s("div","mapboxgl-popup-tip",i),i.appendChild(o)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Yi(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),o=os(this.options.offset),i=this._anchor=this._getAnchor(o.y),s=os(this.options.offset,i),n=e.add(s).round();r._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Qi[i]} translate(${n.x}px,${n.y}px)`)}))}if(!this._marker&&r._showingGlobe()){const t=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(rs);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:es,Style:Jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Uo,Evented:e.Evented,config:e.config,prewarm:function(){Ne().acquire(Ae)},clearPrewarmedResources:function(){const e=ze;e&&e.isPreloaded()&&1===e.numActive()&&(e.release(Ae),ze=null)},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return ke.workerCount},set workerCount(e){ke.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return ds})),r}()}(mapboxGl)),mapboxGl.exports}
/*!
 * Mapbox GL JS Animated Popup v0.4.0
 * https://nagix.github.io/mapbox-gl-animated-popup
 * (c) 2020-2022 Akihiko Kusanagi
 * Released under the MIT license
 */!function(e,t){e.exports=function(e){const t=e.version.split(".").map((e=>+e)),r={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*(Math.PI/2)),easeOutSine:e=>Math.sin(e*(Math.PI/2)),easeInOutSine:e=>-.5*(Math.cos(Math.PI*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e)),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic(e){let t=1.70158,r=0,o=1;return 0===e?0:1===e?1:(r||(r=.3),t=r/(2*Math.PI)*Math.asin(1/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r))},easeOutElastic(e){let t=1.70158,r=0,o=1;return 0===e?0:1===e?1:(r||(r=.3),t=r/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/r)+1)},easeInOutElastic(e){let t=1.70158,r=0,o=1;return 0===e?0:2==(e/=.5)?1:(r||(r=.45),t=r/(2*Math.PI)*Math.asin(1/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*-.5:o*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-r.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?.5*r.easeInBounce(2*e):.5*r.easeOutBounce(2*e-1)+.5},o={scale:(e,t,r)=>{e.transform=`scale(${r?1-t:t})`},opacity:(e,t,r)=>{e.opacity=r?1-t:t}};function i(e,t,i,s,n,a){let l;const c="string"==typeof a?o[a]||o.scale:a,u=performance.now(),p=()=>{if(l)return;const o=performance.now()-u,a=0===i?1:Math.min(o/i,1),d=r[t](a);c(e,d,s),a<1?requestAnimationFrame(p):n&&n()};return p(),()=>{l=!0}}function s(e,...t){for(const r of t)for(const t in r)"object"==typeof r[t]?(e[t]||(e[t]={}),s(e[t],r[t])):e[t]=r[t];return e}function n(e){for(const t of e.values()){const e=t.match(/mapboxgl-popup-anchor-(.+)/);if(e)return e[1].replace("-"," ")}}const a={openingAnimation:{transform:"scale",duration:1e3,easing:"easeOutElastic"},closingAnimation:{transform:"scale",duration:300,easing:"easeInBack"}};class l extends e.Popup{constructor(e){super(e),s(this.options,s({},a,e))}addTo(...e){return this._map&&this._remove(),super.addTo(...e)}_remove(){const e=this._wrapperContainer;this._cancelAnimation&&this._cancelAnimation(),e&&e.parentNode&&(e.parentNode.removeChild(e),delete this._wrapperContainer),super.remove()}remove(){if(this._wrapperContainer){const{easing:e,duration:t,transform:r}=this.options.closingAnimation;this._cancelAnimation&&this._cancelAnimation(),this._cancelAnimation=i(this._container.style,e,t,!0,(()=>{this._remove()}),r)}else super.remove();return this}_update(...e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;const r=this._map._requestDomTask;let o,s=this._wrapperContainer,a=this._container;Object.defineProperty(this,"_container",{configurable:!0,get:()=>a,set:e=>{const{easing:t,duration:r,transform:o}=this.options.openingAnimation;s=this._wrapperContainer=document.createElement("div"),s.className="mapboxgl-popup-wrapper",s.style.position="absolute",s.style.willChange="transform",s.style.pointerEvents="none",a=e,a.style.position="relative",this._map.getContainer().appendChild(s),s.appendChild(a),this._cancelAnimation=i(a.style,t,r,!1,null,o)}}),t[0]>=2&&t[1]>=3||t[0]>=3?this._map._requestDomTask=e=>{r.call(this._map,(()=>{o=a?a.style.transform:"scale(0)",e(),s.style.transform=a.style.transform,a.style.transform=o,a.style.transformOrigin=this._anchor?this._anchor.replace("-"," "):n(a.classList)}))}:o=a?a.style.transform:"scale(0)",super._update(...e),delete this._container,this._container=a,t[0]>=2&&t[1]>=3||t[0]>=3?this._map._requestDomTask=r:(s.style.transform=a.style.transform,a.style.transform=o,a.style.transformOrigin=n(a.classList))}}return l}(requireMapboxGl())}(mapboxGlAnimatedPopup);var mapboxGlAnimatedPopupExports=mapboxGlAnimatedPopup.exports,Popup=getDefaultExportFromCjs(mapboxGlAnimatedPopupExports),src$1={},cacheClient={},cacheControlClient={},dist={},CacheclientServiceClientPb={},grpcWeb$8={},n$1;function aa(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)};function ca(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof commonjsGlobal&&commonjsGlobal,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var r$1=ca(commonjsGlobal);function t$1(){t$1=function(){},r$1.Symbol||(r$1.Symbol=da)}function ea(e,t){this.a=e,ba(this,"description",{configurable:!0,writable:!0,value:t})}ea.prototype.toString=function(){return this.a};var da=(b=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new ea("jscomp_symbol_"+(t||"")+"_"+b++,t)}),b;function u(){t$1();var e=r$1.Symbol.iterator;e||(e=r$1.Symbol.iterator=r$1.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&ba(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return fa(aa(this))}}),u=function(){}}function fa(e){return u(),(e={next:e})[r$1.Symbol.iterator]=function(){return this},e}function ha(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:aa(e)}}var ia="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},ja;if("function"==typeof Object.setPrototypeOf)ja=Object.setPrototypeOf;else{var ka;e:{var la={V:!0},ma={};try{ma.__proto__=la,ka=ma.V;break e}catch(a){}ka=!1}ja=ka?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var na=ja;function oa(e,t){if(e.prototype=ia(t.prototype),e.prototype.constructor=e,na)na(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,r);o&&Object.defineProperty(e,r,o)}else e[r]=t[r];e.O=t.prototype}function pa(e,t){u(),e instanceof String&&(e+="");var r=0,o={next:function(){if(r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o}function v(e,t){if(t){var r=r$1;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];i in r||(r[i]={}),r=r[i]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&ba(r,e,{configurable:!0,writable:!0,value:t})}}v("Array.prototype.keys",(function(e){return e||function(){return pa(this,(function(e){return e}))}})),v("Array.prototype.find",(function(e){return e||function(e,t){e:{var r=this;r instanceof String&&(r=String(r));for(var o=r.length,i=0;i<o;i++){var s=r[i];if(e.call(t,s,i,r)){e=s;break e}}e=void 0}return e}})),v("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),v("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var o=r.length;for(0>(t=t||0)&&(t=Math.max(t+o,0));t<o;t++){var i=r[t];if(i===e||Object.is(i,e))return!0}return!1}})),v("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=r$1.setTimeout;r.prototype.c=function(e){i(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.f(e)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(o){r||(r=!0,e.call(t,o))}}var t=this,r=!1;return{resolve:e(this.s),reject:e(this.g)}},t.prototype.s=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var r=null!=e;break e;case"function":r=!0;break e;default:r=!1}r?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.w(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new r;return t.prototype.v=function(e){var t=this.f();e.F(t.resolve,t.reject)},t.prototype.w=function(e,t){var r=this.f();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},t.prototype.then=function(e,r){function o(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){s(e)}}:t}var i,s,n=new t((function(e,t){i=e,s=t}));return this.F(o(e,i),o(r,s)),n},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.F=function(e,t){function r(){switch(o.b){case 1:e(o.c);break;case 2:t(o.c);break;default:throw Error("Unexpected state: "+o.b)}}var o=this;null==this.a?s.b(r):this.a.push(r)},t.resolve=o,t.reject=function(e){return new t((function(t,r){r(e)}))},t.race=function(e){return new t((function(t,r){for(var i=ha(e),s=i.next();!s.done;s=i.next())o(s.value).F(t,r)}))},t.all=function(e){var r=ha(e),i=r.next();return i.done?o([]):new t((function(e,t){function s(t){return function(r){n[t]=r,0==--a&&e(n)}}var n=[],a=0;do{n.push(void 0),a++,o(i.value).F(s(n.length-1),t),i=r.next()}while(!i.done)}))},t}));var qa=qa||{},x=commonjsGlobal||self;function y(e,t){e=e.split("."),t=t||x;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t}function ra(){}function sa(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function va(e,t,r){return e.call.apply(e.bind,arguments)}function wa(e,t,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,o),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function A(e,t,r){return(A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa).apply(null,arguments)}function B(e,t){function r(){}r.prototype=t.prototype,e.O=t.prototype,e.prototype=new r,e.prototype.constructor=e}function xa(e){this.a=e||{}}function C(e,t,r,o){this.f=e,this.c=t,this.b=r,this.a=o}function D(e,t,r,o){r=void 0===r?{}:r,this.c=e,this.a=r,this.b=t,this.f=void 0===o?null:o}function ya(e,t,r,o,i,s){this.name=e,this.a=i,this.b=s}function za(e,t,r){r=void 0===r?{}:r;var o=void 0===o?new xa:o;return new C(t,e,r,o)}function Aa(e){switch(e){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:default:return 2;case 501:return 12;case 503:return 14;case 504:return 4}}function E(e,t,r){r=void 0===r?{}:r,t=Error.call(this,t),this.message=t.message,"stack"in t&&(this.stack=t.stack),this.code=e,this.metadata=r}function Ba(e){this.a=e}function Ca(e){switch(e){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function F(e){if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function Da(e,t){for(var r="",o=(e=e.split("%s")).length-1,i=0;i<o;i++)r+=e[i]+(i<t.length?t[i]:"%s");F.call(this,r+e[o])}function Ea(e,t){throw new Da("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function Fa(){this.l=null,this.i=[],this.m=0,this.b=Ga,this.f=this.a=this.h=0,this.c=null,this.g=0}function Ha(e,t){function r(e){a.f++,a.a=(a.a<<8)+e,4==a.f&&(a.b=La,a.g=0,a.c="undefined"!=typeof Uint8Array?new Uint8Array(a.a):Array(a.a),0==a.a&&i())}function o(e){a.c[a.g++]=e,a.g==a.a&&i()}function i(){var e={};e[a.h]=a.c,a.i.push(e),a.b=Ga}var s,n,a=e,l=0;for(s=t instanceof Uint8Array||t instanceof Array?t:new Uint8Array(t);l<s.length;){switch(a.b){case Ma:Ja(a,s,l,"stream already broken");break;case Ga:(n=s[l])==Ia||n==G?a.h=n:Ja(a,s,l,"invalid frame byte"),a.b=Ka,a.a=0,a.f=0;break;case Ka:r(s[l]);break;case La:o(s[l]);break;default:throw Error("unexpected parser state: "+a.b)}a.m++,l++}return e=a.i,a.i=[],0<e.length?e:null}xa.prototype.get=function(e){return this.a[e]},xa.prototype.G=function(){return Object.keys(this.a)},C.prototype.getRequestMessage=function(){return this.f},C.prototype.getMethodDescriptor=function(){return this.c},C.prototype.getMetadata=function(){return this.b},C.prototype.getCallOptions=function(){return this.a},D.prototype.getResponseMessage=function(){return this.c},D.prototype.getMetadata=function(){return this.a},D.prototype.getMethodDescriptor=function(){return this.b},D.prototype.getStatus=function(){return this.f},ya.prototype.getName=function(){return this.name},ya.prototype.getName=ya.prototype.getName,oa(E,Error),E.prototype.name="RpcError",Ba.prototype.on=function(e,t){return"data"==e||"error"==e?this:this.a.on(e,t)},Ba.prototype.removeListener=function(e,t){return this.a.removeListener(e,t)},Ba.prototype.cancel=function(){this.a.cancel()},B(F,Error),F.prototype.name="CustomError",B(Da,F),Da.prototype.name="AssertionError";var Ga=0,Ka=1,La=2,Ma=3,Ia=0,G=128;function Ja(e,t,r,o){throw e.b=Ma,e.l="The stream is broken @"+e.m+"/"+r+". Error: "+o+". With input:\n"+t,Error(e.l)}var Na=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},Oa=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},I;function H(e,t){return-1!=e.indexOf(t)}function Pa(e,t){return e<t?-1:e>t?1:0}e:{var Qa=x.navigator;if(Qa){var Ra=Qa.userAgent;if(Ra){I=Ra;break e}}I=""}function Sa(e,t){for(var r in e)t.call(void 0,e[r],r,e)}function Ta(e,t){var r,o={};for(r in e)o[r]=t.call(void 0,e[r],r,e);return o}var Ua="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Va(e,t){for(var r,o,i=1;i<arguments.length;i++){for(r in o=arguments[i])e[r]=o[r];for(var s=0;s<Ua.length;s++)r=Ua[s],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}}function Wa(e){var t=1;e=e.split(":");for(var r=[];0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function Xa(e){return Xa[" "](e),e}function Ya(e){var t=Za;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}Xa[" "]=ra;var $a=H(I,"Opera"),ab=H(I,"Trident")||H(I,"MSIE"),bb=H(I,"Edge"),cb=H(I,"Gecko")&&!(H(I.toLowerCase(),"webkit")&&!H(I,"Edge"))&&!(H(I,"Trident")||H(I,"MSIE"))&&!H(I,"Edge"),db=H(I.toLowerCase(),"webkit")&&!H(I,"Edge"),eb,a;e:{var fb="",gb=(a=I,cb?/rv:([^\);]+)(\)|;)/.exec(a):bb?/Edge\/([\d\.]+)/.exec(a):ab?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):db?/WebKit\/(\S+)/.exec(a):$a?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(gb&&(fb=gb?gb[1]:""),ab){var hb,ib=x.document;if(hb=ib?ib.documentMode:void 0,null!=hb&&hb>parseFloat(fb)){eb=String(hb);break e}}eb=fb}var Za={};function jb(){return Ya((function(){for(var e=0,t=Oa(String(eb)).split("."),r=Oa("9").split("."),o=Math.max(t.length,r.length),i=0;0==e&&i<o;i++){var s=t[i]||"",n=r[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],0==s[0].length&&0==n[0].length)break;e=Pa(0==s[1].length?0:parseInt(s[1],10),0==n[1].length?0:parseInt(n[1],10))||Pa(0==s[2].length,0==n[2].length)||Pa(s[2],n[2]),s=s[3],n=n[3]}while(0==e)}return 0<=e}))}function kb(){this.K=this.K}kb.prototype.K=!1;var mb=Object.freeze||function(e){return e};function J(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}J.prototype.b=function(){this.defaultPrevented=!0};var nb=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{x.addEventListener("test",ra,t),x.removeEventListener("test",ra,t)}catch(e){}return e}();function K(e,t){if(J.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var r=this.type=e.type,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(cb){e:{try{Xa(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ob[e.pointerType]||"",this.c=e,e.defaultPrevented&&K.O.b.call(this)}}B(K,J);var ob=mb({2:"touch",3:"pen",4:"mouse"});K.prototype.b=function(){K.O.b.call(this);var e=this.c;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),pb=0;function qb(e,t,r,o,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!o,this.H=i,this.key=++pb,this.A=this.D=!1}function rb(e){e.A=!0,e.listener=null,e.proxy=null,e.src=null,e.H=null}function sb(e){this.src=e,this.a={},this.b=0}function ub(e,t){var r=t.type;if(r in e.a){var o,i=e.a[r],s=Na(i,t);(o=0<=s)&&Array.prototype.splice.call(i,s,1),o&&(rb(t),0==e.a[r].length&&(delete e.a[r],e.b--))}}function tb(e,t,r,o){for(var i=0;i<e.length;++i){var s=e[i];if(!s.A&&s.listener==t&&s.capture==!!r&&s.H==o)return i}return-1}sb.prototype.add=function(e,t,r,o,i){var s=e.toString();(e=this.a[s])||(e=this.a[s]=[],this.b++);var n=tb(e,t,o,i);return-1<n?(t=e[n],r||(t.D=!1)):((t=new qb(t,this.src,s,!!o,i)).D=r,e.push(t)),t},sb.prototype.remove=function(e,t,r,o){if(!((e=e.toString())in this.a))return!1;var i=this.a[e];return-1<(t=tb(i,t,r,o))&&(rb(i[t]),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.a[e],this.b--),!0)};var vb="closure_lm_"+(1e6*Math.random()|0),wb={};function yb(e,t,r,o,i){if(o&&o.once)zb(e,t,r,o,i);else if(Array.isArray(t))for(var s=0;s<t.length;s++)yb(e,t[s],r,o,i);else r=Ab(r),e&&e[L]?e.f.add(String(t),r,!1,sa(o)?!!o.capture:!!o,i):Bb(e,t,r,!1,o,i)}function Bb(e,t,r,o,i,s){if(!t)throw Error("Invalid event type");var n=sa(i)?!!i.capture:!!i,a=Cb(e);if(a||(e[vb]=a=new sb(e)),!(r=a.add(t,r,o,n,s)).proxy)if(o=Db(),r.proxy=o,o.src=e,o.listener=r,e.addEventListener)nb||(i=n),void 0===i&&(i=!1),e.addEventListener(t.toString(),o,i);else if(e.attachEvent)e.attachEvent(Eb(t.toString()),o);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(o)}}function Db(){var e=Fb;return function t(r){return e.call(t.src,t.listener,r)}}function zb(e,t,r,o,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)zb(e,t[s],r,o,i);else r=Ab(r),e&&e[L]?e.f.add(String(t),r,!0,sa(o)?!!o.capture:!!o,i):Bb(e,t,r,!0,o,i)}function Gb(e,t,r,o,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Gb(e,t[s],r,o,i);else o=sa(o)?!!o.capture:!!o,r=Ab(r),e&&e[L]?e.f.remove(String(t),r,o,i):e&&(e=Cb(e))&&(t=e.a[t.toString()],e=-1,t&&(e=tb(t,r,o,i)),(r=-1<e?t[e]:null)&&Hb(r))}function Hb(e){if("number"!=typeof e&&e&&!e.A){var t=e.src;if(t&&t[L])ub(t.f,e);else{var r=e.type,o=e.proxy;t.removeEventListener?t.removeEventListener(r,o,e.capture):t.detachEvent?t.detachEvent(Eb(r),o):t.addListener&&t.removeListener&&t.removeListener(o),(r=Cb(t))?(ub(r,e),0==r.b&&(r.src=null,t[vb]=null)):rb(e)}}}function Eb(e){return e in wb?wb[e]:wb[e]="on"+e}function Fb(e,t){if(e.A)e=!0;else{t=new K(t,this);var r=e.listener,o=e.H||e.src;e.D&&Hb(e),e=r.call(o,t)}return e}function Cb(e){return(e=e[vb])instanceof sb?e:null}var Ib="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ab(e){return"function"==typeof e?e:(e[Ib]||(e[Ib]=function(t){return e.handleEvent(t)}),e[Ib])}function N(){kb.call(this),this.f=new sb(this),this.U=this}function O(e,t){e=e.U;var r=t.type||t;if("string"==typeof t)t=new J(t,e);else if(t instanceof J)t.target=t.target||e;else{var o=t;Va(t=new J(r,e),o)}Jb(e=t.a=e,r,!0,t),Jb(e,r,!1,t)}function Jb(e,t,r,o){if(t=e.f.a[String(t)]){t=t.concat();for(var i=!0,s=0;s<t.length;++s){var n=t[s];if(n&&!n.A&&n.capture==r){var a=n.listener,l=n.H||n.src;n.D&&ub(e.f,n),i=!1!==a.call(l,o)&&i}}}}B(N,kb),N.prototype[L]=!0,N.prototype.addEventListener=function(e,t,r,o){yb(this,e,t,r,o)},N.prototype.removeEventListener=function(e,t,r,o){Gb(this,e,t,r,o)};var Kb=x;function Lb(e,t,r){if("function"==typeof e)r&&(e=A(e,r));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=A(e.handleEvent,e)}return 2147483647<Number(t)?-1:Kb.setTimeout(e,t||0)}function Mb(e,t){this.name=e,this.value=t}Mb.prototype.toString=function(){return this.name};var Nb=new Mb("OFF",1/0),Ob=new Mb("SEVERE",1e3),Pb=new Mb("CONFIG",700),Qb=new Mb("FINE",500),Sb,Zb,fc;function Rb(){this.clear()}function Ub(e,t,r){this.reset(e||Nb,t,r,void 0,void 0)}function Vb(e,t){this.a=null,this.f=[],this.b=(void 0===t?null:t)||null,this.c=[],this.g={getName:function(){return e}}}function Wb(e){return e.a?e.a:e.b?Wb(e.b):(Ea("Root logger has no level set."),Nb)}function Xb(e,t){for(;e;)e.f.forEach((function(e){e(t)})),e=e.b}function Yb(){this.entries={};var e=new Vb("");e.a=Pb,this.entries[""]=e}function $b(e,t,r){var o=e.entries[t];if(o)return void 0!==r&&(o.a=r),o;o=$b(e,t.substr(0,t.lastIndexOf(".")));var i=new Vb(t,o);return e.entries[t]=i,o.c.push(i),void 0!==r&&(i.a=r),i}function ac(){return Zb||(Zb=new Yb),Zb}function bc(e,t,r){var o;(o=e)&&(o=e&&t)&&(o=(o=t.value)>=(e?Wb($b(ac(),e.getName())):Nb).value);o&&(t=t||Nb,o=$b(ac(),e.getName()),"function"==typeof r&&(r=r()),Sb||(Sb=new Rb),Xb(o,e=new Ub(t,r,e=e.getName())))}function P(e,t){e&&bc(e,Qb,t)}function cc(){}function dc(e){var t;return(t=e.a)||(t={},ec(e)&&(t[0]=!0,t[1]=!0),t=e.a=t),t}function gc(){}function hc(e){return(e=ec(e))?new ActiveXObject(e):new XMLHttpRequest}function ec(e){if(!e.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],r=0;r<t.length;r++){var o=t[r];try{return new ActiveXObject(o),e.b=o}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.b}function ic(e,t){this.b=e[x.Symbol.iterator](),this.c=t,this.f=0}function jc(e,t){return new ic(e,t)}Rb.prototype.clear=function(){},Ub.prototype.reset=function(){},cc.prototype.a=null,B(gc,cc),fc=new gc,t$1(),u(),ic.prototype[Symbol.iterator]=function(){return this},ic.prototype.next=function(){var e=this.b.next();return{value:e.done?void 0:this.c.call(void 0,e.value,this.f++),done:e.done}},t$1(),u(),t$1(),u();var kc="StopIteration"in x?x.StopIteration:{message:"StopIteration",stack:""};function Q(){}function lc(e){if(e instanceof R||e instanceof S||e instanceof T)return e;if("function"==typeof e.next)return new R((function(){return mc(e)}));if(t$1(),u(),"function"==typeof e[Symbol.iterator])return t$1(),u(),new R((function(){return e[Symbol.iterator]()}));if("function"==typeof e.u)return new R((function(){return mc(e.u())}));throw Error("Not an iterator or iterable.")}function mc(e){if(!(e instanceof Q))return e;var t=!1;return{next:function(){for(var r;!t;)try{r=e.a();break}catch(e){if(e!==kc)throw e;t=!0}return{value:r,done:t}}}}function R(e){this.b=e}function S(e){this.b=e}function T(e){R.call(this,(function(){return e})),this.f=e}function nc(e,t){this.o={},this.j=[],this.B=this.size=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var o=0;o<r;o+=2)this.set(arguments[o],arguments[o+1])}else e&&this.addAll(e)}function oc(e){if(e.size!=e.j.length){for(var t=0,r=0;t<e.j.length;){var o=e.j[t];U(e.o,o)&&(e.j[r++]=o),t++}e.j.length=r}if(e.size!=e.j.length){var i={};for(r=t=0;t<e.j.length;)U(i,o=e.j[t])||(e.j[r++]=o,i[o]=1),t++;e.j.length=r}}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Q.prototype.next=function(){return Q.prototype.a.call(this)},Q.prototype.a=function(){throw kc},Q.prototype.u=function(){return this},t$1(),u(),R.prototype.u=function(){return new S(this.b())},R.prototype[Symbol.iterator]=function(){return new T(this.b())},R.prototype.c=function(){return new T(this.b())},t$1(),u(),oa(S,Q),S.prototype.a=function(){var e=this.b.next();if(e.done)throw kc;return e.value},S.prototype.next=function(){return S.prototype.a.call(this)},S.prototype[Symbol.iterator]=function(){return new T(this.b)},S.prototype.c=function(){return new T(this.b)},oa(T,R),T.prototype.next=function(){return this.f.next()},n$1=nc.prototype,n$1.G=function(){return oc(this),this.j.concat()},n$1.has=function(e){return U(this.o,e)},n$1.clear=function(){this.o={},this.B=this.size=this.j.length=0},n$1.remove=function(e){return this.delete(e)},n$1.delete=function(e){return!!U(this.o,e)&&(delete this.o[e],--this.size,this.B++,this.j.length>2*this.size&&oc(this),!0)},n$1.get=function(e,t){return U(this.o,e)?this.o[e]:t},n$1.set=function(e,t){U(this.o,e)||(this.size+=1,this.j.push(e),this.B++),this.o[e]=t},n$1.addAll=function(e){if(e instanceof nc)for(var t=e.G(),r=0;r<t.length;r++)this.set(t[r],e.get(t[r]));else for(t in e)this.set(t,e[t])},n$1.forEach=function(e,t){for(var r=this.G(),o=0;o<r.length;o++){var i=r[o],s=this.get(i);e.call(t,s,i,this)}},n$1.clone=function(){return new nc(this)},n$1.keys=function(){return lc(this.u(!0)).c()},n$1.values=function(){return lc(this.u(!1)).c()},n$1.entries=function(){var e=this;return jc(this.keys(),(function(t){return[t,e.get(t)]}))},n$1.u=function(e){oc(this);var t=0,r=this.B,o=this,i=new Q;return i.a=function(){if(r!=o.B)throw Error("The map has changed since the iterator was created");if(t>=o.j.length)throw kc;var i=o.j[t++];return e?i:o.o[i]},i.next=i.a.bind(i),i};var pc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qc(e){N.call(this),this.headers=new nc,this.C=e||null,this.c=!1,this.J=this.a=null,this.P=this.v="",this.g=0,this.l="",this.i=this.N=this.s=this.L=!1,this.h=0,this.w=null,this.m=rc,this.I=this.M=!1}B(qc,N);var rc="";qc.prototype.b=$b(ac(),"goog.net.XhrIo",void 0).g;var sc=/^https?$/i,tc=["POST","PUT"];function uc(e,t,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.v+"; newUri="+t);e.v=t,e.l="",e.g=0,e.P="POST",e.L=!1,e.c=!0,e.a=hc(e.C?e.C:fc),e.J=dc(e.C?e.C:fc),e.a.onreadystatechange=A(e.R,e);try{P(e.b,V(e,"Opening Xhr")),e.N=!0,e.a.open("POST",String(t),!0),e.N=!1}catch(t){return P(e.b,V(e,"Error opening Xhr: "+t.message)),void vc(e,t)}t=r||"";var o=(r=e.headers.clone()).G().find((function(e){return"content-type"==e.toLowerCase()})),i=x.FormData&&t instanceof x.FormData;!(0<=Na(tc,"POST"))||o||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.M&&(e.a.withCredentials=e.M);try{wc(e),0<e.h&&(e.I=xc(e.a),P(e.b,V(e,"Will abort after "+e.h+"ms if incomplete, xhr2 "+e.I)),e.I?(e.a.timeout=e.h,e.a.ontimeout=A(e.T,e)):e.w=Lb(e.T,e.h,e)),P(e.b,V(e,"Sending request")),e.s=!0,e.a.send(t),e.s=!1}catch(t){P(e.b,V(e,"Send error: "+t.message)),vc(e,t)}}function xc(e){return ab&&jb()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function vc(e,t){e.c=!1,e.a&&(e.i=!0,e.a.abort(),e.i=!1),e.l=t,e.g=5,yc(e),zc(e)}function yc(e){e.L||(e.L=!0,O(e,"complete"),O(e,"error"))}function Ac(e){if(e.c&&void 0!==qa)if(e.J[1]&&4==W(e)&&2==e.getStatus())P(e.b,V(e,"Local request error detected and ignored"));else if(e.s&&4==W(e))Lb(e.R,0,e);else if(O(e,"readystatechange"),4==W(e)){P(e.b,V(e,"Request complete")),e.c=!1;try{var t,r=e.getStatus();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}if(!(t=o)){var i;if(i=0===r){var s=String(e.v).match(pc)[1]||null;if(!s&&x.self&&x.self.location){var n=x.self.location.protocol;s=n.substr(0,n.length-1)}i=!sc.test(s?s.toLowerCase():"")}t=i}if(t)O(e,"complete"),O(e,"success");else{e.g=6;try{var a=2<W(e)?e.a.statusText:""}catch(t){P(e.b,"Can not get status: "+t.message),a=""}e.l=a+" ["+e.getStatus()+"]",yc(e)}}finally{zc(e)}}}function zc(e){if(e.a){wc(e);var t=e.a,r=e.J[0]?ra:null;e.a=null,e.J=null,O(e,"ready");try{t.onreadystatechange=r}catch(t){(e=e.b)&&bc(e,Ob,"Problem encountered resetting onreadystatechange: "+t.message)}}}function wc(e){e.a&&e.I&&(e.a.ontimeout=null),e.w&&(Kb.clearTimeout(e.w),e.w=null)}function W(e){return e.a?e.a.readyState:0}function Bc(e){try{if(!e.a)return null;if("response"in e.a)return e.a.response;switch(e.m){case rc:case"text":return e.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.a)return e.a.mozResponseArrayBuffer}var t=e.b;return t&&bc(t,Ob,"Response type "+e.m+" is not supported on this browser"),null}catch(t){return P(e.b,"Can not get response: "+t.message),null}}function Cc(e,t){if(e.a&&4==W(e))return null===(e=e.a.getResponseHeader(t))?void 0:e}function Dc(e){var t={};e=(e.a&&4==W(e)&&e.a.getAllResponseHeaders()||"").split("\r\n");for(var r=0;r<e.length;r++)if(!/^[\s\xa0]*$/.test(e[r])){var o=Wa(e[r]),i=o[0];if("string"==typeof(o=o[1])){o=o.trim();var s=t[i]||[];t[i]=s,s.push(o)}}return Ta(t,(function(e){return e.join(", ")}))}function V(e,t){return t+" ["+e.P+" "+e.v+" "+e.getStatus()+"]"}n$1=qc.prototype,n$1.T=function(){void 0!==qa&&this.a&&(this.l="Timed out after "+this.h+"ms, aborting",this.g=8,P(this.b,V(this,this.l)),O(this,"timeout"),this.abort(8))},n$1.abort=function(e){this.a&&this.c&&(P(this.b,V(this,"Aborting")),this.c=!1,this.i=!0,this.a.abort(),this.i=!1,this.g=e||7,O(this,"complete"),O(this,"abort"),zc(this))},n$1.R=function(){this.K||(this.N||this.s||this.i?Ac(this):this.W())},n$1.W=function(){Ac(this)},n$1.getStatus=function(){try{return 2<W(this)?this.a.status:-1}catch(e){return-1}};var Ec={},Fc=null;function Gc(e){var t=e.length,r=3*t/4;r%3?r=Math.floor(r):H("=.",e[t-1])&&(r=H("=.",e[t-2])?r-2:r-1);var o=new Uint8Array(r),i=0;return Hc(e,(function(e){o[i++]=e})),o.subarray(0,i)}function Hc(e,t){function r(t){for(;o<e.length;){var r=e.charAt(o++),i=Fc[r];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(r))throw Error("Unknown base64 encoding at char: "+r)}return t}Ic();for(var o=0;;){var i=r(-1),s=r(0),n=r(64),a=r(64);if(64===a&&-1===i)break;t(i<<2|s>>4),64!=n&&(t(s<<4&240|n>>2),64!=a&&t(n<<6&192|a))}}function Ic(){if(!Fc){Fc={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var o=e.concat(t[r].split(""));Ec[r]=o;for(var i=0;i<o.length;i++){var s=o[i];void 0===Fc[s]&&(Fc[s]=i)}}}}var Jc=["content-type","grpc-status","grpc-message"];function X(e){this.a=e.Z,this.m=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.l=!1,this.i=0,this.s=new Fa;var t=this;yb(this.a,"readystatechange",(function(){var e=t.a;if(e=e.a?e.a.getResponseHeader("Content-Type"):null){if(0==(e=e.toLowerCase()).lastIndexOf("application/grpc-web-text",0)){e=t.a;try{var r=e.a?e.a.responseText:""}catch(t){P(e.b,"Can not get responseText: "+t.message),r=""}if(0==(e=(e=r||"").substr(t.i,(r=e.length-e.length%4)-t.i)).length)return;t.i=r,e=Gc(e)}else{if(0!=e.lastIndexOf("application/grpc",0))return void Y(t,new E(2,"Unknown Content-type received."));e=new Uint8Array(Bc(t.a))}r=null;try{r=Ha(t.s,e)}catch(e){Y(t,new E(2,"Error in parsing response body"))}if(r)for(e=0;e<r.length;e++){if(Ia in r[e]){var o=r[e][Ia];if(o){var i=!1,s=void 0;try{s=t.m(o),i=!0}catch(e){Y(t,new E(13,"Error when deserializing response data; error: "+e+", response: "+s))}if(i)for(o=s,i=0;i<t.b.length;i++)t.b[i](o)}}if(G in r[e]&&0<r[e][G].length){for(o="",i=0;i<r[e][G].length;i++)o+=String.fromCharCode(r[e][G][i]);for(o=o.trim().split("\r\n"),i={},s=0;s<o.length;s++){var n=o[s].indexOf(":");i[o[s].substring(0,n).trim()]=o[s].substring(n+1).trim()}o=i,i=0,s="","grpc-status"in o&&(i=Number(o["grpc-status"]),delete o["grpc-status"]),"grpc-message"in o&&(s=o["grpc-message"],delete o["grpc-message"]),Y(t,new E(i,s,o))}}}})),yb(this.a,"complete",(function(){var e=t.a.g,r=2,o="",i={},s=Dc(t.a);Object.keys(s).forEach((function(e){Jc.includes(e)||(i[e]=s[e])})),Kc(t,i);var n=-1;if(0!=e){switch(e){case 7:r=10;break;case 8:r=4;break;case 6:r=Aa(n=t.a.getStatus());break;default:r=14}10==r&&t.l||(o=Ca(e),-1!=n&&(o+=", http status code: "+n),Y(t,new E(r,o)))}else n=!1,"grpc-status"in s&&(r=Number(Cc(t.a,"grpc-status")),"grpc-message"in s&&(o=Cc(t.a,"grpc-message")),0!=r&&(Y(t,new E(r,o||"",s)),n=!0)),n||Lc(t)}))}function Mc(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Y(e,t){if(0!=t.code)for(var r=new E(t.code,decodeURIComponent(t.message||""),t.metadata),o=0;o<e.f.length;o++)e.f[o](r);for(t={code:t.code,details:decodeURIComponent(t.message||""),metadata:t.metadata},r=0;r<e.h.length;r++)e.h[r](t)}function Kc(e,t){for(var r=0;r<e.g.length;r++)e.g[r](t)}function Lc(e){for(var t=0;t<e.c.length;t++)e.c[t]()}function Nc(e){var t="";return Sa(e,(function(e,r){t+=r,t+=":",t+=e,t+="\r\n"})),t}function Z(e,t){this.a=(e=void 0===e?{}:e).format||y("format",e)||"text",this.g=e.aa||y("suppressCorsPreflight",e)||!1,this.f=e.withCredentials||y("withCredentials",e)||!1,this.b=e.$||y("streamInterceptors",e)||[],this.h=e.ba||y("unaryInterceptors",e)||[],this.c=t||null}function Pc(e,t,r){var o=t.getMethodDescriptor(),i=r+o.getName();(r=e.c?e.c:new qc).M=e.f;var s=new X({Z:r});s.m=o.b;var n=t.getMetadata();for(a in n)r.headers.set(a,n[a]);if("text"==e.a?(r.headers.set("Content-Type","application/grpc-web-text"),r.headers.set("Accept","application/grpc-web-text")):r.headers.set("Content-Type","application/grpc-web+proto"),r.headers.set("X-User-Agent","grpc-web-javascript/0.1"),r.headers.set("X-Grpc-Web","1"),r.headers.has("deadline")){var a=Number(r.headers.get("deadline"));a=Math.ceil(a-(new Date).getTime()),r.headers.delete("deadline"),1/0===a&&(a=0),0<a&&(r.headers.set("grpc-timeout",a+"m"),r.h=Math.max(0,Math.max(1e3,Math.ceil(1.1*a))))}if(e.g){a={};for(var l=ha((n=r.headers).keys()),c=l.next();!c.done;c=l.next())a[c=c.value]=n.get(c);r.headers.clear();e:{for(u in a){var u=!1;break e}u=!0}u||(a=Nc(a),"string"==typeof i?(u=encodeURIComponent("$httpHeaders"),(u+=a=null!=a?"="+encodeURIComponent(String(a)):"")&&(0>(a=i.indexOf("#"))&&(a=i.length),0>(n=i.indexOf("?"))||n>a?(n=a,l=""):l=i.substring(n+1,a),a=(i=[i.substr(0,n),l,i.substr(a)])[1],i[1]=u?a?a+"&"+u:u:a,i=i[0]+(i[1]?"?"+i[1]:"")+i[2])):i.a("$httpHeaders",a))}for(o=(t=(0,o.a)(t.getRequestMessage())).length,u=[0,0,0,0],a=new Uint8Array(5+o),n=3;0<=n;n--)u[n]=o%256,o>>>=8;if(a.set(new Uint8Array(u),1),a.set(t,5),t=a,"text"==e.a){var p;for(e=t,void 0===p&&(p=0),Ic(),p=Ec[p],t=Array(Math.floor(e.length/3)),o=p[64]||"",u=a=0;a<e.length-2;a+=3){var d=e[a+1];t[u++]=(n=p[(c=e[a])>>2])+(c=p[(3&c)<<4|d>>4])+(d=p[(15&d)<<2|(l=e[a+2])>>6])+(l=p[63&l])}switch(n=0,l=o,e.length-a){case 2:l=p[(15&(n=e[a+1]))<<2]||o;case 1:t[u]=p[(e=e[a])>>2]+p[(3&e)<<4|n>>4]+l+o}t=t.join("")}else"binary"==e.a&&(r.m="arraybuffer");return uc(r,i,t),s}function Qc(e,t,r){var o=!1,i=null,s=!1;e.on("data",(function(e){o=!0,i=e})),e.on("error",(function(e){0==e.code||s||(s=!0,t(e,null))})),e.on("status",(function(e){0==e.code||s?r&&t(null,null,e):(s=!0,t({code:e.code,message:e.details,metadata:e.metadata},null))})),r&&e.on("metadata",(function(e){t(null,null,null,e)})),e.on("end",(function(){s||(o?r?t(null,i,null,null,!0):t(null,i):t({code:2,message:"Incomplete response"})),r&&t(null,null)}))}function Oc(e,t){var r=e;return t.forEach((function(e){var t=r;r=function(r){return e.intercept(r,t)}})),r}X.prototype.on=function(e,t){return"data"==e?this.b.push(t):"status"==e?this.h.push(t):"metadata"==e?this.g.push(t):"end"==e?this.c.push(t):"error"==e&&this.f.push(t),this},X.prototype.removeListener=function(e,t){return"data"==e?Mc(this.b,t):"status"==e?Mc(this.h,t):"metadata"==e?Mc(this.g,t):"end"==e?Mc(this.c,t):"error"==e&&Mc(this.f,t),this},X.prototype.cancel=function(){this.l=!0,this.a.abort()},X.prototype.cancel=X.prototype.cancel,X.prototype.removeListener=X.prototype.removeListener,X.prototype.on=X.prototype.on,Z.prototype.X=function(e,t,r,o,i){var s=this,n=e.substr(0,e.length-o.name.length);return Qc(e=Oc((function(e){return Pc(s,e,n)}),this.b).call(this,za(o,t,r)),i,!1),new Ba(e)},Z.prototype.S=function(e,t,r,o){var i=this,s=e.substr(0,e.length-o.name.length);return Oc((function(e){return new Promise((function(t,r){var o,n,a;Qc(Pc(i,e,s),(function(i,s,l,c,u){i?r(i):u?a=s:l?n=l:c?o=c:(i=e.getMethodDescriptor(),t(new D(a,i,s=void 0===(s=o)?{}:s,void 0===n?null:n)))}),!0)}))}),this.h).call(this,za(o,t,r)).then((function(e){return e.getResponseMessage()}))},Z.prototype.unaryCall=function(e,t,r,o){return this.S(e,t,r,o)},Z.prototype.Y=function(e,t,r,o){var i=this,s=e.substr(0,e.length-o.name.length);return Oc((function(e){return Pc(i,e,s)}),this.b).call(this,za(o,t,r))},Z.prototype.serverStreaming=Z.prototype.Y,Z.prototype.unaryCall=Z.prototype.unaryCall,Z.prototype.thenableCall=Z.prototype.S,Z.prototype.rpcCall=Z.prototype.X,grpcWeb$8.CallOptions=xa,grpcWeb$8.MethodDescriptor=ya,grpcWeb$8.GrpcWebClientBase=Z,grpcWeb$8.RpcError=E,grpcWeb$8.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},grpcWeb$8.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming",BIDI_STREAMING:"bidi_streaming"},Kb="undefined"!=typeof globalThis&&globalThis||self;var cacheclient_pb$1={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var o=e.length,i=0;i<o;i++){var s=e[i];if(t.call(r,s,i,e))return{i:i,v:s}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==commonjsGlobal&&null!=commonjsGlobal?commonjsGlobal:e},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(e,t,r,o){if(t){for(r=$jscomp.global,e=e.split("."),o=0;o<e.length-1;o++){var i=e[o];i in r||(r[i]={}),r=r[i]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var o=e.length;0<o&&0<t;)if(r[--t]!=e[--o])return!1;return 0>=o}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith"),o=r.length,i=(e+="").length;t=Math.max(0,Math.min(0|t,r.length));for(var s=0;s<i&&t<o;)if(r[t++]!=e[s++])return!1;return s>=i}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(e,t,r){(e=e.split("."))[0]in(r=r||goog.global)||void 0===r.execScript||r.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||void 0===t?r=r[o]&&r[o]!==Object.prototype[o]?r[o]:r[o]={}:r[o]=t},goog.define=function(e,t){return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,o){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if("string"!=typeof o||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[o]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var o=goog.global.$jscomp;o||(goog.global.$jscomp=o={});var i=o.transpile;if(!i){var s=goog.basePath+goog.TRANSPILER,n=goog.loadFileSync_(s);if(n){if(function(){(0,eval)(n+"\n//# sourceURL="+s)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,i=(o=goog.global.$jscomp).transpile}}return i||(i=o.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),i(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,o),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},o=function(e){e=e.split("-");for(var t=[],o=0;o<e.length;o++)t.push(r(e[o]));return t.join("-")};return o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:o:function(e){return e},e=t?e+"-"+o(t):o(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,o){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},goog.defineClass=function(e,t){var r=t.constructor,o=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=o&&(o instanceof Function?o(r):goog.defineClass.applyProperties_(r,o)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&r&&Object.seal instanceof Function&&Object.seal(t),t};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return t;try{t=r.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var o in e)t.call(r,e[o],o,e)},goog.object.filter=function(e,t,r){var o,i={};for(o in e)t.call(r,e[o],o,e)&&(i[o]=e[o]);return i},goog.object.map=function(e,t,r){var o,i={};for(o in e)i[o]=t.call(r,e[o],o,e);return i},goog.object.some=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,r){for(var o in e)if(!t.call(r,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],o=0;for(t in e)r[o++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],o=0;for(t in e)r[o++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),o=r?t:arguments;for(r=r?0:1;r<o.length;r++){if(null==e)return;e=e[o[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return o},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,o,i=1;i<arguments.length;i++){for(r in o=arguments[i])e[r]=o[r];for(var s=0;s<goog.object.PROTOTYPE_FIELDS_.length;s++)r=goog.object.PROTOTYPE_FIELDS_[s],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},o=0;o<t;o+=2)r[arguments[o]]=arguments[o+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},o=0;o<t;o++)r[arguments[o]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var i=Object.getOwnPropertyNames(e),s=0;s<i.length;s++)o[i[s]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(e,t,r,o){var i="Assertion failed";if(r){i+=": "+r;var s=o}else e&&(i+=": "+e,s=t);throw Error(""+i,s||[])},jspb.asserts.assert=function(e,t,r){for(var o=[],i=2;i<arguments.length;++i)o[i-2]=arguments[i];return e||jspb.asserts.doAssertFailure("",null,t,o),e},jspb.asserts.assertString=function(e,t,r){for(var o=[],i=2;i<arguments.length;++i)o[i-2]=arguments[i];return"string"!=typeof e&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(e),e],t,o),e},jspb.asserts.assertArray=function(e,t,r){for(var o=[],i=2;i<arguments.length;++i)o[i-2]=arguments[i];return Array.isArray(e)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(e),e],t,o),e},jspb.asserts.fail=function(e,t){for(var r=[],o=1;o<arguments.length;++o)r[o-1]=arguments[o];throw Error("Failure"+(e?": "+e:""),r)},jspb.asserts.assertInstanceof=function(e,t,r,o){for(var i=[],s=3;s<arguments.length;++s)i[s-3]=arguments[s];return e instanceof t||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(t),jspb.asserts.getType(e)],r,i),e},jspb.asserts.getType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",o=(e=e.split("%s")).length-1,i=0;i<o;i++)r+=e[i]+(i<t.length?t[i]:"%s");return r+e[o]},goog.asserts.doAssertFailure_=function(e,t,r,o){var i="Assertion failed";if(r){i+=": "+r;var s=o}else e&&(i+=": "+e,s=t);e=new goog.asserts.AssertionError(""+i,s||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,r);for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var o=e.length,i="string"==typeof e?e.split(""):e,s=0;s<o;s++)s in i&&t.call(r,i[s],s,e)},goog.array.forEachRight=function(e,t,r){var o=e.length,i="string"==typeof e?e.split(""):e;for(--o;0<=o;--o)o in i&&t.call(r,i[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var o=e.length,i=[],s=0,n="string"==typeof e?e.split(""):e,a=0;a<o;a++)if(a in n){var l=n[a];t.call(r,l,a,e)&&(i[s++]=l)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var o=e.length,i=Array(o),s="string"==typeof e?e.split(""):e,n=0;n<o;n++)n in s&&(i[n]=t.call(r,s[n],n,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,o){var i=r;return goog.array.forEach(e,(function(r,s){i=t.call(o,i,r,s,e)})),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,o){var i=r;return goog.array.forEachRight(e,(function(r,s){i=t.call(o,i,r,s,e)})),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var o=e.length,i="string"==typeof e?e.split(""):e,s=0;s<o;s++)if(s in i&&t.call(r,i[s],s,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var o=e.length,i="string"==typeof e?e.split(""):e,s=0;s<o;s++)if(s in i&&!t.call(r,i[s],s,e))return!1;return!0},goog.array.count=function(e,t,r){var o=0;return goog.array.forEach(e,(function(e,i,s){t.call(r,e,i,s)&&++o}),r),o},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var o=e.length,i="string"==typeof e?e.split(""):e,s=0;s<o;s++)if(s in i&&t.call(r,i[s],s,e))return s;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var o=e.length,i="string"==typeof e?e.split(""):e;for(--o;0<=o;o--)if(o in i&&t.call(r,i[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var o;2==arguments.length||0>(o=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var o=0;return goog.array.forEachRight(e,(function(i,s){t.call(r,i,s,e)&&goog.array.removeAt(e,s)&&o++})),o},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),o=0;o<t;o++)r[o]=e[o];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(goog.isArrayLike(o)){var i=e.length||0,s=o.length||0;e.length=i+s;for(var n=0;n<s;n++)e[i+n]=o[n]}else e.push(o)}},goog.array.splice=function(e,t,r,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||o,o={};for(var i=0,s=0;s<e.length;){var n=e[s++],a=r(n);Object.prototype.hasOwnProperty.call(o,a)||(o[a]=!0,t[i++]=n)}t.length=i},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,o,i){for(var s,n=0,a=e.length;n<a;){var l=n+(a-n>>>1),c=r?t.call(i,e[l],l,e):t(o,e[l]);0<c?n=l+1:(a=l,s=!c)}return s?n:-n-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]={index:o,value:e[o]};var i=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return i(e.value,t.value)||e.index-t.index})),o=0;o<e.length;o++)e[o]=r[o].value},goog.array.sortByKey=function(e,t,r){var o=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return o(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var i=t(e[o-1],e[o]);if(0<i||0==i&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;r=r||goog.array.defaultCompareEquality;for(var i=0;i<o;i++)if(!r(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),i=0;i<o;i++){var s=r(e[i],t[i]);if(0!=s)return s}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var o={},i=0;i<e.length;i++){var s=e[i],n=t.call(r,s,i,e);void 0!==n&&(o[n]||(o[n]=[])).push(s)}return o},goog.array.toObject=function(e,t,r){var o={};return goog.array.forEach(e,(function(i,s){o[t.call(r,i,s,e)]=i})),o},goog.array.range=function(e,t,r){var o=[],i=0,s=e;if(void 0!==t&&(i=e,s=t),0>(r=r||1)*(s-i))return[];if(0<r)for(e=i;e<s;e+=r)o.push(e);else for(e=i;e>s;e+=r)o.push(e);return o},goog.array.repeat=function(e,t){for(var r=[],o=0;o<t;o++)r[o]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(Array.isArray(o))for(var i=0;i<o.length;i+=8192){var s=goog.array.slice(o,i,i+8192);s=goog.array.flatten.apply(null,s);for(var n=0;n<s.length;n++)t.push(s[n])}else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,o=1;o<arguments.length;o++)arguments[o].length<r&&(r=arguments[o].length);for(o=0;o<r;o++){for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s][o]);t.push(i)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var o=Math.floor(t()*(r+1)),i=e[r];e[r]=e[o],e[o]=i}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);255<i&&(t[r++]=255&i,i>>=8),t[r++]=i}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var o=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,o)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);128>i?t[r++]=i:(2048>i?t[r++]=i>>6|192:(55296==(64512&i)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++o)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,o=0;r<e.length;){var i=e[r++];if(128>i)t[o++]=String.fromCharCode(i);else if(191<i&&224>i){var s=e[r++];t[o++]=String.fromCharCode((31&i)<<6|63&s)}else if(239<i&&365>i){s=e[r++];var n=e[r++];i=((7&i)<<18|(63&s)<<12|(63&n)<<6|63&e[r++])-65536,t[o++]=String.fromCharCode(55296+(i>>10)),t[o++]=String.fromCharCode(56320+(1023&i))}else s=e[r++],n=e[r++],t[o++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&n)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],o=0;o<e.length;o++)r.push(e[o]^t[o]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,o=r.length;return function(){var e;o&&(e=r[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,o=0;o<r;o++)e=t[o].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var o=0;return function(i){goog.global.clearTimeout(o);var s=arguments;o=goog.global.setTimeout((function(){e.apply(r,s)}),t)}},goog.functions.throttle=function(e,t,r){var o=0,i=!1,s=[],n=function(){o=0,i&&(i=!1,a())},a=function(){o=goog.global.setTimeout(n,t),e.apply(r,s)};return function(e){s=arguments,o?i=!0:a()}},goog.functions.rateLimit=function(e,t,r){var o=0,i=function(){o=0};return function(s){o||(o=goog.global.setTimeout(i,t),e.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],o=1;o<arguments.length;o++)r.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var r=0;r<arguments.length;r++)t.append(arguments[r]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,r){var o=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==o){o=new o;for(var i=0;i<e.length;i++)o.append(e[i],r);return o.getBlob(t)}if(void 0!==goog.global.Blob)return o={},t&&(o.type=t),r&&(o.endings=r),new Blob(e,o);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\ud801\ud804-\ud839\ud83c-\udbff---",goog.i18n.bidi.rtlChars_="--\ud802-\ud803\ud83a-\ud83b--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,o=0,i=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var s=e[t];goog.i18n.bidi.startsWithRtl(s)?(r++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?i=!0:goog.i18n.bidi.hasAnyLtr(s)?o++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(i=!0)}return 0==o?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),o=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",o,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,o){if(!Object.prototype.hasOwnProperty.call(t,o))throw Error('Found marker, "'+o+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[o])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,o){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,o)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if("string"==typeof r)return r?e+encodeURIComponent(r):"";for(var o in r){var i=r[o];i=Array.isArray(i)?i:[i];for(var s=0;s<i.length;s++){var n=i[s];null!=n&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(o)+"="+encodeURIComponent(String(n)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var o=Math.max(e.length,t.length),i=0;0==r&&i<o;i++){var s=e[i]||"",n=t[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],0==s[0].length&&0==n[0].length)break;r=0==s[1].length?0:parseInt(s[1],10);var a=0==n[1].length?0:parseInt(n[1],10);r=goog.string.internal.compareElements_(r,a)||goog.string.internal.compareElements_(0==s[2].length,0==n[2].length)||goog.string.internal.compareElements_(s[2],n[2]),s=s[3],n=n[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(r+=t+":"+(o=Array.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,o=0;o<e.length;o++){var i=e.charAt(o);"'"==i&&r?t=!t:'"'==i&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,o=0;o<e.length;o++){var i=e.charAt(o);if("]"==i){if(t)return!1;t=!0}else if("["==i){if(!t)return!1;t=!1}else if(!t&&!r.test(i))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,o){var i="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return i=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+i+e+i+o}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],o=0;o<e.length;o++){var i=e[o];if(t[i])r.push(t[i]);else if(goog.object.contains(t,i)&&r.pop()!=i)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[];t=r.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,o),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var o=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,r,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var i={};return i.src=e||null,i.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(i,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,o){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var i={};return i.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,i.srcdoc=t||null,i.sandbox="",e=goog.html.SafeHtml.combineAttributes(i,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var o=r.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+o+'" attribute':"")}for(r="",e=goog.array.concat(e),o=0;o<e.length;o++)r+=goog.html.SafeScript.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var o=0;o<e.length;o++)r+=goog.html.SafeStyleSheet.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if("string"!=typeof r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert("string"==typeof r||"number"==typeof r,"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,o){return(t=goog.html.SafeHtml.create(t,r,o)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),o=[],i=function(e){Array.isArray(e)?goog.array.forEach(e,i):(e=goog.html.SafeHtml.htmlEscape(e),o.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var o=null,i="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==r?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),i+=">"):(o=goog.html.SafeHtml.concat(r),i+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(i,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+o+'".':"");var i=t[o];null!=i&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,i))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var o,i={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),i[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),i[o]=t[o];if(r)for(o in r){var s=o.toLowerCase();if(s in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+s+'" attribute, got "'+o+'" with value "'+r[o]+'"':"");s in t&&delete i[s],i[o]=r[o]}return i},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild)&&(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):goog.html.SafeUrl.unwrap(t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,r,o,i){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",t.open(goog.html.SafeUrl.unwrap(e),r,o,i)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),o="",i=Array.prototype.slice.call(arguments,1);i.length&&1<r.length;)o+=r.shift()+i.shift();return o+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(r),i=t.toLowerCase().match(r),s=Math.min(o.length,i.length),n=0;n<s;n++){var a=i[n];if((r=o[n])!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return o.length!=i.length?o.length-i.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var i=r[e];return i||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(i=String.fromCharCode(t))),i||(goog.dom.safe.setInnerHtml(o,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),i=o.firstChild.nodeValue.slice(0,-1)),r[e]=i)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,o=0;o<r;o++){var i=1==r?t:t.charAt(o);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,o){if(r&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){o>t&&(o=t);var i=e.length-o;e=e.substring(0,t-o)+"..."+e.substring(i)}else e.length>t&&(o=Math.floor(t/2),i=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(i));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var o=e.charAt(r),i=o.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[o]||(31<i&&127>i?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var o=e;return 0<=t&&t<e.length&&0<r&&(o=e.substr(0,t)+e.substr(t+r,e.length-t-r)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=void 0!==r?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var o=[];0<r&&e.length;)o.push(e.shift()),r--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,o=0;o<t.length;o++)if(""!=t[o]){var i=e.lastIndexOf(t[o]);i>r&&(r=i)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)r[i]=i;for(i=0;i<e.length;i++){o[0]=i+1;for(var s=0;s<t.length;s++)o[s+1]=Math.min(o[s]+1,r[s+1]+1,r[s]+Number(e[i]!=t[s]));for(s=0;s<r.length;s++)r[s]=o[s]}return o[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var e=goog.userAgent.getDocumentMode_();return e||(parseInt(goog.userAgent.VERSION,10)||void 0)}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],o=0;o<e.length;o+=3){var i=e[o],s=o+1<e.length,n=s?e[o+1]:0,a=o+2<e.length,l=a?e[o+2]:0,c=i>>2;i=(3&i)<<4|n>>4,n=(15&n)<<2|l>>6,l&=63,a||(l=64,s||(n=64)),r.push(t[c],t[i],t[n]||"",t[l]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var o=new Uint8Array(r),i=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){o[i++]=e})),o.subarray(0,i)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;o<e.length;){var r=e.charAt(o++),i=goog.crypt.base64.charToByteMap_[r];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var o=0;;){var i=r(-1),s=r(0),n=r(64),a=r(64);if(64===a&&-1===i)break;t(i<<2|s>>4),64!=n&&(t(s<<4&240|n>>2),64!=a&&t(n<<6&192|a))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var o=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=o;for(var i=0;i<o.length;i++){var s=o[i],n=goog.crypt.base64.charToByteMap_[s];void 0===n?goog.crypt.base64.charToByteMap_[s]=i:goog.asserts.assert(n===i)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);jspb.utils.split64High=(t<<31|(e=r/jspb.BinaryConstants.TWO_TO_32))>>>0,jspb.utils.split64Low=r>>>0}else{var o=0;if(2<=(r=e))for(;2<=r&&1023>o;)o++,r/=2;else for(;1>r&&-1022<o;)r*=2,o--;e=(r=e*Math.pow(2,-o))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|o+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2),i=e.charCodeAt(3),s=e.charCodeAt(4),n=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(o<<16)+(i<<24)>>>0,jspb.utils.split64High=s+(n<<8)+(a<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var o=t>>31;return r(e<<1^o,(t<<1|e>>>31)^o)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var o=-(1&e);return r((e>>>1|t<<31)^o,t>>>1^o)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,o=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==o?e?NaN:1/0*r:0==o?r*Math.pow(2,-1074)*e:r*Math.pow(2,o-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var o=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*o+6710656*(t=t>>16&65535),o+=8147497*t,t*=2,1e7<=e&&(o+=Math.floor(e/1e7),e%=1e7),1e7<=o&&(t+=Math.floor(o/1e7),o%=1e7),r(t,0)+r(o,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=jspb.utils.hash64ToDecimalString(e[o],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)o[r]=255&(t=e*o[r]+t),t>>>=8}jspb.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var o=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++)t(10,e.charCodeAt(i)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)o[e]=255&~o[e]}(),t(1,1)),goog.crypt.byteArrayToString(o)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var o=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(o>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&o)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),jspb.asserts.assert(18==e.length),jspb.asserts.assert("0"==e[0]),jspb.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),i=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*o+i)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var o=0,i=t;i<r;i++)o+=e[i]>>7;return r-t-o},jspb.utils.countVarintFields=function(e,t,r,o){var i=0;if(128>(o=8*o+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==o;)for(i++;;){var s=e[t++];if(0==(128&s))break}else for(;t<r;){for(s=o;128<s;){if(e[t]!=(127&s|128))return i;t++,s>>=7}if(e[t++]!=s)break;for(i++;0!=(128&(s=e[t++])););}return i},jspb.utils.countFixedFields_=function(e,t,r,o,i){var s=0;if(128>o)for(;t<r&&e[t++]==o;)s++,t+=i;else for(;t<r;){for(var n=o;128<n;){if(e[t++]!=(127&n|128))return s;n>>=7}if(e[t++]!=n)break;s++,t+=i}return s},jspb.utils.countFixed32Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,o){var i=0;for(o=8*o+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var s=o;128<s;){if(e[t++]!=(127&s|128))return i;s>>=7}if(e[t++]!=s)break;i++;for(var n=0,a=1;n+=(127&(s=e[t++]))*a,a*=128,0!=(128&s););t+=n}return i},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(255<o)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=o}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var o=jspb.BinaryDecoder.instanceCache_.pop();return e&&o.setBlock(e,t,r),o}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,o=0,i=0;4>i&&128<=t;i++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*i;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,o|=(127&t)>>4),128<=t)for(i=0;5>i&&128<=t;i++)o|=(127&(t=this.bytes_[this.cursor_++]))<<7*i+3;if(128>t)return e(r>>>0,o>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var o=0,i=0,s=r+7;s>=r;s--)o=o<<8|t[s],i=i<<8|t[s+4];return e(o,i)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|o<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|o<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var o=[],i="";r<e;){var s=t[r++];if(128>s)o.push(s);else{if(192>s)continue;if(224>s){var n=t[r++];o.push((31&s)<<6|63&n)}else if(240>s){n=t[r++];var a=t[r++];o.push((15&s)<<12|(63&n)<<6|63&a)}else if(248>s){s=(7&s)<<18|(63&(n=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++],o.push(55296+((s-=65536)>>10&1023),56320+(1023&s))}}8192<=o.length&&(i+=String.fromCharCode.apply(null,o),o.length=0)}return i+=goog.crypt.byteArrayToString(o),this.cursor_=r,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],o=e[t+1],i=e[t+2],s=e[t+3],n=e[t+4],a=e[t+5],l=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,o,i,s,n,a,l,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var o=jspb.BinaryReader.instanceCache_.pop();return e&&o.decoder_.setBlock(e,t,r),o}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return jspb.asserts.assert(null!==this.readCallbacks_),jspb.asserts.assert(e=this.readCallbacks_[e]),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o,this.decoder_.setEnd(o),t(e,this),this.decoder_.setCursor(o),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(e,t,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){jspb.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;jspb.asserts.assertString(e);for(var r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)this.buffer_.push(o);else if(2048>o)this.buffer_.push(o>>6|192),this.buffer_.push(63&o|128);else if(65536>o)if(55296<=o&&56319>=o&&r+1<e.length){var i=e.charCodeAt(r+1);56320<=i&&57343>=i&&(this.buffer_.push((o=1024*(o-55296)+i-56320+65536)>>18|240),this.buffer_.push(o>>12&63|128),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128),r++)}else this.buffer_.push(o>>12|224),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,o=65535&t,i=t>>>16;for(t=r*o+65536*(r*i&65535)+65536*((e>>>=16)*o&65535),r=e*i+(r*i>>>16)+(e*o>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var o=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),o=o.leftShift();for(;!o.zero();)0>=e.cmp(r)&&(t=t.add(o),r=r.sub(e)),e=e.rightShift(),o=o.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){e=(t=t.div(10))[1].lo+e,t=t[0]}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),o=0;o<e.length;o++){if("0">e[o]||"9"<e[o])return null;var i=parseInt(e[o],10);r.lo=i,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,jspb.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,o=0,i=0;i<r;i++){var s=t[i];e.set(s,o),o+=s.length}return t=this.encoder_.end(),e.set(t,o),jspb.asserts.assert((o+=t.length)==e.length),this.blocks_=[e],e},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){jspb.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var o=jspb.BinaryConstants.FieldType;switch(e){case o.DOUBLE:this.writeDouble(t,r);break;case o.FLOAT:this.writeFloat(t,r);break;case o.INT64:this.writeInt64(t,r);break;case o.UINT64:this.writeUint64(t,r);break;case o.INT32:this.writeInt32(t,r);break;case o.FIXED64:this.writeFixed64(t,r);break;case o.FIXED32:this.writeFixed32(t,r);break;case o.BOOL:this.writeBool(t,r);break;case o.STRING:this.writeString(t,r);break;case o.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case o.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case o.BYTES:this.writeBytes(t,r);break;case o.UINT32:this.writeUint32(t,r);break;case o.ENUM:this.writeEnum(t,r);break;case o.SFIXED32:this.writeSfixed32(t,r);break;case o.SFIXED64:this.writeSfixed64(t,r);break;case o.SINT32:this.writeSint32(t,r);break;case o.SINT64:this.writeSint64(t,r);break;case o.FHASH64:this.writeFixedHash64(t,r);break;case o.VHASH64:this.writeVarintHash64(t,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(jspb.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var o=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,o){if(null!=t)for(var i=0;i<t.length;i++)this.writeSplitFixed64(e,r(t[i]),o(t[i]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,o){if(null!=t)for(var i=0;i<t.length;i++)this.writeSplitVarint64(e,r(t[i]),o(t[i]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,o){if(null!=t)for(var i=0;i<t.length;i++)this.writeSplitZigzagVarint64(e,r(t[i]),o(t[i]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++){var i=this.beginDelimited_(e);r(t[o],this),this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[o],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var i=0;i<t.length;i++)this.encoder_.writeSplitFixed64(r(t[i]),o(t[i]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var i=0;i<t.length;i++)this.encoder_.writeSplitVarint64(r(t[i]),o(t[i]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var i=this.encoder_,s=0;s<t.length;s++)jspb.utils.toZigzag64(r(t[s]),o(t[s]),(function(e,t){i.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var o=this.map_[t[e]];(r=o.valueWrapper)&&r.toArray(),this.arr_.push([o.key,o.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),o=[],i=0;i<r.length;i++){var s=this.map_[r[i][0].toString()];this.wrapEntry_(s);var n=s.valueWrapper;n?(jspb.asserts.assert(t),o.push([s.key,t(e,n)])):o.push([s.key,s.value])}return o},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var o=0;o<e.length;o++){var i=e[o][0],s=r(e[o][1]);t.set(i,s)}return t},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,o.value])}return e},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,this.wrapEntry_(o)])}return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var o=0;o<r.length;o++){var i=this.map_[r[o]];e.call(t,this.wrapEntry_(i),i.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(e){return e.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(e,t,r,o,i){var s=this.stringKeys_();s.sort();for(var n=0;n<s.length;n++){var a=this.map_[s[n]];t.beginSubMessage(e),r.call(t,1,a.key),this.valueCtor_?o.call(t,2,this.wrapEntry_(a),i):o.call(t,2,a.value),t.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(e,t,r,o,i,s,n){for(;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?s=r.call(t):2==a&&(e.valueCtor_?(jspb.asserts.assert(i),n||(n=new e.valueCtor_),o.call(t,n,i)):n=o.call(t))}jspb.asserts.assert(null!=s),jspb.asserts.assert(null!=n),e.set(s,n)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,o,i){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=o,this.isRepeated=i},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(e,t,r,o,i,s){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=o,this.binaryMessageDeserializeFn=i,this.isPacked=s},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,o,i,s){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,o),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=i),i)for(t=0;t<i.length;t++)(r=i[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(s&&s.length)for(t=0;t<s.length;t++)jspb.Message.computeOneofCase(e,s[t])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,o=-1;if(r&&jspb.Message.isExtensionObject_(r=e.array[o=r-1]))return e.pivot_=jspb.Message.getFieldNumber_(e,o),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,o+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var o=[],i=0;i<e.length;i++)o[i]=t.call(e[i],r,e[i]);return o},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(e,t,r,o,i){for(var s in r){var n=r[s],a=o.call(e,n);if(null!=a){for(var l in n.fieldName)if(n.fieldName.hasOwnProperty(l))break;t[l]=n.toObjectFn?n.isRepeated?jspb.Message.toObjectList(a,n.toObjectFn,i):n.toObjectFn(i,a):a}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(e,t,r,o){for(var i in r){var s=r[i],n=s.fieldInfo;if(!s.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=o.call(e,n);if(null!=a)if(n.isMessageType()){if(!s.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");s.binaryWriterFn.call(t,n.fieldIndex,a,s.binaryMessageSerializeFn)}else s.binaryWriterFn.call(t,n.fieldIndex,a)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(e,t,r,o,i){var s=r[t.getFieldNumber()];if(s){if(r=s.fieldInfo,!s.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var n=new r.ctor;s.binaryReaderFn.call(t,n,s.binaryMessageDeserializeFn)}else n=s.binaryReaderFn.call(t);r.isRepeated&&!s.isPacked?(t=o.call(e,r))?t.push(n):i.call(e,r,[n]):i.call(e,r,n)}else t.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=+r[o];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=!!r[o];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var i=jspb.Message.getField(e,t);if(!i){if(r)return;jspb.Message.setField(e,t,i=[])}return e.wrappers_[t]=new jspb.Map(i,o)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(e,t,r){return jspb.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),r!==o?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=o?t.splice(o,0,r):t.push(r),e},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==o&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(e,t){for(var r,o,i=0;i<t.length;i++){var s=t[i],n=jspb.Message.getField(e,s);null!=n&&(r=s,o=n,jspb.Message.setField(e,s,void 0))}return r?(jspb.Message.setField(e,r,o),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var i=jspb.Message.getField(e,r);(o||i)&&(e.wrappers_[r]=new t(i))}return e.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var o=jspb.Message.getRepeatedField(e,r),i=[],s=0;s<o.length;s++)i[s]=new t(o[s]);e.wrappers_[r]=i}},jspb.Message.setWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(e,t,r,o){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var i=o?o.toArray():o;return e.wrappers_[t]=o,jspb.Message.setOneofField(e,t,r,i)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var o=[],i=0;i<r.length;i++)o[i]=r[i].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(e,t,r,o,i){jspb.Message.wrapRepeatedField_(e,o,t);var s=e.wrappers_[t];return s||(s=e.wrappers_[t]=[]),r=r||new o,e=jspb.Message.getRepeatedField(e,t),null!=i?(s.splice(i,0,r),e.splice(i,0,r.toArray())):(s.push(r),e.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(e,t,r,o){for(var i={},s=0;s<e.length;s++)i[t.call(e[s])]=r?r.call(e[s],o,e[s]):e[s];return i},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var o=[],i=0,s=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(o[0]=e.getJsPbMessageId(),i=1);i<s;i++)jspb.Message.compareFields(r[i],t[i])||(o[i]=t[i]);return new e.constructor(o)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,o={};for(r in e)o[r]=0;for(r in t)o[r]=0;for(r in o)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var o=void 0,i=void 0,s=Math.max(e.length,t.length);for(r=0;r<s;r++){var n=e[r],a=t[r];if(n&&n.constructor==Object&&(jspb.asserts.assert(void 0===o),jspb.asserts.assert(r===e.length-1),o=n,n=void 0),a&&a.constructor==Object&&(jspb.asserts.assert(void 0===i),jspb.asserts.assert(r===t.length-1),i=a,a=void 0),!jspb.Message.compareFields(n,a))return!1}return!o&&!i||jspb.Message.compareExtensions(o=o||{},i=i||{})}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),o=e.toArray(),i=r.length=0;i<o.length;i++)r[i]=o[i];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var o=e[r];null!=o&&(t[r]="object"==typeof o?jspb.Message.clone_(jspb.asserts.assert(o)):o)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(o=e[r])&&(t[r]="object"==typeof o?jspb.Message.clone_(jspb.asserts.assert(o)):o);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf),function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("ECacheResult",null,o),r.exportSymbol("_DeleteRequest",null,o),r.exportSymbol("_DeleteResponse",null,o),r.exportSymbol("_DictionaryDeleteRequest",null,o),r.exportSymbol("_DictionaryDeleteRequest.All",null,o),r.exportSymbol("_DictionaryDeleteRequest.DeleteCase",null,o),r.exportSymbol("_DictionaryDeleteRequest.Some",null,o),r.exportSymbol("_DictionaryDeleteResponse",null,o),r.exportSymbol("_DictionaryFetchRequest",null,o),r.exportSymbol("_DictionaryFetchResponse",null,o),r.exportSymbol("_DictionaryFetchResponse.DictionaryCase",null,o),r.exportSymbol("_DictionaryFetchResponse._Found",null,o),r.exportSymbol("_DictionaryFetchResponse._Missing",null,o),r.exportSymbol("_DictionaryFieldValuePair",null,o),r.exportSymbol("_DictionaryGetRequest",null,o),r.exportSymbol("_DictionaryGetResponse",null,o),r.exportSymbol("_DictionaryGetResponse.DictionaryCase",null,o),r.exportSymbol("_DictionaryGetResponse._DictionaryGetResponsePart",null,o),r.exportSymbol("_DictionaryGetResponse._Found",null,o),r.exportSymbol("_DictionaryGetResponse._Missing",null,o),r.exportSymbol("_DictionaryIncrementRequest",null,o),r.exportSymbol("_DictionaryIncrementResponse",null,o),r.exportSymbol("_DictionaryLengthRequest",null,o),r.exportSymbol("_DictionaryLengthResponse",null,o),r.exportSymbol("_DictionaryLengthResponse.DictionaryCase",null,o),r.exportSymbol("_DictionaryLengthResponse._Found",null,o),r.exportSymbol("_DictionaryLengthResponse._Missing",null,o),r.exportSymbol("_DictionarySetRequest",null,o),r.exportSymbol("_DictionarySetResponse",null,o),r.exportSymbol("_GetRequest",null,o),r.exportSymbol("_GetResponse",null,o),r.exportSymbol("_IncrementRequest",null,o),r.exportSymbol("_IncrementResponse",null,o),r.exportSymbol("_ItemGetTtlRequest",null,o),r.exportSymbol("_ItemGetTtlResponse",null,o),r.exportSymbol("_ItemGetTtlResponse.ResultCase",null,o),r.exportSymbol("_ItemGetTtlResponse._Found",null,o),r.exportSymbol("_ItemGetTtlResponse._Missing",null,o),r.exportSymbol("_ItemGetTypeRequest",null,o),r.exportSymbol("_ItemGetTypeResponse",null,o),r.exportSymbol("_ItemGetTypeResponse.ItemType",null,o),r.exportSymbol("_ItemGetTypeResponse.ResultCase",null,o),r.exportSymbol("_ItemGetTypeResponse._Found",null,o),r.exportSymbol("_ItemGetTypeResponse._Missing",null,o),r.exportSymbol("_KeysExistRequest",null,o),r.exportSymbol("_KeysExistResponse",null,o),r.exportSymbol("_ListConcatenateBackRequest",null,o),r.exportSymbol("_ListConcatenateBackResponse",null,o),r.exportSymbol("_ListConcatenateFrontRequest",null,o),r.exportSymbol("_ListConcatenateFrontResponse",null,o),r.exportSymbol("_ListEraseRequest",null,o),r.exportSymbol("_ListEraseRequest.EraseCase",null,o),r.exportSymbol("_ListEraseRequest._All",null,o),r.exportSymbol("_ListEraseRequest._ListRanges",null,o),r.exportSymbol("_ListEraseResponse",null,o),r.exportSymbol("_ListEraseResponse.ListCase",null,o),r.exportSymbol("_ListEraseResponse._Found",null,o),r.exportSymbol("_ListEraseResponse._Missing",null,o),r.exportSymbol("_ListFetchRequest",null,o),r.exportSymbol("_ListFetchRequest.EndIndexCase",null,o),r.exportSymbol("_ListFetchRequest.StartIndexCase",null,o),r.exportSymbol("_ListFetchResponse",null,o),r.exportSymbol("_ListFetchResponse.ListCase",null,o),r.exportSymbol("_ListFetchResponse._Found",null,o),r.exportSymbol("_ListFetchResponse._Missing",null,o),r.exportSymbol("_ListLengthRequest",null,o),r.exportSymbol("_ListLengthResponse",null,o),r.exportSymbol("_ListLengthResponse.ListCase",null,o),r.exportSymbol("_ListLengthResponse._Found",null,o),r.exportSymbol("_ListLengthResponse._Missing",null,o),r.exportSymbol("_ListPopBackRequest",null,o),r.exportSymbol("_ListPopBackResponse",null,o),r.exportSymbol("_ListPopBackResponse.ListCase",null,o),r.exportSymbol("_ListPopBackResponse._Found",null,o),r.exportSymbol("_ListPopBackResponse._Missing",null,o),r.exportSymbol("_ListPopFrontRequest",null,o),r.exportSymbol("_ListPopFrontResponse",null,o),r.exportSymbol("_ListPopFrontResponse.ListCase",null,o),r.exportSymbol("_ListPopFrontResponse._Found",null,o),r.exportSymbol("_ListPopFrontResponse._Missing",null,o),r.exportSymbol("_ListPushBackRequest",null,o),r.exportSymbol("_ListPushBackResponse",null,o),r.exportSymbol("_ListPushFrontRequest",null,o),r.exportSymbol("_ListPushFrontResponse",null,o),r.exportSymbol("_ListRange",null,o),r.exportSymbol("_ListRemoveRequest",null,o),r.exportSymbol("_ListRemoveRequest.RemoveCase",null,o),r.exportSymbol("_ListRemoveResponse",null,o),r.exportSymbol("_ListRemoveResponse.ListCase",null,o),r.exportSymbol("_ListRemoveResponse._Found",null,o),r.exportSymbol("_ListRemoveResponse._Missing",null,o),r.exportSymbol("_ListRetainRequest",null,o),r.exportSymbol("_ListRetainRequest.EndIndexCase",null,o),r.exportSymbol("_ListRetainRequest.StartIndexCase",null,o),r.exportSymbol("_ListRetainResponse",null,o),r.exportSymbol("_ListRetainResponse.ListCase",null,o),r.exportSymbol("_ListRetainResponse._Found",null,o),r.exportSymbol("_ListRetainResponse._Missing",null,o),r.exportSymbol("_SetContainsRequest",null,o),r.exportSymbol("_SetContainsResponse",null,o),r.exportSymbol("_SetContainsResponse.SetCase",null,o),r.exportSymbol("_SetContainsResponse._Found",null,o),r.exportSymbol("_SetContainsResponse._Missing",null,o),r.exportSymbol("_SetDifferenceRequest",null,o),r.exportSymbol("_SetDifferenceRequest.DifferenceCase",null,o),r.exportSymbol("_SetDifferenceRequest._Minuend",null,o),r.exportSymbol("_SetDifferenceRequest._Subtrahend",null,o),r.exportSymbol("_SetDifferenceRequest._Subtrahend.SubtrahendSetCase",null,o),r.exportSymbol("_SetDifferenceRequest._Subtrahend._Identity",null,o),r.exportSymbol("_SetDifferenceRequest._Subtrahend._Set",null,o),r.exportSymbol("_SetDifferenceResponse",null,o),r.exportSymbol("_SetDifferenceResponse.SetCase",null,o),r.exportSymbol("_SetDifferenceResponse._Found",null,o),r.exportSymbol("_SetDifferenceResponse._Missing",null,o),r.exportSymbol("_SetFetchRequest",null,o),r.exportSymbol("_SetFetchResponse",null,o),r.exportSymbol("_SetFetchResponse.SetCase",null,o),r.exportSymbol("_SetFetchResponse._Found",null,o),r.exportSymbol("_SetFetchResponse._Missing",null,o),r.exportSymbol("_SetIfNotExistsRequest",null,o),r.exportSymbol("_SetIfNotExistsResponse",null,o),r.exportSymbol("_SetIfNotExistsResponse.ResultCase",null,o),r.exportSymbol("_SetIfNotExistsResponse._NotStored",null,o),r.exportSymbol("_SetIfNotExistsResponse._Stored",null,o),r.exportSymbol("_SetLengthRequest",null,o),r.exportSymbol("_SetLengthResponse",null,o),r.exportSymbol("_SetLengthResponse.SetCase",null,o),r.exportSymbol("_SetLengthResponse._Found",null,o),r.exportSymbol("_SetLengthResponse._Missing",null,o),r.exportSymbol("_SetPopRequest",null,o),r.exportSymbol("_SetPopResponse",null,o),r.exportSymbol("_SetPopResponse.SetCase",null,o),r.exportSymbol("_SetPopResponse._Found",null,o),r.exportSymbol("_SetPopResponse._Missing",null,o),r.exportSymbol("_SetRequest",null,o),r.exportSymbol("_SetResponse",null,o),r.exportSymbol("_SetUnionRequest",null,o),r.exportSymbol("_SetUnionResponse",null,o),r.exportSymbol("_SortedSetElement",null,o),r.exportSymbol("_SortedSetFetchRequest",null,o),r.exportSymbol("_SortedSetFetchRequest.Order",null,o),r.exportSymbol("_SortedSetFetchRequest.RangeCase",null,o),r.exportSymbol("_SortedSetFetchRequest._ByIndex",null,o),r.exportSymbol("_SortedSetFetchRequest._ByIndex.EndCase",null,o),r.exportSymbol("_SortedSetFetchRequest._ByIndex.StartCase",null,o),r.exportSymbol("_SortedSetFetchRequest._ByScore",null,o),r.exportSymbol("_SortedSetFetchRequest._ByScore.MaxCase",null,o),r.exportSymbol("_SortedSetFetchRequest._ByScore.MinCase",null,o),r.exportSymbol("_SortedSetFetchRequest._ByScore._Score",null,o),r.exportSymbol("_SortedSetFetchResponse",null,o),r.exportSymbol("_SortedSetFetchResponse.SortedSetCase",null,o),r.exportSymbol("_SortedSetFetchResponse._Found",null,o),r.exportSymbol("_SortedSetFetchResponse._Found.ElementsCase",null,o),r.exportSymbol("_SortedSetFetchResponse._Found._Values",null,o),r.exportSymbol("_SortedSetFetchResponse._Found._ValuesWithScores",null,o),r.exportSymbol("_SortedSetFetchResponse._Missing",null,o),r.exportSymbol("_SortedSetGetRankRequest",null,o),r.exportSymbol("_SortedSetGetRankRequest.Order",null,o),r.exportSymbol("_SortedSetGetRankResponse",null,o),r.exportSymbol("_SortedSetGetRankResponse.RankCase",null,o),r.exportSymbol("_SortedSetGetRankResponse._RankResponsePart",null,o),r.exportSymbol("_SortedSetGetRankResponse._SortedSetMissing",null,o),r.exportSymbol("_SortedSetGetScoreRequest",null,o),r.exportSymbol("_SortedSetGetScoreResponse",null,o),r.exportSymbol("_SortedSetGetScoreResponse.SortedSetCase",null,o),r.exportSymbol("_SortedSetGetScoreResponse._SortedSetFound",null,o),r.exportSymbol("_SortedSetGetScoreResponse._SortedSetGetScoreResponsePart",null,o),r.exportSymbol("_SortedSetGetScoreResponse._SortedSetMissing",null,o),r.exportSymbol("_SortedSetIncrementRequest",null,o),r.exportSymbol("_SortedSetIncrementResponse",null,o),r.exportSymbol("_SortedSetLengthByScoreRequest",null,o),r.exportSymbol("_SortedSetLengthByScoreRequest.MaxCase",null,o),r.exportSymbol("_SortedSetLengthByScoreRequest.MinCase",null,o),r.exportSymbol("_SortedSetLengthByScoreResponse",null,o),r.exportSymbol("_SortedSetLengthByScoreResponse.SortedSetCase",null,o),r.exportSymbol("_SortedSetLengthByScoreResponse._Found",null,o),r.exportSymbol("_SortedSetLengthByScoreResponse._Missing",null,o),r.exportSymbol("_SortedSetLengthRequest",null,o),r.exportSymbol("_SortedSetLengthResponse",null,o),r.exportSymbol("_SortedSetLengthResponse.SortedSetCase",null,o),r.exportSymbol("_SortedSetLengthResponse._Found",null,o),r.exportSymbol("_SortedSetLengthResponse._Missing",null,o),r.exportSymbol("_SortedSetPutRequest",null,o),r.exportSymbol("_SortedSetPutResponse",null,o),r.exportSymbol("_SortedSetRemoveRequest",null,o),r.exportSymbol("_SortedSetRemoveRequest.RemoveElementsCase",null,o),r.exportSymbol("_SortedSetRemoveRequest._All",null,o),r.exportSymbol("_SortedSetRemoveRequest._Some",null,o),r.exportSymbol("_SortedSetRemoveResponse",null,o),r.exportSymbol("_Unbounded",null,o),r.exportSymbol("_UpdateTtlRequest",null,o),r.exportSymbol("_UpdateTtlRequest.UpdateTtlCase",null,o),r.exportSymbol("_UpdateTtlResponse",null,o),r.exportSymbol("_UpdateTtlResponse.ResultCase",null,o),r.exportSymbol("_UpdateTtlResponse._Missing",null,o),r.exportSymbol("_UpdateTtlResponse._NotSet",null,o),r.exportSymbol("_UpdateTtlResponse._Set",null,o),o._GetRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GetRequest.displayName="proto._GetRequest"),o._GetResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GetResponse.displayName="proto._GetResponse"),o._DeleteRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteRequest.displayName="proto._DeleteRequest"),o._DeleteResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteResponse.displayName="proto._DeleteResponse"),o._SetRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetRequest.displayName="proto._SetRequest"),o._SetResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetResponse.displayName="proto._SetResponse"),o._SetIfNotExistsRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetIfNotExistsRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetIfNotExistsRequest.displayName="proto._SetIfNotExistsRequest"),o._SetIfNotExistsResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetIfNotExistsResponse.oneofGroups_)},r.inherits(o._SetIfNotExistsResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetIfNotExistsResponse.displayName="proto._SetIfNotExistsResponse"),o._SetIfNotExistsResponse._Stored=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetIfNotExistsResponse._Stored,t.Message),r.DEBUG&&!COMPILED&&(o._SetIfNotExistsResponse._Stored.displayName="proto._SetIfNotExistsResponse._Stored"),o._SetIfNotExistsResponse._NotStored=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetIfNotExistsResponse._NotStored,t.Message),r.DEBUG&&!COMPILED&&(o._SetIfNotExistsResponse._NotStored.displayName="proto._SetIfNotExistsResponse._NotStored"),o._KeysExistRequest=function(e){t.Message.initialize(this,e,0,-1,o._KeysExistRequest.repeatedFields_,null)},r.inherits(o._KeysExistRequest,t.Message),r.DEBUG&&!COMPILED&&(o._KeysExistRequest.displayName="proto._KeysExistRequest"),o._KeysExistResponse=function(e){t.Message.initialize(this,e,0,-1,o._KeysExistResponse.repeatedFields_,null)},r.inherits(o._KeysExistResponse,t.Message),r.DEBUG&&!COMPILED&&(o._KeysExistResponse.displayName="proto._KeysExistResponse"),o._IncrementRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._IncrementRequest,t.Message),r.DEBUG&&!COMPILED&&(o._IncrementRequest.displayName="proto._IncrementRequest"),o._IncrementResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._IncrementResponse,t.Message),r.DEBUG&&!COMPILED&&(o._IncrementResponse.displayName="proto._IncrementResponse"),o._UpdateTtlRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._UpdateTtlRequest.oneofGroups_)},r.inherits(o._UpdateTtlRequest,t.Message),r.DEBUG&&!COMPILED&&(o._UpdateTtlRequest.displayName="proto._UpdateTtlRequest"),o._UpdateTtlResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._UpdateTtlResponse.oneofGroups_)},r.inherits(o._UpdateTtlResponse,t.Message),r.DEBUG&&!COMPILED&&(o._UpdateTtlResponse.displayName="proto._UpdateTtlResponse"),o._UpdateTtlResponse._Set=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._UpdateTtlResponse._Set,t.Message),r.DEBUG&&!COMPILED&&(o._UpdateTtlResponse._Set.displayName="proto._UpdateTtlResponse._Set"),o._UpdateTtlResponse._NotSet=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._UpdateTtlResponse._NotSet,t.Message),r.DEBUG&&!COMPILED&&(o._UpdateTtlResponse._NotSet.displayName="proto._UpdateTtlResponse._NotSet"),o._UpdateTtlResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._UpdateTtlResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._UpdateTtlResponse._Missing.displayName="proto._UpdateTtlResponse._Missing"),o._ItemGetTtlRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTtlRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTtlRequest.displayName="proto._ItemGetTtlRequest"),o._ItemGetTtlResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ItemGetTtlResponse.oneofGroups_)},r.inherits(o._ItemGetTtlResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTtlResponse.displayName="proto._ItemGetTtlResponse"),o._ItemGetTtlResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTtlResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTtlResponse._Found.displayName="proto._ItemGetTtlResponse._Found"),o._ItemGetTtlResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTtlResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTtlResponse._Missing.displayName="proto._ItemGetTtlResponse._Missing"),o._ItemGetTypeRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTypeRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTypeRequest.displayName="proto._ItemGetTypeRequest"),o._ItemGetTypeResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ItemGetTypeResponse.oneofGroups_)},r.inherits(o._ItemGetTypeResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTypeResponse.displayName="proto._ItemGetTypeResponse"),o._ItemGetTypeResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTypeResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTypeResponse._Found.displayName="proto._ItemGetTypeResponse._Found"),o._ItemGetTypeResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ItemGetTypeResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ItemGetTypeResponse._Missing.displayName="proto._ItemGetTypeResponse._Missing"),o._DictionaryGetRequest=function(e){t.Message.initialize(this,e,0,-1,o._DictionaryGetRequest.repeatedFields_,null)},r.inherits(o._DictionaryGetRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryGetRequest.displayName="proto._DictionaryGetRequest"),o._DictionaryGetResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._DictionaryGetResponse.oneofGroups_)},r.inherits(o._DictionaryGetResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryGetResponse.displayName="proto._DictionaryGetResponse"),o._DictionaryGetResponse._DictionaryGetResponsePart=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryGetResponse._DictionaryGetResponsePart,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryGetResponse._DictionaryGetResponsePart.displayName="proto._DictionaryGetResponse._DictionaryGetResponsePart"),o._DictionaryGetResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._DictionaryGetResponse._Found.repeatedFields_,null)},r.inherits(o._DictionaryGetResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryGetResponse._Found.displayName="proto._DictionaryGetResponse._Found"),o._DictionaryGetResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryGetResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryGetResponse._Missing.displayName="proto._DictionaryGetResponse._Missing"),o._DictionaryFetchRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryFetchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryFetchRequest.displayName="proto._DictionaryFetchRequest"),o._DictionaryFieldValuePair=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryFieldValuePair,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryFieldValuePair.displayName="proto._DictionaryFieldValuePair"),o._DictionaryFetchResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._DictionaryFetchResponse.oneofGroups_)},r.inherits(o._DictionaryFetchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryFetchResponse.displayName="proto._DictionaryFetchResponse"),o._DictionaryFetchResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._DictionaryFetchResponse._Found.repeatedFields_,null)},r.inherits(o._DictionaryFetchResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryFetchResponse._Found.displayName="proto._DictionaryFetchResponse._Found"),o._DictionaryFetchResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryFetchResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryFetchResponse._Missing.displayName="proto._DictionaryFetchResponse._Missing"),o._DictionarySetRequest=function(e){t.Message.initialize(this,e,0,-1,o._DictionarySetRequest.repeatedFields_,null)},r.inherits(o._DictionarySetRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionarySetRequest.displayName="proto._DictionarySetRequest"),o._DictionarySetResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionarySetResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionarySetResponse.displayName="proto._DictionarySetResponse"),o._DictionaryIncrementRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryIncrementRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryIncrementRequest.displayName="proto._DictionaryIncrementRequest"),o._DictionaryIncrementResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryIncrementResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryIncrementResponse.displayName="proto._DictionaryIncrementResponse"),o._DictionaryDeleteRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._DictionaryDeleteRequest.oneofGroups_)},r.inherits(o._DictionaryDeleteRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryDeleteRequest.displayName="proto._DictionaryDeleteRequest"),o._DictionaryDeleteRequest.Some=function(e){t.Message.initialize(this,e,0,-1,o._DictionaryDeleteRequest.Some.repeatedFields_,null)},r.inherits(o._DictionaryDeleteRequest.Some,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryDeleteRequest.Some.displayName="proto._DictionaryDeleteRequest.Some"),o._DictionaryDeleteRequest.All=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryDeleteRequest.All,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryDeleteRequest.All.displayName="proto._DictionaryDeleteRequest.All"),o._DictionaryDeleteResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryDeleteResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryDeleteResponse.displayName="proto._DictionaryDeleteResponse"),o._DictionaryLengthRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryLengthRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryLengthRequest.displayName="proto._DictionaryLengthRequest"),o._DictionaryLengthResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._DictionaryLengthResponse.oneofGroups_)},r.inherits(o._DictionaryLengthResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryLengthResponse.displayName="proto._DictionaryLengthResponse"),o._DictionaryLengthResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryLengthResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryLengthResponse._Found.displayName="proto._DictionaryLengthResponse._Found"),o._DictionaryLengthResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DictionaryLengthResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._DictionaryLengthResponse._Missing.displayName="proto._DictionaryLengthResponse._Missing"),o._SetFetchRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetFetchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetFetchRequest.displayName="proto._SetFetchRequest"),o._SetFetchResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetFetchResponse.oneofGroups_)},r.inherits(o._SetFetchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetFetchResponse.displayName="proto._SetFetchResponse"),o._SetFetchResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._SetFetchResponse._Found.repeatedFields_,null)},r.inherits(o._SetFetchResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SetFetchResponse._Found.displayName="proto._SetFetchResponse._Found"),o._SetFetchResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetFetchResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SetFetchResponse._Missing.displayName="proto._SetFetchResponse._Missing"),o._SetUnionRequest=function(e){t.Message.initialize(this,e,0,-1,o._SetUnionRequest.repeatedFields_,null)},r.inherits(o._SetUnionRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetUnionRequest.displayName="proto._SetUnionRequest"),o._SetUnionResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetUnionResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetUnionResponse.displayName="proto._SetUnionResponse"),o._SetDifferenceRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._SetDifferenceRequest.oneofGroups_)},r.inherits(o._SetDifferenceRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceRequest.displayName="proto._SetDifferenceRequest"),o._SetDifferenceRequest._Minuend=function(e){t.Message.initialize(this,e,0,-1,o._SetDifferenceRequest._Minuend.repeatedFields_,null)},r.inherits(o._SetDifferenceRequest._Minuend,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceRequest._Minuend.displayName="proto._SetDifferenceRequest._Minuend"),o._SetDifferenceRequest._Subtrahend=function(e){t.Message.initialize(this,e,0,-1,null,o._SetDifferenceRequest._Subtrahend.oneofGroups_)},r.inherits(o._SetDifferenceRequest._Subtrahend,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceRequest._Subtrahend.displayName="proto._SetDifferenceRequest._Subtrahend"),o._SetDifferenceRequest._Subtrahend._Set=function(e){t.Message.initialize(this,e,0,-1,o._SetDifferenceRequest._Subtrahend._Set.repeatedFields_,null)},r.inherits(o._SetDifferenceRequest._Subtrahend._Set,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceRequest._Subtrahend._Set.displayName="proto._SetDifferenceRequest._Subtrahend._Set"),o._SetDifferenceRequest._Subtrahend._Identity=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetDifferenceRequest._Subtrahend._Identity,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceRequest._Subtrahend._Identity.displayName="proto._SetDifferenceRequest._Subtrahend._Identity"),o._SetDifferenceResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetDifferenceResponse.oneofGroups_)},r.inherits(o._SetDifferenceResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceResponse.displayName="proto._SetDifferenceResponse"),o._SetDifferenceResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetDifferenceResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceResponse._Found.displayName="proto._SetDifferenceResponse._Found"),o._SetDifferenceResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetDifferenceResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SetDifferenceResponse._Missing.displayName="proto._SetDifferenceResponse._Missing"),o._SetContainsRequest=function(e){t.Message.initialize(this,e,0,-1,o._SetContainsRequest.repeatedFields_,null)},r.inherits(o._SetContainsRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetContainsRequest.displayName="proto._SetContainsRequest"),o._SetContainsResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetContainsResponse.oneofGroups_)},r.inherits(o._SetContainsResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetContainsResponse.displayName="proto._SetContainsResponse"),o._SetContainsResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._SetContainsResponse._Found.repeatedFields_,null)},r.inherits(o._SetContainsResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SetContainsResponse._Found.displayName="proto._SetContainsResponse._Found"),o._SetContainsResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetContainsResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SetContainsResponse._Missing.displayName="proto._SetContainsResponse._Missing"),o._SetLengthRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetLengthRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetLengthRequest.displayName="proto._SetLengthRequest"),o._SetLengthResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetLengthResponse.oneofGroups_)},r.inherits(o._SetLengthResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetLengthResponse.displayName="proto._SetLengthResponse"),o._SetLengthResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetLengthResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SetLengthResponse._Found.displayName="proto._SetLengthResponse._Found"),o._SetLengthResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetLengthResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SetLengthResponse._Missing.displayName="proto._SetLengthResponse._Missing"),o._SetPopRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetPopRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SetPopRequest.displayName="proto._SetPopRequest"),o._SetPopResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SetPopResponse.oneofGroups_)},r.inherits(o._SetPopResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SetPopResponse.displayName="proto._SetPopResponse"),o._SetPopResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._SetPopResponse._Found.repeatedFields_,null)},r.inherits(o._SetPopResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SetPopResponse._Found.displayName="proto._SetPopResponse._Found"),o._SetPopResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SetPopResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SetPopResponse._Missing.displayName="proto._SetPopResponse._Missing"),o._ListConcatenateFrontRequest=function(e){t.Message.initialize(this,e,0,-1,o._ListConcatenateFrontRequest.repeatedFields_,null)},r.inherits(o._ListConcatenateFrontRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListConcatenateFrontRequest.displayName="proto._ListConcatenateFrontRequest"),o._ListConcatenateFrontResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListConcatenateFrontResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListConcatenateFrontResponse.displayName="proto._ListConcatenateFrontResponse"),o._ListConcatenateBackRequest=function(e){t.Message.initialize(this,e,0,-1,o._ListConcatenateBackRequest.repeatedFields_,null)},r.inherits(o._ListConcatenateBackRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListConcatenateBackRequest.displayName="proto._ListConcatenateBackRequest"),o._ListConcatenateBackResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListConcatenateBackResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListConcatenateBackResponse.displayName="proto._ListConcatenateBackResponse"),o._ListPushFrontRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPushFrontRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListPushFrontRequest.displayName="proto._ListPushFrontRequest"),o._ListPushFrontResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPushFrontResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListPushFrontResponse.displayName="proto._ListPushFrontResponse"),o._ListPushBackRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPushBackRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListPushBackRequest.displayName="proto._ListPushBackRequest"),o._ListPushBackResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPushBackResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListPushBackResponse.displayName="proto._ListPushBackResponse"),o._ListPopFrontRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopFrontRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopFrontRequest.displayName="proto._ListPopFrontRequest"),o._ListPopFrontResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListPopFrontResponse.oneofGroups_)},r.inherits(o._ListPopFrontResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopFrontResponse.displayName="proto._ListPopFrontResponse"),o._ListPopFrontResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopFrontResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopFrontResponse._Found.displayName="proto._ListPopFrontResponse._Found"),o._ListPopFrontResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopFrontResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopFrontResponse._Missing.displayName="proto._ListPopFrontResponse._Missing"),o._ListPopBackRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopBackRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopBackRequest.displayName="proto._ListPopBackRequest"),o._ListPopBackResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListPopBackResponse.oneofGroups_)},r.inherits(o._ListPopBackResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopBackResponse.displayName="proto._ListPopBackResponse"),o._ListPopBackResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopBackResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopBackResponse._Found.displayName="proto._ListPopBackResponse._Found"),o._ListPopBackResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListPopBackResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListPopBackResponse._Missing.displayName="proto._ListPopBackResponse._Missing"),o._ListRange=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListRange,t.Message),r.DEBUG&&!COMPILED&&(o._ListRange.displayName="proto._ListRange"),o._ListEraseRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._ListEraseRequest.oneofGroups_)},r.inherits(o._ListEraseRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseRequest.displayName="proto._ListEraseRequest"),o._ListEraseRequest._All=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListEraseRequest._All,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseRequest._All.displayName="proto._ListEraseRequest._All"),o._ListEraseRequest._ListRanges=function(e){t.Message.initialize(this,e,0,-1,o._ListEraseRequest._ListRanges.repeatedFields_,null)},r.inherits(o._ListEraseRequest._ListRanges,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseRequest._ListRanges.displayName="proto._ListEraseRequest._ListRanges"),o._ListEraseResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListEraseResponse.oneofGroups_)},r.inherits(o._ListEraseResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseResponse.displayName="proto._ListEraseResponse"),o._ListEraseResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListEraseResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseResponse._Found.displayName="proto._ListEraseResponse._Found"),o._ListEraseResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListEraseResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListEraseResponse._Missing.displayName="proto._ListEraseResponse._Missing"),o._ListRemoveRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._ListRemoveRequest.oneofGroups_)},r.inherits(o._ListRemoveRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListRemoveRequest.displayName="proto._ListRemoveRequest"),o._ListRemoveResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListRemoveResponse.oneofGroups_)},r.inherits(o._ListRemoveResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListRemoveResponse.displayName="proto._ListRemoveResponse"),o._ListRemoveResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListRemoveResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListRemoveResponse._Found.displayName="proto._ListRemoveResponse._Found"),o._ListRemoveResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListRemoveResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListRemoveResponse._Missing.displayName="proto._ListRemoveResponse._Missing"),o._Unbounded=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Unbounded,t.Message),r.DEBUG&&!COMPILED&&(o._Unbounded.displayName="proto._Unbounded"),o._ListFetchRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._ListFetchRequest.oneofGroups_)},r.inherits(o._ListFetchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListFetchRequest.displayName="proto._ListFetchRequest"),o._ListRetainRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._ListRetainRequest.oneofGroups_)},r.inherits(o._ListRetainRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListRetainRequest.displayName="proto._ListRetainRequest"),o._ListRetainResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListRetainResponse.oneofGroups_)},r.inherits(o._ListRetainResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListRetainResponse.displayName="proto._ListRetainResponse"),o._ListRetainResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListRetainResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListRetainResponse._Found.displayName="proto._ListRetainResponse._Found"),o._ListRetainResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListRetainResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListRetainResponse._Missing.displayName="proto._ListRetainResponse._Missing"),o._ListFetchResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListFetchResponse.oneofGroups_)},r.inherits(o._ListFetchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListFetchResponse.displayName="proto._ListFetchResponse"),o._ListFetchResponse._Found=function(e){t.Message.initialize(this,e,0,-1,o._ListFetchResponse._Found.repeatedFields_,null)},r.inherits(o._ListFetchResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListFetchResponse._Found.displayName="proto._ListFetchResponse._Found"),o._ListFetchResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListFetchResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListFetchResponse._Missing.displayName="proto._ListFetchResponse._Missing"),o._ListLengthRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListLengthRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListLengthRequest.displayName="proto._ListLengthRequest"),o._ListLengthResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._ListLengthResponse.oneofGroups_)},r.inherits(o._ListLengthResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListLengthResponse.displayName="proto._ListLengthResponse"),o._ListLengthResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListLengthResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._ListLengthResponse._Found.displayName="proto._ListLengthResponse._Found"),o._ListLengthResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListLengthResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._ListLengthResponse._Missing.displayName="proto._ListLengthResponse._Missing"),o._SortedSetElement=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetElement,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetElement.displayName="proto._SortedSetElement"),o._SortedSetPutRequest=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetPutRequest.repeatedFields_,null)},r.inherits(o._SortedSetPutRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetPutRequest.displayName="proto._SortedSetPutRequest"),o._SortedSetPutResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetPutResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetPutResponse.displayName="proto._SortedSetPutResponse"),o._SortedSetFetchRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetFetchRequest.oneofGroups_)},r.inherits(o._SortedSetFetchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchRequest.displayName="proto._SortedSetFetchRequest"),o._SortedSetFetchRequest._ByIndex=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetFetchRequest._ByIndex.oneofGroups_)},r.inherits(o._SortedSetFetchRequest._ByIndex,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchRequest._ByIndex.displayName="proto._SortedSetFetchRequest._ByIndex"),o._SortedSetFetchRequest._ByScore=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetFetchRequest._ByScore.oneofGroups_)},r.inherits(o._SortedSetFetchRequest._ByScore,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchRequest._ByScore.displayName="proto._SortedSetFetchRequest._ByScore"),o._SortedSetFetchRequest._ByScore._Score=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetFetchRequest._ByScore._Score,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchRequest._ByScore._Score.displayName="proto._SortedSetFetchRequest._ByScore._Score"),o._SortedSetFetchResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetFetchResponse.oneofGroups_)},r.inherits(o._SortedSetFetchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchResponse.displayName="proto._SortedSetFetchResponse"),o._SortedSetFetchResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetFetchResponse._Found.oneofGroups_)},r.inherits(o._SortedSetFetchResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchResponse._Found.displayName="proto._SortedSetFetchResponse._Found"),o._SortedSetFetchResponse._Found._ValuesWithScores=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetFetchResponse._Found._ValuesWithScores.repeatedFields_,null)},r.inherits(o._SortedSetFetchResponse._Found._ValuesWithScores,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchResponse._Found._ValuesWithScores.displayName="proto._SortedSetFetchResponse._Found._ValuesWithScores"),o._SortedSetFetchResponse._Found._Values=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetFetchResponse._Found._Values.repeatedFields_,null)},r.inherits(o._SortedSetFetchResponse._Found._Values,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchResponse._Found._Values.displayName="proto._SortedSetFetchResponse._Found._Values"),o._SortedSetFetchResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetFetchResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetFetchResponse._Missing.displayName="proto._SortedSetFetchResponse._Missing"),o._SortedSetGetScoreRequest=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetGetScoreRequest.repeatedFields_,null)},r.inherits(o._SortedSetGetScoreRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetScoreRequest.displayName="proto._SortedSetGetScoreRequest"),o._SortedSetGetScoreResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetGetScoreResponse.oneofGroups_)},r.inherits(o._SortedSetGetScoreResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetScoreResponse.displayName="proto._SortedSetGetScoreResponse"),o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.displayName="proto._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart"),o._SortedSetGetScoreResponse._SortedSetFound=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetGetScoreResponse._SortedSetFound.repeatedFields_,null)},r.inherits(o._SortedSetGetScoreResponse._SortedSetFound,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetScoreResponse._SortedSetFound.displayName="proto._SortedSetGetScoreResponse._SortedSetFound"),o._SortedSetGetScoreResponse._SortedSetMissing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetGetScoreResponse._SortedSetMissing,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetScoreResponse._SortedSetMissing.displayName="proto._SortedSetGetScoreResponse._SortedSetMissing"),o._SortedSetRemoveRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetRemoveRequest.oneofGroups_)},r.inherits(o._SortedSetRemoveRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetRemoveRequest.displayName="proto._SortedSetRemoveRequest"),o._SortedSetRemoveRequest._All=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetRemoveRequest._All,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetRemoveRequest._All.displayName="proto._SortedSetRemoveRequest._All"),o._SortedSetRemoveRequest._Some=function(e){t.Message.initialize(this,e,0,-1,o._SortedSetRemoveRequest._Some.repeatedFields_,null)},r.inherits(o._SortedSetRemoveRequest._Some,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetRemoveRequest._Some.displayName="proto._SortedSetRemoveRequest._Some"),o._SortedSetRemoveResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetRemoveResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetRemoveResponse.displayName="proto._SortedSetRemoveResponse"),o._SortedSetIncrementRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetIncrementRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetIncrementRequest.displayName="proto._SortedSetIncrementRequest"),o._SortedSetIncrementResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetIncrementResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetIncrementResponse.displayName="proto._SortedSetIncrementResponse"),o._SortedSetGetRankRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetGetRankRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetRankRequest.displayName="proto._SortedSetGetRankRequest"),o._SortedSetGetRankResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetGetRankResponse.oneofGroups_)},r.inherits(o._SortedSetGetRankResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetRankResponse.displayName="proto._SortedSetGetRankResponse"),o._SortedSetGetRankResponse._RankResponsePart=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetGetRankResponse._RankResponsePart,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetRankResponse._RankResponsePart.displayName="proto._SortedSetGetRankResponse._RankResponsePart"),o._SortedSetGetRankResponse._SortedSetMissing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetGetRankResponse._SortedSetMissing,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetGetRankResponse._SortedSetMissing.displayName="proto._SortedSetGetRankResponse._SortedSetMissing"),o._SortedSetLengthRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetLengthRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthRequest.displayName="proto._SortedSetLengthRequest"),o._SortedSetLengthResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetLengthResponse.oneofGroups_)},r.inherits(o._SortedSetLengthResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthResponse.displayName="proto._SortedSetLengthResponse"),o._SortedSetLengthResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetLengthResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthResponse._Found.displayName="proto._SortedSetLengthResponse._Found"),o._SortedSetLengthResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetLengthResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthResponse._Missing.displayName="proto._SortedSetLengthResponse._Missing"),o._SortedSetLengthByScoreRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetLengthByScoreRequest.oneofGroups_)},r.inherits(o._SortedSetLengthByScoreRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthByScoreRequest.displayName="proto._SortedSetLengthByScoreRequest"),o._SortedSetLengthByScoreResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._SortedSetLengthByScoreResponse.oneofGroups_)},r.inherits(o._SortedSetLengthByScoreResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthByScoreResponse.displayName="proto._SortedSetLengthByScoreResponse"),o._SortedSetLengthByScoreResponse._Found=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetLengthByScoreResponse._Found,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthByScoreResponse._Found.displayName="proto._SortedSetLengthByScoreResponse._Found"),o._SortedSetLengthByScoreResponse._Missing=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SortedSetLengthByScoreResponse._Missing,t.Message),r.DEBUG&&!COMPILED&&(o._SortedSetLengthByScoreResponse._Missing.displayName="proto._SortedSetLengthByScoreResponse._Missing"),t.Message.GENERATE_TO_OBJECT&&(o._GetRequest.prototype.toObject=function(e){return o._GetRequest.toObject(e,this)},o._GetRequest.toObject=function(e,t){var r={cacheKey:t.getCacheKey_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._GetRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetRequest;return o._GetRequest.deserializeBinaryFromReader(i,r)},o._GetRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setCacheKey(r)}else t.skipField()}return e},o._GetRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r)},o._GetRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GetRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._GetRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._GetRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._GetResponse.prototype.toObject=function(e){return o._GetResponse.toObject(e,this)},o._GetResponse.toObject=function(e,r){var o={result:t.Message.getFieldWithDefault(r,1,0),cacheBody:r.getCacheBody_asB64(),message:t.Message.getFieldWithDefault(r,3,"")};return e&&(o.$jspbMessageInstance=r),o}),o._GetResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetResponse;return o._GetResponse.deserializeBinaryFromReader(i,r)},o._GetResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setResult(r);break;case 2:r=t.readBytes();e.setCacheBody(r);break;case 3:r=t.readString();e.setMessage(r);break;default:t.skipField()}}return e},o._GetResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetResponse.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getResult())&&t.writeEnum(1,r),(r=e.getCacheBody_asU8()).length>0&&t.writeBytes(2,r),(r=e.getMessage()).length>0&&t.writeString(3,r)},o._GetResponse.prototype.getResult=function(){return t.Message.getFieldWithDefault(this,1,0)},o._GetResponse.prototype.setResult=function(e){return t.Message.setProto3EnumField(this,1,e)},o._GetResponse.prototype.getCacheBody=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GetResponse.prototype.getCacheBody_asB64=function(){return t.Message.bytesAsB64(this.getCacheBody())},o._GetResponse.prototype.getCacheBody_asU8=function(){return t.Message.bytesAsU8(this.getCacheBody())},o._GetResponse.prototype.setCacheBody=function(e){return t.Message.setProto3BytesField(this,2,e)},o._GetResponse.prototype.getMessage=function(){return t.Message.getFieldWithDefault(this,3,"")},o._GetResponse.prototype.setMessage=function(e){return t.Message.setProto3StringField(this,3,e)},t.Message.GENERATE_TO_OBJECT&&(o._DeleteRequest.prototype.toObject=function(e){return o._DeleteRequest.toObject(e,this)},o._DeleteRequest.toObject=function(e,t){var r={cacheKey:t.getCacheKey_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DeleteRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteRequest;return o._DeleteRequest.deserializeBinaryFromReader(i,r)},o._DeleteRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setCacheKey(r)}else t.skipField()}return e},o._DeleteRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r)},o._DeleteRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DeleteRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._DeleteRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._DeleteRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._DeleteResponse.prototype.toObject=function(e){return o._DeleteResponse.toObject(e,this)},o._DeleteResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DeleteResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteResponse;return o._DeleteResponse.deserializeBinaryFromReader(i,r)},o._DeleteResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DeleteResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._SetRequest.prototype.toObject=function(e){return o._SetRequest.toObject(e,this)},o._SetRequest.toObject=function(e,r){var o={cacheKey:r.getCacheKey_asB64(),cacheBody:r.getCacheBody_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SetRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetRequest;return o._SetRequest.deserializeBinaryFromReader(i,r)},o._SetRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setCacheKey(r);break;case 2:r=t.readBytes();e.setCacheBody(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;default:t.skipField()}}return e},o._SetRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r),(r=e.getCacheBody_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r)},o._SetRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._SetRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._SetRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetRequest.prototype.getCacheBody=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SetRequest.prototype.getCacheBody_asB64=function(){return t.Message.bytesAsB64(this.getCacheBody())},o._SetRequest.prototype.getCacheBody_asU8=function(){return t.Message.bytesAsU8(this.getCacheBody())},o._SetRequest.prototype.setCacheBody=function(e){return t.Message.setProto3BytesField(this,2,e)},o._SetRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SetRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},t.Message.GENERATE_TO_OBJECT&&(o._SetResponse.prototype.toObject=function(e){return o._SetResponse.toObject(e,this)},o._SetResponse.toObject=function(e,r){var o={result:t.Message.getFieldWithDefault(r,1,0),message:t.Message.getFieldWithDefault(r,2,"")};return e&&(o.$jspbMessageInstance=r),o}),o._SetResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetResponse;return o._SetResponse.deserializeBinaryFromReader(i,r)},o._SetResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setResult(r);break;case 2:r=t.readString();e.setMessage(r);break;default:t.skipField()}}return e},o._SetResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetResponse.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getResult())&&t.writeEnum(1,r),(r=e.getMessage()).length>0&&t.writeString(2,r)},o._SetResponse.prototype.getResult=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SetResponse.prototype.setResult=function(e){return t.Message.setProto3EnumField(this,1,e)},o._SetResponse.prototype.getMessage=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SetResponse.prototype.setMessage=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._SetIfNotExistsRequest.prototype.toObject=function(e){return o._SetIfNotExistsRequest.toObject(e,this)},o._SetIfNotExistsRequest.toObject=function(e,r){var o={cacheKey:r.getCacheKey_asB64(),cacheBody:r.getCacheBody_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SetIfNotExistsRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetIfNotExistsRequest;return o._SetIfNotExistsRequest.deserializeBinaryFromReader(i,r)},o._SetIfNotExistsRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setCacheKey(r);break;case 2:r=t.readBytes();e.setCacheBody(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;default:t.skipField()}}return e},o._SetIfNotExistsRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetIfNotExistsRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetIfNotExistsRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r),(r=e.getCacheBody_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r)},o._SetIfNotExistsRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetIfNotExistsRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._SetIfNotExistsRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._SetIfNotExistsRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetIfNotExistsRequest.prototype.getCacheBody=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SetIfNotExistsRequest.prototype.getCacheBody_asB64=function(){return t.Message.bytesAsB64(this.getCacheBody())},o._SetIfNotExistsRequest.prototype.getCacheBody_asU8=function(){return t.Message.bytesAsU8(this.getCacheBody())},o._SetIfNotExistsRequest.prototype.setCacheBody=function(e){return t.Message.setProto3BytesField(this,2,e)},o._SetIfNotExistsRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SetIfNotExistsRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._SetIfNotExistsResponse.oneofGroups_=[[1,2]],o._SetIfNotExistsResponse.ResultCase={RESULT_NOT_SET:0,STORED:1,NOT_STORED:2},o._SetIfNotExistsResponse.prototype.getResultCase=function(){return t.Message.computeOneofCase(this,o._SetIfNotExistsResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetIfNotExistsResponse.prototype.toObject=function(e){return o._SetIfNotExistsResponse.toObject(e,this)},o._SetIfNotExistsResponse.toObject=function(e,t){var r,i={stored:(r=t.getStored())&&o._SetIfNotExistsResponse._Stored.toObject(e,r),notStored:(r=t.getNotStored())&&o._SetIfNotExistsResponse._NotStored.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetIfNotExistsResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetIfNotExistsResponse;return o._SetIfNotExistsResponse.deserializeBinaryFromReader(i,r)},o._SetIfNotExistsResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetIfNotExistsResponse._Stored;t.readMessage(r,o._SetIfNotExistsResponse._Stored.deserializeBinaryFromReader),e.setStored(r);break;case 2:r=new o._SetIfNotExistsResponse._NotStored;t.readMessage(r,o._SetIfNotExistsResponse._NotStored.deserializeBinaryFromReader),e.setNotStored(r);break;default:t.skipField()}}return e},o._SetIfNotExistsResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetIfNotExistsResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetIfNotExistsResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStored())&&t.writeMessage(1,r,o._SetIfNotExistsResponse._Stored.serializeBinaryToWriter),null!=(r=e.getNotStored())&&t.writeMessage(2,r,o._SetIfNotExistsResponse._NotStored.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SetIfNotExistsResponse._Stored.prototype.toObject=function(e){return o._SetIfNotExistsResponse._Stored.toObject(e,this)},o._SetIfNotExistsResponse._Stored.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetIfNotExistsResponse._Stored.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetIfNotExistsResponse._Stored;return o._SetIfNotExistsResponse._Stored.deserializeBinaryFromReader(i,r)},o._SetIfNotExistsResponse._Stored.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetIfNotExistsResponse._Stored.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetIfNotExistsResponse._Stored.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetIfNotExistsResponse._Stored.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._SetIfNotExistsResponse._NotStored.prototype.toObject=function(e){return o._SetIfNotExistsResponse._NotStored.toObject(e,this)},o._SetIfNotExistsResponse._NotStored.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetIfNotExistsResponse._NotStored.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetIfNotExistsResponse._NotStored;return o._SetIfNotExistsResponse._NotStored.deserializeBinaryFromReader(i,r)},o._SetIfNotExistsResponse._NotStored.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetIfNotExistsResponse._NotStored.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetIfNotExistsResponse._NotStored.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetIfNotExistsResponse._NotStored.serializeBinaryToWriter=function(e,t){},o._SetIfNotExistsResponse.prototype.getStored=function(){return t.Message.getWrapperField(this,o._SetIfNotExistsResponse._Stored,1)},o._SetIfNotExistsResponse.prototype.setStored=function(e){return t.Message.setOneofWrapperField(this,1,o._SetIfNotExistsResponse.oneofGroups_[0],e)},o._SetIfNotExistsResponse.prototype.clearStored=function(){return this.setStored(void 0)},o._SetIfNotExistsResponse.prototype.hasStored=function(){return null!=t.Message.getField(this,1)},o._SetIfNotExistsResponse.prototype.getNotStored=function(){return t.Message.getWrapperField(this,o._SetIfNotExistsResponse._NotStored,2)},o._SetIfNotExistsResponse.prototype.setNotStored=function(e){return t.Message.setOneofWrapperField(this,2,o._SetIfNotExistsResponse.oneofGroups_[0],e)},o._SetIfNotExistsResponse.prototype.clearNotStored=function(){return this.setNotStored(void 0)},o._SetIfNotExistsResponse.prototype.hasNotStored=function(){return null!=t.Message.getField(this,2)},o._KeysExistRequest.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._KeysExistRequest.prototype.toObject=function(e){return o._KeysExistRequest.toObject(e,this)},o._KeysExistRequest.toObject=function(e,t){var r={cacheKeysList:t.getCacheKeysList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._KeysExistRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._KeysExistRequest;return o._KeysExistRequest.deserializeBinaryFromReader(i,r)},o._KeysExistRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addCacheKeys(r)}else t.skipField()}return e},o._KeysExistRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._KeysExistRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._KeysExistRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheKeysList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._KeysExistRequest.prototype.getCacheKeysList=function(){return t.Message.getRepeatedField(this,1)},o._KeysExistRequest.prototype.getCacheKeysList_asB64=function(){return t.Message.bytesListAsB64(this.getCacheKeysList())},o._KeysExistRequest.prototype.getCacheKeysList_asU8=function(){return t.Message.bytesListAsU8(this.getCacheKeysList())},o._KeysExistRequest.prototype.setCacheKeysList=function(e){return t.Message.setField(this,1,e||[])},o._KeysExistRequest.prototype.addCacheKeys=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._KeysExistRequest.prototype.clearCacheKeysList=function(){return this.setCacheKeysList([])},o._KeysExistResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._KeysExistResponse.prototype.toObject=function(e){return o._KeysExistResponse.toObject(e,this)},o._KeysExistResponse.toObject=function(e,r){var o,i={existsList:null==(o=t.Message.getRepeatedBooleanField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._KeysExistResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._KeysExistResponse;return o._KeysExistResponse.deserializeBinaryFromReader(i,r)},o._KeysExistResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber())for(var r=t.isDelimited()?t.readPackedBool():[t.readBool()],o=0;o<r.length;o++)e.addExists(r[o]);else t.skipField()}return e},o._KeysExistResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._KeysExistResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._KeysExistResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getExistsList()).length>0&&t.writePackedBool(1,r)},o._KeysExistResponse.prototype.getExistsList=function(){return t.Message.getRepeatedBooleanField(this,1)},o._KeysExistResponse.prototype.setExistsList=function(e){return t.Message.setField(this,1,e||[])},o._KeysExistResponse.prototype.addExists=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._KeysExistResponse.prototype.clearExistsList=function(){return this.setExistsList([])},t.Message.GENERATE_TO_OBJECT&&(o._IncrementRequest.prototype.toObject=function(e){return o._IncrementRequest.toObject(e,this)},o._IncrementRequest.toObject=function(e,r){var o={cacheKey:r.getCacheKey_asB64(),amount:t.Message.getFieldWithDefault(r,2,0),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._IncrementRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._IncrementRequest;return o._IncrementRequest.deserializeBinaryFromReader(i,r)},o._IncrementRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setCacheKey(r);break;case 2:r=t.readInt64();e.setAmount(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;default:t.skipField()}}return e},o._IncrementRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._IncrementRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._IncrementRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getAmount())&&t.writeInt64(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r)},o._IncrementRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._IncrementRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._IncrementRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._IncrementRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._IncrementRequest.prototype.getAmount=function(){return t.Message.getFieldWithDefault(this,2,0)},o._IncrementRequest.prototype.setAmount=function(e){return t.Message.setProto3IntField(this,2,e)},o._IncrementRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._IncrementRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},t.Message.GENERATE_TO_OBJECT&&(o._IncrementResponse.prototype.toObject=function(e){return o._IncrementResponse.toObject(e,this)},o._IncrementResponse.toObject=function(e,r){var o={value:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._IncrementResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._IncrementResponse;return o._IncrementResponse.deserializeBinaryFromReader(i,r)},o._IncrementResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readInt64();e.setValue(r)}else t.skipField()}return e},o._IncrementResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._IncrementResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._IncrementResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getValue())&&t.writeInt64(1,r)},o._IncrementResponse.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,1,0)},o._IncrementResponse.prototype.setValue=function(e){return t.Message.setProto3IntField(this,1,e)},o._UpdateTtlRequest.oneofGroups_=[[2,3,4]],o._UpdateTtlRequest.UpdateTtlCase={UPDATE_TTL_NOT_SET:0,INCREASE_TO_MILLISECONDS:2,DECREASE_TO_MILLISECONDS:3,OVERWRITE_TO_MILLISECONDS:4},o._UpdateTtlRequest.prototype.getUpdateTtlCase=function(){return t.Message.computeOneofCase(this,o._UpdateTtlRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._UpdateTtlRequest.prototype.toObject=function(e){return o._UpdateTtlRequest.toObject(e,this)},o._UpdateTtlRequest.toObject=function(e,r){var o={cacheKey:r.getCacheKey_asB64(),increaseToMilliseconds:t.Message.getFieldWithDefault(r,2,0),decreaseToMilliseconds:t.Message.getFieldWithDefault(r,3,0),overwriteToMilliseconds:t.Message.getFieldWithDefault(r,4,0)};return e&&(o.$jspbMessageInstance=r),o}),o._UpdateTtlRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpdateTtlRequest;return o._UpdateTtlRequest.deserializeBinaryFromReader(i,r)},o._UpdateTtlRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setCacheKey(r);break;case 2:r=t.readUint64();e.setIncreaseToMilliseconds(r);break;case 3:r=t.readUint64();e.setDecreaseToMilliseconds(r);break;case 4:r=t.readUint64();e.setOverwriteToMilliseconds(r);break;default:t.skipField()}}return e},o._UpdateTtlRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpdateTtlRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpdateTtlRequest.serializeBinaryToWriter=function(e,r){var o=void 0;(o=e.getCacheKey_asU8()).length>0&&r.writeBytes(1,o),null!=(o=t.Message.getField(e,2))&&r.writeUint64(2,o),null!=(o=t.Message.getField(e,3))&&r.writeUint64(3,o),null!=(o=t.Message.getField(e,4))&&r.writeUint64(4,o)},o._UpdateTtlRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._UpdateTtlRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())};o._UpdateTtlRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._UpdateTtlRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._UpdateTtlRequest.prototype.getIncreaseToMilliseconds=function(){return t.Message.getFieldWithDefault(this,2,0)},o._UpdateTtlRequest.prototype.setIncreaseToMilliseconds=function(e){return t.Message.setOneofField(this,2,o._UpdateTtlRequest.oneofGroups_[0],e)},o._UpdateTtlRequest.prototype.clearIncreaseToMilliseconds=function(){return t.Message.setOneofField(this,2,o._UpdateTtlRequest.oneofGroups_[0],void 0)},o._UpdateTtlRequest.prototype.hasIncreaseToMilliseconds=function(){return null!=t.Message.getField(this,2)},o._UpdateTtlRequest.prototype.getDecreaseToMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._UpdateTtlRequest.prototype.setDecreaseToMilliseconds=function(e){return t.Message.setOneofField(this,3,o._UpdateTtlRequest.oneofGroups_[0],e)},o._UpdateTtlRequest.prototype.clearDecreaseToMilliseconds=function(){return t.Message.setOneofField(this,3,o._UpdateTtlRequest.oneofGroups_[0],void 0)},o._UpdateTtlRequest.prototype.hasDecreaseToMilliseconds=function(){return null!=t.Message.getField(this,3)},o._UpdateTtlRequest.prototype.getOverwriteToMilliseconds=function(){return t.Message.getFieldWithDefault(this,4,0)},o._UpdateTtlRequest.prototype.setOverwriteToMilliseconds=function(e){return t.Message.setOneofField(this,4,o._UpdateTtlRequest.oneofGroups_[0],e)},o._UpdateTtlRequest.prototype.clearOverwriteToMilliseconds=function(){return t.Message.setOneofField(this,4,o._UpdateTtlRequest.oneofGroups_[0],void 0)},o._UpdateTtlRequest.prototype.hasOverwriteToMilliseconds=function(){return null!=t.Message.getField(this,4)},o._UpdateTtlResponse.oneofGroups_=[[1,2,3]],o._UpdateTtlResponse.ResultCase={RESULT_NOT_SET:0,SET:1,NOT_SET:2,MISSING:3},o._UpdateTtlResponse.prototype.getResultCase=function(){return t.Message.computeOneofCase(this,o._UpdateTtlResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._UpdateTtlResponse.prototype.toObject=function(e){return o._UpdateTtlResponse.toObject(e,this)},o._UpdateTtlResponse.toObject=function(e,t){var r,i={set:(r=t.getSet())&&o._UpdateTtlResponse._Set.toObject(e,r),notSet:(r=t.getNotSet())&&o._UpdateTtlResponse._NotSet.toObject(e,r),missing:(r=t.getMissing())&&o._UpdateTtlResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._UpdateTtlResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpdateTtlResponse;return o._UpdateTtlResponse.deserializeBinaryFromReader(i,r)},o._UpdateTtlResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._UpdateTtlResponse._Set;t.readMessage(r,o._UpdateTtlResponse._Set.deserializeBinaryFromReader),e.setSet(r);break;case 2:r=new o._UpdateTtlResponse._NotSet;t.readMessage(r,o._UpdateTtlResponse._NotSet.deserializeBinaryFromReader),e.setNotSet(r);break;case 3:r=new o._UpdateTtlResponse._Missing;t.readMessage(r,o._UpdateTtlResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._UpdateTtlResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpdateTtlResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpdateTtlResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSet())&&t.writeMessage(1,r,o._UpdateTtlResponse._Set.serializeBinaryToWriter),null!=(r=e.getNotSet())&&t.writeMessage(2,r,o._UpdateTtlResponse._NotSet.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(3,r,o._UpdateTtlResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._UpdateTtlResponse._Set.prototype.toObject=function(e){return o._UpdateTtlResponse._Set.toObject(e,this)},o._UpdateTtlResponse._Set.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._UpdateTtlResponse._Set.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpdateTtlResponse._Set;return o._UpdateTtlResponse._Set.deserializeBinaryFromReader(i,r)},o._UpdateTtlResponse._Set.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._UpdateTtlResponse._Set.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpdateTtlResponse._Set.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpdateTtlResponse._Set.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._UpdateTtlResponse._NotSet.prototype.toObject=function(e){return o._UpdateTtlResponse._NotSet.toObject(e,this)},o._UpdateTtlResponse._NotSet.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._UpdateTtlResponse._NotSet.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpdateTtlResponse._NotSet;return o._UpdateTtlResponse._NotSet.deserializeBinaryFromReader(i,r)},o._UpdateTtlResponse._NotSet.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._UpdateTtlResponse._NotSet.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpdateTtlResponse._NotSet.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpdateTtlResponse._NotSet.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._UpdateTtlResponse._Missing.prototype.toObject=function(e){return o._UpdateTtlResponse._Missing.toObject(e,this)},o._UpdateTtlResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._UpdateTtlResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpdateTtlResponse._Missing;return o._UpdateTtlResponse._Missing.deserializeBinaryFromReader(i,r)},o._UpdateTtlResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._UpdateTtlResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpdateTtlResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpdateTtlResponse._Missing.serializeBinaryToWriter=function(e,t){},o._UpdateTtlResponse.prototype.getSet=function(){return t.Message.getWrapperField(this,o._UpdateTtlResponse._Set,1)},o._UpdateTtlResponse.prototype.setSet=function(e){return t.Message.setOneofWrapperField(this,1,o._UpdateTtlResponse.oneofGroups_[0],e)},o._UpdateTtlResponse.prototype.clearSet=function(){return this.setSet(void 0)},o._UpdateTtlResponse.prototype.hasSet=function(){return null!=t.Message.getField(this,1)},o._UpdateTtlResponse.prototype.getNotSet=function(){return t.Message.getWrapperField(this,o._UpdateTtlResponse._NotSet,2)},o._UpdateTtlResponse.prototype.setNotSet=function(e){return t.Message.setOneofWrapperField(this,2,o._UpdateTtlResponse.oneofGroups_[0],e)},o._UpdateTtlResponse.prototype.clearNotSet=function(){return this.setNotSet(void 0)},o._UpdateTtlResponse.prototype.hasNotSet=function(){return null!=t.Message.getField(this,2)},o._UpdateTtlResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._UpdateTtlResponse._Missing,3)},o._UpdateTtlResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,3,o._UpdateTtlResponse.oneofGroups_[0],e)},o._UpdateTtlResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._UpdateTtlResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTtlRequest.prototype.toObject=function(e){return o._ItemGetTtlRequest.toObject(e,this)},o._ItemGetTtlRequest.toObject=function(e,t){var r={cacheKey:t.getCacheKey_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ItemGetTtlRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTtlRequest;return o._ItemGetTtlRequest.deserializeBinaryFromReader(i,r)},o._ItemGetTtlRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setCacheKey(r)}else t.skipField()}return e},o._ItemGetTtlRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTtlRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTtlRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r)},o._ItemGetTtlRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ItemGetTtlRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._ItemGetTtlRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._ItemGetTtlRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ItemGetTtlResponse.oneofGroups_=[[1,2]],o._ItemGetTtlResponse.ResultCase={RESULT_NOT_SET:0,FOUND:1,MISSING:2},o._ItemGetTtlResponse.prototype.getResultCase=function(){return t.Message.computeOneofCase(this,o._ItemGetTtlResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTtlResponse.prototype.toObject=function(e){return o._ItemGetTtlResponse.toObject(e,this)},o._ItemGetTtlResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ItemGetTtlResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ItemGetTtlResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ItemGetTtlResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTtlResponse;return o._ItemGetTtlResponse.deserializeBinaryFromReader(i,r)},o._ItemGetTtlResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ItemGetTtlResponse._Found;t.readMessage(r,o._ItemGetTtlResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ItemGetTtlResponse._Missing;t.readMessage(r,o._ItemGetTtlResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ItemGetTtlResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTtlResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTtlResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ItemGetTtlResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ItemGetTtlResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTtlResponse._Found.prototype.toObject=function(e){return o._ItemGetTtlResponse._Found.toObject(e,this)},o._ItemGetTtlResponse._Found.toObject=function(e,r){var o={remainingTtlMillis:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ItemGetTtlResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTtlResponse._Found;return o._ItemGetTtlResponse._Found.deserializeBinaryFromReader(i,r)},o._ItemGetTtlResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint64();e.setRemainingTtlMillis(r)}else t.skipField()}return e},o._ItemGetTtlResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTtlResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTtlResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getRemainingTtlMillis())&&t.writeUint64(1,r)},o._ItemGetTtlResponse._Found.prototype.getRemainingTtlMillis=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ItemGetTtlResponse._Found.prototype.setRemainingTtlMillis=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTtlResponse._Missing.prototype.toObject=function(e){return o._ItemGetTtlResponse._Missing.toObject(e,this)},o._ItemGetTtlResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ItemGetTtlResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTtlResponse._Missing;return o._ItemGetTtlResponse._Missing.deserializeBinaryFromReader(i,r)},o._ItemGetTtlResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ItemGetTtlResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTtlResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTtlResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ItemGetTtlResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ItemGetTtlResponse._Found,1)},o._ItemGetTtlResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ItemGetTtlResponse.oneofGroups_[0],e)},o._ItemGetTtlResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ItemGetTtlResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ItemGetTtlResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ItemGetTtlResponse._Missing,2)},o._ItemGetTtlResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ItemGetTtlResponse.oneofGroups_[0],e)},o._ItemGetTtlResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ItemGetTtlResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTypeRequest.prototype.toObject=function(e){return o._ItemGetTypeRequest.toObject(e,this)},o._ItemGetTypeRequest.toObject=function(e,t){var r={cacheKey:t.getCacheKey_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ItemGetTypeRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTypeRequest;return o._ItemGetTypeRequest.deserializeBinaryFromReader(i,r)},o._ItemGetTypeRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setCacheKey(r)}else t.skipField()}return e},o._ItemGetTypeRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTypeRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTypeRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheKey_asU8()).length>0&&t.writeBytes(1,r)},o._ItemGetTypeRequest.prototype.getCacheKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ItemGetTypeRequest.prototype.getCacheKey_asB64=function(){return t.Message.bytesAsB64(this.getCacheKey())},o._ItemGetTypeRequest.prototype.getCacheKey_asU8=function(){return t.Message.bytesAsU8(this.getCacheKey())},o._ItemGetTypeRequest.prototype.setCacheKey=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ItemGetTypeResponse.oneofGroups_=[[1,2]],o._ItemGetTypeResponse.ResultCase={RESULT_NOT_SET:0,FOUND:1,MISSING:2},o._ItemGetTypeResponse.prototype.getResultCase=function(){return t.Message.computeOneofCase(this,o._ItemGetTypeResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTypeResponse.prototype.toObject=function(e){return o._ItemGetTypeResponse.toObject(e,this)},o._ItemGetTypeResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ItemGetTypeResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ItemGetTypeResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ItemGetTypeResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTypeResponse;return o._ItemGetTypeResponse.deserializeBinaryFromReader(i,r)},o._ItemGetTypeResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ItemGetTypeResponse._Found;t.readMessage(r,o._ItemGetTypeResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ItemGetTypeResponse._Missing;t.readMessage(r,o._ItemGetTypeResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ItemGetTypeResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTypeResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTypeResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ItemGetTypeResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ItemGetTypeResponse._Missing.serializeBinaryToWriter)},o._ItemGetTypeResponse.ItemType={SCALAR:0,DICTIONARY:1,SET:2,LIST:3,SORTED_SET:4},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTypeResponse._Found.prototype.toObject=function(e){return o._ItemGetTypeResponse._Found.toObject(e,this)},o._ItemGetTypeResponse._Found.toObject=function(e,r){var o={itemType:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ItemGetTypeResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTypeResponse._Found;return o._ItemGetTypeResponse._Found.deserializeBinaryFromReader(i,r)},o._ItemGetTypeResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readEnum();e.setItemType(r)}else t.skipField()}return e},o._ItemGetTypeResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTypeResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTypeResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getItemType())&&t.writeEnum(1,r)},o._ItemGetTypeResponse._Found.prototype.getItemType=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ItemGetTypeResponse._Found.prototype.setItemType=function(e){return t.Message.setProto3EnumField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ItemGetTypeResponse._Missing.prototype.toObject=function(e){return o._ItemGetTypeResponse._Missing.toObject(e,this)},o._ItemGetTypeResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ItemGetTypeResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ItemGetTypeResponse._Missing;return o._ItemGetTypeResponse._Missing.deserializeBinaryFromReader(i,r)},o._ItemGetTypeResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ItemGetTypeResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ItemGetTypeResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ItemGetTypeResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ItemGetTypeResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ItemGetTypeResponse._Found,1)},o._ItemGetTypeResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ItemGetTypeResponse.oneofGroups_[0],e)},o._ItemGetTypeResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ItemGetTypeResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ItemGetTypeResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ItemGetTypeResponse._Missing,2)},o._ItemGetTypeResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ItemGetTypeResponse.oneofGroups_[0],e)},o._ItemGetTypeResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ItemGetTypeResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._DictionaryGetRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._DictionaryGetRequest.prototype.toObject=function(e){return o._DictionaryGetRequest.toObject(e,this)},o._DictionaryGetRequest.toObject=function(e,t){var r={dictionaryName:t.getDictionaryName_asB64(),fieldsList:t.getFieldsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryGetRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryGetRequest;return o._DictionaryGetRequest.deserializeBinaryFromReader(i,r)},o._DictionaryGetRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setDictionaryName(r);break;case 2:r=t.readBytes();e.addFields(r);break;default:t.skipField()}}return e},o._DictionaryGetRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryGetRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryGetRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getFieldsList_asU8()).length>0&&t.writeRepeatedBytes(2,r)},o._DictionaryGetRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryGetRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionaryGetRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionaryGetRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionaryGetRequest.prototype.getFieldsList=function(){return t.Message.getRepeatedField(this,2)},o._DictionaryGetRequest.prototype.getFieldsList_asB64=function(){return t.Message.bytesListAsB64(this.getFieldsList())},o._DictionaryGetRequest.prototype.getFieldsList_asU8=function(){return t.Message.bytesListAsU8(this.getFieldsList())},o._DictionaryGetRequest.prototype.setFieldsList=function(e){return t.Message.setField(this,2,e||[])},o._DictionaryGetRequest.prototype.addFields=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._DictionaryGetRequest.prototype.clearFieldsList=function(){return this.setFieldsList([])},o._DictionaryGetResponse.oneofGroups_=[[1,2]],o._DictionaryGetResponse.DictionaryCase={DICTIONARY_NOT_SET:0,FOUND:1,MISSING:2},o._DictionaryGetResponse.prototype.getDictionaryCase=function(){return t.Message.computeOneofCase(this,o._DictionaryGetResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryGetResponse.prototype.toObject=function(e){return o._DictionaryGetResponse.toObject(e,this)},o._DictionaryGetResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._DictionaryGetResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._DictionaryGetResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._DictionaryGetResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryGetResponse;return o._DictionaryGetResponse.deserializeBinaryFromReader(i,r)},o._DictionaryGetResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._DictionaryGetResponse._Found;t.readMessage(r,o._DictionaryGetResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._DictionaryGetResponse._Missing;t.readMessage(r,o._DictionaryGetResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._DictionaryGetResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryGetResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryGetResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._DictionaryGetResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._DictionaryGetResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.toObject=function(e){return o._DictionaryGetResponse._DictionaryGetResponsePart.toObject(e,this)},o._DictionaryGetResponse._DictionaryGetResponsePart.toObject=function(e,r){var o={result:t.Message.getFieldWithDefault(r,1,0),cacheBody:r.getCacheBody_asB64()};return e&&(o.$jspbMessageInstance=r),o}),o._DictionaryGetResponse._DictionaryGetResponsePart.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryGetResponse._DictionaryGetResponsePart;return o._DictionaryGetResponse._DictionaryGetResponsePart.deserializeBinaryFromReader(i,r)},o._DictionaryGetResponse._DictionaryGetResponsePart.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setResult(r);break;case 2:r=t.readBytes();e.setCacheBody(r);break;default:t.skipField()}}return e},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryGetResponse._DictionaryGetResponsePart.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryGetResponse._DictionaryGetResponsePart.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getResult())&&t.writeEnum(1,r),(r=e.getCacheBody_asU8()).length>0&&t.writeBytes(2,r)},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.getResult=function(){return t.Message.getFieldWithDefault(this,1,0)},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.setResult=function(e){return t.Message.setProto3EnumField(this,1,e)},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.getCacheBody=function(){return t.Message.getFieldWithDefault(this,2,"")},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.getCacheBody_asB64=function(){return t.Message.bytesAsB64(this.getCacheBody())},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.getCacheBody_asU8=function(){return t.Message.bytesAsU8(this.getCacheBody())},o._DictionaryGetResponse._DictionaryGetResponsePart.prototype.setCacheBody=function(e){return t.Message.setProto3BytesField(this,2,e)},o._DictionaryGetResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._DictionaryGetResponse._Found.prototype.toObject=function(e){return o._DictionaryGetResponse._Found.toObject(e,this)},o._DictionaryGetResponse._Found.toObject=function(e,r){var i={itemsList:t.Message.toObjectList(r.getItemsList(),o._DictionaryGetResponse._DictionaryGetResponsePart.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._DictionaryGetResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryGetResponse._Found;return o._DictionaryGetResponse._Found.deserializeBinaryFromReader(i,r)},o._DictionaryGetResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._DictionaryGetResponse._DictionaryGetResponsePart;t.readMessage(r,o._DictionaryGetResponse._DictionaryGetResponsePart.deserializeBinaryFromReader),e.addItems(r)}else t.skipField()}return e},o._DictionaryGetResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryGetResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryGetResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getItemsList()).length>0&&t.writeRepeatedMessage(1,r,o._DictionaryGetResponse._DictionaryGetResponsePart.serializeBinaryToWriter)},o._DictionaryGetResponse._Found.prototype.getItemsList=function(){return t.Message.getRepeatedWrapperField(this,o._DictionaryGetResponse._DictionaryGetResponsePart,1)},o._DictionaryGetResponse._Found.prototype.setItemsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._DictionaryGetResponse._Found.prototype.addItems=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._DictionaryGetResponse._DictionaryGetResponsePart,r)},o._DictionaryGetResponse._Found.prototype.clearItemsList=function(){return this.setItemsList([])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryGetResponse._Missing.prototype.toObject=function(e){return o._DictionaryGetResponse._Missing.toObject(e,this)},o._DictionaryGetResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryGetResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryGetResponse._Missing;return o._DictionaryGetResponse._Missing.deserializeBinaryFromReader(i,r)},o._DictionaryGetResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionaryGetResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryGetResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryGetResponse._Missing.serializeBinaryToWriter=function(e,t){},o._DictionaryGetResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._DictionaryGetResponse._Found,1)},o._DictionaryGetResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._DictionaryGetResponse.oneofGroups_[0],e)},o._DictionaryGetResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._DictionaryGetResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._DictionaryGetResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._DictionaryGetResponse._Missing,2)},o._DictionaryGetResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._DictionaryGetResponse.oneofGroups_[0],e)},o._DictionaryGetResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._DictionaryGetResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryFetchRequest.prototype.toObject=function(e){return o._DictionaryFetchRequest.toObject(e,this)},o._DictionaryFetchRequest.toObject=function(e,t){var r={dictionaryName:t.getDictionaryName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryFetchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryFetchRequest;return o._DictionaryFetchRequest.deserializeBinaryFromReader(i,r)},o._DictionaryFetchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setDictionaryName(r)}else t.skipField()}return e},o._DictionaryFetchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryFetchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryFetchRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r)},o._DictionaryFetchRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryFetchRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionaryFetchRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionaryFetchRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryFieldValuePair.prototype.toObject=function(e){return o._DictionaryFieldValuePair.toObject(e,this)},o._DictionaryFieldValuePair.toObject=function(e,t){var r={field:t.getField_asB64(),value:t.getValue_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryFieldValuePair.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryFieldValuePair;return o._DictionaryFieldValuePair.deserializeBinaryFromReader(i,r)},o._DictionaryFieldValuePair.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setField(r);break;case 2:r=t.readBytes();e.setValue(r);break;default:t.skipField()}}return e},o._DictionaryFieldValuePair.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryFieldValuePair.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryFieldValuePair.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getField_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r)},o._DictionaryFieldValuePair.prototype.getField=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryFieldValuePair.prototype.getField_asB64=function(){return t.Message.bytesAsB64(this.getField())},o._DictionaryFieldValuePair.prototype.getField_asU8=function(){return t.Message.bytesAsU8(this.getField())},o._DictionaryFieldValuePair.prototype.setField=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionaryFieldValuePair.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._DictionaryFieldValuePair.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._DictionaryFieldValuePair.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._DictionaryFieldValuePair.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},o._DictionaryFetchResponse.oneofGroups_=[[1,2]],o._DictionaryFetchResponse.DictionaryCase={DICTIONARY_NOT_SET:0,FOUND:1,MISSING:2},o._DictionaryFetchResponse.prototype.getDictionaryCase=function(){return t.Message.computeOneofCase(this,o._DictionaryFetchResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryFetchResponse.prototype.toObject=function(e){return o._DictionaryFetchResponse.toObject(e,this)},o._DictionaryFetchResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._DictionaryFetchResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._DictionaryFetchResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._DictionaryFetchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryFetchResponse;return o._DictionaryFetchResponse.deserializeBinaryFromReader(i,r)},o._DictionaryFetchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._DictionaryFetchResponse._Found;t.readMessage(r,o._DictionaryFetchResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._DictionaryFetchResponse._Missing;t.readMessage(r,o._DictionaryFetchResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._DictionaryFetchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryFetchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryFetchResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._DictionaryFetchResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._DictionaryFetchResponse._Missing.serializeBinaryToWriter)},o._DictionaryFetchResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._DictionaryFetchResponse._Found.prototype.toObject=function(e){return o._DictionaryFetchResponse._Found.toObject(e,this)},o._DictionaryFetchResponse._Found.toObject=function(e,r){var i={itemsList:t.Message.toObjectList(r.getItemsList(),o._DictionaryFieldValuePair.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._DictionaryFetchResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryFetchResponse._Found;return o._DictionaryFetchResponse._Found.deserializeBinaryFromReader(i,r)},o._DictionaryFetchResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._DictionaryFieldValuePair;t.readMessage(r,o._DictionaryFieldValuePair.deserializeBinaryFromReader),e.addItems(r)}else t.skipField()}return e},o._DictionaryFetchResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryFetchResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryFetchResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getItemsList()).length>0&&t.writeRepeatedMessage(1,r,o._DictionaryFieldValuePair.serializeBinaryToWriter)},o._DictionaryFetchResponse._Found.prototype.getItemsList=function(){return t.Message.getRepeatedWrapperField(this,o._DictionaryFieldValuePair,1)},o._DictionaryFetchResponse._Found.prototype.setItemsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._DictionaryFetchResponse._Found.prototype.addItems=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._DictionaryFieldValuePair,r)},o._DictionaryFetchResponse._Found.prototype.clearItemsList=function(){return this.setItemsList([])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryFetchResponse._Missing.prototype.toObject=function(e){return o._DictionaryFetchResponse._Missing.toObject(e,this)},o._DictionaryFetchResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryFetchResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryFetchResponse._Missing;return o._DictionaryFetchResponse._Missing.deserializeBinaryFromReader(i,r)},o._DictionaryFetchResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionaryFetchResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryFetchResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryFetchResponse._Missing.serializeBinaryToWriter=function(e,t){},o._DictionaryFetchResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._DictionaryFetchResponse._Found,1)},o._DictionaryFetchResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._DictionaryFetchResponse.oneofGroups_[0],e)},o._DictionaryFetchResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._DictionaryFetchResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._DictionaryFetchResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._DictionaryFetchResponse._Missing,2)},o._DictionaryFetchResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._DictionaryFetchResponse.oneofGroups_[0],e)},o._DictionaryFetchResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._DictionaryFetchResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._DictionarySetRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._DictionarySetRequest.prototype.toObject=function(e){return o._DictionarySetRequest.toObject(e,this)},o._DictionarySetRequest.toObject=function(e,r){var i={dictionaryName:r.getDictionaryName_asB64(),itemsList:t.Message.toObjectList(r.getItemsList(),o._DictionaryFieldValuePair.toObject,e),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1)};return e&&(i.$jspbMessageInstance=r),i}),o._DictionarySetRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionarySetRequest;return o._DictionarySetRequest.deserializeBinaryFromReader(i,r)},o._DictionarySetRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setDictionaryName(r);break;case 2:r=new o._DictionaryFieldValuePair;t.readMessage(r,o._DictionaryFieldValuePair.deserializeBinaryFromReader),e.addItems(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._DictionarySetRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionarySetRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionarySetRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getItemsList()).length>0&&t.writeRepeatedMessage(2,r,o._DictionaryFieldValuePair.serializeBinaryToWriter),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r)},o._DictionarySetRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionarySetRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionarySetRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionarySetRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionarySetRequest.prototype.getItemsList=function(){return t.Message.getRepeatedWrapperField(this,o._DictionaryFieldValuePair,2)},o._DictionarySetRequest.prototype.setItemsList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},o._DictionarySetRequest.prototype.addItems=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,o._DictionaryFieldValuePair,r)},o._DictionarySetRequest.prototype.clearItemsList=function(){return this.setItemsList([])},o._DictionarySetRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._DictionarySetRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._DictionarySetRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._DictionarySetRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._DictionarySetResponse.prototype.toObject=function(e){return o._DictionarySetResponse.toObject(e,this)},o._DictionarySetResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionarySetResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionarySetResponse;return o._DictionarySetResponse.deserializeBinaryFromReader(i,r)},o._DictionarySetResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionarySetResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionarySetResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionarySetResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryIncrementRequest.prototype.toObject=function(e){return o._DictionaryIncrementRequest.toObject(e,this)},o._DictionaryIncrementRequest.toObject=function(e,r){var o={dictionaryName:r.getDictionaryName_asB64(),field:r.getField_asB64(),amount:t.Message.getFieldWithDefault(r,3,0),ttlMilliseconds:t.Message.getFieldWithDefault(r,4,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,5,!1)};return e&&(o.$jspbMessageInstance=r),o}),o._DictionaryIncrementRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryIncrementRequest;return o._DictionaryIncrementRequest.deserializeBinaryFromReader(i,r)},o._DictionaryIncrementRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setDictionaryName(r);break;case 2:r=t.readBytes();e.setField(r);break;case 3:r=t.readInt64();e.setAmount(r);break;case 4:r=t.readUint64();e.setTtlMilliseconds(r);break;case 5:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._DictionaryIncrementRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryIncrementRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryIncrementRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getField_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getAmount())&&t.writeInt64(3,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(4,r),(r=e.getRefreshTtl())&&t.writeBool(5,r)},o._DictionaryIncrementRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryIncrementRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionaryIncrementRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionaryIncrementRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionaryIncrementRequest.prototype.getField=function(){return t.Message.getFieldWithDefault(this,2,"")},o._DictionaryIncrementRequest.prototype.getField_asB64=function(){return t.Message.bytesAsB64(this.getField())},o._DictionaryIncrementRequest.prototype.getField_asU8=function(){return t.Message.bytesAsU8(this.getField())},o._DictionaryIncrementRequest.prototype.setField=function(e){return t.Message.setProto3BytesField(this,2,e)},o._DictionaryIncrementRequest.prototype.getAmount=function(){return t.Message.getFieldWithDefault(this,3,0)},o._DictionaryIncrementRequest.prototype.setAmount=function(e){return t.Message.setProto3IntField(this,3,e)},o._DictionaryIncrementRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,4,0)},o._DictionaryIncrementRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,4,e)},o._DictionaryIncrementRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},o._DictionaryIncrementRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryIncrementResponse.prototype.toObject=function(e){return o._DictionaryIncrementResponse.toObject(e,this)},o._DictionaryIncrementResponse.toObject=function(e,r){var o={value:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._DictionaryIncrementResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryIncrementResponse;return o._DictionaryIncrementResponse.deserializeBinaryFromReader(i,r)},o._DictionaryIncrementResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readInt64();e.setValue(r)}else t.skipField()}return e},o._DictionaryIncrementResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryIncrementResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryIncrementResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getValue())&&t.writeInt64(1,r)},o._DictionaryIncrementResponse.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,1,0)},o._DictionaryIncrementResponse.prototype.setValue=function(e){return t.Message.setProto3IntField(this,1,e)},o._DictionaryDeleteRequest.oneofGroups_=[[2,3]],o._DictionaryDeleteRequest.DeleteCase={DELETE_NOT_SET:0,SOME:2,ALL:3},o._DictionaryDeleteRequest.prototype.getDeleteCase=function(){return t.Message.computeOneofCase(this,o._DictionaryDeleteRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryDeleteRequest.prototype.toObject=function(e){return o._DictionaryDeleteRequest.toObject(e,this)},o._DictionaryDeleteRequest.toObject=function(e,t){var r,i={dictionaryName:t.getDictionaryName_asB64(),some:(r=t.getSome())&&o._DictionaryDeleteRequest.Some.toObject(e,r),all:(r=t.getAll())&&o._DictionaryDeleteRequest.All.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._DictionaryDeleteRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryDeleteRequest;return o._DictionaryDeleteRequest.deserializeBinaryFromReader(i,r)},o._DictionaryDeleteRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setDictionaryName(r);break;case 2:r=new o._DictionaryDeleteRequest.Some;t.readMessage(r,o._DictionaryDeleteRequest.Some.deserializeBinaryFromReader),e.setSome(r);break;case 3:r=new o._DictionaryDeleteRequest.All;t.readMessage(r,o._DictionaryDeleteRequest.All.deserializeBinaryFromReader),e.setAll(r);break;default:t.skipField()}}return e},o._DictionaryDeleteRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryDeleteRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryDeleteRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r),null!=(r=e.getSome())&&t.writeMessage(2,r,o._DictionaryDeleteRequest.Some.serializeBinaryToWriter),null!=(r=e.getAll())&&t.writeMessage(3,r,o._DictionaryDeleteRequest.All.serializeBinaryToWriter)},o._DictionaryDeleteRequest.Some.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._DictionaryDeleteRequest.Some.prototype.toObject=function(e){return o._DictionaryDeleteRequest.Some.toObject(e,this)},o._DictionaryDeleteRequest.Some.toObject=function(e,t){var r={fieldsList:t.getFieldsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryDeleteRequest.Some.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryDeleteRequest.Some;return o._DictionaryDeleteRequest.Some.deserializeBinaryFromReader(i,r)},o._DictionaryDeleteRequest.Some.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addFields(r)}else t.skipField()}return e},o._DictionaryDeleteRequest.Some.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryDeleteRequest.Some.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryDeleteRequest.Some.serializeBinaryToWriter=function(e,t){var r;(r=e.getFieldsList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._DictionaryDeleteRequest.Some.prototype.getFieldsList=function(){return t.Message.getRepeatedField(this,1)},o._DictionaryDeleteRequest.Some.prototype.getFieldsList_asB64=function(){return t.Message.bytesListAsB64(this.getFieldsList())},o._DictionaryDeleteRequest.Some.prototype.getFieldsList_asU8=function(){return t.Message.bytesListAsU8(this.getFieldsList())},o._DictionaryDeleteRequest.Some.prototype.setFieldsList=function(e){return t.Message.setField(this,1,e||[])},o._DictionaryDeleteRequest.Some.prototype.addFields=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._DictionaryDeleteRequest.Some.prototype.clearFieldsList=function(){return this.setFieldsList([])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryDeleteRequest.All.prototype.toObject=function(e){return o._DictionaryDeleteRequest.All.toObject(e,this)},o._DictionaryDeleteRequest.All.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryDeleteRequest.All.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryDeleteRequest.All;return o._DictionaryDeleteRequest.All.deserializeBinaryFromReader(i,r)},o._DictionaryDeleteRequest.All.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionaryDeleteRequest.All.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryDeleteRequest.All.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryDeleteRequest.All.serializeBinaryToWriter=function(e,t){},o._DictionaryDeleteRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryDeleteRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionaryDeleteRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionaryDeleteRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionaryDeleteRequest.prototype.getSome=function(){return t.Message.getWrapperField(this,o._DictionaryDeleteRequest.Some,2)},o._DictionaryDeleteRequest.prototype.setSome=function(e){return t.Message.setOneofWrapperField(this,2,o._DictionaryDeleteRequest.oneofGroups_[0],e)},o._DictionaryDeleteRequest.prototype.clearSome=function(){return this.setSome(void 0)},o._DictionaryDeleteRequest.prototype.hasSome=function(){return null!=t.Message.getField(this,2)},o._DictionaryDeleteRequest.prototype.getAll=function(){return t.Message.getWrapperField(this,o._DictionaryDeleteRequest.All,3)},o._DictionaryDeleteRequest.prototype.setAll=function(e){return t.Message.setOneofWrapperField(this,3,o._DictionaryDeleteRequest.oneofGroups_[0],e)},o._DictionaryDeleteRequest.prototype.clearAll=function(){return this.setAll(void 0)},o._DictionaryDeleteRequest.prototype.hasAll=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryDeleteResponse.prototype.toObject=function(e){return o._DictionaryDeleteResponse.toObject(e,this)},o._DictionaryDeleteResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryDeleteResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryDeleteResponse;return o._DictionaryDeleteResponse.deserializeBinaryFromReader(i,r)},o._DictionaryDeleteResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionaryDeleteResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryDeleteResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryDeleteResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryLengthRequest.prototype.toObject=function(e){return o._DictionaryLengthRequest.toObject(e,this)},o._DictionaryLengthRequest.toObject=function(e,t){var r={dictionaryName:t.getDictionaryName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryLengthRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryLengthRequest;return o._DictionaryLengthRequest.deserializeBinaryFromReader(i,r)},o._DictionaryLengthRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setDictionaryName(r)}else t.skipField()}return e},o._DictionaryLengthRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryLengthRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryLengthRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getDictionaryName_asU8()).length>0&&t.writeBytes(1,r)},o._DictionaryLengthRequest.prototype.getDictionaryName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DictionaryLengthRequest.prototype.getDictionaryName_asB64=function(){return t.Message.bytesAsB64(this.getDictionaryName())},o._DictionaryLengthRequest.prototype.getDictionaryName_asU8=function(){return t.Message.bytesAsU8(this.getDictionaryName())},o._DictionaryLengthRequest.prototype.setDictionaryName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._DictionaryLengthResponse.oneofGroups_=[[1,2]],o._DictionaryLengthResponse.DictionaryCase={DICTIONARY_NOT_SET:0,FOUND:1,MISSING:2},o._DictionaryLengthResponse.prototype.getDictionaryCase=function(){return t.Message.computeOneofCase(this,o._DictionaryLengthResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryLengthResponse.prototype.toObject=function(e){return o._DictionaryLengthResponse.toObject(e,this)},o._DictionaryLengthResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._DictionaryLengthResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._DictionaryLengthResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._DictionaryLengthResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryLengthResponse;return o._DictionaryLengthResponse.deserializeBinaryFromReader(i,r)},o._DictionaryLengthResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._DictionaryLengthResponse._Found;t.readMessage(r,o._DictionaryLengthResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._DictionaryLengthResponse._Missing;t.readMessage(r,o._DictionaryLengthResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._DictionaryLengthResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryLengthResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryLengthResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._DictionaryLengthResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._DictionaryLengthResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryLengthResponse._Found.prototype.toObject=function(e){return o._DictionaryLengthResponse._Found.toObject(e,this)},o._DictionaryLengthResponse._Found.toObject=function(e,r){var o={length:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._DictionaryLengthResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryLengthResponse._Found;return o._DictionaryLengthResponse._Found.deserializeBinaryFromReader(i,r)},o._DictionaryLengthResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setLength(r)}else t.skipField()}return e},o._DictionaryLengthResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryLengthResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryLengthResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getLength())&&t.writeUint32(1,r)},o._DictionaryLengthResponse._Found.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._DictionaryLengthResponse._Found.prototype.setLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._DictionaryLengthResponse._Missing.prototype.toObject=function(e){return o._DictionaryLengthResponse._Missing.toObject(e,this)},o._DictionaryLengthResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DictionaryLengthResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DictionaryLengthResponse._Missing;return o._DictionaryLengthResponse._Missing.deserializeBinaryFromReader(i,r)},o._DictionaryLengthResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DictionaryLengthResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DictionaryLengthResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DictionaryLengthResponse._Missing.serializeBinaryToWriter=function(e,t){},o._DictionaryLengthResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._DictionaryLengthResponse._Found,1)},o._DictionaryLengthResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._DictionaryLengthResponse.oneofGroups_[0],e)},o._DictionaryLengthResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._DictionaryLengthResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._DictionaryLengthResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._DictionaryLengthResponse._Missing,2)},o._DictionaryLengthResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._DictionaryLengthResponse.oneofGroups_[0],e)},o._DictionaryLengthResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._DictionaryLengthResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SetFetchRequest.prototype.toObject=function(e){return o._SetFetchRequest.toObject(e,this)},o._SetFetchRequest.toObject=function(e,t){var r={setName:t.getSetName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetFetchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetFetchRequest;return o._SetFetchRequest.deserializeBinaryFromReader(i,r)},o._SetFetchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setSetName(r)}else t.skipField()}return e},o._SetFetchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetFetchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetFetchRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r)},o._SetFetchRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetFetchRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetFetchRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetFetchRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetFetchResponse.oneofGroups_=[[1,2]],o._SetFetchResponse.SetCase={SET_NOT_SET:0,FOUND:1,MISSING:2},o._SetFetchResponse.prototype.getSetCase=function(){return t.Message.computeOneofCase(this,o._SetFetchResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetFetchResponse.prototype.toObject=function(e){return o._SetFetchResponse.toObject(e,this)},o._SetFetchResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SetFetchResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SetFetchResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetFetchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetFetchResponse;return o._SetFetchResponse.deserializeBinaryFromReader(i,r)},o._SetFetchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetFetchResponse._Found;t.readMessage(r,o._SetFetchResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SetFetchResponse._Missing;t.readMessage(r,o._SetFetchResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SetFetchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetFetchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetFetchResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SetFetchResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SetFetchResponse._Missing.serializeBinaryToWriter)},o._SetFetchResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SetFetchResponse._Found.prototype.toObject=function(e){return o._SetFetchResponse._Found.toObject(e,this)},o._SetFetchResponse._Found.toObject=function(e,t){var r={elementsList:t.getElementsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetFetchResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetFetchResponse._Found;return o._SetFetchResponse._Found.deserializeBinaryFromReader(i,r)},o._SetFetchResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addElements(r)}else t.skipField()}return e},o._SetFetchResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetFetchResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetFetchResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SetFetchResponse._Found.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,1)},o._SetFetchResponse._Found.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetFetchResponse._Found.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetFetchResponse._Found.prototype.setElementsList=function(e){return t.Message.setField(this,1,e||[])},o._SetFetchResponse._Found.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SetFetchResponse._Found.prototype.clearElementsList=function(){return this.setElementsList([])},t.Message.GENERATE_TO_OBJECT&&(o._SetFetchResponse._Missing.prototype.toObject=function(e){return o._SetFetchResponse._Missing.toObject(e,this)},o._SetFetchResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetFetchResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetFetchResponse._Missing;return o._SetFetchResponse._Missing.deserializeBinaryFromReader(i,r)},o._SetFetchResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetFetchResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetFetchResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetFetchResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SetFetchResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SetFetchResponse._Found,1)},o._SetFetchResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SetFetchResponse.oneofGroups_[0],e)},o._SetFetchResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SetFetchResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SetFetchResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SetFetchResponse._Missing,2)},o._SetFetchResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SetFetchResponse.oneofGroups_[0],e)},o._SetFetchResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SetFetchResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._SetUnionRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._SetUnionRequest.prototype.toObject=function(e){return o._SetUnionRequest.toObject(e,this)},o._SetUnionRequest.toObject=function(e,r){var o={setName:r.getSetName_asB64(),elementsList:r.getElementsList_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1)};return e&&(o.$jspbMessageInstance=r),o}),o._SetUnionRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetUnionRequest;return o._SetUnionRequest.deserializeBinaryFromReader(i,r)},o._SetUnionRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readBytes();e.addElements(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._SetUnionRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetUnionRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetUnionRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r)},o._SetUnionRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetUnionRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetUnionRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetUnionRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetUnionRequest.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,2)},o._SetUnionRequest.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetUnionRequest.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetUnionRequest.prototype.setElementsList=function(e){return t.Message.setField(this,2,e||[])},o._SetUnionRequest.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._SetUnionRequest.prototype.clearElementsList=function(){return this.setElementsList([])},o._SetUnionRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SetUnionRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._SetUnionRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._SetUnionRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._SetUnionResponse.prototype.toObject=function(e){return o._SetUnionResponse.toObject(e,this)},o._SetUnionResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetUnionResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetUnionResponse;return o._SetUnionResponse.deserializeBinaryFromReader(i,r)},o._SetUnionResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetUnionResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetUnionResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetUnionResponse.serializeBinaryToWriter=function(e,t){},o._SetDifferenceRequest.oneofGroups_=[[2,3]],o._SetDifferenceRequest.DifferenceCase={DIFFERENCE_NOT_SET:0,MINUEND:2,SUBTRAHEND:3},o._SetDifferenceRequest.prototype.getDifferenceCase=function(){return t.Message.computeOneofCase(this,o._SetDifferenceRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceRequest.prototype.toObject=function(e){return o._SetDifferenceRequest.toObject(e,this)},o._SetDifferenceRequest.toObject=function(e,t){var r,i={setName:t.getSetName_asB64(),minuend:(r=t.getMinuend())&&o._SetDifferenceRequest._Minuend.toObject(e,r),subtrahend:(r=t.getSubtrahend())&&o._SetDifferenceRequest._Subtrahend.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetDifferenceRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceRequest;return o._SetDifferenceRequest.deserializeBinaryFromReader(i,r)},o._SetDifferenceRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=new o._SetDifferenceRequest._Minuend;t.readMessage(r,o._SetDifferenceRequest._Minuend.deserializeBinaryFromReader),e.setMinuend(r);break;case 3:r=new o._SetDifferenceRequest._Subtrahend;t.readMessage(r,o._SetDifferenceRequest._Subtrahend.deserializeBinaryFromReader),e.setSubtrahend(r);break;default:t.skipField()}}return e},o._SetDifferenceRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),null!=(r=e.getMinuend())&&t.writeMessage(2,r,o._SetDifferenceRequest._Minuend.serializeBinaryToWriter),null!=(r=e.getSubtrahend())&&t.writeMessage(3,r,o._SetDifferenceRequest._Subtrahend.serializeBinaryToWriter)},o._SetDifferenceRequest._Minuend.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceRequest._Minuend.prototype.toObject=function(e){return o._SetDifferenceRequest._Minuend.toObject(e,this)},o._SetDifferenceRequest._Minuend.toObject=function(e,t){var r={elementsList:t.getElementsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetDifferenceRequest._Minuend.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceRequest._Minuend;return o._SetDifferenceRequest._Minuend.deserializeBinaryFromReader(i,r)},o._SetDifferenceRequest._Minuend.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addElements(r)}else t.skipField()}return e},o._SetDifferenceRequest._Minuend.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceRequest._Minuend.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceRequest._Minuend.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SetDifferenceRequest._Minuend.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,1)},o._SetDifferenceRequest._Minuend.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetDifferenceRequest._Minuend.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetDifferenceRequest._Minuend.prototype.setElementsList=function(e){return t.Message.setField(this,1,e||[])},o._SetDifferenceRequest._Minuend.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SetDifferenceRequest._Minuend.prototype.clearElementsList=function(){return this.setElementsList([])},o._SetDifferenceRequest._Subtrahend.oneofGroups_=[[1,2]],o._SetDifferenceRequest._Subtrahend.SubtrahendSetCase={SUBTRAHEND_SET_NOT_SET:0,SET:1,IDENTITY:2},o._SetDifferenceRequest._Subtrahend.prototype.getSubtrahendSetCase=function(){return t.Message.computeOneofCase(this,o._SetDifferenceRequest._Subtrahend.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceRequest._Subtrahend.prototype.toObject=function(e){return o._SetDifferenceRequest._Subtrahend.toObject(e,this)},o._SetDifferenceRequest._Subtrahend.toObject=function(e,t){var r,i={set:(r=t.getSet())&&o._SetDifferenceRequest._Subtrahend._Set.toObject(e,r),identity:(r=t.getIdentity())&&o._SetDifferenceRequest._Subtrahend._Identity.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetDifferenceRequest._Subtrahend.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceRequest._Subtrahend;return o._SetDifferenceRequest._Subtrahend.deserializeBinaryFromReader(i,r)},o._SetDifferenceRequest._Subtrahend.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetDifferenceRequest._Subtrahend._Set;t.readMessage(r,o._SetDifferenceRequest._Subtrahend._Set.deserializeBinaryFromReader),e.setSet(r);break;case 2:r=new o._SetDifferenceRequest._Subtrahend._Identity;t.readMessage(r,o._SetDifferenceRequest._Subtrahend._Identity.deserializeBinaryFromReader),e.setIdentity(r);break;default:t.skipField()}}return e},o._SetDifferenceRequest._Subtrahend.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceRequest._Subtrahend.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceRequest._Subtrahend.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSet())&&t.writeMessage(1,r,o._SetDifferenceRequest._Subtrahend._Set.serializeBinaryToWriter),null!=(r=e.getIdentity())&&t.writeMessage(2,r,o._SetDifferenceRequest._Subtrahend._Identity.serializeBinaryToWriter)},o._SetDifferenceRequest._Subtrahend._Set.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceRequest._Subtrahend._Set.prototype.toObject=function(e){return o._SetDifferenceRequest._Subtrahend._Set.toObject(e,this)},o._SetDifferenceRequest._Subtrahend._Set.toObject=function(e,t){var r={elementsList:t.getElementsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetDifferenceRequest._Subtrahend._Set.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceRequest._Subtrahend._Set;return o._SetDifferenceRequest._Subtrahend._Set.deserializeBinaryFromReader(i,r)},o._SetDifferenceRequest._Subtrahend._Set.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addElements(r)}else t.skipField()}return e},o._SetDifferenceRequest._Subtrahend._Set.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceRequest._Subtrahend._Set.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceRequest._Subtrahend._Set.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SetDifferenceRequest._Subtrahend._Set.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,1)},o._SetDifferenceRequest._Subtrahend._Set.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetDifferenceRequest._Subtrahend._Set.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetDifferenceRequest._Subtrahend._Set.prototype.setElementsList=function(e){return t.Message.setField(this,1,e||[])},o._SetDifferenceRequest._Subtrahend._Set.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SetDifferenceRequest._Subtrahend._Set.prototype.clearElementsList=function(){return this.setElementsList([])},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceRequest._Subtrahend._Identity.prototype.toObject=function(e){return o._SetDifferenceRequest._Subtrahend._Identity.toObject(e,this)},o._SetDifferenceRequest._Subtrahend._Identity.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetDifferenceRequest._Subtrahend._Identity.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceRequest._Subtrahend._Identity;return o._SetDifferenceRequest._Subtrahend._Identity.deserializeBinaryFromReader(i,r)},o._SetDifferenceRequest._Subtrahend._Identity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetDifferenceRequest._Subtrahend._Identity.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceRequest._Subtrahend._Identity.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceRequest._Subtrahend._Identity.serializeBinaryToWriter=function(e,t){},o._SetDifferenceRequest._Subtrahend.prototype.getSet=function(){return t.Message.getWrapperField(this,o._SetDifferenceRequest._Subtrahend._Set,1)},o._SetDifferenceRequest._Subtrahend.prototype.setSet=function(e){return t.Message.setOneofWrapperField(this,1,o._SetDifferenceRequest._Subtrahend.oneofGroups_[0],e)},o._SetDifferenceRequest._Subtrahend.prototype.clearSet=function(){return this.setSet(void 0)},o._SetDifferenceRequest._Subtrahend.prototype.hasSet=function(){return null!=t.Message.getField(this,1)},o._SetDifferenceRequest._Subtrahend.prototype.getIdentity=function(){return t.Message.getWrapperField(this,o._SetDifferenceRequest._Subtrahend._Identity,2)},o._SetDifferenceRequest._Subtrahend.prototype.setIdentity=function(e){return t.Message.setOneofWrapperField(this,2,o._SetDifferenceRequest._Subtrahend.oneofGroups_[0],e)},o._SetDifferenceRequest._Subtrahend.prototype.clearIdentity=function(){return this.setIdentity(void 0)},o._SetDifferenceRequest._Subtrahend.prototype.hasIdentity=function(){return null!=t.Message.getField(this,2)},o._SetDifferenceRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetDifferenceRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetDifferenceRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetDifferenceRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetDifferenceRequest.prototype.getMinuend=function(){return t.Message.getWrapperField(this,o._SetDifferenceRequest._Minuend,2)},o._SetDifferenceRequest.prototype.setMinuend=function(e){return t.Message.setOneofWrapperField(this,2,o._SetDifferenceRequest.oneofGroups_[0],e)},o._SetDifferenceRequest.prototype.clearMinuend=function(){return this.setMinuend(void 0)},o._SetDifferenceRequest.prototype.hasMinuend=function(){return null!=t.Message.getField(this,2)},o._SetDifferenceRequest.prototype.getSubtrahend=function(){return t.Message.getWrapperField(this,o._SetDifferenceRequest._Subtrahend,3)},o._SetDifferenceRequest.prototype.setSubtrahend=function(e){return t.Message.setOneofWrapperField(this,3,o._SetDifferenceRequest.oneofGroups_[0],e)},o._SetDifferenceRequest.prototype.clearSubtrahend=function(){return this.setSubtrahend(void 0)},o._SetDifferenceRequest.prototype.hasSubtrahend=function(){return null!=t.Message.getField(this,3)},o._SetDifferenceResponse.oneofGroups_=[[1,2]],o._SetDifferenceResponse.SetCase={SET_NOT_SET:0,FOUND:1,MISSING:2},o._SetDifferenceResponse.prototype.getSetCase=function(){return t.Message.computeOneofCase(this,o._SetDifferenceResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceResponse.prototype.toObject=function(e){return o._SetDifferenceResponse.toObject(e,this)},o._SetDifferenceResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SetDifferenceResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SetDifferenceResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetDifferenceResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceResponse;return o._SetDifferenceResponse.deserializeBinaryFromReader(i,r)},o._SetDifferenceResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetDifferenceResponse._Found;t.readMessage(r,o._SetDifferenceResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SetDifferenceResponse._Missing;t.readMessage(r,o._SetDifferenceResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SetDifferenceResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SetDifferenceResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SetDifferenceResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceResponse._Found.prototype.toObject=function(e){return o._SetDifferenceResponse._Found.toObject(e,this)},o._SetDifferenceResponse._Found.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetDifferenceResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceResponse._Found;return o._SetDifferenceResponse._Found.deserializeBinaryFromReader(i,r)},o._SetDifferenceResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetDifferenceResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceResponse._Found.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._SetDifferenceResponse._Missing.prototype.toObject=function(e){return o._SetDifferenceResponse._Missing.toObject(e,this)},o._SetDifferenceResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetDifferenceResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetDifferenceResponse._Missing;return o._SetDifferenceResponse._Missing.deserializeBinaryFromReader(i,r)},o._SetDifferenceResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetDifferenceResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetDifferenceResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetDifferenceResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SetDifferenceResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SetDifferenceResponse._Found,1)},o._SetDifferenceResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SetDifferenceResponse.oneofGroups_[0],e)},o._SetDifferenceResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SetDifferenceResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SetDifferenceResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SetDifferenceResponse._Missing,2)},o._SetDifferenceResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SetDifferenceResponse.oneofGroups_[0],e)},o._SetDifferenceResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SetDifferenceResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._SetContainsRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._SetContainsRequest.prototype.toObject=function(e){return o._SetContainsRequest.toObject(e,this)},o._SetContainsRequest.toObject=function(e,t){var r={setName:t.getSetName_asB64(),elementsList:t.getElementsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetContainsRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetContainsRequest;return o._SetContainsRequest.deserializeBinaryFromReader(i,r)},o._SetContainsRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readBytes();e.addElements(r);break;default:t.skipField()}}return e},o._SetContainsRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetContainsRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetContainsRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(2,r)},o._SetContainsRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetContainsRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetContainsRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetContainsRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetContainsRequest.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,2)},o._SetContainsRequest.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetContainsRequest.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetContainsRequest.prototype.setElementsList=function(e){return t.Message.setField(this,2,e||[])},o._SetContainsRequest.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._SetContainsRequest.prototype.clearElementsList=function(){return this.setElementsList([])},o._SetContainsResponse.oneofGroups_=[[1,2]],o._SetContainsResponse.SetCase={SET_NOT_SET:0,FOUND:1,MISSING:2},o._SetContainsResponse.prototype.getSetCase=function(){return t.Message.computeOneofCase(this,o._SetContainsResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetContainsResponse.prototype.toObject=function(e){return o._SetContainsResponse.toObject(e,this)},o._SetContainsResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SetContainsResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SetContainsResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetContainsResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetContainsResponse;return o._SetContainsResponse.deserializeBinaryFromReader(i,r)},o._SetContainsResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetContainsResponse._Found;t.readMessage(r,o._SetContainsResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SetContainsResponse._Missing;t.readMessage(r,o._SetContainsResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SetContainsResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetContainsResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetContainsResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SetContainsResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SetContainsResponse._Missing.serializeBinaryToWriter)},o._SetContainsResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SetContainsResponse._Found.prototype.toObject=function(e){return o._SetContainsResponse._Found.toObject(e,this)},o._SetContainsResponse._Found.toObject=function(e,r){var o,i={containsList:null==(o=t.Message.getRepeatedBooleanField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._SetContainsResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetContainsResponse._Found;return o._SetContainsResponse._Found.deserializeBinaryFromReader(i,r)},o._SetContainsResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber())for(var r=t.isDelimited()?t.readPackedBool():[t.readBool()],o=0;o<r.length;o++)e.addContains(r[o]);else t.skipField()}return e},o._SetContainsResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetContainsResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetContainsResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getContainsList()).length>0&&t.writePackedBool(1,r)},o._SetContainsResponse._Found.prototype.getContainsList=function(){return t.Message.getRepeatedBooleanField(this,1)},o._SetContainsResponse._Found.prototype.setContainsList=function(e){return t.Message.setField(this,1,e||[])},o._SetContainsResponse._Found.prototype.addContains=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SetContainsResponse._Found.prototype.clearContainsList=function(){return this.setContainsList([])},t.Message.GENERATE_TO_OBJECT&&(o._SetContainsResponse._Missing.prototype.toObject=function(e){return o._SetContainsResponse._Missing.toObject(e,this)},o._SetContainsResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetContainsResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetContainsResponse._Missing;return o._SetContainsResponse._Missing.deserializeBinaryFromReader(i,r)},o._SetContainsResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetContainsResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetContainsResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetContainsResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SetContainsResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SetContainsResponse._Found,1)},o._SetContainsResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SetContainsResponse.oneofGroups_[0],e)},o._SetContainsResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SetContainsResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SetContainsResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SetContainsResponse._Missing,2)},o._SetContainsResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SetContainsResponse.oneofGroups_[0],e)},o._SetContainsResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SetContainsResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SetLengthRequest.prototype.toObject=function(e){return o._SetLengthRequest.toObject(e,this)},o._SetLengthRequest.toObject=function(e,t){var r={setName:t.getSetName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetLengthRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetLengthRequest;return o._SetLengthRequest.deserializeBinaryFromReader(i,r)},o._SetLengthRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setSetName(r)}else t.skipField()}return e},o._SetLengthRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetLengthRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetLengthRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r)},o._SetLengthRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetLengthRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetLengthRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetLengthRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetLengthResponse.oneofGroups_=[[1,2]],o._SetLengthResponse.SetCase={SET_NOT_SET:0,FOUND:1,MISSING:2},o._SetLengthResponse.prototype.getSetCase=function(){return t.Message.computeOneofCase(this,o._SetLengthResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetLengthResponse.prototype.toObject=function(e){return o._SetLengthResponse.toObject(e,this)},o._SetLengthResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SetLengthResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SetLengthResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetLengthResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetLengthResponse;return o._SetLengthResponse.deserializeBinaryFromReader(i,r)},o._SetLengthResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetLengthResponse._Found;t.readMessage(r,o._SetLengthResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SetLengthResponse._Missing;t.readMessage(r,o._SetLengthResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SetLengthResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetLengthResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetLengthResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SetLengthResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SetLengthResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SetLengthResponse._Found.prototype.toObject=function(e){return o._SetLengthResponse._Found.toObject(e,this)},o._SetLengthResponse._Found.toObject=function(e,r){var o={length:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SetLengthResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetLengthResponse._Found;return o._SetLengthResponse._Found.deserializeBinaryFromReader(i,r)},o._SetLengthResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setLength(r)}else t.skipField()}return e},o._SetLengthResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetLengthResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetLengthResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getLength())&&t.writeUint32(1,r)},o._SetLengthResponse._Found.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SetLengthResponse._Found.prototype.setLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._SetLengthResponse._Missing.prototype.toObject=function(e){return o._SetLengthResponse._Missing.toObject(e,this)},o._SetLengthResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetLengthResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetLengthResponse._Missing;return o._SetLengthResponse._Missing.deserializeBinaryFromReader(i,r)},o._SetLengthResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetLengthResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetLengthResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetLengthResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SetLengthResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SetLengthResponse._Found,1)},o._SetLengthResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SetLengthResponse.oneofGroups_[0],e)},o._SetLengthResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SetLengthResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SetLengthResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SetLengthResponse._Missing,2)},o._SetLengthResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SetLengthResponse.oneofGroups_[0],e)},o._SetLengthResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SetLengthResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SetPopRequest.prototype.toObject=function(e){return o._SetPopRequest.toObject(e,this)},o._SetPopRequest.toObject=function(e,r){var o={setName:r.getSetName_asB64(),count:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SetPopRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetPopRequest;return o._SetPopRequest.deserializeBinaryFromReader(i,r)},o._SetPopRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readUint32();e.setCount(r);break;default:t.skipField()}}return e},o._SetPopRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetPopRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetPopRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getCount())&&t.writeUint32(2,r)},o._SetPopRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SetPopRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SetPopRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SetPopRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SetPopRequest.prototype.getCount=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SetPopRequest.prototype.setCount=function(e){return t.Message.setProto3IntField(this,2,e)},o._SetPopResponse.oneofGroups_=[[1,2]],o._SetPopResponse.SetCase={SET_NOT_SET:0,FOUND:1,MISSING:2},o._SetPopResponse.prototype.getSetCase=function(){return t.Message.computeOneofCase(this,o._SetPopResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SetPopResponse.prototype.toObject=function(e){return o._SetPopResponse.toObject(e,this)},o._SetPopResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SetPopResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SetPopResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SetPopResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetPopResponse;return o._SetPopResponse.deserializeBinaryFromReader(i,r)},o._SetPopResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SetPopResponse._Found;t.readMessage(r,o._SetPopResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SetPopResponse._Missing;t.readMessage(r,o._SetPopResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SetPopResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetPopResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetPopResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SetPopResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SetPopResponse._Missing.serializeBinaryToWriter)},o._SetPopResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SetPopResponse._Found.prototype.toObject=function(e){return o._SetPopResponse._Found.toObject(e,this)},o._SetPopResponse._Found.toObject=function(e,t){var r={elementsList:t.getElementsList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SetPopResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetPopResponse._Found;return o._SetPopResponse._Found.deserializeBinaryFromReader(i,r)},o._SetPopResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addElements(r)}else t.skipField()}return e},o._SetPopResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetPopResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetPopResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SetPopResponse._Found.prototype.getElementsList=function(){return t.Message.getRepeatedField(this,1)},o._SetPopResponse._Found.prototype.getElementsList_asB64=function(){return t.Message.bytesListAsB64(this.getElementsList())},o._SetPopResponse._Found.prototype.getElementsList_asU8=function(){return t.Message.bytesListAsU8(this.getElementsList())},o._SetPopResponse._Found.prototype.setElementsList=function(e){return t.Message.setField(this,1,e||[])},o._SetPopResponse._Found.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SetPopResponse._Found.prototype.clearElementsList=function(){return this.setElementsList([])},t.Message.GENERATE_TO_OBJECT&&(o._SetPopResponse._Missing.prototype.toObject=function(e){return o._SetPopResponse._Missing.toObject(e,this)},o._SetPopResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SetPopResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SetPopResponse._Missing;return o._SetPopResponse._Missing.deserializeBinaryFromReader(i,r)},o._SetPopResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SetPopResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SetPopResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SetPopResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SetPopResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SetPopResponse._Found,1)},o._SetPopResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SetPopResponse.oneofGroups_[0],e)},o._SetPopResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SetPopResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SetPopResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SetPopResponse._Missing,2)},o._SetPopResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SetPopResponse.oneofGroups_[0],e)},o._SetPopResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SetPopResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._ListConcatenateFrontRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._ListConcatenateFrontRequest.prototype.toObject=function(e){return o._ListConcatenateFrontRequest.toObject(e,this)},o._ListConcatenateFrontRequest.toObject=function(e,r){var o={listName:r.getListName_asB64(),valuesList:r.getValuesList_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1),truncateBackToSize:t.Message.getFieldWithDefault(r,5,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListConcatenateFrontRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListConcatenateFrontRequest;return o._ListConcatenateFrontRequest.deserializeBinaryFromReader(i,r)},o._ListConcatenateFrontRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=t.readBytes();e.addValues(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;case 5:r=t.readUint32();e.setTruncateBackToSize(r);break;default:t.skipField()}}return e},o._ListConcatenateFrontRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListConcatenateFrontRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListConcatenateFrontRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r),0!==(r=e.getTruncateBackToSize())&&t.writeUint32(5,r)},o._ListConcatenateFrontRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListConcatenateFrontRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListConcatenateFrontRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListConcatenateFrontRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListConcatenateFrontRequest.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,2)},o._ListConcatenateFrontRequest.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._ListConcatenateFrontRequest.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._ListConcatenateFrontRequest.prototype.setValuesList=function(e){return t.Message.setField(this,2,e||[])},o._ListConcatenateFrontRequest.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._ListConcatenateFrontRequest.prototype.clearValuesList=function(){return this.setValuesList([])},o._ListConcatenateFrontRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListConcatenateFrontRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._ListConcatenateFrontRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._ListConcatenateFrontRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},o._ListConcatenateFrontRequest.prototype.getTruncateBackToSize=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListConcatenateFrontRequest.prototype.setTruncateBackToSize=function(e){return t.Message.setProto3IntField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListConcatenateFrontResponse.prototype.toObject=function(e){return o._ListConcatenateFrontResponse.toObject(e,this)},o._ListConcatenateFrontResponse.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListConcatenateFrontResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListConcatenateFrontResponse;return o._ListConcatenateFrontResponse.deserializeBinaryFromReader(i,r)},o._ListConcatenateFrontResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListConcatenateFrontResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListConcatenateFrontResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListConcatenateFrontResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListConcatenateFrontResponse.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListConcatenateFrontResponse.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},o._ListConcatenateBackRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._ListConcatenateBackRequest.prototype.toObject=function(e){return o._ListConcatenateBackRequest.toObject(e,this)},o._ListConcatenateBackRequest.toObject=function(e,r){var o={listName:r.getListName_asB64(),valuesList:r.getValuesList_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1),truncateFrontToSize:t.Message.getFieldWithDefault(r,5,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListConcatenateBackRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListConcatenateBackRequest;return o._ListConcatenateBackRequest.deserializeBinaryFromReader(i,r)},o._ListConcatenateBackRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=t.readBytes();e.addValues(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;case 5:r=t.readUint32();e.setTruncateFrontToSize(r);break;default:t.skipField()}}return e},o._ListConcatenateBackRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListConcatenateBackRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListConcatenateBackRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r),0!==(r=e.getTruncateFrontToSize())&&t.writeUint32(5,r)},o._ListConcatenateBackRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListConcatenateBackRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListConcatenateBackRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListConcatenateBackRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListConcatenateBackRequest.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,2)},o._ListConcatenateBackRequest.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._ListConcatenateBackRequest.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._ListConcatenateBackRequest.prototype.setValuesList=function(e){return t.Message.setField(this,2,e||[])},o._ListConcatenateBackRequest.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._ListConcatenateBackRequest.prototype.clearValuesList=function(){return this.setValuesList([])},o._ListConcatenateBackRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListConcatenateBackRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._ListConcatenateBackRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._ListConcatenateBackRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},o._ListConcatenateBackRequest.prototype.getTruncateFrontToSize=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListConcatenateBackRequest.prototype.setTruncateFrontToSize=function(e){return t.Message.setProto3IntField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListConcatenateBackResponse.prototype.toObject=function(e){return o._ListConcatenateBackResponse.toObject(e,this)},o._ListConcatenateBackResponse.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListConcatenateBackResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListConcatenateBackResponse;return o._ListConcatenateBackResponse.deserializeBinaryFromReader(i,r)},o._ListConcatenateBackResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListConcatenateBackResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListConcatenateBackResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListConcatenateBackResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListConcatenateBackResponse.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListConcatenateBackResponse.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPushFrontRequest.prototype.toObject=function(e){return o._ListPushFrontRequest.toObject(e,this)},o._ListPushFrontRequest.toObject=function(e,r){var o={listName:r.getListName_asB64(),value:r.getValue_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1),truncateBackToSize:t.Message.getFieldWithDefault(r,5,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPushFrontRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPushFrontRequest;return o._ListPushFrontRequest.deserializeBinaryFromReader(i,r)},o._ListPushFrontRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=t.readBytes();e.setValue(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;case 5:r=t.readUint32();e.setTruncateBackToSize(r);break;default:t.skipField()}}return e},o._ListPushFrontRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPushFrontRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPushFrontRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r),0!==(r=e.getTruncateBackToSize())&&t.writeUint32(5,r)},o._ListPushFrontRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPushFrontRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListPushFrontRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListPushFrontRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPushFrontRequest.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._ListPushFrontRequest.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._ListPushFrontRequest.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._ListPushFrontRequest.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},o._ListPushFrontRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListPushFrontRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._ListPushFrontRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._ListPushFrontRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},o._ListPushFrontRequest.prototype.getTruncateBackToSize=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListPushFrontRequest.prototype.setTruncateBackToSize=function(e){return t.Message.setProto3IntField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPushFrontResponse.prototype.toObject=function(e){return o._ListPushFrontResponse.toObject(e,this)},o._ListPushFrontResponse.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPushFrontResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPushFrontResponse;return o._ListPushFrontResponse.deserializeBinaryFromReader(i,r)},o._ListPushFrontResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListPushFrontResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPushFrontResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPushFrontResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListPushFrontResponse.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListPushFrontResponse.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPushBackRequest.prototype.toObject=function(e){return o._ListPushBackRequest.toObject(e,this)},o._ListPushBackRequest.toObject=function(e,r){var o={listName:r.getListName_asB64(),value:r.getValue_asB64(),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1),truncateFrontToSize:t.Message.getFieldWithDefault(r,5,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPushBackRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPushBackRequest;return o._ListPushBackRequest.deserializeBinaryFromReader(i,r)},o._ListPushBackRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=t.readBytes();e.setValue(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;case 5:r=t.readUint32();e.setTruncateFrontToSize(r);break;default:t.skipField()}}return e},o._ListPushBackRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPushBackRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPushBackRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r),0!==(r=e.getTruncateFrontToSize())&&t.writeUint32(5,r)},o._ListPushBackRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPushBackRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListPushBackRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListPushBackRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPushBackRequest.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._ListPushBackRequest.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._ListPushBackRequest.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._ListPushBackRequest.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},o._ListPushBackRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListPushBackRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._ListPushBackRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._ListPushBackRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},o._ListPushBackRequest.prototype.getTruncateFrontToSize=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListPushBackRequest.prototype.setTruncateFrontToSize=function(e){return t.Message.setProto3IntField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPushBackResponse.prototype.toObject=function(e){return o._ListPushBackResponse.toObject(e,this)},o._ListPushBackResponse.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPushBackResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPushBackResponse;return o._ListPushBackResponse.deserializeBinaryFromReader(i,r)},o._ListPushBackResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListPushBackResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPushBackResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPushBackResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListPushBackResponse.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListPushBackResponse.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPopFrontRequest.prototype.toObject=function(e){return o._ListPopFrontRequest.toObject(e,this)},o._ListPopFrontRequest.toObject=function(e,t){var r={listName:t.getListName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ListPopFrontRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopFrontRequest;return o._ListPopFrontRequest.deserializeBinaryFromReader(i,r)},o._ListPopFrontRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setListName(r)}else t.skipField()}return e},o._ListPopFrontRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopFrontRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopFrontRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r)},o._ListPopFrontRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPopFrontRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListPopFrontRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListPopFrontRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPopFrontResponse.oneofGroups_=[[1,2]],o._ListPopFrontResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListPopFrontResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListPopFrontResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListPopFrontResponse.prototype.toObject=function(e){return o._ListPopFrontResponse.toObject(e,this)},o._ListPopFrontResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListPopFrontResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListPopFrontResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListPopFrontResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopFrontResponse;return o._ListPopFrontResponse.deserializeBinaryFromReader(i,r)},o._ListPopFrontResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListPopFrontResponse._Found;t.readMessage(r,o._ListPopFrontResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListPopFrontResponse._Missing;t.readMessage(r,o._ListPopFrontResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListPopFrontResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopFrontResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopFrontResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListPopFrontResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListPopFrontResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListPopFrontResponse._Found.prototype.toObject=function(e){return o._ListPopFrontResponse._Found.toObject(e,this)},o._ListPopFrontResponse._Found.toObject=function(e,r){var o={front:r.getFront_asB64(),listLength:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPopFrontResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopFrontResponse._Found;return o._ListPopFrontResponse._Found.deserializeBinaryFromReader(i,r)},o._ListPopFrontResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setFront(r);break;case 2:r=t.readUint32();e.setListLength(r);break;default:t.skipField()}}return e},o._ListPopFrontResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopFrontResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopFrontResponse._Found.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getFront_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getListLength())&&t.writeUint32(2,r)},o._ListPopFrontResponse._Found.prototype.getFront=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPopFrontResponse._Found.prototype.getFront_asB64=function(){return t.Message.bytesAsB64(this.getFront())},o._ListPopFrontResponse._Found.prototype.getFront_asU8=function(){return t.Message.bytesAsU8(this.getFront())},o._ListPopFrontResponse._Found.prototype.setFront=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPopFrontResponse._Found.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,2,0)},o._ListPopFrontResponse._Found.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPopFrontResponse._Missing.prototype.toObject=function(e){return o._ListPopFrontResponse._Missing.toObject(e,this)},o._ListPopFrontResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListPopFrontResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopFrontResponse._Missing;return o._ListPopFrontResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListPopFrontResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListPopFrontResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopFrontResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopFrontResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListPopFrontResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListPopFrontResponse._Found,1)},o._ListPopFrontResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListPopFrontResponse.oneofGroups_[0],e)},o._ListPopFrontResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListPopFrontResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListPopFrontResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListPopFrontResponse._Missing,2)},o._ListPopFrontResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListPopFrontResponse.oneofGroups_[0],e)},o._ListPopFrontResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListPopFrontResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)};t.Message.GENERATE_TO_OBJECT&&(o._ListPopBackRequest.prototype.toObject=function(e){return o._ListPopBackRequest.toObject(e,this)},o._ListPopBackRequest.toObject=function(e,t){var r={listName:t.getListName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ListPopBackRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopBackRequest;return o._ListPopBackRequest.deserializeBinaryFromReader(i,r)},o._ListPopBackRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setListName(r)}else t.skipField()}return e},o._ListPopBackRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopBackRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopBackRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r)},o._ListPopBackRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPopBackRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListPopBackRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListPopBackRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPopBackResponse.oneofGroups_=[[1,2]],o._ListPopBackResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListPopBackResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListPopBackResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListPopBackResponse.prototype.toObject=function(e){return o._ListPopBackResponse.toObject(e,this)},o._ListPopBackResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListPopBackResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListPopBackResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListPopBackResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopBackResponse;return o._ListPopBackResponse.deserializeBinaryFromReader(i,r)},o._ListPopBackResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListPopBackResponse._Found;t.readMessage(r,o._ListPopBackResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListPopBackResponse._Missing;t.readMessage(r,o._ListPopBackResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListPopBackResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopBackResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopBackResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListPopBackResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListPopBackResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListPopBackResponse._Found.prototype.toObject=function(e){return o._ListPopBackResponse._Found.toObject(e,this)},o._ListPopBackResponse._Found.toObject=function(e,r){var o={back:r.getBack_asB64(),listLength:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListPopBackResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopBackResponse._Found;return o._ListPopBackResponse._Found.deserializeBinaryFromReader(i,r)},o._ListPopBackResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setBack(r);break;case 2:r=t.readUint32();e.setListLength(r);break;default:t.skipField()}}return e},o._ListPopBackResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopBackResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopBackResponse._Found.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getBack_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getListLength())&&t.writeUint32(2,r)},o._ListPopBackResponse._Found.prototype.getBack=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListPopBackResponse._Found.prototype.getBack_asB64=function(){return t.Message.bytesAsB64(this.getBack())},o._ListPopBackResponse._Found.prototype.getBack_asU8=function(){return t.Message.bytesAsU8(this.getBack())},o._ListPopBackResponse._Found.prototype.setBack=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListPopBackResponse._Found.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,2,0)},o._ListPopBackResponse._Found.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListPopBackResponse._Missing.prototype.toObject=function(e){return o._ListPopBackResponse._Missing.toObject(e,this)},o._ListPopBackResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListPopBackResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListPopBackResponse._Missing;return o._ListPopBackResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListPopBackResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListPopBackResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListPopBackResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListPopBackResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListPopBackResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListPopBackResponse._Found,1)},o._ListPopBackResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListPopBackResponse.oneofGroups_[0],e)},o._ListPopBackResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListPopBackResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListPopBackResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListPopBackResponse._Missing,2)},o._ListPopBackResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListPopBackResponse.oneofGroups_[0],e)},o._ListPopBackResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListPopBackResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._ListRange.prototype.toObject=function(e){return o._ListRange.toObject(e,this)},o._ListRange.toObject=function(e,r){var o={beginIndex:t.Message.getFieldWithDefault(r,1,0),count:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRange;return o._ListRange.deserializeBinaryFromReader(i,r)},o._ListRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setBeginIndex(r);break;case 2:r=t.readUint32();e.setCount(r);break;default:t.skipField()}}return e},o._ListRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRange.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getBeginIndex())&&t.writeUint32(1,r),0!==(r=e.getCount())&&t.writeUint32(2,r)},o._ListRange.prototype.getBeginIndex=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListRange.prototype.setBeginIndex=function(e){return t.Message.setProto3IntField(this,1,e)},o._ListRange.prototype.getCount=function(){return t.Message.getFieldWithDefault(this,2,0)},o._ListRange.prototype.setCount=function(e){return t.Message.setProto3IntField(this,2,e)},o._ListEraseRequest.oneofGroups_=[[2,3]],o._ListEraseRequest.EraseCase={ERASE_NOT_SET:0,SOME:2,ALL:3},o._ListEraseRequest.prototype.getEraseCase=function(){return t.Message.computeOneofCase(this,o._ListEraseRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListEraseRequest.prototype.toObject=function(e){return o._ListEraseRequest.toObject(e,this)},o._ListEraseRequest.toObject=function(e,t){var r,i={listName:t.getListName_asB64(),some:(r=t.getSome())&&o._ListEraseRequest._ListRanges.toObject(e,r),all:(r=t.getAll())&&o._ListEraseRequest._All.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListEraseRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseRequest;return o._ListEraseRequest.deserializeBinaryFromReader(i,r)},o._ListEraseRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=new o._ListEraseRequest._ListRanges;t.readMessage(r,o._ListEraseRequest._ListRanges.deserializeBinaryFromReader),e.setSome(r);break;case 3:r=new o._ListEraseRequest._All;t.readMessage(r,o._ListEraseRequest._All.deserializeBinaryFromReader),e.setAll(r);break;default:t.skipField()}}return e},o._ListEraseRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r),null!=(r=e.getSome())&&t.writeMessage(2,r,o._ListEraseRequest._ListRanges.serializeBinaryToWriter),null!=(r=e.getAll())&&t.writeMessage(3,r,o._ListEraseRequest._All.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListEraseRequest._All.prototype.toObject=function(e){return o._ListEraseRequest._All.toObject(e,this)},o._ListEraseRequest._All.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListEraseRequest._All.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseRequest._All;return o._ListEraseRequest._All.deserializeBinaryFromReader(i,r)},o._ListEraseRequest._All.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListEraseRequest._All.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseRequest._All.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseRequest._All.serializeBinaryToWriter=function(e,t){},o._ListEraseRequest._ListRanges.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._ListEraseRequest._ListRanges.prototype.toObject=function(e){return o._ListEraseRequest._ListRanges.toObject(e,this)},o._ListEraseRequest._ListRanges.toObject=function(e,r){var i={rangesList:t.Message.toObjectList(r.getRangesList(),o._ListRange.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._ListEraseRequest._ListRanges.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseRequest._ListRanges;return o._ListEraseRequest._ListRanges.deserializeBinaryFromReader(i,r)},o._ListEraseRequest._ListRanges.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._ListRange;t.readMessage(r,o._ListRange.deserializeBinaryFromReader),e.addRanges(r)}else t.skipField()}return e},o._ListEraseRequest._ListRanges.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseRequest._ListRanges.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseRequest._ListRanges.serializeBinaryToWriter=function(e,t){var r;(r=e.getRangesList()).length>0&&t.writeRepeatedMessage(1,r,o._ListRange.serializeBinaryToWriter)},o._ListEraseRequest._ListRanges.prototype.getRangesList=function(){return t.Message.getRepeatedWrapperField(this,o._ListRange,1)},o._ListEraseRequest._ListRanges.prototype.setRangesList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._ListEraseRequest._ListRanges.prototype.addRanges=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._ListRange,r)},o._ListEraseRequest._ListRanges.prototype.clearRangesList=function(){return this.setRangesList([])},o._ListEraseRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListEraseRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListEraseRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListEraseRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListEraseRequest.prototype.getSome=function(){return t.Message.getWrapperField(this,o._ListEraseRequest._ListRanges,2)},o._ListEraseRequest.prototype.setSome=function(e){return t.Message.setOneofWrapperField(this,2,o._ListEraseRequest.oneofGroups_[0],e)},o._ListEraseRequest.prototype.clearSome=function(){return this.setSome(void 0)},o._ListEraseRequest.prototype.hasSome=function(){return null!=t.Message.getField(this,2)},o._ListEraseRequest.prototype.getAll=function(){return t.Message.getWrapperField(this,o._ListEraseRequest._All,3)},o._ListEraseRequest.prototype.setAll=function(e){return t.Message.setOneofWrapperField(this,3,o._ListEraseRequest.oneofGroups_[0],e)},o._ListEraseRequest.prototype.clearAll=function(){return this.setAll(void 0)},o._ListEraseRequest.prototype.hasAll=function(){return null!=t.Message.getField(this,3)},o._ListEraseResponse.oneofGroups_=[[1,2]],o._ListEraseResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListEraseResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListEraseResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListEraseResponse.prototype.toObject=function(e){return o._ListEraseResponse.toObject(e,this)},o._ListEraseResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListEraseResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListEraseResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListEraseResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseResponse;return o._ListEraseResponse.deserializeBinaryFromReader(i,r)},o._ListEraseResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListEraseResponse._Found;t.readMessage(r,o._ListEraseResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListEraseResponse._Missing;t.readMessage(r,o._ListEraseResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListEraseResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListEraseResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListEraseResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListEraseResponse._Found.prototype.toObject=function(e){return o._ListEraseResponse._Found.toObject(e,this)},o._ListEraseResponse._Found.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListEraseResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseResponse._Found;return o._ListEraseResponse._Found.deserializeBinaryFromReader(i,r)},o._ListEraseResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListEraseResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListEraseResponse._Found.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListEraseResponse._Found.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListEraseResponse._Missing.prototype.toObject=function(e){return o._ListEraseResponse._Missing.toObject(e,this)},o._ListEraseResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListEraseResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListEraseResponse._Missing;return o._ListEraseResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListEraseResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListEraseResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListEraseResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListEraseResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListEraseResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListEraseResponse._Found,1)},o._ListEraseResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListEraseResponse.oneofGroups_[0],e)},o._ListEraseResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListEraseResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListEraseResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListEraseResponse._Missing,2)},o._ListEraseResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListEraseResponse.oneofGroups_[0],e)},o._ListEraseResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListEraseResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._ListRemoveRequest.oneofGroups_=[[2]],o._ListRemoveRequest.RemoveCase={REMOVE_NOT_SET:0,ALL_ELEMENTS_WITH_VALUE:2},o._ListRemoveRequest.prototype.getRemoveCase=function(){return t.Message.computeOneofCase(this,o._ListRemoveRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListRemoveRequest.prototype.toObject=function(e){return o._ListRemoveRequest.toObject(e,this)},o._ListRemoveRequest.toObject=function(e,t){var r={listName:t.getListName_asB64(),allElementsWithValue:t.getAllElementsWithValue_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ListRemoveRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRemoveRequest;return o._ListRemoveRequest.deserializeBinaryFromReader(i,r)},o._ListRemoveRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=t.readBytes();e.setAllElementsWithValue(r);break;default:t.skipField()}}return e},o._ListRemoveRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRemoveRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRemoveRequest.serializeBinaryToWriter=function(e,r){var o=void 0;(o=e.getListName_asU8()).length>0&&r.writeBytes(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBytes(2,o)},o._ListRemoveRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListRemoveRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListRemoveRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListRemoveRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListRemoveRequest.prototype.getAllElementsWithValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._ListRemoveRequest.prototype.getAllElementsWithValue_asB64=function(){return t.Message.bytesAsB64(this.getAllElementsWithValue())},o._ListRemoveRequest.prototype.getAllElementsWithValue_asU8=function(){return t.Message.bytesAsU8(this.getAllElementsWithValue())},o._ListRemoveRequest.prototype.setAllElementsWithValue=function(e){return t.Message.setOneofField(this,2,o._ListRemoveRequest.oneofGroups_[0],e)},o._ListRemoveRequest.prototype.clearAllElementsWithValue=function(){return t.Message.setOneofField(this,2,o._ListRemoveRequest.oneofGroups_[0],void 0)},o._ListRemoveRequest.prototype.hasAllElementsWithValue=function(){return null!=t.Message.getField(this,2)},o._ListRemoveResponse.oneofGroups_=[[1,2]],o._ListRemoveResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListRemoveResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListRemoveResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListRemoveResponse.prototype.toObject=function(e){return o._ListRemoveResponse.toObject(e,this)},o._ListRemoveResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListRemoveResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListRemoveResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListRemoveResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRemoveResponse;return o._ListRemoveResponse.deserializeBinaryFromReader(i,r)},o._ListRemoveResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListRemoveResponse._Found;t.readMessage(r,o._ListRemoveResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListRemoveResponse._Missing;t.readMessage(r,o._ListRemoveResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListRemoveResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRemoveResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRemoveResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListRemoveResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListRemoveResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListRemoveResponse._Found.prototype.toObject=function(e){return o._ListRemoveResponse._Found.toObject(e,this)},o._ListRemoveResponse._Found.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListRemoveResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRemoveResponse._Found;return o._ListRemoveResponse._Found.deserializeBinaryFromReader(i,r)},o._ListRemoveResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListRemoveResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRemoveResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRemoveResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListRemoveResponse._Found.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListRemoveResponse._Found.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListRemoveResponse._Missing.prototype.toObject=function(e){return o._ListRemoveResponse._Missing.toObject(e,this)},o._ListRemoveResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListRemoveResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRemoveResponse._Missing;return o._ListRemoveResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListRemoveResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListRemoveResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRemoveResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRemoveResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListRemoveResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListRemoveResponse._Found,1)},o._ListRemoveResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListRemoveResponse.oneofGroups_[0],e)},o._ListRemoveResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListRemoveResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListRemoveResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListRemoveResponse._Missing,2)},o._ListRemoveResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListRemoveResponse.oneofGroups_[0],e)},o._ListRemoveResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListRemoveResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._Unbounded.prototype.toObject=function(e){return o._Unbounded.toObject(e,this)},o._Unbounded.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._Unbounded.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Unbounded;return o._Unbounded.deserializeBinaryFromReader(i,r)},o._Unbounded.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._Unbounded.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Unbounded.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Unbounded.serializeBinaryToWriter=function(e,t){},o._ListFetchRequest.oneofGroups_=[[2,3],[4,5]],o._ListFetchRequest.StartIndexCase={START_INDEX_NOT_SET:0,UNBOUNDED_START:2,INCLUSIVE_START:3},o._ListFetchRequest.prototype.getStartIndexCase=function(){return t.Message.computeOneofCase(this,o._ListFetchRequest.oneofGroups_[0])},o._ListFetchRequest.EndIndexCase={END_INDEX_NOT_SET:0,UNBOUNDED_END:4,EXCLUSIVE_END:5},o._ListFetchRequest.prototype.getEndIndexCase=function(){return t.Message.computeOneofCase(this,o._ListFetchRequest.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._ListFetchRequest.prototype.toObject=function(e){return o._ListFetchRequest.toObject(e,this)},o._ListFetchRequest.toObject=function(e,r){var i,s={listName:r.getListName_asB64(),unboundedStart:(i=r.getUnboundedStart())&&o._Unbounded.toObject(e,i),inclusiveStart:t.Message.getFieldWithDefault(r,3,0),unboundedEnd:(i=r.getUnboundedEnd())&&o._Unbounded.toObject(e,i),exclusiveEnd:t.Message.getFieldWithDefault(r,5,0)};return e&&(s.$jspbMessageInstance=r),s}),o._ListFetchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListFetchRequest;return o._ListFetchRequest.deserializeBinaryFromReader(i,r)},o._ListFetchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedStart(r);break;case 3:r=t.readSint32();e.setInclusiveStart(r);break;case 4:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedEnd(r);break;case 5:r=t.readSint32();e.setExclusiveEnd(r);break;default:t.skipField()}}return e},o._ListFetchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListFetchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListFetchRequest.serializeBinaryToWriter=function(e,r){var i=void 0;(i=e.getListName_asU8()).length>0&&r.writeBytes(1,i),null!=(i=e.getUnboundedStart())&&r.writeMessage(2,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,3))&&r.writeSint32(3,i),null!=(i=e.getUnboundedEnd())&&r.writeMessage(4,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,5))&&r.writeSint32(5,i)},o._ListFetchRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListFetchRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListFetchRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListFetchRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListFetchRequest.prototype.getUnboundedStart=function(){return t.Message.getWrapperField(this,o._Unbounded,2)},o._ListFetchRequest.prototype.setUnboundedStart=function(e){return t.Message.setOneofWrapperField(this,2,o._ListFetchRequest.oneofGroups_[0],e)},o._ListFetchRequest.prototype.clearUnboundedStart=function(){return this.setUnboundedStart(void 0)},o._ListFetchRequest.prototype.hasUnboundedStart=function(){return null!=t.Message.getField(this,2)},o._ListFetchRequest.prototype.getInclusiveStart=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListFetchRequest.prototype.setInclusiveStart=function(e){return t.Message.setOneofField(this,3,o._ListFetchRequest.oneofGroups_[0],e)},o._ListFetchRequest.prototype.clearInclusiveStart=function(){return t.Message.setOneofField(this,3,o._ListFetchRequest.oneofGroups_[0],void 0)},o._ListFetchRequest.prototype.hasInclusiveStart=function(){return null!=t.Message.getField(this,3)},o._ListFetchRequest.prototype.getUnboundedEnd=function(){return t.Message.getWrapperField(this,o._Unbounded,4)},o._ListFetchRequest.prototype.setUnboundedEnd=function(e){return t.Message.setOneofWrapperField(this,4,o._ListFetchRequest.oneofGroups_[1],e)},o._ListFetchRequest.prototype.clearUnboundedEnd=function(){return this.setUnboundedEnd(void 0)},o._ListFetchRequest.prototype.hasUnboundedEnd=function(){return null!=t.Message.getField(this,4)},o._ListFetchRequest.prototype.getExclusiveEnd=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListFetchRequest.prototype.setExclusiveEnd=function(e){return t.Message.setOneofField(this,5,o._ListFetchRequest.oneofGroups_[1],e)},o._ListFetchRequest.prototype.clearExclusiveEnd=function(){return t.Message.setOneofField(this,5,o._ListFetchRequest.oneofGroups_[1],void 0)},o._ListFetchRequest.prototype.hasExclusiveEnd=function(){return null!=t.Message.getField(this,5)},o._ListRetainRequest.oneofGroups_=[[2,3],[4,5]],o._ListRetainRequest.StartIndexCase={START_INDEX_NOT_SET:0,UNBOUNDED_START:2,INCLUSIVE_START:3},o._ListRetainRequest.prototype.getStartIndexCase=function(){return t.Message.computeOneofCase(this,o._ListRetainRequest.oneofGroups_[0])},o._ListRetainRequest.EndIndexCase={END_INDEX_NOT_SET:0,UNBOUNDED_END:4,EXCLUSIVE_END:5},o._ListRetainRequest.prototype.getEndIndexCase=function(){return t.Message.computeOneofCase(this,o._ListRetainRequest.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._ListRetainRequest.prototype.toObject=function(e){return o._ListRetainRequest.toObject(e,this)},o._ListRetainRequest.toObject=function(e,r){var i,s={listName:r.getListName_asB64(),unboundedStart:(i=r.getUnboundedStart())&&o._Unbounded.toObject(e,i),inclusiveStart:t.Message.getFieldWithDefault(r,3,0),unboundedEnd:(i=r.getUnboundedEnd())&&o._Unbounded.toObject(e,i),exclusiveEnd:t.Message.getFieldWithDefault(r,5,0),ttlMilliseconds:t.Message.getFieldWithDefault(r,6,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,7,!1)};return e&&(s.$jspbMessageInstance=r),s}),o._ListRetainRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRetainRequest;return o._ListRetainRequest.deserializeBinaryFromReader(i,r)},o._ListRetainRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setListName(r);break;case 2:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedStart(r);break;case 3:r=t.readSint32();e.setInclusiveStart(r);break;case 4:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedEnd(r);break;case 5:r=t.readSint32();e.setExclusiveEnd(r);break;case 6:r=t.readUint64();e.setTtlMilliseconds(r);break;case 7:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._ListRetainRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRetainRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRetainRequest.serializeBinaryToWriter=function(e,r){var i=void 0;(i=e.getListName_asU8()).length>0&&r.writeBytes(1,i),null!=(i=e.getUnboundedStart())&&r.writeMessage(2,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,3))&&r.writeSint32(3,i),null!=(i=e.getUnboundedEnd())&&r.writeMessage(4,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,5))&&r.writeSint32(5,i),0!==(i=e.getTtlMilliseconds())&&r.writeUint64(6,i),(i=e.getRefreshTtl())&&r.writeBool(7,i)},o._ListRetainRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListRetainRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListRetainRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListRetainRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListRetainRequest.prototype.getUnboundedStart=function(){return t.Message.getWrapperField(this,o._Unbounded,2)},o._ListRetainRequest.prototype.setUnboundedStart=function(e){return t.Message.setOneofWrapperField(this,2,o._ListRetainRequest.oneofGroups_[0],e)},o._ListRetainRequest.prototype.clearUnboundedStart=function(){return this.setUnboundedStart(void 0)},o._ListRetainRequest.prototype.hasUnboundedStart=function(){return null!=t.Message.getField(this,2)},o._ListRetainRequest.prototype.getInclusiveStart=function(){return t.Message.getFieldWithDefault(this,3,0)},o._ListRetainRequest.prototype.setInclusiveStart=function(e){return t.Message.setOneofField(this,3,o._ListRetainRequest.oneofGroups_[0],e)},o._ListRetainRequest.prototype.clearInclusiveStart=function(){return t.Message.setOneofField(this,3,o._ListRetainRequest.oneofGroups_[0],void 0)},o._ListRetainRequest.prototype.hasInclusiveStart=function(){return null!=t.Message.getField(this,3)},o._ListRetainRequest.prototype.getUnboundedEnd=function(){return t.Message.getWrapperField(this,o._Unbounded,4)},o._ListRetainRequest.prototype.setUnboundedEnd=function(e){return t.Message.setOneofWrapperField(this,4,o._ListRetainRequest.oneofGroups_[1],e)},o._ListRetainRequest.prototype.clearUnboundedEnd=function(){return this.setUnboundedEnd(void 0)},o._ListRetainRequest.prototype.hasUnboundedEnd=function(){return null!=t.Message.getField(this,4)},o._ListRetainRequest.prototype.getExclusiveEnd=function(){return t.Message.getFieldWithDefault(this,5,0)},o._ListRetainRequest.prototype.setExclusiveEnd=function(e){return t.Message.setOneofField(this,5,o._ListRetainRequest.oneofGroups_[1],e)},o._ListRetainRequest.prototype.clearExclusiveEnd=function(){return t.Message.setOneofField(this,5,o._ListRetainRequest.oneofGroups_[1],void 0)},o._ListRetainRequest.prototype.hasExclusiveEnd=function(){return null!=t.Message.getField(this,5)},o._ListRetainRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,6,0)},o._ListRetainRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,6,e)},o._ListRetainRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,7,!1)},o._ListRetainRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,7,e)},o._ListRetainResponse.oneofGroups_=[[1,2]],o._ListRetainResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListRetainResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListRetainResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListRetainResponse.prototype.toObject=function(e){return o._ListRetainResponse.toObject(e,this)},o._ListRetainResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListRetainResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListRetainResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListRetainResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRetainResponse;return o._ListRetainResponse.deserializeBinaryFromReader(i,r)},o._ListRetainResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListRetainResponse._Found;t.readMessage(r,o._ListRetainResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListRetainResponse._Missing;t.readMessage(r,o._ListRetainResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListRetainResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRetainResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRetainResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListRetainResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListRetainResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListRetainResponse._Found.prototype.toObject=function(e){return o._ListRetainResponse._Found.toObject(e,this)},o._ListRetainResponse._Found.toObject=function(e,r){var o={listLength:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListRetainResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRetainResponse._Found;return o._ListRetainResponse._Found.deserializeBinaryFromReader(i,r)},o._ListRetainResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setListLength(r)}else t.skipField()}return e},o._ListRetainResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRetainResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRetainResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getListLength())&&t.writeUint32(1,r)},o._ListRetainResponse._Found.prototype.getListLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListRetainResponse._Found.prototype.setListLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListRetainResponse._Missing.prototype.toObject=function(e){return o._ListRetainResponse._Missing.toObject(e,this)},o._ListRetainResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListRetainResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListRetainResponse._Missing;return o._ListRetainResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListRetainResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListRetainResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListRetainResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListRetainResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListRetainResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListRetainResponse._Found,1)},o._ListRetainResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListRetainResponse.oneofGroups_[0],e)},o._ListRetainResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListRetainResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListRetainResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListRetainResponse._Missing,2)},o._ListRetainResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListRetainResponse.oneofGroups_[0],e)},o._ListRetainResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListRetainResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._ListFetchResponse.oneofGroups_=[[1,2]],o._ListFetchResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListFetchResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListFetchResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListFetchResponse.prototype.toObject=function(e){return o._ListFetchResponse.toObject(e,this)},o._ListFetchResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListFetchResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListFetchResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListFetchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListFetchResponse;return o._ListFetchResponse.deserializeBinaryFromReader(i,r)},o._ListFetchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListFetchResponse._Found;t.readMessage(r,o._ListFetchResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListFetchResponse._Missing;t.readMessage(r,o._ListFetchResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListFetchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListFetchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListFetchResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListFetchResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListFetchResponse._Missing.serializeBinaryToWriter)},o._ListFetchResponse._Found.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._ListFetchResponse._Found.prototype.toObject=function(e){return o._ListFetchResponse._Found.toObject(e,this)},o._ListFetchResponse._Found.toObject=function(e,t){var r={valuesList:t.getValuesList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ListFetchResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListFetchResponse._Found;return o._ListFetchResponse._Found.deserializeBinaryFromReader(i,r)},o._ListFetchResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addValues(r)}else t.skipField()}return e},o._ListFetchResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListFetchResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListFetchResponse._Found.serializeBinaryToWriter=function(e,t){var r;(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._ListFetchResponse._Found.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,1)},o._ListFetchResponse._Found.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._ListFetchResponse._Found.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._ListFetchResponse._Found.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},o._ListFetchResponse._Found.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._ListFetchResponse._Found.prototype.clearValuesList=function(){return this.setValuesList([])},t.Message.GENERATE_TO_OBJECT&&(o._ListFetchResponse._Missing.prototype.toObject=function(e){return o._ListFetchResponse._Missing.toObject(e,this)},o._ListFetchResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListFetchResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListFetchResponse._Missing;return o._ListFetchResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListFetchResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListFetchResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListFetchResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListFetchResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListFetchResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListFetchResponse._Found,1)},o._ListFetchResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListFetchResponse.oneofGroups_[0],e)},o._ListFetchResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListFetchResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListFetchResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListFetchResponse._Missing,2)},o._ListFetchResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListFetchResponse.oneofGroups_[0],e)},o._ListFetchResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListFetchResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._ListLengthRequest.prototype.toObject=function(e){return o._ListLengthRequest.toObject(e,this)},o._ListLengthRequest.toObject=function(e,t){var r={listName:t.getListName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._ListLengthRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListLengthRequest;return o._ListLengthRequest.deserializeBinaryFromReader(i,r)},o._ListLengthRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setListName(r)}else t.skipField()}return e},o._ListLengthRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListLengthRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListLengthRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getListName_asU8()).length>0&&t.writeBytes(1,r)},o._ListLengthRequest.prototype.getListName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListLengthRequest.prototype.getListName_asB64=function(){return t.Message.bytesAsB64(this.getListName())},o._ListLengthRequest.prototype.getListName_asU8=function(){return t.Message.bytesAsU8(this.getListName())},o._ListLengthRequest.prototype.setListName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._ListLengthResponse.oneofGroups_=[[1,2]],o._ListLengthResponse.ListCase={LIST_NOT_SET:0,FOUND:1,MISSING:2},o._ListLengthResponse.prototype.getListCase=function(){return t.Message.computeOneofCase(this,o._ListLengthResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._ListLengthResponse.prototype.toObject=function(e){return o._ListLengthResponse.toObject(e,this)},o._ListLengthResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._ListLengthResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._ListLengthResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._ListLengthResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListLengthResponse;return o._ListLengthResponse.deserializeBinaryFromReader(i,r)},o._ListLengthResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._ListLengthResponse._Found;t.readMessage(r,o._ListLengthResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._ListLengthResponse._Missing;t.readMessage(r,o._ListLengthResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._ListLengthResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListLengthResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListLengthResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._ListLengthResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._ListLengthResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._ListLengthResponse._Found.prototype.toObject=function(e){return o._ListLengthResponse._Found.toObject(e,this)},o._ListLengthResponse._Found.toObject=function(e,r){var o={length:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._ListLengthResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListLengthResponse._Found;return o._ListLengthResponse._Found.deserializeBinaryFromReader(i,r)},o._ListLengthResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setLength(r)}else t.skipField()}return e},o._ListLengthResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListLengthResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListLengthResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getLength())&&t.writeUint32(1,r)},o._ListLengthResponse._Found.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._ListLengthResponse._Found.prototype.setLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListLengthResponse._Missing.prototype.toObject=function(e){return o._ListLengthResponse._Missing.toObject(e,this)},o._ListLengthResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListLengthResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListLengthResponse._Missing;return o._ListLengthResponse._Missing.deserializeBinaryFromReader(i,r)},o._ListLengthResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListLengthResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListLengthResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListLengthResponse._Missing.serializeBinaryToWriter=function(e,t){},o._ListLengthResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._ListLengthResponse._Found,1)},o._ListLengthResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._ListLengthResponse.oneofGroups_[0],e)},o._ListLengthResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._ListLengthResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._ListLengthResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._ListLengthResponse._Missing,2)},o._ListLengthResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._ListLengthResponse.oneofGroups_[0],e)},o._ListLengthResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._ListLengthResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetElement.prototype.toObject=function(e){return o._SortedSetElement.toObject(e,this)},o._SortedSetElement.toObject=function(e,r){var o={value:r.getValue_asB64(),score:t.Message.getFloatingPointFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetElement.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetElement;return o._SortedSetElement.deserializeBinaryFromReader(i,r)},o._SortedSetElement.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setValue(r);break;case 2:r=t.readDouble();e.setScore(r);break;default:t.skipField()}}return e},o._SortedSetElement.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetElement.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetElement.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getValue_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getScore())&&t.writeDouble(2,r)},o._SortedSetElement.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetElement.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._SortedSetElement.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._SortedSetElement.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetElement.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._SortedSetElement.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,2,e)},o._SortedSetPutRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetPutRequest.prototype.toObject=function(e){return o._SortedSetPutRequest.toObject(e,this)},o._SortedSetPutRequest.toObject=function(e,r){var i={setName:r.getSetName_asB64(),elementsList:t.Message.toObjectList(r.getElementsList(),o._SortedSetElement.toObject,e),ttlMilliseconds:t.Message.getFieldWithDefault(r,3,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,4,!1)};return e&&(i.$jspbMessageInstance=r),i}),o._SortedSetPutRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetPutRequest;return o._SortedSetPutRequest.deserializeBinaryFromReader(i,r)},o._SortedSetPutRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=new o._SortedSetElement;t.readMessage(r,o._SortedSetElement.deserializeBinaryFromReader),e.addElements(r);break;case 3:r=t.readUint64();e.setTtlMilliseconds(r);break;case 4:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._SortedSetPutRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetPutRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetPutRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(2,r,o._SortedSetElement.serializeBinaryToWriter),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(3,r),(r=e.getRefreshTtl())&&t.writeBool(4,r)},o._SortedSetPutRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetPutRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetPutRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetPutRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetPutRequest.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._SortedSetElement,2)},o._SortedSetPutRequest.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},o._SortedSetPutRequest.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,o._SortedSetElement,r)},o._SortedSetPutRequest.prototype.clearElementsList=function(){return this.setElementsList([])},o._SortedSetPutRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SortedSetPutRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,3,e)},o._SortedSetPutRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},o._SortedSetPutRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetPutResponse.prototype.toObject=function(e){return o._SortedSetPutResponse.toObject(e,this)},o._SortedSetPutResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetPutResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetPutResponse;return o._SortedSetPutResponse.deserializeBinaryFromReader(i,r)},o._SortedSetPutResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetPutResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetPutResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetPutResponse.serializeBinaryToWriter=function(e,t){},o._SortedSetFetchRequest.oneofGroups_=[[4,5]],o._SortedSetFetchRequest.RangeCase={RANGE_NOT_SET:0,BY_INDEX:4,BY_SCORE:5},o._SortedSetFetchRequest.prototype.getRangeCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchRequest.prototype.toObject=function(e){return o._SortedSetFetchRequest.toObject(e,this)},o._SortedSetFetchRequest.toObject=function(e,r){var i,s={setName:r.getSetName_asB64(),order:t.Message.getFieldWithDefault(r,2,0),withScores:t.Message.getBooleanFieldWithDefault(r,3,!1),byIndex:(i=r.getByIndex())&&o._SortedSetFetchRequest._ByIndex.toObject(e,i),byScore:(i=r.getByScore())&&o._SortedSetFetchRequest._ByScore.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._SortedSetFetchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchRequest;return o._SortedSetFetchRequest.deserializeBinaryFromReader(i,r)},o._SortedSetFetchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readEnum();e.setOrder(r);break;case 3:r=t.readBool();e.setWithScores(r);break;case 4:r=new o._SortedSetFetchRequest._ByIndex;t.readMessage(r,o._SortedSetFetchRequest._ByIndex.deserializeBinaryFromReader),e.setByIndex(r);break;case 5:r=new o._SortedSetFetchRequest._ByScore;t.readMessage(r,o._SortedSetFetchRequest._ByScore.deserializeBinaryFromReader),e.setByScore(r);break;default:t.skipField()}}return e},o._SortedSetFetchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),0!==(r=e.getOrder())&&t.writeEnum(2,r),(r=e.getWithScores())&&t.writeBool(3,r),null!=(r=e.getByIndex())&&t.writeMessage(4,r,o._SortedSetFetchRequest._ByIndex.serializeBinaryToWriter),null!=(r=e.getByScore())&&t.writeMessage(5,r,o._SortedSetFetchRequest._ByScore.serializeBinaryToWriter)},o._SortedSetFetchRequest.Order={ASCENDING:0,DESCENDING:1},o._SortedSetFetchRequest._ByIndex.oneofGroups_=[[1,2],[3,4]],o._SortedSetFetchRequest._ByIndex.StartCase={START_NOT_SET:0,UNBOUNDED_START:1,INCLUSIVE_START_INDEX:2},o._SortedSetFetchRequest._ByIndex.prototype.getStartCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchRequest._ByIndex.oneofGroups_[0])},o._SortedSetFetchRequest._ByIndex.EndCase={END_NOT_SET:0,UNBOUNDED_END:3,EXCLUSIVE_END_INDEX:4},o._SortedSetFetchRequest._ByIndex.prototype.getEndCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchRequest._ByIndex.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchRequest._ByIndex.prototype.toObject=function(e){return o._SortedSetFetchRequest._ByIndex.toObject(e,this)},o._SortedSetFetchRequest._ByIndex.toObject=function(e,r){var i,s={unboundedStart:(i=r.getUnboundedStart())&&o._Unbounded.toObject(e,i),inclusiveStartIndex:t.Message.getFieldWithDefault(r,2,0),unboundedEnd:(i=r.getUnboundedEnd())&&o._Unbounded.toObject(e,i),exclusiveEndIndex:t.Message.getFieldWithDefault(r,4,0)};return e&&(s.$jspbMessageInstance=r),s}),o._SortedSetFetchRequest._ByIndex.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchRequest._ByIndex;return o._SortedSetFetchRequest._ByIndex.deserializeBinaryFromReader(i,r)},o._SortedSetFetchRequest._ByIndex.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedStart(r);break;case 2:r=t.readSint32();e.setInclusiveStartIndex(r);break;case 3:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedEnd(r);break;case 4:r=t.readSint32();e.setExclusiveEndIndex(r);break;default:t.skipField()}}return e},o._SortedSetFetchRequest._ByIndex.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchRequest._ByIndex.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchRequest._ByIndex.serializeBinaryToWriter=function(e,r){var i=void 0;null!=(i=e.getUnboundedStart())&&r.writeMessage(1,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,2))&&r.writeSint32(2,i),null!=(i=e.getUnboundedEnd())&&r.writeMessage(3,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,4))&&r.writeSint32(4,i)},o._SortedSetFetchRequest._ByIndex.prototype.getUnboundedStart=function(){return t.Message.getWrapperField(this,o._Unbounded,1)},o._SortedSetFetchRequest._ByIndex.prototype.setUnboundedStart=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetFetchRequest._ByIndex.oneofGroups_[0],e)},o._SortedSetFetchRequest._ByIndex.prototype.clearUnboundedStart=function(){return this.setUnboundedStart(void 0)},o._SortedSetFetchRequest._ByIndex.prototype.hasUnboundedStart=function(){return null!=t.Message.getField(this,1)},o._SortedSetFetchRequest._ByIndex.prototype.getInclusiveStartIndex=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SortedSetFetchRequest._ByIndex.prototype.setInclusiveStartIndex=function(e){return t.Message.setOneofField(this,2,o._SortedSetFetchRequest._ByIndex.oneofGroups_[0],e)},o._SortedSetFetchRequest._ByIndex.prototype.clearInclusiveStartIndex=function(){return t.Message.setOneofField(this,2,o._SortedSetFetchRequest._ByIndex.oneofGroups_[0],void 0)},o._SortedSetFetchRequest._ByIndex.prototype.hasInclusiveStartIndex=function(){return null!=t.Message.getField(this,2)},o._SortedSetFetchRequest._ByIndex.prototype.getUnboundedEnd=function(){return t.Message.getWrapperField(this,o._Unbounded,3)},o._SortedSetFetchRequest._ByIndex.prototype.setUnboundedEnd=function(e){return t.Message.setOneofWrapperField(this,3,o._SortedSetFetchRequest._ByIndex.oneofGroups_[1],e)},o._SortedSetFetchRequest._ByIndex.prototype.clearUnboundedEnd=function(){return this.setUnboundedEnd(void 0)},o._SortedSetFetchRequest._ByIndex.prototype.hasUnboundedEnd=function(){return null!=t.Message.getField(this,3)},o._SortedSetFetchRequest._ByIndex.prototype.getExclusiveEndIndex=function(){return t.Message.getFieldWithDefault(this,4,0)},o._SortedSetFetchRequest._ByIndex.prototype.setExclusiveEndIndex=function(e){return t.Message.setOneofField(this,4,o._SortedSetFetchRequest._ByIndex.oneofGroups_[1],e)},o._SortedSetFetchRequest._ByIndex.prototype.clearExclusiveEndIndex=function(){return t.Message.setOneofField(this,4,o._SortedSetFetchRequest._ByIndex.oneofGroups_[1],void 0)},o._SortedSetFetchRequest._ByIndex.prototype.hasExclusiveEndIndex=function(){return null!=t.Message.getField(this,4)},o._SortedSetFetchRequest._ByScore.oneofGroups_=[[1,2],[3,4]],o._SortedSetFetchRequest._ByScore.MinCase={MIN_NOT_SET:0,UNBOUNDED_MIN:1,MIN_SCORE:2},o._SortedSetFetchRequest._ByScore.prototype.getMinCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchRequest._ByScore.oneofGroups_[0])},o._SortedSetFetchRequest._ByScore.MaxCase={MAX_NOT_SET:0,UNBOUNDED_MAX:3,MAX_SCORE:4},o._SortedSetFetchRequest._ByScore.prototype.getMaxCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchRequest._ByScore.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchRequest._ByScore.prototype.toObject=function(e){return o._SortedSetFetchRequest._ByScore.toObject(e,this)},o._SortedSetFetchRequest._ByScore.toObject=function(e,r){var i,s={unboundedMin:(i=r.getUnboundedMin())&&o._Unbounded.toObject(e,i),minScore:(i=r.getMinScore())&&o._SortedSetFetchRequest._ByScore._Score.toObject(e,i),unboundedMax:(i=r.getUnboundedMax())&&o._Unbounded.toObject(e,i),maxScore:(i=r.getMaxScore())&&o._SortedSetFetchRequest._ByScore._Score.toObject(e,i),offset:t.Message.getFieldWithDefault(r,5,0),count:t.Message.getFieldWithDefault(r,6,0)};return e&&(s.$jspbMessageInstance=r),s}),o._SortedSetFetchRequest._ByScore.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchRequest._ByScore;return o._SortedSetFetchRequest._ByScore.deserializeBinaryFromReader(i,r)},o._SortedSetFetchRequest._ByScore.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMin(r);break;case 2:r=new o._SortedSetFetchRequest._ByScore._Score;t.readMessage(r,o._SortedSetFetchRequest._ByScore._Score.deserializeBinaryFromReader),e.setMinScore(r);break;case 3:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMax(r);break;case 4:r=new o._SortedSetFetchRequest._ByScore._Score;t.readMessage(r,o._SortedSetFetchRequest._ByScore._Score.deserializeBinaryFromReader),e.setMaxScore(r);break;case 5:r=t.readUint32();e.setOffset(r);break;case 6:r=t.readSint32();e.setCount(r);break;default:t.skipField()}}return e},o._SortedSetFetchRequest._ByScore.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchRequest._ByScore.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchRequest._ByScore.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getUnboundedMin())&&t.writeMessage(1,r,o._Unbounded.serializeBinaryToWriter),null!=(r=e.getMinScore())&&t.writeMessage(2,r,o._SortedSetFetchRequest._ByScore._Score.serializeBinaryToWriter),null!=(r=e.getUnboundedMax())&&t.writeMessage(3,r,o._Unbounded.serializeBinaryToWriter),null!=(r=e.getMaxScore())&&t.writeMessage(4,r,o._SortedSetFetchRequest._ByScore._Score.serializeBinaryToWriter),0!==(r=e.getOffset())&&t.writeUint32(5,r),0!==(r=e.getCount())&&t.writeSint32(6,r)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchRequest._ByScore._Score.prototype.toObject=function(e){return o._SortedSetFetchRequest._ByScore._Score.toObject(e,this)},o._SortedSetFetchRequest._ByScore._Score.toObject=function(e,r){var o={score:t.Message.getFloatingPointFieldWithDefault(r,1,0),exclusive:t.Message.getBooleanFieldWithDefault(r,2,!1)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetFetchRequest._ByScore._Score.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchRequest._ByScore._Score;return o._SortedSetFetchRequest._ByScore._Score.deserializeBinaryFromReader(i,r)},o._SortedSetFetchRequest._ByScore._Score.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setScore(r);break;case 2:r=t.readBool();e.setExclusive(r);break;default:t.skipField()}}return e},o._SortedSetFetchRequest._ByScore._Score.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchRequest._ByScore._Score.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchRequest._ByScore._Score.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getScore())&&t.writeDouble(1,r),(r=e.getExclusive())&&t.writeBool(2,r)},o._SortedSetFetchRequest._ByScore._Score.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},o._SortedSetFetchRequest._ByScore._Score.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,1,e)},o._SortedSetFetchRequest._ByScore._Score.prototype.getExclusive=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},o._SortedSetFetchRequest._ByScore._Score.prototype.setExclusive=function(e){return t.Message.setProto3BooleanField(this,2,e)},o._SortedSetFetchRequest._ByScore.prototype.getUnboundedMin=function(){return t.Message.getWrapperField(this,o._Unbounded,1)},o._SortedSetFetchRequest._ByScore.prototype.setUnboundedMin=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetFetchRequest._ByScore.oneofGroups_[0],e)},o._SortedSetFetchRequest._ByScore.prototype.clearUnboundedMin=function(){return this.setUnboundedMin(void 0)},o._SortedSetFetchRequest._ByScore.prototype.hasUnboundedMin=function(){return null!=t.Message.getField(this,1)},o._SortedSetFetchRequest._ByScore.prototype.getMinScore=function(){return t.Message.getWrapperField(this,o._SortedSetFetchRequest._ByScore._Score,2)},o._SortedSetFetchRequest._ByScore.prototype.setMinScore=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetFetchRequest._ByScore.oneofGroups_[0],e)},o._SortedSetFetchRequest._ByScore.prototype.clearMinScore=function(){return this.setMinScore(void 0)},o._SortedSetFetchRequest._ByScore.prototype.hasMinScore=function(){return null!=t.Message.getField(this,2)},o._SortedSetFetchRequest._ByScore.prototype.getUnboundedMax=function(){return t.Message.getWrapperField(this,o._Unbounded,3)},o._SortedSetFetchRequest._ByScore.prototype.setUnboundedMax=function(e){return t.Message.setOneofWrapperField(this,3,o._SortedSetFetchRequest._ByScore.oneofGroups_[1],e)},o._SortedSetFetchRequest._ByScore.prototype.clearUnboundedMax=function(){return this.setUnboundedMax(void 0)},o._SortedSetFetchRequest._ByScore.prototype.hasUnboundedMax=function(){return null!=t.Message.getField(this,3)},o._SortedSetFetchRequest._ByScore.prototype.getMaxScore=function(){return t.Message.getWrapperField(this,o._SortedSetFetchRequest._ByScore._Score,4)},o._SortedSetFetchRequest._ByScore.prototype.setMaxScore=function(e){return t.Message.setOneofWrapperField(this,4,o._SortedSetFetchRequest._ByScore.oneofGroups_[1],e)},o._SortedSetFetchRequest._ByScore.prototype.clearMaxScore=function(){return this.setMaxScore(void 0)},o._SortedSetFetchRequest._ByScore.prototype.hasMaxScore=function(){return null!=t.Message.getField(this,4)},o._SortedSetFetchRequest._ByScore.prototype.getOffset=function(){return t.Message.getFieldWithDefault(this,5,0)},o._SortedSetFetchRequest._ByScore.prototype.setOffset=function(e){return t.Message.setProto3IntField(this,5,e)},o._SortedSetFetchRequest._ByScore.prototype.getCount=function(){return t.Message.getFieldWithDefault(this,6,0)},o._SortedSetFetchRequest._ByScore.prototype.setCount=function(e){return t.Message.setProto3IntField(this,6,e)},o._SortedSetFetchRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetFetchRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetFetchRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetFetchRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetFetchRequest.prototype.getOrder=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SortedSetFetchRequest.prototype.setOrder=function(e){return t.Message.setProto3EnumField(this,2,e)},o._SortedSetFetchRequest.prototype.getWithScores=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},o._SortedSetFetchRequest.prototype.setWithScores=function(e){return t.Message.setProto3BooleanField(this,3,e)},o._SortedSetFetchRequest.prototype.getByIndex=function(){return t.Message.getWrapperField(this,o._SortedSetFetchRequest._ByIndex,4)},o._SortedSetFetchRequest.prototype.setByIndex=function(e){return t.Message.setOneofWrapperField(this,4,o._SortedSetFetchRequest.oneofGroups_[0],e)},o._SortedSetFetchRequest.prototype.clearByIndex=function(){return this.setByIndex(void 0)},o._SortedSetFetchRequest.prototype.hasByIndex=function(){return null!=t.Message.getField(this,4)},o._SortedSetFetchRequest.prototype.getByScore=function(){return t.Message.getWrapperField(this,o._SortedSetFetchRequest._ByScore,5)},o._SortedSetFetchRequest.prototype.setByScore=function(e){return t.Message.setOneofWrapperField(this,5,o._SortedSetFetchRequest.oneofGroups_[0],e)},o._SortedSetFetchRequest.prototype.clearByScore=function(){return this.setByScore(void 0)},o._SortedSetFetchRequest.prototype.hasByScore=function(){return null!=t.Message.getField(this,5)},o._SortedSetFetchResponse.oneofGroups_=[[1,2]],o._SortedSetFetchResponse.SortedSetCase={SORTED_SET_NOT_SET:0,FOUND:1,MISSING:2},o._SortedSetFetchResponse.prototype.getSortedSetCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchResponse.prototype.toObject=function(e){return o._SortedSetFetchResponse.toObject(e,this)},o._SortedSetFetchResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SortedSetFetchResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SortedSetFetchResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetFetchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchResponse;return o._SortedSetFetchResponse.deserializeBinaryFromReader(i,r)},o._SortedSetFetchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetFetchResponse._Found;t.readMessage(r,o._SortedSetFetchResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SortedSetFetchResponse._Missing;t.readMessage(r,o._SortedSetFetchResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SortedSetFetchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SortedSetFetchResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SortedSetFetchResponse._Missing.serializeBinaryToWriter)},o._SortedSetFetchResponse._Found.oneofGroups_=[[1,2]],o._SortedSetFetchResponse._Found.ElementsCase={ELEMENTS_NOT_SET:0,VALUES_WITH_SCORES:1,VALUES:2},o._SortedSetFetchResponse._Found.prototype.getElementsCase=function(){return t.Message.computeOneofCase(this,o._SortedSetFetchResponse._Found.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchResponse._Found.prototype.toObject=function(e){return o._SortedSetFetchResponse._Found.toObject(e,this)},o._SortedSetFetchResponse._Found.toObject=function(e,t){var r,i={valuesWithScores:(r=t.getValuesWithScores())&&o._SortedSetFetchResponse._Found._ValuesWithScores.toObject(e,r),values:(r=t.getValues())&&o._SortedSetFetchResponse._Found._Values.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetFetchResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchResponse._Found;return o._SortedSetFetchResponse._Found.deserializeBinaryFromReader(i,r)},o._SortedSetFetchResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetFetchResponse._Found._ValuesWithScores;t.readMessage(r,o._SortedSetFetchResponse._Found._ValuesWithScores.deserializeBinaryFromReader),e.setValuesWithScores(r);break;case 2:r=new o._SortedSetFetchResponse._Found._Values;t.readMessage(r,o._SortedSetFetchResponse._Found._Values.deserializeBinaryFromReader),e.setValues(r);break;default:t.skipField()}}return e},o._SortedSetFetchResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchResponse._Found.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getValuesWithScores())&&t.writeMessage(1,r,o._SortedSetFetchResponse._Found._ValuesWithScores.serializeBinaryToWriter),null!=(r=e.getValues())&&t.writeMessage(2,r,o._SortedSetFetchResponse._Found._Values.serializeBinaryToWriter)},o._SortedSetFetchResponse._Found._ValuesWithScores.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.toObject=function(e){return o._SortedSetFetchResponse._Found._ValuesWithScores.toObject(e,this)},o._SortedSetFetchResponse._Found._ValuesWithScores.toObject=function(e,r){var i={elementsList:t.Message.toObjectList(r.getElementsList(),o._SortedSetElement.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._SortedSetFetchResponse._Found._ValuesWithScores.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchResponse._Found._ValuesWithScores;return o._SortedSetFetchResponse._Found._ValuesWithScores.deserializeBinaryFromReader(i,r)},o._SortedSetFetchResponse._Found._ValuesWithScores.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._SortedSetElement;t.readMessage(r,o._SortedSetElement.deserializeBinaryFromReader),e.addElements(r)}else t.skipField()}return e},o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchResponse._Found._ValuesWithScores.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchResponse._Found._ValuesWithScores.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(1,r,o._SortedSetElement.serializeBinaryToWriter)},o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._SortedSetElement,1)},o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._SortedSetElement,r)},o._SortedSetFetchResponse._Found._ValuesWithScores.prototype.clearElementsList=function(){return this.setElementsList([])},o._SortedSetFetchResponse._Found._Values.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchResponse._Found._Values.prototype.toObject=function(e){return o._SortedSetFetchResponse._Found._Values.toObject(e,this)},o._SortedSetFetchResponse._Found._Values.toObject=function(e,t){var r={valuesList:t.getValuesList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetFetchResponse._Found._Values.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchResponse._Found._Values;return o._SortedSetFetchResponse._Found._Values.deserializeBinaryFromReader(i,r)},o._SortedSetFetchResponse._Found._Values.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addValues(r)}else t.skipField()}return e},o._SortedSetFetchResponse._Found._Values.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchResponse._Found._Values.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchResponse._Found._Values.serializeBinaryToWriter=function(e,t){var r;(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SortedSetFetchResponse._Found._Values.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,1)},o._SortedSetFetchResponse._Found._Values.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._SortedSetFetchResponse._Found._Values.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._SortedSetFetchResponse._Found._Values.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},o._SortedSetFetchResponse._Found._Values.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SortedSetFetchResponse._Found._Values.prototype.clearValuesList=function(){return this.setValuesList([])},o._SortedSetFetchResponse._Found.prototype.getValuesWithScores=function(){return t.Message.getWrapperField(this,o._SortedSetFetchResponse._Found._ValuesWithScores,1)},o._SortedSetFetchResponse._Found.prototype.setValuesWithScores=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetFetchResponse._Found.oneofGroups_[0],e)},o._SortedSetFetchResponse._Found.prototype.clearValuesWithScores=function(){return this.setValuesWithScores(void 0)},o._SortedSetFetchResponse._Found.prototype.hasValuesWithScores=function(){return null!=t.Message.getField(this,1)},o._SortedSetFetchResponse._Found.prototype.getValues=function(){return t.Message.getWrapperField(this,o._SortedSetFetchResponse._Found._Values,2)},o._SortedSetFetchResponse._Found.prototype.setValues=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetFetchResponse._Found.oneofGroups_[0],e)},o._SortedSetFetchResponse._Found.prototype.clearValues=function(){return this.setValues(void 0)},o._SortedSetFetchResponse._Found.prototype.hasValues=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetFetchResponse._Missing.prototype.toObject=function(e){return o._SortedSetFetchResponse._Missing.toObject(e,this)},o._SortedSetFetchResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetFetchResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetFetchResponse._Missing;return o._SortedSetFetchResponse._Missing.deserializeBinaryFromReader(i,r)},o._SortedSetFetchResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetFetchResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetFetchResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetFetchResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SortedSetFetchResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SortedSetFetchResponse._Found,1)},o._SortedSetFetchResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetFetchResponse.oneofGroups_[0],e)},o._SortedSetFetchResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SortedSetFetchResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SortedSetFetchResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SortedSetFetchResponse._Missing,2)},o._SortedSetFetchResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetFetchResponse.oneofGroups_[0],e)},o._SortedSetFetchResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SortedSetFetchResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._SortedSetGetScoreRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetScoreRequest.prototype.toObject=function(e){return o._SortedSetGetScoreRequest.toObject(e,this)},o._SortedSetGetScoreRequest.toObject=function(e,t){var r={setName:t.getSetName_asB64(),valuesList:t.getValuesList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetGetScoreRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetScoreRequest;return o._SortedSetGetScoreRequest.deserializeBinaryFromReader(i,r)},o._SortedSetGetScoreRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readBytes();e.addValues(r);break;default:t.skipField()}}return e},o._SortedSetGetScoreRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetScoreRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetScoreRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(2,r)},o._SortedSetGetScoreRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetGetScoreRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetGetScoreRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetGetScoreRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetGetScoreRequest.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,2)},o._SortedSetGetScoreRequest.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._SortedSetGetScoreRequest.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._SortedSetGetScoreRequest.prototype.setValuesList=function(e){return t.Message.setField(this,2,e||[])},o._SortedSetGetScoreRequest.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._SortedSetGetScoreRequest.prototype.clearValuesList=function(){return this.setValuesList([])},o._SortedSetGetScoreResponse.oneofGroups_=[[1,2]],o._SortedSetGetScoreResponse.SortedSetCase={SORTED_SET_NOT_SET:0,FOUND:1,MISSING:2},o._SortedSetGetScoreResponse.prototype.getSortedSetCase=function(){return t.Message.computeOneofCase(this,o._SortedSetGetScoreResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetScoreResponse.prototype.toObject=function(e){return o._SortedSetGetScoreResponse.toObject(e,this)},o._SortedSetGetScoreResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SortedSetGetScoreResponse._SortedSetFound.toObject(e,r),missing:(r=t.getMissing())&&o._SortedSetGetScoreResponse._SortedSetMissing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetGetScoreResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetScoreResponse;return o._SortedSetGetScoreResponse.deserializeBinaryFromReader(i,r)},o._SortedSetGetScoreResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetGetScoreResponse._SortedSetFound;t.readMessage(r,o._SortedSetGetScoreResponse._SortedSetFound.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SortedSetGetScoreResponse._SortedSetMissing;t.readMessage(r,o._SortedSetGetScoreResponse._SortedSetMissing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SortedSetGetScoreResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetScoreResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetScoreResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SortedSetGetScoreResponse._SortedSetFound.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SortedSetGetScoreResponse._SortedSetMissing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.toObject=function(e){return o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.toObject(e,this)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.toObject=function(e,r){var o={result:t.Message.getFieldWithDefault(r,1,0),score:t.Message.getFloatingPointFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart;return o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.deserializeBinaryFromReader(i,r)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setResult(r);break;case 2:r=t.readDouble();e.setScore(r);break;default:t.skipField()}}return e},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getResult())&&t.writeEnum(1,r),0!==(r=e.getScore())&&t.writeDouble(2,r)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.getResult=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.setResult=function(e){return t.Message.setProto3EnumField(this,1,e)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,2,e)},o._SortedSetGetScoreResponse._SortedSetFound.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetScoreResponse._SortedSetFound.prototype.toObject=function(e){return o._SortedSetGetScoreResponse._SortedSetFound.toObject(e,this)},o._SortedSetGetScoreResponse._SortedSetFound.toObject=function(e,r){var i={elementsList:t.Message.toObjectList(r.getElementsList(),o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._SortedSetGetScoreResponse._SortedSetFound.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetScoreResponse._SortedSetFound;return o._SortedSetGetScoreResponse._SortedSetFound.deserializeBinaryFromReader(i,r)},o._SortedSetGetScoreResponse._SortedSetFound.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart;t.readMessage(r,o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.deserializeBinaryFromReader),e.addElements(r)}else t.skipField()}return e},o._SortedSetGetScoreResponse._SortedSetFound.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetScoreResponse._SortedSetFound.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetScoreResponse._SortedSetFound.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(1,r,o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart.serializeBinaryToWriter)},o._SortedSetGetScoreResponse._SortedSetFound.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart,1)},o._SortedSetGetScoreResponse._SortedSetFound.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._SortedSetGetScoreResponse._SortedSetFound.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._SortedSetGetScoreResponse._SortedSetGetScoreResponsePart,r)},o._SortedSetGetScoreResponse._SortedSetFound.prototype.clearElementsList=function(){return this.setElementsList([])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetScoreResponse._SortedSetMissing.prototype.toObject=function(e){return o._SortedSetGetScoreResponse._SortedSetMissing.toObject(e,this)},o._SortedSetGetScoreResponse._SortedSetMissing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetGetScoreResponse._SortedSetMissing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetScoreResponse._SortedSetMissing;return o._SortedSetGetScoreResponse._SortedSetMissing.deserializeBinaryFromReader(i,r)},o._SortedSetGetScoreResponse._SortedSetMissing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetGetScoreResponse._SortedSetMissing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetScoreResponse._SortedSetMissing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetScoreResponse._SortedSetMissing.serializeBinaryToWriter=function(e,t){},o._SortedSetGetScoreResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SortedSetGetScoreResponse._SortedSetFound,1)},o._SortedSetGetScoreResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetGetScoreResponse.oneofGroups_[0],e)},o._SortedSetGetScoreResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SortedSetGetScoreResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SortedSetGetScoreResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SortedSetGetScoreResponse._SortedSetMissing,2)},o._SortedSetGetScoreResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetGetScoreResponse.oneofGroups_[0],e)},o._SortedSetGetScoreResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SortedSetGetScoreResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._SortedSetRemoveRequest.oneofGroups_=[[2,3]],o._SortedSetRemoveRequest.RemoveElementsCase={REMOVE_ELEMENTS_NOT_SET:0,ALL:2,SOME:3},o._SortedSetRemoveRequest.prototype.getRemoveElementsCase=function(){return t.Message.computeOneofCase(this,o._SortedSetRemoveRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetRemoveRequest.prototype.toObject=function(e){return o._SortedSetRemoveRequest.toObject(e,this)},o._SortedSetRemoveRequest.toObject=function(e,t){var r,i={setName:t.getSetName_asB64(),all:(r=t.getAll())&&o._SortedSetRemoveRequest._All.toObject(e,r),some:(r=t.getSome())&&o._SortedSetRemoveRequest._Some.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetRemoveRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetRemoveRequest;return o._SortedSetRemoveRequest.deserializeBinaryFromReader(i,r)},o._SortedSetRemoveRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=new o._SortedSetRemoveRequest._All;t.readMessage(r,o._SortedSetRemoveRequest._All.deserializeBinaryFromReader),e.setAll(r);break;case 3:r=new o._SortedSetRemoveRequest._Some;t.readMessage(r,o._SortedSetRemoveRequest._Some.deserializeBinaryFromReader),e.setSome(r);break;default:t.skipField()}}return e},o._SortedSetRemoveRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetRemoveRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetRemoveRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),null!=(r=e.getAll())&&t.writeMessage(2,r,o._SortedSetRemoveRequest._All.serializeBinaryToWriter),null!=(r=e.getSome())&&t.writeMessage(3,r,o._SortedSetRemoveRequest._Some.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetRemoveRequest._All.prototype.toObject=function(e){return o._SortedSetRemoveRequest._All.toObject(e,this)},o._SortedSetRemoveRequest._All.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetRemoveRequest._All.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetRemoveRequest._All;return o._SortedSetRemoveRequest._All.deserializeBinaryFromReader(i,r)},o._SortedSetRemoveRequest._All.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetRemoveRequest._All.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetRemoveRequest._All.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetRemoveRequest._All.serializeBinaryToWriter=function(e,t){},o._SortedSetRemoveRequest._Some.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SortedSetRemoveRequest._Some.prototype.toObject=function(e){return o._SortedSetRemoveRequest._Some.toObject(e,this)},o._SortedSetRemoveRequest._Some.toObject=function(e,t){var r={valuesList:t.getValuesList_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetRemoveRequest._Some.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetRemoveRequest._Some;return o._SortedSetRemoveRequest._Some.deserializeBinaryFromReader(i,r)},o._SortedSetRemoveRequest._Some.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.addValues(r)}else t.skipField()}return e},o._SortedSetRemoveRequest._Some.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetRemoveRequest._Some.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetRemoveRequest._Some.serializeBinaryToWriter=function(e,t){var r;(r=e.getValuesList_asU8()).length>0&&t.writeRepeatedBytes(1,r)},o._SortedSetRemoveRequest._Some.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,1)},o._SortedSetRemoveRequest._Some.prototype.getValuesList_asB64=function(){return t.Message.bytesListAsB64(this.getValuesList())},o._SortedSetRemoveRequest._Some.prototype.getValuesList_asU8=function(){return t.Message.bytesListAsU8(this.getValuesList())},o._SortedSetRemoveRequest._Some.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},o._SortedSetRemoveRequest._Some.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._SortedSetRemoveRequest._Some.prototype.clearValuesList=function(){return this.setValuesList([])},o._SortedSetRemoveRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetRemoveRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetRemoveRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetRemoveRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetRemoveRequest.prototype.getAll=function(){return t.Message.getWrapperField(this,o._SortedSetRemoveRequest._All,2)},o._SortedSetRemoveRequest.prototype.setAll=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetRemoveRequest.oneofGroups_[0],e)},o._SortedSetRemoveRequest.prototype.clearAll=function(){return this.setAll(void 0)},o._SortedSetRemoveRequest.prototype.hasAll=function(){return null!=t.Message.getField(this,2)},o._SortedSetRemoveRequest.prototype.getSome=function(){return t.Message.getWrapperField(this,o._SortedSetRemoveRequest._Some,3)},o._SortedSetRemoveRequest.prototype.setSome=function(e){return t.Message.setOneofWrapperField(this,3,o._SortedSetRemoveRequest.oneofGroups_[0],e)},o._SortedSetRemoveRequest.prototype.clearSome=function(){return this.setSome(void 0)},o._SortedSetRemoveRequest.prototype.hasSome=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetRemoveResponse.prototype.toObject=function(e){return o._SortedSetRemoveResponse.toObject(e,this)},o._SortedSetRemoveResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetRemoveResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetRemoveResponse;return o._SortedSetRemoveResponse.deserializeBinaryFromReader(i,r)},o._SortedSetRemoveResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetRemoveResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetRemoveResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetRemoveResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetIncrementRequest.prototype.toObject=function(e){return o._SortedSetIncrementRequest.toObject(e,this)},o._SortedSetIncrementRequest.toObject=function(e,r){var o={setName:r.getSetName_asB64(),value:r.getValue_asB64(),amount:t.Message.getFloatingPointFieldWithDefault(r,3,0),ttlMilliseconds:t.Message.getFieldWithDefault(r,4,0),refreshTtl:t.Message.getBooleanFieldWithDefault(r,5,!1)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetIncrementRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetIncrementRequest;return o._SortedSetIncrementRequest.deserializeBinaryFromReader(i,r)},o._SortedSetIncrementRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readBytes();e.setValue(r);break;case 3:r=t.readDouble();e.setAmount(r);break;case 4:r=t.readUint64();e.setTtlMilliseconds(r);break;case 5:r=t.readBool();e.setRefreshTtl(r);break;default:t.skipField()}}return e},o._SortedSetIncrementRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetIncrementRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetIncrementRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getAmount())&&t.writeDouble(3,r),0!==(r=e.getTtlMilliseconds())&&t.writeUint64(4,r),(r=e.getRefreshTtl())&&t.writeBool(5,r)},o._SortedSetIncrementRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetIncrementRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetIncrementRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetIncrementRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetIncrementRequest.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SortedSetIncrementRequest.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._SortedSetIncrementRequest.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._SortedSetIncrementRequest.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},o._SortedSetIncrementRequest.prototype.getAmount=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},o._SortedSetIncrementRequest.prototype.setAmount=function(e){return t.Message.setProto3FloatField(this,3,e)},o._SortedSetIncrementRequest.prototype.getTtlMilliseconds=function(){return t.Message.getFieldWithDefault(this,4,0)},o._SortedSetIncrementRequest.prototype.setTtlMilliseconds=function(e){return t.Message.setProto3IntField(this,4,e)},o._SortedSetIncrementRequest.prototype.getRefreshTtl=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},o._SortedSetIncrementRequest.prototype.setRefreshTtl=function(e){return t.Message.setProto3BooleanField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetIncrementResponse.prototype.toObject=function(e){return o._SortedSetIncrementResponse.toObject(e,this)},o._SortedSetIncrementResponse.toObject=function(e,r){var o={score:t.Message.getFloatingPointFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetIncrementResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetIncrementResponse;return o._SortedSetIncrementResponse.deserializeBinaryFromReader(i,r)},o._SortedSetIncrementResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readDouble();e.setScore(r)}else t.skipField()}return e},o._SortedSetIncrementResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetIncrementResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetIncrementResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getScore())&&t.writeDouble(1,r)},o._SortedSetIncrementResponse.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},o._SortedSetIncrementResponse.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetRankRequest.prototype.toObject=function(e){return o._SortedSetGetRankRequest.toObject(e,this)},o._SortedSetGetRankRequest.toObject=function(e,r){var o={setName:r.getSetName_asB64(),value:r.getValue_asB64(),order:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetGetRankRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetRankRequest;return o._SortedSetGetRankRequest.deserializeBinaryFromReader(i,r)},o._SortedSetGetRankRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readBytes();e.setValue(r);break;case 3:r=t.readEnum();e.setOrder(r);break;default:t.skipField()}}return e},o._SortedSetGetRankRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetRankRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetRankRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r),0!==(r=e.getOrder())&&t.writeEnum(3,r)},o._SortedSetGetRankRequest.Order={ASCENDING:0,DESCENDING:1},o._SortedSetGetRankRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetGetRankRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetGetRankRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetGetRankRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetGetRankRequest.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SortedSetGetRankRequest.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},o._SortedSetGetRankRequest.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},o._SortedSetGetRankRequest.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},o._SortedSetGetRankRequest.prototype.getOrder=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SortedSetGetRankRequest.prototype.setOrder=function(e){return t.Message.setProto3EnumField(this,3,e)},o._SortedSetGetRankResponse.oneofGroups_=[[1,2]],o._SortedSetGetRankResponse.RankCase={RANK_NOT_SET:0,ELEMENT_RANK:1,MISSING:2},o._SortedSetGetRankResponse.prototype.getRankCase=function(){return t.Message.computeOneofCase(this,o._SortedSetGetRankResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetRankResponse.prototype.toObject=function(e){return o._SortedSetGetRankResponse.toObject(e,this)},o._SortedSetGetRankResponse.toObject=function(e,t){var r,i={elementRank:(r=t.getElementRank())&&o._SortedSetGetRankResponse._RankResponsePart.toObject(e,r),missing:(r=t.getMissing())&&o._SortedSetGetRankResponse._SortedSetMissing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetGetRankResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetRankResponse;return o._SortedSetGetRankResponse.deserializeBinaryFromReader(i,r)},o._SortedSetGetRankResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetGetRankResponse._RankResponsePart;t.readMessage(r,o._SortedSetGetRankResponse._RankResponsePart.deserializeBinaryFromReader),e.setElementRank(r);break;case 2:r=new o._SortedSetGetRankResponse._SortedSetMissing;t.readMessage(r,o._SortedSetGetRankResponse._SortedSetMissing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SortedSetGetRankResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetRankResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetRankResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getElementRank())&&t.writeMessage(1,r,o._SortedSetGetRankResponse._RankResponsePart.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SortedSetGetRankResponse._SortedSetMissing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetRankResponse._RankResponsePart.prototype.toObject=function(e){return o._SortedSetGetRankResponse._RankResponsePart.toObject(e,this)},o._SortedSetGetRankResponse._RankResponsePart.toObject=function(e,r){var o={result:t.Message.getFieldWithDefault(r,1,0),rank:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetGetRankResponse._RankResponsePart.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetRankResponse._RankResponsePart;return o._SortedSetGetRankResponse._RankResponsePart.deserializeBinaryFromReader(i,r)},o._SortedSetGetRankResponse._RankResponsePart.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setResult(r);break;case 2:r=t.readUint64();e.setRank(r);break;default:t.skipField()}}return e},o._SortedSetGetRankResponse._RankResponsePart.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetRankResponse._RankResponsePart.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetRankResponse._RankResponsePart.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getResult())&&t.writeEnum(1,r),0!==(r=e.getRank())&&t.writeUint64(2,r)},o._SortedSetGetRankResponse._RankResponsePart.prototype.getResult=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SortedSetGetRankResponse._RankResponsePart.prototype.setResult=function(e){return t.Message.setProto3EnumField(this,1,e)},o._SortedSetGetRankResponse._RankResponsePart.prototype.getRank=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SortedSetGetRankResponse._RankResponsePart.prototype.setRank=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetGetRankResponse._SortedSetMissing.prototype.toObject=function(e){return o._SortedSetGetRankResponse._SortedSetMissing.toObject(e,this)},o._SortedSetGetRankResponse._SortedSetMissing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetGetRankResponse._SortedSetMissing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetGetRankResponse._SortedSetMissing;return o._SortedSetGetRankResponse._SortedSetMissing.deserializeBinaryFromReader(i,r)},o._SortedSetGetRankResponse._SortedSetMissing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetGetRankResponse._SortedSetMissing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetGetRankResponse._SortedSetMissing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetGetRankResponse._SortedSetMissing.serializeBinaryToWriter=function(e,t){},o._SortedSetGetRankResponse.prototype.getElementRank=function(){return t.Message.getWrapperField(this,o._SortedSetGetRankResponse._RankResponsePart,1)},o._SortedSetGetRankResponse.prototype.setElementRank=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetGetRankResponse.oneofGroups_[0],e)},o._SortedSetGetRankResponse.prototype.clearElementRank=function(){return this.setElementRank(void 0)},o._SortedSetGetRankResponse.prototype.hasElementRank=function(){return null!=t.Message.getField(this,1)},o._SortedSetGetRankResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SortedSetGetRankResponse._SortedSetMissing,2)},o._SortedSetGetRankResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetGetRankResponse.oneofGroups_[0],e)},o._SortedSetGetRankResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SortedSetGetRankResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthRequest.prototype.toObject=function(e){return o._SortedSetLengthRequest.toObject(e,this)},o._SortedSetLengthRequest.toObject=function(e,t){var r={setName:t.getSetName_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetLengthRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthRequest;return o._SortedSetLengthRequest.deserializeBinaryFromReader(i,r)},o._SortedSetLengthRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readBytes();e.setSetName(r)}else t.skipField()}return e},o._SortedSetLengthRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getSetName_asU8()).length>0&&t.writeBytes(1,r)},o._SortedSetLengthRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetLengthRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetLengthRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetLengthRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetLengthResponse.oneofGroups_=[[1,2]],o._SortedSetLengthResponse.SortedSetCase={SORTED_SET_NOT_SET:0,FOUND:1,MISSING:2},o._SortedSetLengthResponse.prototype.getSortedSetCase=function(){return t.Message.computeOneofCase(this,o._SortedSetLengthResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthResponse.prototype.toObject=function(e){return o._SortedSetLengthResponse.toObject(e,this)},o._SortedSetLengthResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SortedSetLengthResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SortedSetLengthResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetLengthResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthResponse;return o._SortedSetLengthResponse.deserializeBinaryFromReader(i,r)},o._SortedSetLengthResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetLengthResponse._Found;t.readMessage(r,o._SortedSetLengthResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SortedSetLengthResponse._Missing;t.readMessage(r,o._SortedSetLengthResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SortedSetLengthResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SortedSetLengthResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SortedSetLengthResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthResponse._Found.prototype.toObject=function(e){return o._SortedSetLengthResponse._Found.toObject(e,this)},o._SortedSetLengthResponse._Found.toObject=function(e,r){var o={length:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetLengthResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthResponse._Found;return o._SortedSetLengthResponse._Found.deserializeBinaryFromReader(i,r)},o._SortedSetLengthResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setLength(r)}else t.skipField()}return e},o._SortedSetLengthResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getLength())&&t.writeUint32(1,r)},o._SortedSetLengthResponse._Found.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SortedSetLengthResponse._Found.prototype.setLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthResponse._Missing.prototype.toObject=function(e){return o._SortedSetLengthResponse._Missing.toObject(e,this)},o._SortedSetLengthResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetLengthResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthResponse._Missing;return o._SortedSetLengthResponse._Missing.deserializeBinaryFromReader(i,r)},o._SortedSetLengthResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetLengthResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SortedSetLengthResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SortedSetLengthResponse._Found,1)},o._SortedSetLengthResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetLengthResponse.oneofGroups_[0],e)},o._SortedSetLengthResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SortedSetLengthResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SortedSetLengthResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SortedSetLengthResponse._Missing,2)},o._SortedSetLengthResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetLengthResponse.oneofGroups_[0],e)},o._SortedSetLengthResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SortedSetLengthResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o._SortedSetLengthByScoreRequest.oneofGroups_=[[2,3,4],[5,6,7]],o._SortedSetLengthByScoreRequest.MinCase={MIN_NOT_SET:0,INCLUSIVE_MIN:2,EXCLUSIVE_MIN:3,UNBOUNDED_MIN:4},o._SortedSetLengthByScoreRequest.prototype.getMinCase=function(){return t.Message.computeOneofCase(this,o._SortedSetLengthByScoreRequest.oneofGroups_[0])},o._SortedSetLengthByScoreRequest.MaxCase={MAX_NOT_SET:0,INCLUSIVE_MAX:5,EXCLUSIVE_MAX:6,UNBOUNDED_MAX:7},o._SortedSetLengthByScoreRequest.prototype.getMaxCase=function(){return t.Message.computeOneofCase(this,o._SortedSetLengthByScoreRequest.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthByScoreRequest.prototype.toObject=function(e){return o._SortedSetLengthByScoreRequest.toObject(e,this)},o._SortedSetLengthByScoreRequest.toObject=function(e,r){var i,s={setName:r.getSetName_asB64(),inclusiveMin:t.Message.getFloatingPointFieldWithDefault(r,2,0),exclusiveMin:t.Message.getFloatingPointFieldWithDefault(r,3,0),unboundedMin:(i=r.getUnboundedMin())&&o._Unbounded.toObject(e,i),inclusiveMax:t.Message.getFloatingPointFieldWithDefault(r,5,0),exclusiveMax:t.Message.getFloatingPointFieldWithDefault(r,6,0),unboundedMax:(i=r.getUnboundedMax())&&o._Unbounded.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._SortedSetLengthByScoreRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthByScoreRequest;return o._SortedSetLengthByScoreRequest.deserializeBinaryFromReader(i,r)},o._SortedSetLengthByScoreRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setSetName(r);break;case 2:r=t.readDouble();e.setInclusiveMin(r);break;case 3:r=t.readDouble();e.setExclusiveMin(r);break;case 4:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMin(r);break;case 5:r=t.readDouble();e.setInclusiveMax(r);break;case 6:r=t.readDouble();e.setExclusiveMax(r);break;case 7:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMax(r);break;default:t.skipField()}}return e},o._SortedSetLengthByScoreRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthByScoreRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthByScoreRequest.serializeBinaryToWriter=function(e,r){var i=void 0;(i=e.getSetName_asU8()).length>0&&r.writeBytes(1,i),null!=(i=t.Message.getField(e,2))&&r.writeDouble(2,i),null!=(i=t.Message.getField(e,3))&&r.writeDouble(3,i),null!=(i=e.getUnboundedMin())&&r.writeMessage(4,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,5))&&r.writeDouble(5,i),null!=(i=t.Message.getField(e,6))&&r.writeDouble(6,i),null!=(i=e.getUnboundedMax())&&r.writeMessage(7,i,o._Unbounded.serializeBinaryToWriter)},o._SortedSetLengthByScoreRequest.prototype.getSetName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SortedSetLengthByScoreRequest.prototype.getSetName_asB64=function(){return t.Message.bytesAsB64(this.getSetName())},o._SortedSetLengthByScoreRequest.prototype.getSetName_asU8=function(){return t.Message.bytesAsU8(this.getSetName())},o._SortedSetLengthByScoreRequest.prototype.setSetName=function(e){return t.Message.setProto3BytesField(this,1,e)},o._SortedSetLengthByScoreRequest.prototype.getInclusiveMin=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._SortedSetLengthByScoreRequest.prototype.setInclusiveMin=function(e){return t.Message.setOneofField(this,2,o._SortedSetLengthByScoreRequest.oneofGroups_[0],e)},o._SortedSetLengthByScoreRequest.prototype.clearInclusiveMin=function(){return t.Message.setOneofField(this,2,o._SortedSetLengthByScoreRequest.oneofGroups_[0],void 0)},o._SortedSetLengthByScoreRequest.prototype.hasInclusiveMin=function(){return null!=t.Message.getField(this,2)},o._SortedSetLengthByScoreRequest.prototype.getExclusiveMin=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},o._SortedSetLengthByScoreRequest.prototype.setExclusiveMin=function(e){return t.Message.setOneofField(this,3,o._SortedSetLengthByScoreRequest.oneofGroups_[0],e)},o._SortedSetLengthByScoreRequest.prototype.clearExclusiveMin=function(){return t.Message.setOneofField(this,3,o._SortedSetLengthByScoreRequest.oneofGroups_[0],void 0)},o._SortedSetLengthByScoreRequest.prototype.hasExclusiveMin=function(){return null!=t.Message.getField(this,3)},o._SortedSetLengthByScoreRequest.prototype.getUnboundedMin=function(){return t.Message.getWrapperField(this,o._Unbounded,4)},o._SortedSetLengthByScoreRequest.prototype.setUnboundedMin=function(e){return t.Message.setOneofWrapperField(this,4,o._SortedSetLengthByScoreRequest.oneofGroups_[0],e)},o._SortedSetLengthByScoreRequest.prototype.clearUnboundedMin=function(){return this.setUnboundedMin(void 0)},o._SortedSetLengthByScoreRequest.prototype.hasUnboundedMin=function(){return null!=t.Message.getField(this,4)},o._SortedSetLengthByScoreRequest.prototype.getInclusiveMax=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},o._SortedSetLengthByScoreRequest.prototype.setInclusiveMax=function(e){return t.Message.setOneofField(this,5,o._SortedSetLengthByScoreRequest.oneofGroups_[1],e)},o._SortedSetLengthByScoreRequest.prototype.clearInclusiveMax=function(){return t.Message.setOneofField(this,5,o._SortedSetLengthByScoreRequest.oneofGroups_[1],void 0)},o._SortedSetLengthByScoreRequest.prototype.hasInclusiveMax=function(){return null!=t.Message.getField(this,5)},o._SortedSetLengthByScoreRequest.prototype.getExclusiveMax=function(){return t.Message.getFloatingPointFieldWithDefault(this,6,0)},o._SortedSetLengthByScoreRequest.prototype.setExclusiveMax=function(e){return t.Message.setOneofField(this,6,o._SortedSetLengthByScoreRequest.oneofGroups_[1],e)},o._SortedSetLengthByScoreRequest.prototype.clearExclusiveMax=function(){return t.Message.setOneofField(this,6,o._SortedSetLengthByScoreRequest.oneofGroups_[1],void 0)},o._SortedSetLengthByScoreRequest.prototype.hasExclusiveMax=function(){return null!=t.Message.getField(this,6)},o._SortedSetLengthByScoreRequest.prototype.getUnboundedMax=function(){return t.Message.getWrapperField(this,o._Unbounded,7)},o._SortedSetLengthByScoreRequest.prototype.setUnboundedMax=function(e){return t.Message.setOneofWrapperField(this,7,o._SortedSetLengthByScoreRequest.oneofGroups_[1],e)},o._SortedSetLengthByScoreRequest.prototype.clearUnboundedMax=function(){return this.setUnboundedMax(void 0)},o._SortedSetLengthByScoreRequest.prototype.hasUnboundedMax=function(){return null!=t.Message.getField(this,7)},o._SortedSetLengthByScoreResponse.oneofGroups_=[[1,2]],o._SortedSetLengthByScoreResponse.SortedSetCase={SORTED_SET_NOT_SET:0,FOUND:1,MISSING:2},o._SortedSetLengthByScoreResponse.prototype.getSortedSetCase=function(){return t.Message.computeOneofCase(this,o._SortedSetLengthByScoreResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthByScoreResponse.prototype.toObject=function(e){return o._SortedSetLengthByScoreResponse.toObject(e,this)},o._SortedSetLengthByScoreResponse.toObject=function(e,t){var r,i={found:(r=t.getFound())&&o._SortedSetLengthByScoreResponse._Found.toObject(e,r),missing:(r=t.getMissing())&&o._SortedSetLengthByScoreResponse._Missing.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SortedSetLengthByScoreResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthByScoreResponse;return o._SortedSetLengthByScoreResponse.deserializeBinaryFromReader(i,r)},o._SortedSetLengthByScoreResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SortedSetLengthByScoreResponse._Found;t.readMessage(r,o._SortedSetLengthByScoreResponse._Found.deserializeBinaryFromReader),e.setFound(r);break;case 2:r=new o._SortedSetLengthByScoreResponse._Missing;t.readMessage(r,o._SortedSetLengthByScoreResponse._Missing.deserializeBinaryFromReader),e.setMissing(r);break;default:t.skipField()}}return e},o._SortedSetLengthByScoreResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthByScoreResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthByScoreResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getFound())&&t.writeMessage(1,r,o._SortedSetLengthByScoreResponse._Found.serializeBinaryToWriter),null!=(r=e.getMissing())&&t.writeMessage(2,r,o._SortedSetLengthByScoreResponse._Missing.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthByScoreResponse._Found.prototype.toObject=function(e){return o._SortedSetLengthByScoreResponse._Found.toObject(e,this)},o._SortedSetLengthByScoreResponse._Found.toObject=function(e,r){var o={length:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SortedSetLengthByScoreResponse._Found.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthByScoreResponse._Found;return o._SortedSetLengthByScoreResponse._Found.deserializeBinaryFromReader(i,r)},o._SortedSetLengthByScoreResponse._Found.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setLength(r)}else t.skipField()}return e},o._SortedSetLengthByScoreResponse._Found.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthByScoreResponse._Found.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthByScoreResponse._Found.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getLength())&&t.writeUint32(1,r)},o._SortedSetLengthByScoreResponse._Found.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,1,0)},o._SortedSetLengthByScoreResponse._Found.prototype.setLength=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._SortedSetLengthByScoreResponse._Missing.prototype.toObject=function(e){return o._SortedSetLengthByScoreResponse._Missing.toObject(e,this)},o._SortedSetLengthByScoreResponse._Missing.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._SortedSetLengthByScoreResponse._Missing.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SortedSetLengthByScoreResponse._Missing;return o._SortedSetLengthByScoreResponse._Missing.deserializeBinaryFromReader(i,r)},o._SortedSetLengthByScoreResponse._Missing.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._SortedSetLengthByScoreResponse._Missing.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SortedSetLengthByScoreResponse._Missing.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SortedSetLengthByScoreResponse._Missing.serializeBinaryToWriter=function(e,t){},o._SortedSetLengthByScoreResponse.prototype.getFound=function(){return t.Message.getWrapperField(this,o._SortedSetLengthByScoreResponse._Found,1)},o._SortedSetLengthByScoreResponse.prototype.setFound=function(e){return t.Message.setOneofWrapperField(this,1,o._SortedSetLengthByScoreResponse.oneofGroups_[0],e)},o._SortedSetLengthByScoreResponse.prototype.clearFound=function(){return this.setFound(void 0)},o._SortedSetLengthByScoreResponse.prototype.hasFound=function(){return null!=t.Message.getField(this,1)},o._SortedSetLengthByScoreResponse.prototype.getMissing=function(){return t.Message.getWrapperField(this,o._SortedSetLengthByScoreResponse._Missing,2)},o._SortedSetLengthByScoreResponse.prototype.setMissing=function(e){return t.Message.setOneofWrapperField(this,2,o._SortedSetLengthByScoreResponse.oneofGroups_[0],e)},o._SortedSetLengthByScoreResponse.prototype.clearMissing=function(){return this.setMissing(void 0)},o._SortedSetLengthByScoreResponse.prototype.hasMissing=function(){return null!=t.Message.getField(this,2)},o.ECacheResult={INVALID:0,OK:1,HIT:2,MISS:3},r.object.extend(e,o)}(cacheclient_pb$1);var __createBinding$8=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$8=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$8=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$8(t,e,r);return __setModuleDefault$8(t,e),t};Object.defineProperty(CacheclientServiceClientPb,"__esModule",{value:!0}),CacheclientServiceClientPb.ScsClient=void 0;const grpcWeb$7=__importStar$8(grpcWeb$8),cacheclient_pb=__importStar$8(cacheclient_pb$1);class ScsClient{constructor(e,t,r){this.methodDescriptorGet=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/Get",grpcWeb$7.MethodType.UNARY,cacheclient_pb._GetRequest,cacheclient_pb._GetResponse,(e=>e.serializeBinary()),cacheclient_pb._GetResponse.deserializeBinary),this.methodDescriptorSet=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/Set",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetRequest,cacheclient_pb._SetResponse,(e=>e.serializeBinary()),cacheclient_pb._SetResponse.deserializeBinary),this.methodDescriptorSetIfNotExists=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetIfNotExists",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetIfNotExistsRequest,cacheclient_pb._SetIfNotExistsResponse,(e=>e.serializeBinary()),cacheclient_pb._SetIfNotExistsResponse.deserializeBinary),this.methodDescriptorDelete=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/Delete",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DeleteRequest,cacheclient_pb._DeleteResponse,(e=>e.serializeBinary()),cacheclient_pb._DeleteResponse.deserializeBinary),this.methodDescriptorKeysExist=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/KeysExist",grpcWeb$7.MethodType.UNARY,cacheclient_pb._KeysExistRequest,cacheclient_pb._KeysExistResponse,(e=>e.serializeBinary()),cacheclient_pb._KeysExistResponse.deserializeBinary),this.methodDescriptorIncrement=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/Increment",grpcWeb$7.MethodType.UNARY,cacheclient_pb._IncrementRequest,cacheclient_pb._IncrementResponse,(e=>e.serializeBinary()),cacheclient_pb._IncrementResponse.deserializeBinary),this.methodDescriptorUpdateTtl=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/UpdateTtl",grpcWeb$7.MethodType.UNARY,cacheclient_pb._UpdateTtlRequest,cacheclient_pb._UpdateTtlResponse,(e=>e.serializeBinary()),cacheclient_pb._UpdateTtlResponse.deserializeBinary),this.methodDescriptorItemGetTtl=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ItemGetTtl",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ItemGetTtlRequest,cacheclient_pb._ItemGetTtlResponse,(e=>e.serializeBinary()),cacheclient_pb._ItemGetTtlResponse.deserializeBinary),this.methodDescriptorItemGetType=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ItemGetType",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ItemGetTypeRequest,cacheclient_pb._ItemGetTypeResponse,(e=>e.serializeBinary()),cacheclient_pb._ItemGetTypeResponse.deserializeBinary),this.methodDescriptorDictionaryGet=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionaryGet",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionaryGetRequest,cacheclient_pb._DictionaryGetResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionaryGetResponse.deserializeBinary),this.methodDescriptorDictionaryFetch=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionaryFetch",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionaryFetchRequest,cacheclient_pb._DictionaryFetchResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionaryFetchResponse.deserializeBinary),this.methodDescriptorDictionarySet=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionarySet",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionarySetRequest,cacheclient_pb._DictionarySetResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionarySetResponse.deserializeBinary),this.methodDescriptorDictionaryIncrement=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionaryIncrement",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionaryIncrementRequest,cacheclient_pb._DictionaryIncrementResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionaryIncrementResponse.deserializeBinary),this.methodDescriptorDictionaryDelete=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionaryDelete",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionaryDeleteRequest,cacheclient_pb._DictionaryDeleteResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionaryDeleteResponse.deserializeBinary),this.methodDescriptorDictionaryLength=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/DictionaryLength",grpcWeb$7.MethodType.UNARY,cacheclient_pb._DictionaryLengthRequest,cacheclient_pb._DictionaryLengthResponse,(e=>e.serializeBinary()),cacheclient_pb._DictionaryLengthResponse.deserializeBinary),this.methodDescriptorSetFetch=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetFetch",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetFetchRequest,cacheclient_pb._SetFetchResponse,(e=>e.serializeBinary()),cacheclient_pb._SetFetchResponse.deserializeBinary),this.methodDescriptorSetUnion=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetUnion",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetUnionRequest,cacheclient_pb._SetUnionResponse,(e=>e.serializeBinary()),cacheclient_pb._SetUnionResponse.deserializeBinary),this.methodDescriptorSetDifference=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetDifference",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetDifferenceRequest,cacheclient_pb._SetDifferenceResponse,(e=>e.serializeBinary()),cacheclient_pb._SetDifferenceResponse.deserializeBinary),this.methodDescriptorSetContains=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetContains",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetContainsRequest,cacheclient_pb._SetContainsResponse,(e=>e.serializeBinary()),cacheclient_pb._SetContainsResponse.deserializeBinary),this.methodDescriptorSetLength=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetLength",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetLengthRequest,cacheclient_pb._SetLengthResponse,(e=>e.serializeBinary()),cacheclient_pb._SetLengthResponse.deserializeBinary),this.methodDescriptorSetPop=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SetPop",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SetPopRequest,cacheclient_pb._SetPopResponse,(e=>e.serializeBinary()),cacheclient_pb._SetPopResponse.deserializeBinary),this.methodDescriptorListPushFront=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListPushFront",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListPushFrontRequest,cacheclient_pb._ListPushFrontResponse,(e=>e.serializeBinary()),cacheclient_pb._ListPushFrontResponse.deserializeBinary),this.methodDescriptorListPushBack=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListPushBack",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListPushBackRequest,cacheclient_pb._ListPushBackResponse,(e=>e.serializeBinary()),cacheclient_pb._ListPushBackResponse.deserializeBinary),this.methodDescriptorListPopFront=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListPopFront",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListPopFrontRequest,cacheclient_pb._ListPopFrontResponse,(e=>e.serializeBinary()),cacheclient_pb._ListPopFrontResponse.deserializeBinary),this.methodDescriptorListPopBack=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListPopBack",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListPopBackRequest,cacheclient_pb._ListPopBackResponse,(e=>e.serializeBinary()),cacheclient_pb._ListPopBackResponse.deserializeBinary),this.methodDescriptorListErase=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListErase",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListEraseRequest,cacheclient_pb._ListEraseResponse,(e=>e.serializeBinary()),cacheclient_pb._ListEraseResponse.deserializeBinary),this.methodDescriptorListRemove=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListRemove",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListRemoveRequest,cacheclient_pb._ListRemoveResponse,(e=>e.serializeBinary()),cacheclient_pb._ListRemoveResponse.deserializeBinary),this.methodDescriptorListFetch=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListFetch",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListFetchRequest,cacheclient_pb._ListFetchResponse,(e=>e.serializeBinary()),cacheclient_pb._ListFetchResponse.deserializeBinary),this.methodDescriptorListLength=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListLength",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListLengthRequest,cacheclient_pb._ListLengthResponse,(e=>e.serializeBinary()),cacheclient_pb._ListLengthResponse.deserializeBinary),this.methodDescriptorListConcatenateFront=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListConcatenateFront",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListConcatenateFrontRequest,cacheclient_pb._ListConcatenateFrontResponse,(e=>e.serializeBinary()),cacheclient_pb._ListConcatenateFrontResponse.deserializeBinary),this.methodDescriptorListConcatenateBack=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListConcatenateBack",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListConcatenateBackRequest,cacheclient_pb._ListConcatenateBackResponse,(e=>e.serializeBinary()),cacheclient_pb._ListConcatenateBackResponse.deserializeBinary),this.methodDescriptorListRetain=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/ListRetain",grpcWeb$7.MethodType.UNARY,cacheclient_pb._ListRetainRequest,cacheclient_pb._ListRetainResponse,(e=>e.serializeBinary()),cacheclient_pb._ListRetainResponse.deserializeBinary),this.methodDescriptorSortedSetPut=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetPut",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetPutRequest,cacheclient_pb._SortedSetPutResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetPutResponse.deserializeBinary),this.methodDescriptorSortedSetFetch=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetFetch",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetFetchRequest,cacheclient_pb._SortedSetFetchResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetFetchResponse.deserializeBinary),this.methodDescriptorSortedSetGetScore=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetGetScore",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetGetScoreRequest,cacheclient_pb._SortedSetGetScoreResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetGetScoreResponse.deserializeBinary),this.methodDescriptorSortedSetRemove=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetRemove",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetRemoveRequest,cacheclient_pb._SortedSetRemoveResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetRemoveResponse.deserializeBinary),this.methodDescriptorSortedSetIncrement=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetIncrement",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetIncrementRequest,cacheclient_pb._SortedSetIncrementResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetIncrementResponse.deserializeBinary),this.methodDescriptorSortedSetGetRank=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetGetRank",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetGetRankRequest,cacheclient_pb._SortedSetGetRankResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetGetRankResponse.deserializeBinary),this.methodDescriptorSortedSetLength=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetLength",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetLengthRequest,cacheclient_pb._SortedSetLengthResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetLengthResponse.deserializeBinary),this.methodDescriptorSortedSetLengthByScore=new grpcWeb$7.MethodDescriptor("/cache_client.Scs/SortedSetLengthByScore",grpcWeb$7.MethodType.UNARY,cacheclient_pb._SortedSetLengthByScoreRequest,cacheclient_pb._SortedSetLengthByScoreResponse,(e=>e.serializeBinary()),cacheclient_pb._SortedSetLengthByScoreResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$7.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}get(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/Get",e,t||{},this.methodDescriptorGet,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/Get",e,t||{},this.methodDescriptorGet)}set(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/Set",e,t||{},this.methodDescriptorSet,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/Set",e,t||{},this.methodDescriptorSet)}setIfNotExists(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetIfNotExists",e,t||{},this.methodDescriptorSetIfNotExists,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetIfNotExists",e,t||{},this.methodDescriptorSetIfNotExists)}delete(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/Delete",e,t||{},this.methodDescriptorDelete,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/Delete",e,t||{},this.methodDescriptorDelete)}keysExist(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/KeysExist",e,t||{},this.methodDescriptorKeysExist,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/KeysExist",e,t||{},this.methodDescriptorKeysExist)}increment(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/Increment",e,t||{},this.methodDescriptorIncrement,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/Increment",e,t||{},this.methodDescriptorIncrement)}updateTtl(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/UpdateTtl",e,t||{},this.methodDescriptorUpdateTtl,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/UpdateTtl",e,t||{},this.methodDescriptorUpdateTtl)}itemGetTtl(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ItemGetTtl",e,t||{},this.methodDescriptorItemGetTtl,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ItemGetTtl",e,t||{},this.methodDescriptorItemGetTtl)}itemGetType(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ItemGetType",e,t||{},this.methodDescriptorItemGetType,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ItemGetType",e,t||{},this.methodDescriptorItemGetType)}dictionaryGet(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionaryGet",e,t||{},this.methodDescriptorDictionaryGet,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionaryGet",e,t||{},this.methodDescriptorDictionaryGet)}dictionaryFetch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionaryFetch",e,t||{},this.methodDescriptorDictionaryFetch,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionaryFetch",e,t||{},this.methodDescriptorDictionaryFetch)}dictionarySet(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionarySet",e,t||{},this.methodDescriptorDictionarySet,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionarySet",e,t||{},this.methodDescriptorDictionarySet)}dictionaryIncrement(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionaryIncrement",e,t||{},this.methodDescriptorDictionaryIncrement,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionaryIncrement",e,t||{},this.methodDescriptorDictionaryIncrement)}dictionaryDelete(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionaryDelete",e,t||{},this.methodDescriptorDictionaryDelete,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionaryDelete",e,t||{},this.methodDescriptorDictionaryDelete)}dictionaryLength(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/DictionaryLength",e,t||{},this.methodDescriptorDictionaryLength,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/DictionaryLength",e,t||{},this.methodDescriptorDictionaryLength)}setFetch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetFetch",e,t||{},this.methodDescriptorSetFetch,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetFetch",e,t||{},this.methodDescriptorSetFetch)}setUnion(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetUnion",e,t||{},this.methodDescriptorSetUnion,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetUnion",e,t||{},this.methodDescriptorSetUnion)}setDifference(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetDifference",e,t||{},this.methodDescriptorSetDifference,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetDifference",e,t||{},this.methodDescriptorSetDifference)}setContains(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetContains",e,t||{},this.methodDescriptorSetContains,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetContains",e,t||{},this.methodDescriptorSetContains)}setLength(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetLength",e,t||{},this.methodDescriptorSetLength,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetLength",e,t||{},this.methodDescriptorSetLength)}setPop(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SetPop",e,t||{},this.methodDescriptorSetPop,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SetPop",e,t||{},this.methodDescriptorSetPop)}listPushFront(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListPushFront",e,t||{},this.methodDescriptorListPushFront,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListPushFront",e,t||{},this.methodDescriptorListPushFront)}listPushBack(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListPushBack",e,t||{},this.methodDescriptorListPushBack,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListPushBack",e,t||{},this.methodDescriptorListPushBack)}listPopFront(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListPopFront",e,t||{},this.methodDescriptorListPopFront,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListPopFront",e,t||{},this.methodDescriptorListPopFront)}listPopBack(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListPopBack",e,t||{},this.methodDescriptorListPopBack,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListPopBack",e,t||{},this.methodDescriptorListPopBack)}listErase(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListErase",e,t||{},this.methodDescriptorListErase,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListErase",e,t||{},this.methodDescriptorListErase)}listRemove(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListRemove",e,t||{},this.methodDescriptorListRemove,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListRemove",e,t||{},this.methodDescriptorListRemove)}listFetch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListFetch",e,t||{},this.methodDescriptorListFetch,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListFetch",e,t||{},this.methodDescriptorListFetch)}listLength(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListLength",e,t||{},this.methodDescriptorListLength,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListLength",e,t||{},this.methodDescriptorListLength)}listConcatenateFront(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListConcatenateFront",e,t||{},this.methodDescriptorListConcatenateFront,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListConcatenateFront",e,t||{},this.methodDescriptorListConcatenateFront)}listConcatenateBack(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListConcatenateBack",e,t||{},this.methodDescriptorListConcatenateBack,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListConcatenateBack",e,t||{},this.methodDescriptorListConcatenateBack)}listRetain(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/ListRetain",e,t||{},this.methodDescriptorListRetain,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/ListRetain",e,t||{},this.methodDescriptorListRetain)}sortedSetPut(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetPut",e,t||{},this.methodDescriptorSortedSetPut,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetPut",e,t||{},this.methodDescriptorSortedSetPut)}sortedSetFetch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetFetch",e,t||{},this.methodDescriptorSortedSetFetch,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetFetch",e,t||{},this.methodDescriptorSortedSetFetch)}sortedSetGetScore(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetGetScore",e,t||{},this.methodDescriptorSortedSetGetScore,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetGetScore",e,t||{},this.methodDescriptorSortedSetGetScore)}sortedSetRemove(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetRemove",e,t||{},this.methodDescriptorSortedSetRemove,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetRemove",e,t||{},this.methodDescriptorSortedSetRemove)}sortedSetIncrement(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetIncrement",e,t||{},this.methodDescriptorSortedSetIncrement,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetIncrement",e,t||{},this.methodDescriptorSortedSetIncrement)}sortedSetGetRank(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetGetRank",e,t||{},this.methodDescriptorSortedSetGetRank,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetGetRank",e,t||{},this.methodDescriptorSortedSetGetRank)}sortedSetLength(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetLength",e,t||{},this.methodDescriptorSortedSetLength,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetLength",e,t||{},this.methodDescriptorSortedSetLength)}sortedSetLengthByScore(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Scs/SortedSetLengthByScore",e,t||{},this.methodDescriptorSortedSetLengthByScore,r):this.client_.unaryCall(this.hostname_+"/cache_client.Scs/SortedSetLengthByScore",e,t||{},this.methodDescriptorSortedSetLengthByScore)}}CacheclientServiceClientPb.ScsClient=ScsClient;var ControlclientServiceClientPb={},controlclient_pb$1={};!function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("_Cache",null,o),r.exportSymbol("_CacheLimits",null,o),r.exportSymbol("_CreateCacheRequest",null,o),r.exportSymbol("_CreateCacheResponse",null,o),r.exportSymbol("_CreateIndexRequest",null,o),r.exportSymbol("_CreateIndexRequest.SimilarityMetricCase",null,o),r.exportSymbol("_CreateIndexRequest._CosineSimilarity",null,o),r.exportSymbol("_CreateIndexRequest._EuclideanSimilarity",null,o),r.exportSymbol("_CreateIndexRequest._InnerProduct",null,o),r.exportSymbol("_CreateIndexResponse",null,o),r.exportSymbol("_CreateSigningKeyRequest",null,o),r.exportSymbol("_CreateSigningKeyResponse",null,o),r.exportSymbol("_DeleteCacheRequest",null,o),r.exportSymbol("_DeleteCacheResponse",null,o),r.exportSymbol("_DeleteIndexRequest",null,o),r.exportSymbol("_DeleteIndexResponse",null,o),r.exportSymbol("_FlushCacheRequest",null,o),r.exportSymbol("_FlushCacheResponse",null,o),r.exportSymbol("_ListCachesRequest",null,o),r.exportSymbol("_ListCachesResponse",null,o),r.exportSymbol("_ListIndexesRequest",null,o),r.exportSymbol("_ListIndexesResponse",null,o),r.exportSymbol("_ListSigningKeysRequest",null,o),r.exportSymbol("_ListSigningKeysResponse",null,o),r.exportSymbol("_RevokeSigningKeyRequest",null,o),r.exportSymbol("_RevokeSigningKeyResponse",null,o),r.exportSymbol("_SigningKey",null,o),r.exportSymbol("_TopicLimits",null,o),o._CreateIndexRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._CreateIndexRequest.oneofGroups_)},r.inherits(o._CreateIndexRequest,t.Message),r.DEBUG&&!COMPILED&&(o._CreateIndexRequest.displayName="proto._CreateIndexRequest"),o._CreateIndexRequest._EuclideanSimilarity=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateIndexRequest._EuclideanSimilarity,t.Message),r.DEBUG&&!COMPILED&&(o._CreateIndexRequest._EuclideanSimilarity.displayName="proto._CreateIndexRequest._EuclideanSimilarity"),o._CreateIndexRequest._InnerProduct=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateIndexRequest._InnerProduct,t.Message),r.DEBUG&&!COMPILED&&(o._CreateIndexRequest._InnerProduct.displayName="proto._CreateIndexRequest._InnerProduct"),o._CreateIndexRequest._CosineSimilarity=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateIndexRequest._CosineSimilarity,t.Message),r.DEBUG&&!COMPILED&&(o._CreateIndexRequest._CosineSimilarity.displayName="proto._CreateIndexRequest._CosineSimilarity"),o._CreateIndexResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateIndexResponse,t.Message),r.DEBUG&&!COMPILED&&(o._CreateIndexResponse.displayName="proto._CreateIndexResponse"),o._DeleteIndexRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteIndexRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteIndexRequest.displayName="proto._DeleteIndexRequest"),o._DeleteIndexResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteIndexResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteIndexResponse.displayName="proto._DeleteIndexResponse"),o._ListIndexesRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListIndexesRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListIndexesRequest.displayName="proto._ListIndexesRequest"),o._ListIndexesResponse=function(e){t.Message.initialize(this,e,0,-1,o._ListIndexesResponse.repeatedFields_,null)},r.inherits(o._ListIndexesResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListIndexesResponse.displayName="proto._ListIndexesResponse"),o._DeleteCacheRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteCacheRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteCacheRequest.displayName="proto._DeleteCacheRequest"),o._DeleteCacheResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteCacheResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteCacheResponse.displayName="proto._DeleteCacheResponse"),o._CreateCacheRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateCacheRequest,t.Message),r.DEBUG&&!COMPILED&&(o._CreateCacheRequest.displayName="proto._CreateCacheRequest"),o._CreateCacheResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateCacheResponse,t.Message),r.DEBUG&&!COMPILED&&(o._CreateCacheResponse.displayName="proto._CreateCacheResponse"),o._ListCachesRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListCachesRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListCachesRequest.displayName="proto._ListCachesRequest"),o._CacheLimits=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CacheLimits,t.Message),r.DEBUG&&!COMPILED&&(o._CacheLimits.displayName="proto._CacheLimits"),o._TopicLimits=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._TopicLimits,t.Message),r.DEBUG&&!COMPILED&&(o._TopicLimits.displayName="proto._TopicLimits"),o._Cache=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Cache,t.Message),r.DEBUG&&!COMPILED&&(o._Cache.displayName="proto._Cache"),o._ListCachesResponse=function(e){t.Message.initialize(this,e,0,-1,o._ListCachesResponse.repeatedFields_,null)},r.inherits(o._ListCachesResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListCachesResponse.displayName="proto._ListCachesResponse"),o._CreateSigningKeyRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateSigningKeyRequest,t.Message),r.DEBUG&&!COMPILED&&(o._CreateSigningKeyRequest.displayName="proto._CreateSigningKeyRequest"),o._CreateSigningKeyResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._CreateSigningKeyResponse,t.Message),r.DEBUG&&!COMPILED&&(o._CreateSigningKeyResponse.displayName="proto._CreateSigningKeyResponse"),o._RevokeSigningKeyRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RevokeSigningKeyRequest,t.Message),r.DEBUG&&!COMPILED&&(o._RevokeSigningKeyRequest.displayName="proto._RevokeSigningKeyRequest"),o._RevokeSigningKeyResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RevokeSigningKeyResponse,t.Message),r.DEBUG&&!COMPILED&&(o._RevokeSigningKeyResponse.displayName="proto._RevokeSigningKeyResponse"),o._SigningKey=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SigningKey,t.Message),r.DEBUG&&!COMPILED&&(o._SigningKey.displayName="proto._SigningKey"),o._ListSigningKeysRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._ListSigningKeysRequest,t.Message),r.DEBUG&&!COMPILED&&(o._ListSigningKeysRequest.displayName="proto._ListSigningKeysRequest"),o._ListSigningKeysResponse=function(e){t.Message.initialize(this,e,0,-1,o._ListSigningKeysResponse.repeatedFields_,null)},r.inherits(o._ListSigningKeysResponse,t.Message),r.DEBUG&&!COMPILED&&(o._ListSigningKeysResponse.displayName="proto._ListSigningKeysResponse"),o._FlushCacheRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._FlushCacheRequest,t.Message),r.DEBUG&&!COMPILED&&(o._FlushCacheRequest.displayName="proto._FlushCacheRequest"),o._FlushCacheResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._FlushCacheResponse,t.Message),r.DEBUG&&!COMPILED&&(o._FlushCacheResponse.displayName="proto._FlushCacheResponse"),o._CreateIndexRequest.oneofGroups_=[[3,4,5]],o._CreateIndexRequest.SimilarityMetricCase={SIMILARITY_METRIC_NOT_SET:0,EUCLIDEAN_SIMILARITY:3,INNER_PRODUCT:4,COSINE_SIMILARITY:5},o._CreateIndexRequest.prototype.getSimilarityMetricCase=function(){return t.Message.computeOneofCase(this,o._CreateIndexRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._CreateIndexRequest.prototype.toObject=function(e){return o._CreateIndexRequest.toObject(e,this)},o._CreateIndexRequest.toObject=function(e,r){var i,s={indexName:t.Message.getFieldWithDefault(r,1,""),numDimensions:t.Message.getFieldWithDefault(r,2,0),euclideanSimilarity:(i=r.getEuclideanSimilarity())&&o._CreateIndexRequest._EuclideanSimilarity.toObject(e,i),innerProduct:(i=r.getInnerProduct())&&o._CreateIndexRequest._InnerProduct.toObject(e,i),cosineSimilarity:(i=r.getCosineSimilarity())&&o._CreateIndexRequest._CosineSimilarity.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._CreateIndexRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateIndexRequest;return o._CreateIndexRequest.deserializeBinaryFromReader(i,r)},o._CreateIndexRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setIndexName(r);break;case 2:r=t.readUint64();e.setNumDimensions(r);break;case 3:r=new o._CreateIndexRequest._EuclideanSimilarity;t.readMessage(r,o._CreateIndexRequest._EuclideanSimilarity.deserializeBinaryFromReader),e.setEuclideanSimilarity(r);break;case 4:r=new o._CreateIndexRequest._InnerProduct;t.readMessage(r,o._CreateIndexRequest._InnerProduct.deserializeBinaryFromReader),e.setInnerProduct(r);break;case 5:r=new o._CreateIndexRequest._CosineSimilarity;t.readMessage(r,o._CreateIndexRequest._CosineSimilarity.deserializeBinaryFromReader),e.setCosineSimilarity(r);break;default:t.skipField()}}return e},o._CreateIndexRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateIndexRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateIndexRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIndexName()).length>0&&t.writeString(1,r),0!==(r=e.getNumDimensions())&&t.writeUint64(2,r),null!=(r=e.getEuclideanSimilarity())&&t.writeMessage(3,r,o._CreateIndexRequest._EuclideanSimilarity.serializeBinaryToWriter),null!=(r=e.getInnerProduct())&&t.writeMessage(4,r,o._CreateIndexRequest._InnerProduct.serializeBinaryToWriter),null!=(r=e.getCosineSimilarity())&&t.writeMessage(5,r,o._CreateIndexRequest._CosineSimilarity.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._CreateIndexRequest._EuclideanSimilarity.prototype.toObject=function(e){return o._CreateIndexRequest._EuclideanSimilarity.toObject(e,this)},o._CreateIndexRequest._EuclideanSimilarity.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._CreateIndexRequest._EuclideanSimilarity.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateIndexRequest._EuclideanSimilarity;return o._CreateIndexRequest._EuclideanSimilarity.deserializeBinaryFromReader(i,r)},o._CreateIndexRequest._EuclideanSimilarity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._CreateIndexRequest._EuclideanSimilarity.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateIndexRequest._EuclideanSimilarity.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateIndexRequest._EuclideanSimilarity.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._CreateIndexRequest._InnerProduct.prototype.toObject=function(e){return o._CreateIndexRequest._InnerProduct.toObject(e,this)},o._CreateIndexRequest._InnerProduct.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._CreateIndexRequest._InnerProduct.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateIndexRequest._InnerProduct;return o._CreateIndexRequest._InnerProduct.deserializeBinaryFromReader(i,r)},o._CreateIndexRequest._InnerProduct.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._CreateIndexRequest._InnerProduct.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateIndexRequest._InnerProduct.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateIndexRequest._InnerProduct.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._CreateIndexRequest._CosineSimilarity.prototype.toObject=function(e){return o._CreateIndexRequest._CosineSimilarity.toObject(e,this)},o._CreateIndexRequest._CosineSimilarity.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._CreateIndexRequest._CosineSimilarity.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateIndexRequest._CosineSimilarity;return o._CreateIndexRequest._CosineSimilarity.deserializeBinaryFromReader(i,r)},o._CreateIndexRequest._CosineSimilarity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._CreateIndexRequest._CosineSimilarity.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateIndexRequest._CosineSimilarity.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateIndexRequest._CosineSimilarity.serializeBinaryToWriter=function(e,t){},o._CreateIndexRequest.prototype.getIndexName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._CreateIndexRequest.prototype.setIndexName=function(e){return t.Message.setProto3StringField(this,1,e)},o._CreateIndexRequest.prototype.getNumDimensions=function(){return t.Message.getFieldWithDefault(this,2,0)},o._CreateIndexRequest.prototype.setNumDimensions=function(e){return t.Message.setProto3IntField(this,2,e)},o._CreateIndexRequest.prototype.getEuclideanSimilarity=function(){return t.Message.getWrapperField(this,o._CreateIndexRequest._EuclideanSimilarity,3)},o._CreateIndexRequest.prototype.setEuclideanSimilarity=function(e){return t.Message.setOneofWrapperField(this,3,o._CreateIndexRequest.oneofGroups_[0],e)},o._CreateIndexRequest.prototype.clearEuclideanSimilarity=function(){return this.setEuclideanSimilarity(void 0)},o._CreateIndexRequest.prototype.hasEuclideanSimilarity=function(){return null!=t.Message.getField(this,3)},o._CreateIndexRequest.prototype.getInnerProduct=function(){return t.Message.getWrapperField(this,o._CreateIndexRequest._InnerProduct,4)},o._CreateIndexRequest.prototype.setInnerProduct=function(e){return t.Message.setOneofWrapperField(this,4,o._CreateIndexRequest.oneofGroups_[0],e)},o._CreateIndexRequest.prototype.clearInnerProduct=function(){return this.setInnerProduct(void 0)},o._CreateIndexRequest.prototype.hasInnerProduct=function(){return null!=t.Message.getField(this,4)},o._CreateIndexRequest.prototype.getCosineSimilarity=function(){return t.Message.getWrapperField(this,o._CreateIndexRequest._CosineSimilarity,5)},o._CreateIndexRequest.prototype.setCosineSimilarity=function(e){return t.Message.setOneofWrapperField(this,5,o._CreateIndexRequest.oneofGroups_[0],e)},o._CreateIndexRequest.prototype.clearCosineSimilarity=function(){return this.setCosineSimilarity(void 0)},o._CreateIndexRequest.prototype.hasCosineSimilarity=function(){return null!=t.Message.getField(this,5)},t.Message.GENERATE_TO_OBJECT&&(o._CreateIndexResponse.prototype.toObject=function(e){return o._CreateIndexResponse.toObject(e,this)},o._CreateIndexResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._CreateIndexResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateIndexResponse;return o._CreateIndexResponse.deserializeBinaryFromReader(i,r)},o._CreateIndexResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._CreateIndexResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateIndexResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateIndexResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._DeleteIndexRequest.prototype.toObject=function(e){return o._DeleteIndexRequest.toObject(e,this)},o._DeleteIndexRequest.toObject=function(e,r){var o={indexName:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._DeleteIndexRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteIndexRequest;return o._DeleteIndexRequest.deserializeBinaryFromReader(i,r)},o._DeleteIndexRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setIndexName(r)}else t.skipField()}return e},o._DeleteIndexRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteIndexRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteIndexRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getIndexName()).length>0&&t.writeString(1,r)},o._DeleteIndexRequest.prototype.getIndexName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DeleteIndexRequest.prototype.setIndexName=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._DeleteIndexResponse.prototype.toObject=function(e){return o._DeleteIndexResponse.toObject(e,this)},o._DeleteIndexResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DeleteIndexResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteIndexResponse;return o._DeleteIndexResponse.deserializeBinaryFromReader(i,r)},o._DeleteIndexResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DeleteIndexResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteIndexResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteIndexResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._ListIndexesRequest.prototype.toObject=function(e){return o._ListIndexesRequest.toObject(e,this)},o._ListIndexesRequest.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._ListIndexesRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListIndexesRequest;return o._ListIndexesRequest.deserializeBinaryFromReader(i,r)},o._ListIndexesRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._ListIndexesRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListIndexesRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListIndexesRequest.serializeBinaryToWriter=function(e,t){},o._ListIndexesResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._ListIndexesResponse.prototype.toObject=function(e){return o._ListIndexesResponse.toObject(e,this)},o._ListIndexesResponse.toObject=function(e,r){var o,i={indexNamesList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._ListIndexesResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListIndexesResponse;return o._ListIndexesResponse.deserializeBinaryFromReader(i,r)},o._ListIndexesResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.addIndexNames(r)}else t.skipField()}return e},o._ListIndexesResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListIndexesResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListIndexesResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getIndexNamesList()).length>0&&t.writeRepeatedString(1,r)},o._ListIndexesResponse.prototype.getIndexNamesList=function(){return t.Message.getRepeatedField(this,1)},o._ListIndexesResponse.prototype.setIndexNamesList=function(e){return t.Message.setField(this,1,e||[])},o._ListIndexesResponse.prototype.addIndexNames=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._ListIndexesResponse.prototype.clearIndexNamesList=function(){return this.setIndexNamesList([])},t.Message.GENERATE_TO_OBJECT&&(o._DeleteCacheRequest.prototype.toObject=function(e){return o._DeleteCacheRequest.toObject(e,this)},o._DeleteCacheRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._DeleteCacheRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteCacheRequest;return o._DeleteCacheRequest.deserializeBinaryFromReader(i,r)},o._DeleteCacheRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setCacheName(r)}else t.skipField()}return e},o._DeleteCacheRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteCacheRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteCacheRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheName()).length>0&&t.writeString(1,r)},o._DeleteCacheRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DeleteCacheRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._DeleteCacheResponse.prototype.toObject=function(e){return o._DeleteCacheResponse.toObject(e,this)},o._DeleteCacheResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DeleteCacheResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteCacheResponse;return o._DeleteCacheResponse.deserializeBinaryFromReader(i,r)},o._DeleteCacheResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DeleteCacheResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteCacheResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteCacheResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._CreateCacheRequest.prototype.toObject=function(e){return o._CreateCacheRequest.toObject(e,this)},o._CreateCacheRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._CreateCacheRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateCacheRequest;return o._CreateCacheRequest.deserializeBinaryFromReader(i,r)},o._CreateCacheRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setCacheName(r)}else t.skipField()}return e},o._CreateCacheRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateCacheRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateCacheRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheName()).length>0&&t.writeString(1,r)},o._CreateCacheRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._CreateCacheRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._CreateCacheResponse.prototype.toObject=function(e){return o._CreateCacheResponse.toObject(e,this)},o._CreateCacheResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._CreateCacheResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateCacheResponse;return o._CreateCacheResponse.deserializeBinaryFromReader(i,r)},o._CreateCacheResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._CreateCacheResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateCacheResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateCacheResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._ListCachesRequest.prototype.toObject=function(e){return o._ListCachesRequest.toObject(e,this)},o._ListCachesRequest.toObject=function(e,r){var o={nextToken:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._ListCachesRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListCachesRequest;return o._ListCachesRequest.deserializeBinaryFromReader(i,r)},o._ListCachesRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setNextToken(r)}else t.skipField()}return e},o._ListCachesRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListCachesRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListCachesRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getNextToken()).length>0&&t.writeString(1,r)},o._ListCachesRequest.prototype.getNextToken=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListCachesRequest.prototype.setNextToken=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._CacheLimits.prototype.toObject=function(e){return o._CacheLimits.toObject(e,this)},o._CacheLimits.toObject=function(e,r){var o={maxTrafficRate:t.Message.getFieldWithDefault(r,1,0),maxThroughputKbps:t.Message.getFieldWithDefault(r,2,0),maxItemSizeKb:t.Message.getFieldWithDefault(r,3,0),maxTtlSeconds:t.Message.getFieldWithDefault(r,4,0)};return e&&(o.$jspbMessageInstance=r),o}),o._CacheLimits.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CacheLimits;return o._CacheLimits.deserializeBinaryFromReader(i,r)},o._CacheLimits.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setMaxTrafficRate(r);break;case 2:r=t.readUint32();e.setMaxThroughputKbps(r);break;case 3:r=t.readUint32();e.setMaxItemSizeKb(r);break;case 4:r=t.readUint64();e.setMaxTtlSeconds(r);break;default:t.skipField()}}return e},o._CacheLimits.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CacheLimits.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CacheLimits.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getMaxTrafficRate())&&t.writeUint32(1,r),0!==(r=e.getMaxThroughputKbps())&&t.writeUint32(2,r),0!==(r=e.getMaxItemSizeKb())&&t.writeUint32(3,r),0!==(r=e.getMaxTtlSeconds())&&t.writeUint64(4,r)},o._CacheLimits.prototype.getMaxTrafficRate=function(){return t.Message.getFieldWithDefault(this,1,0)},o._CacheLimits.prototype.setMaxTrafficRate=function(e){return t.Message.setProto3IntField(this,1,e)},o._CacheLimits.prototype.getMaxThroughputKbps=function(){return t.Message.getFieldWithDefault(this,2,0)},o._CacheLimits.prototype.setMaxThroughputKbps=function(e){return t.Message.setProto3IntField(this,2,e)},o._CacheLimits.prototype.getMaxItemSizeKb=function(){return t.Message.getFieldWithDefault(this,3,0)},o._CacheLimits.prototype.setMaxItemSizeKb=function(e){return t.Message.setProto3IntField(this,3,e)},o._CacheLimits.prototype.getMaxTtlSeconds=function(){return t.Message.getFieldWithDefault(this,4,0)},o._CacheLimits.prototype.setMaxTtlSeconds=function(e){return t.Message.setProto3IntField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._TopicLimits.prototype.toObject=function(e){return o._TopicLimits.toObject(e,this)},o._TopicLimits.toObject=function(e,r){var o={maxPublishRate:t.Message.getFieldWithDefault(r,1,0),maxSubscriptionCount:t.Message.getFieldWithDefault(r,2,0),maxPublishMessageSizeKb:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._TopicLimits.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._TopicLimits;return o._TopicLimits.deserializeBinaryFromReader(i,r)},o._TopicLimits.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setMaxPublishRate(r);break;case 2:r=t.readUint32();e.setMaxSubscriptionCount(r);break;case 3:r=t.readUint32();e.setMaxPublishMessageSizeKb(r);break;default:t.skipField()}}return e},o._TopicLimits.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._TopicLimits.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._TopicLimits.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getMaxPublishRate())&&t.writeUint32(1,r),0!==(r=e.getMaxSubscriptionCount())&&t.writeUint32(2,r),0!==(r=e.getMaxPublishMessageSizeKb())&&t.writeUint32(3,r)},o._TopicLimits.prototype.getMaxPublishRate=function(){return t.Message.getFieldWithDefault(this,1,0)},o._TopicLimits.prototype.setMaxPublishRate=function(e){return t.Message.setProto3IntField(this,1,e)},o._TopicLimits.prototype.getMaxSubscriptionCount=function(){return t.Message.getFieldWithDefault(this,2,0)},o._TopicLimits.prototype.setMaxSubscriptionCount=function(e){return t.Message.setProto3IntField(this,2,e)},o._TopicLimits.prototype.getMaxPublishMessageSizeKb=function(){return t.Message.getFieldWithDefault(this,3,0)},o._TopicLimits.prototype.setMaxPublishMessageSizeKb=function(e){return t.Message.setProto3IntField(this,3,e)},t.Message.GENERATE_TO_OBJECT&&(o._Cache.prototype.toObject=function(e){return o._Cache.toObject(e,this)},o._Cache.toObject=function(e,r){var i,s={cacheName:t.Message.getFieldWithDefault(r,1,""),cacheLimits:(i=r.getCacheLimits())&&o._CacheLimits.toObject(e,i),topicLimits:(i=r.getTopicLimits())&&o._TopicLimits.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._Cache.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Cache;return o._Cache.deserializeBinaryFromReader(i,r)},o._Cache.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=new o._CacheLimits;t.readMessage(r,o._CacheLimits.deserializeBinaryFromReader),e.setCacheLimits(r);break;case 3:r=new o._TopicLimits;t.readMessage(r,o._TopicLimits.deserializeBinaryFromReader),e.setTopicLimits(r);break;default:t.skipField()}}return e},o._Cache.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Cache.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Cache.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),null!=(r=e.getCacheLimits())&&t.writeMessage(2,r,o._CacheLimits.serializeBinaryToWriter),null!=(r=e.getTopicLimits())&&t.writeMessage(3,r,o._TopicLimits.serializeBinaryToWriter)},o._Cache.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._Cache.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._Cache.prototype.getCacheLimits=function(){return t.Message.getWrapperField(this,o._CacheLimits,2)},o._Cache.prototype.setCacheLimits=function(e){return t.Message.setWrapperField(this,2,e)},o._Cache.prototype.clearCacheLimits=function(){return this.setCacheLimits(void 0)},o._Cache.prototype.hasCacheLimits=function(){return null!=t.Message.getField(this,2)},o._Cache.prototype.getTopicLimits=function(){return t.Message.getWrapperField(this,o._TopicLimits,3)},o._Cache.prototype.setTopicLimits=function(e){return t.Message.setWrapperField(this,3,e)},o._Cache.prototype.clearTopicLimits=function(){return this.setTopicLimits(void 0)},o._Cache.prototype.hasTopicLimits=function(){return null!=t.Message.getField(this,3)},o._ListCachesResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._ListCachesResponse.prototype.toObject=function(e){return o._ListCachesResponse.toObject(e,this)},o._ListCachesResponse.toObject=function(e,r){var i={cacheList:t.Message.toObjectList(r.getCacheList(),o._Cache.toObject,e),nextToken:t.Message.getFieldWithDefault(r,2,"")};return e&&(i.$jspbMessageInstance=r),i}),o._ListCachesResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListCachesResponse;return o._ListCachesResponse.deserializeBinaryFromReader(i,r)},o._ListCachesResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._Cache;t.readMessage(r,o._Cache.deserializeBinaryFromReader),e.addCache(r);break;case 2:r=t.readString();e.setNextToken(r);break;default:t.skipField()}}return e},o._ListCachesResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListCachesResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListCachesResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheList()).length>0&&t.writeRepeatedMessage(1,r,o._Cache.serializeBinaryToWriter),(r=e.getNextToken()).length>0&&t.writeString(2,r)},o._ListCachesResponse.prototype.getCacheList=function(){return t.Message.getRepeatedWrapperField(this,o._Cache,1)},o._ListCachesResponse.prototype.setCacheList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._ListCachesResponse.prototype.addCache=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._Cache,r)},o._ListCachesResponse.prototype.clearCacheList=function(){return this.setCacheList([])},o._ListCachesResponse.prototype.getNextToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._ListCachesResponse.prototype.setNextToken=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._CreateSigningKeyRequest.prototype.toObject=function(e){return o._CreateSigningKeyRequest.toObject(e,this)},o._CreateSigningKeyRequest.toObject=function(e,r){var o={ttlMinutes:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._CreateSigningKeyRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateSigningKeyRequest;return o._CreateSigningKeyRequest.deserializeBinaryFromReader(i,r)},o._CreateSigningKeyRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setTtlMinutes(r)}else t.skipField()}return e},o._CreateSigningKeyRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateSigningKeyRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateSigningKeyRequest.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getTtlMinutes())&&t.writeUint32(1,r)},o._CreateSigningKeyRequest.prototype.getTtlMinutes=function(){return t.Message.getFieldWithDefault(this,1,0)},o._CreateSigningKeyRequest.prototype.setTtlMinutes=function(e){return t.Message.setProto3IntField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._CreateSigningKeyResponse.prototype.toObject=function(e){return o._CreateSigningKeyResponse.toObject(e,this)},o._CreateSigningKeyResponse.toObject=function(e,r){var o={key:t.Message.getFieldWithDefault(r,1,""),expiresAt:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._CreateSigningKeyResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._CreateSigningKeyResponse;return o._CreateSigningKeyResponse.deserializeBinaryFromReader(i,r)},o._CreateSigningKeyResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setKey(r);break;case 2:r=t.readUint64();e.setExpiresAt(r);break;default:t.skipField()}}return e},o._CreateSigningKeyResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._CreateSigningKeyResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._CreateSigningKeyResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getKey()).length>0&&t.writeString(1,r),0!==(r=e.getExpiresAt())&&t.writeUint64(2,r)},o._CreateSigningKeyResponse.prototype.getKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._CreateSigningKeyResponse.prototype.setKey=function(e){return t.Message.setProto3StringField(this,1,e)},o._CreateSigningKeyResponse.prototype.getExpiresAt=function(){return t.Message.getFieldWithDefault(this,2,0)},o._CreateSigningKeyResponse.prototype.setExpiresAt=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._RevokeSigningKeyRequest.prototype.toObject=function(e){return o._RevokeSigningKeyRequest.toObject(e,this)},o._RevokeSigningKeyRequest.toObject=function(e,r){var o={keyId:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._RevokeSigningKeyRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RevokeSigningKeyRequest;return o._RevokeSigningKeyRequest.deserializeBinaryFromReader(i,r)},o._RevokeSigningKeyRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setKeyId(r)}else t.skipField()}return e},o._RevokeSigningKeyRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RevokeSigningKeyRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RevokeSigningKeyRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getKeyId()).length>0&&t.writeString(1,r)},o._RevokeSigningKeyRequest.prototype.getKeyId=function(){return t.Message.getFieldWithDefault(this,1,"")},o._RevokeSigningKeyRequest.prototype.setKeyId=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._RevokeSigningKeyResponse.prototype.toObject=function(e){return o._RevokeSigningKeyResponse.toObject(e,this)},o._RevokeSigningKeyResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._RevokeSigningKeyResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RevokeSigningKeyResponse;return o._RevokeSigningKeyResponse.deserializeBinaryFromReader(i,r)},o._RevokeSigningKeyResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._RevokeSigningKeyResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RevokeSigningKeyResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RevokeSigningKeyResponse.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._SigningKey.prototype.toObject=function(e){return o._SigningKey.toObject(e,this)},o._SigningKey.toObject=function(e,r){var o={keyId:t.Message.getFieldWithDefault(r,1,""),expiresAt:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SigningKey.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SigningKey;return o._SigningKey.deserializeBinaryFromReader(i,r)},o._SigningKey.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setKeyId(r);break;case 2:r=t.readUint64();e.setExpiresAt(r);break;default:t.skipField()}}return e},o._SigningKey.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SigningKey.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SigningKey.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getKeyId()).length>0&&t.writeString(1,r),0!==(r=e.getExpiresAt())&&t.writeUint64(2,r)},o._SigningKey.prototype.getKeyId=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SigningKey.prototype.setKeyId=function(e){return t.Message.setProto3StringField(this,1,e)},o._SigningKey.prototype.getExpiresAt=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SigningKey.prototype.setExpiresAt=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._ListSigningKeysRequest.prototype.toObject=function(e){return o._ListSigningKeysRequest.toObject(e,this)},o._ListSigningKeysRequest.toObject=function(e,r){var o={nextToken:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._ListSigningKeysRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListSigningKeysRequest;return o._ListSigningKeysRequest.deserializeBinaryFromReader(i,r)},o._ListSigningKeysRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setNextToken(r)}else t.skipField()}return e},o._ListSigningKeysRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListSigningKeysRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListSigningKeysRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getNextToken()).length>0&&t.writeString(1,r)},o._ListSigningKeysRequest.prototype.getNextToken=function(){return t.Message.getFieldWithDefault(this,1,"")},o._ListSigningKeysRequest.prototype.setNextToken=function(e){return t.Message.setProto3StringField(this,1,e)},o._ListSigningKeysResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._ListSigningKeysResponse.prototype.toObject=function(e){return o._ListSigningKeysResponse.toObject(e,this)},o._ListSigningKeysResponse.toObject=function(e,r){var i={signingKeyList:t.Message.toObjectList(r.getSigningKeyList(),o._SigningKey.toObject,e),nextToken:t.Message.getFieldWithDefault(r,2,"")};return e&&(i.$jspbMessageInstance=r),i}),o._ListSigningKeysResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ListSigningKeysResponse;return o._ListSigningKeysResponse.deserializeBinaryFromReader(i,r)},o._ListSigningKeysResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._SigningKey;t.readMessage(r,o._SigningKey.deserializeBinaryFromReader),e.addSigningKey(r);break;case 2:r=t.readString();e.setNextToken(r);break;default:t.skipField()}}return e},o._ListSigningKeysResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ListSigningKeysResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ListSigningKeysResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSigningKeyList()).length>0&&t.writeRepeatedMessage(1,r,o._SigningKey.serializeBinaryToWriter),(r=e.getNextToken()).length>0&&t.writeString(2,r)},o._ListSigningKeysResponse.prototype.getSigningKeyList=function(){return t.Message.getRepeatedWrapperField(this,o._SigningKey,1)},o._ListSigningKeysResponse.prototype.setSigningKeyList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._ListSigningKeysResponse.prototype.addSigningKey=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._SigningKey,r)},o._ListSigningKeysResponse.prototype.clearSigningKeyList=function(){return this.setSigningKeyList([])},o._ListSigningKeysResponse.prototype.getNextToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._ListSigningKeysResponse.prototype.setNextToken=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._FlushCacheRequest.prototype.toObject=function(e){return o._FlushCacheRequest.toObject(e,this)},o._FlushCacheRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._FlushCacheRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._FlushCacheRequest;return o._FlushCacheRequest.deserializeBinaryFromReader(i,r)},o._FlushCacheRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setCacheName(r)}else t.skipField()}return e},o._FlushCacheRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._FlushCacheRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._FlushCacheRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getCacheName()).length>0&&t.writeString(1,r)},o._FlushCacheRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._FlushCacheRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._FlushCacheResponse.prototype.toObject=function(e){return o._FlushCacheResponse.toObject(e,this)},o._FlushCacheResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._FlushCacheResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._FlushCacheResponse;return o._FlushCacheResponse.deserializeBinaryFromReader(i,r)},o._FlushCacheResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._FlushCacheResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._FlushCacheResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._FlushCacheResponse.serializeBinaryToWriter=function(e,t){},r.object.extend(e,o)}(controlclient_pb$1);var __createBinding$7=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$7=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$7=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$7(t,e,r);return __setModuleDefault$7(t,e),t};Object.defineProperty(ControlclientServiceClientPb,"__esModule",{value:!0}),ControlclientServiceClientPb.ScsControlClient=void 0;const grpcWeb$6=__importStar$7(grpcWeb$8),controlclient_pb=__importStar$7(controlclient_pb$1);class ScsControlClient{constructor(e,t,r){this.methodDescriptorCreateCache=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/CreateCache",grpcWeb$6.MethodType.UNARY,controlclient_pb._CreateCacheRequest,controlclient_pb._CreateCacheResponse,(e=>e.serializeBinary()),controlclient_pb._CreateCacheResponse.deserializeBinary),this.methodDescriptorDeleteCache=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/DeleteCache",grpcWeb$6.MethodType.UNARY,controlclient_pb._DeleteCacheRequest,controlclient_pb._DeleteCacheResponse,(e=>e.serializeBinary()),controlclient_pb._DeleteCacheResponse.deserializeBinary),this.methodDescriptorListCaches=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/ListCaches",grpcWeb$6.MethodType.UNARY,controlclient_pb._ListCachesRequest,controlclient_pb._ListCachesResponse,(e=>e.serializeBinary()),controlclient_pb._ListCachesResponse.deserializeBinary),this.methodDescriptorFlushCache=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/FlushCache",grpcWeb$6.MethodType.UNARY,controlclient_pb._FlushCacheRequest,controlclient_pb._FlushCacheResponse,(e=>e.serializeBinary()),controlclient_pb._FlushCacheResponse.deserializeBinary),this.methodDescriptorCreateSigningKey=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/CreateSigningKey",grpcWeb$6.MethodType.UNARY,controlclient_pb._CreateSigningKeyRequest,controlclient_pb._CreateSigningKeyResponse,(e=>e.serializeBinary()),controlclient_pb._CreateSigningKeyResponse.deserializeBinary),this.methodDescriptorRevokeSigningKey=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/RevokeSigningKey",grpcWeb$6.MethodType.UNARY,controlclient_pb._RevokeSigningKeyRequest,controlclient_pb._RevokeSigningKeyResponse,(e=>e.serializeBinary()),controlclient_pb._RevokeSigningKeyResponse.deserializeBinary),this.methodDescriptorListSigningKeys=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/ListSigningKeys",grpcWeb$6.MethodType.UNARY,controlclient_pb._ListSigningKeysRequest,controlclient_pb._ListSigningKeysResponse,(e=>e.serializeBinary()),controlclient_pb._ListSigningKeysResponse.deserializeBinary),this.methodDescriptorCreateIndex=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/CreateIndex",grpcWeb$6.MethodType.UNARY,controlclient_pb._CreateIndexRequest,controlclient_pb._CreateIndexResponse,(e=>e.serializeBinary()),controlclient_pb._CreateIndexResponse.deserializeBinary),this.methodDescriptorDeleteIndex=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/DeleteIndex",grpcWeb$6.MethodType.UNARY,controlclient_pb._DeleteIndexRequest,controlclient_pb._DeleteIndexResponse,(e=>e.serializeBinary()),controlclient_pb._DeleteIndexResponse.deserializeBinary),this.methodDescriptorListIndexes=new grpcWeb$6.MethodDescriptor("/control_client.ScsControl/ListIndexes",grpcWeb$6.MethodType.UNARY,controlclient_pb._ListIndexesRequest,controlclient_pb._ListIndexesResponse,(e=>e.serializeBinary()),controlclient_pb._ListIndexesResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$6.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}createCache(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/CreateCache",e,t||{},this.methodDescriptorCreateCache,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/CreateCache",e,t||{},this.methodDescriptorCreateCache)}deleteCache(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/DeleteCache",e,t||{},this.methodDescriptorDeleteCache,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/DeleteCache",e,t||{},this.methodDescriptorDeleteCache)}listCaches(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/ListCaches",e,t||{},this.methodDescriptorListCaches,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/ListCaches",e,t||{},this.methodDescriptorListCaches)}flushCache(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/FlushCache",e,t||{},this.methodDescriptorFlushCache,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/FlushCache",e,t||{},this.methodDescriptorFlushCache)}createSigningKey(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/CreateSigningKey",e,t||{},this.methodDescriptorCreateSigningKey,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/CreateSigningKey",e,t||{},this.methodDescriptorCreateSigningKey)}revokeSigningKey(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/RevokeSigningKey",e,t||{},this.methodDescriptorRevokeSigningKey,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/RevokeSigningKey",e,t||{},this.methodDescriptorRevokeSigningKey)}listSigningKeys(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/ListSigningKeys",e,t||{},this.methodDescriptorListSigningKeys,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/ListSigningKeys",e,t||{},this.methodDescriptorListSigningKeys)}createIndex(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/CreateIndex",e,t||{},this.methodDescriptorCreateIndex,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/CreateIndex",e,t||{},this.methodDescriptorCreateIndex)}deleteIndex(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/DeleteIndex",e,t||{},this.methodDescriptorDeleteIndex,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/DeleteIndex",e,t||{},this.methodDescriptorDeleteIndex)}listIndexes(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/control_client.ScsControl/ListIndexes",e,t||{},this.methodDescriptorListIndexes,r):this.client_.unaryCall(this.hostname_+"/control_client.ScsControl/ListIndexes",e,t||{},this.methodDescriptorListIndexes)}}ControlclientServiceClientPb.ScsControlClient=ScsControlClient;var AuthServiceClientPb={},auth_pb$1={},permissionmessages_pb={};!function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("CacheRole",null,o),r.exportSymbol("ExplicitPermissions",null,o),r.exportSymbol("Permissions",null,o),r.exportSymbol("Permissions.KindCase",null,o),r.exportSymbol("PermissionsType",null,o),r.exportSymbol("PermissionsType.All",null,o),r.exportSymbol("PermissionsType.CacheItemSelector",null,o),r.exportSymbol("PermissionsType.CacheItemSelector.KindCase",null,o),r.exportSymbol("PermissionsType.CachePermissions",null,o),r.exportSymbol("PermissionsType.CachePermissions.CacheCase",null,o),r.exportSymbol("PermissionsType.CachePermissions.CacheItemCase",null,o),r.exportSymbol("PermissionsType.CacheSelector",null,o),r.exportSymbol("PermissionsType.CacheSelector.KindCase",null,o),r.exportSymbol("PermissionsType.KindCase",null,o),r.exportSymbol("PermissionsType.TopicPermissions",null,o),r.exportSymbol("PermissionsType.TopicPermissions.CacheCase",null,o),r.exportSymbol("PermissionsType.TopicPermissions.TopicCase",null,o),r.exportSymbol("PermissionsType.TopicSelector",null,o),r.exportSymbol("PermissionsType.TopicSelector.KindCase",null,o),r.exportSymbol("SuperUserPermissions",null,o),r.exportSymbol("TopicRole",null,o),o.Permissions=function(e){t.Message.initialize(this,e,0,-1,null,o.Permissions.oneofGroups_)},r.inherits(o.Permissions,t.Message),r.DEBUG&&!COMPILED&&(o.Permissions.displayName="proto.Permissions"),o.ExplicitPermissions=function(e){t.Message.initialize(this,e,0,-1,o.ExplicitPermissions.repeatedFields_,null)},r.inherits(o.ExplicitPermissions,t.Message),r.DEBUG&&!COMPILED&&(o.ExplicitPermissions.displayName="proto.ExplicitPermissions"),o.PermissionsType=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.oneofGroups_)},r.inherits(o.PermissionsType,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.displayName="proto.PermissionsType"),o.PermissionsType.All=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o.PermissionsType.All,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.All.displayName="proto.PermissionsType.All"),o.PermissionsType.CacheSelector=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.CacheSelector.oneofGroups_)},r.inherits(o.PermissionsType.CacheSelector,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.CacheSelector.displayName="proto.PermissionsType.CacheSelector"),o.PermissionsType.CacheItemSelector=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.CacheItemSelector.oneofGroups_)},r.inherits(o.PermissionsType.CacheItemSelector,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.CacheItemSelector.displayName="proto.PermissionsType.CacheItemSelector"),o.PermissionsType.CachePermissions=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.CachePermissions.oneofGroups_)},r.inherits(o.PermissionsType.CachePermissions,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.CachePermissions.displayName="proto.PermissionsType.CachePermissions"),o.PermissionsType.TopicSelector=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.TopicSelector.oneofGroups_)},r.inherits(o.PermissionsType.TopicSelector,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.TopicSelector.displayName="proto.PermissionsType.TopicSelector"),o.PermissionsType.TopicPermissions=function(e){t.Message.initialize(this,e,0,-1,null,o.PermissionsType.TopicPermissions.oneofGroups_)},r.inherits(o.PermissionsType.TopicPermissions,t.Message),r.DEBUG&&!COMPILED&&(o.PermissionsType.TopicPermissions.displayName="proto.PermissionsType.TopicPermissions"),o.Permissions.oneofGroups_=[[1,2]],o.Permissions.KindCase={KIND_NOT_SET:0,SUPER_USER:1,EXPLICIT:2},o.Permissions.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o.Permissions.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o.Permissions.prototype.toObject=function(e){return o.Permissions.toObject(e,this)},o.Permissions.toObject=function(e,r){var i,s={superUser:t.Message.getFieldWithDefault(r,1,0),explicit:(i=r.getExplicit())&&o.ExplicitPermissions.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o.Permissions.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.Permissions;return o.Permissions.deserializeBinaryFromReader(i,r)},o.Permissions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setSuperUser(r);break;case 2:r=new o.ExplicitPermissions;t.readMessage(r,o.ExplicitPermissions.deserializeBinaryFromReader),e.setExplicit(r);break;default:t.skipField()}}return e},o.Permissions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.Permissions.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.Permissions.serializeBinaryToWriter=function(e,r){var i=void 0;null!=(i=t.Message.getField(e,1))&&r.writeEnum(1,i),null!=(i=e.getExplicit())&&r.writeMessage(2,i,o.ExplicitPermissions.serializeBinaryToWriter)},o.Permissions.prototype.getSuperUser=function(){return t.Message.getFieldWithDefault(this,1,0)},o.Permissions.prototype.setSuperUser=function(e){return t.Message.setOneofField(this,1,o.Permissions.oneofGroups_[0],e)},o.Permissions.prototype.clearSuperUser=function(){return t.Message.setOneofField(this,1,o.Permissions.oneofGroups_[0],void 0)},o.Permissions.prototype.hasSuperUser=function(){return null!=t.Message.getField(this,1)},o.Permissions.prototype.getExplicit=function(){return t.Message.getWrapperField(this,o.ExplicitPermissions,2)},o.Permissions.prototype.setExplicit=function(e){return t.Message.setOneofWrapperField(this,2,o.Permissions.oneofGroups_[0],e)},o.Permissions.prototype.clearExplicit=function(){return this.setExplicit(void 0)},o.Permissions.prototype.hasExplicit=function(){return null!=t.Message.getField(this,2)},o.ExplicitPermissions.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o.ExplicitPermissions.prototype.toObject=function(e){return o.ExplicitPermissions.toObject(e,this)},o.ExplicitPermissions.toObject=function(e,r){var i={permissionsList:t.Message.toObjectList(r.getPermissionsList(),o.PermissionsType.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o.ExplicitPermissions.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.ExplicitPermissions;return o.ExplicitPermissions.deserializeBinaryFromReader(i,r)},o.ExplicitPermissions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o.PermissionsType;t.readMessage(r,o.PermissionsType.deserializeBinaryFromReader),e.addPermissions(r)}else t.skipField()}return e},o.ExplicitPermissions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.ExplicitPermissions.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.ExplicitPermissions.serializeBinaryToWriter=function(e,t){var r;(r=e.getPermissionsList()).length>0&&t.writeRepeatedMessage(1,r,o.PermissionsType.serializeBinaryToWriter)},o.ExplicitPermissions.prototype.getPermissionsList=function(){return t.Message.getRepeatedWrapperField(this,o.PermissionsType,1)},o.ExplicitPermissions.prototype.setPermissionsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o.ExplicitPermissions.prototype.addPermissions=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o.PermissionsType,r)},o.ExplicitPermissions.prototype.clearPermissionsList=function(){return this.setPermissionsList([])},o.PermissionsType.oneofGroups_=[[1,2]],o.PermissionsType.KindCase={KIND_NOT_SET:0,CACHE_PERMISSIONS:1,TOPIC_PERMISSIONS:2},o.PermissionsType.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.prototype.toObject=function(e){return o.PermissionsType.toObject(e,this)},o.PermissionsType.toObject=function(e,t){var r,i={cachePermissions:(r=t.getCachePermissions())&&o.PermissionsType.CachePermissions.toObject(e,r),topicPermissions:(r=t.getTopicPermissions())&&o.PermissionsType.TopicPermissions.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o.PermissionsType.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType;return o.PermissionsType.deserializeBinaryFromReader(i,r)},o.PermissionsType.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o.PermissionsType.CachePermissions;t.readMessage(r,o.PermissionsType.CachePermissions.deserializeBinaryFromReader),e.setCachePermissions(r);break;case 2:r=new o.PermissionsType.TopicPermissions;t.readMessage(r,o.PermissionsType.TopicPermissions.deserializeBinaryFromReader),e.setTopicPermissions(r);break;default:t.skipField()}}return e},o.PermissionsType.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getCachePermissions())&&t.writeMessage(1,r,o.PermissionsType.CachePermissions.serializeBinaryToWriter),null!=(r=e.getTopicPermissions())&&t.writeMessage(2,r,o.PermissionsType.TopicPermissions.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.All.prototype.toObject=function(e){return o.PermissionsType.All.toObject(e,this)},o.PermissionsType.All.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o.PermissionsType.All.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.All;return o.PermissionsType.All.deserializeBinaryFromReader(i,r)},o.PermissionsType.All.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o.PermissionsType.All.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.All.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.All.serializeBinaryToWriter=function(e,t){},o.PermissionsType.CacheSelector.oneofGroups_=[[1]],o.PermissionsType.CacheSelector.KindCase={KIND_NOT_SET:0,CACHE_NAME:1},o.PermissionsType.CacheSelector.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.CacheSelector.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.CacheSelector.prototype.toObject=function(e){return o.PermissionsType.CacheSelector.toObject(e,this)},o.PermissionsType.CacheSelector.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o.PermissionsType.CacheSelector.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.CacheSelector;return o.PermissionsType.CacheSelector.deserializeBinaryFromReader(i,r)},o.PermissionsType.CacheSelector.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setCacheName(r)}else t.skipField()}return e},o.PermissionsType.CacheSelector.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.CacheSelector.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.CacheSelector.serializeBinaryToWriter=function(e,r){var o;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o)},o.PermissionsType.CacheSelector.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o.PermissionsType.CacheSelector.prototype.setCacheName=function(e){return t.Message.setOneofField(this,1,o.PermissionsType.CacheSelector.oneofGroups_[0],e)},o.PermissionsType.CacheSelector.prototype.clearCacheName=function(){return t.Message.setOneofField(this,1,o.PermissionsType.CacheSelector.oneofGroups_[0],void 0)},o.PermissionsType.CacheSelector.prototype.hasCacheName=function(){return null!=t.Message.getField(this,1)},o.PermissionsType.CacheItemSelector.oneofGroups_=[[1,2]],o.PermissionsType.CacheItemSelector.KindCase={KIND_NOT_SET:0,KEY:1,KEY_PREFIX:2},o.PermissionsType.CacheItemSelector.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.CacheItemSelector.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.CacheItemSelector.prototype.toObject=function(e){return o.PermissionsType.CacheItemSelector.toObject(e,this)},o.PermissionsType.CacheItemSelector.toObject=function(e,t){var r={key:t.getKey_asB64(),keyPrefix:t.getKeyPrefix_asB64()};return e&&(r.$jspbMessageInstance=t),r}),o.PermissionsType.CacheItemSelector.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.CacheItemSelector;return o.PermissionsType.CacheItemSelector.deserializeBinaryFromReader(i,r)},o.PermissionsType.CacheItemSelector.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setKey(r);break;case 2:r=t.readBytes();e.setKeyPrefix(r);break;default:t.skipField()}}return e},o.PermissionsType.CacheItemSelector.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.CacheItemSelector.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.CacheItemSelector.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeBytes(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBytes(2,o)},o.PermissionsType.CacheItemSelector.prototype.getKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o.PermissionsType.CacheItemSelector.prototype.getKey_asB64=function(){return t.Message.bytesAsB64(this.getKey())},o.PermissionsType.CacheItemSelector.prototype.getKey_asU8=function(){return t.Message.bytesAsU8(this.getKey())},o.PermissionsType.CacheItemSelector.prototype.setKey=function(e){return t.Message.setOneofField(this,1,o.PermissionsType.CacheItemSelector.oneofGroups_[0],e)},o.PermissionsType.CacheItemSelector.prototype.clearKey=function(){return t.Message.setOneofField(this,1,o.PermissionsType.CacheItemSelector.oneofGroups_[0],void 0)},o.PermissionsType.CacheItemSelector.prototype.hasKey=function(){return null!=t.Message.getField(this,1)},o.PermissionsType.CacheItemSelector.prototype.getKeyPrefix=function(){return t.Message.getFieldWithDefault(this,2,"")},o.PermissionsType.CacheItemSelector.prototype.getKeyPrefix_asB64=function(){return t.Message.bytesAsB64(this.getKeyPrefix())},o.PermissionsType.CacheItemSelector.prototype.getKeyPrefix_asU8=function(){return t.Message.bytesAsU8(this.getKeyPrefix())},o.PermissionsType.CacheItemSelector.prototype.setKeyPrefix=function(e){return t.Message.setOneofField(this,2,o.PermissionsType.CacheItemSelector.oneofGroups_[0],e)},o.PermissionsType.CacheItemSelector.prototype.clearKeyPrefix=function(){return t.Message.setOneofField(this,2,o.PermissionsType.CacheItemSelector.oneofGroups_[0],void 0)},o.PermissionsType.CacheItemSelector.prototype.hasKeyPrefix=function(){return null!=t.Message.getField(this,2)},o.PermissionsType.CachePermissions.oneofGroups_=[[2,3],[4,5]],o.PermissionsType.CachePermissions.CacheCase={CACHE_NOT_SET:0,ALL_CACHES:2,CACHE_SELECTOR:3},o.PermissionsType.CachePermissions.prototype.getCacheCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.CachePermissions.oneofGroups_[0])},o.PermissionsType.CachePermissions.CacheItemCase={CACHE_ITEM_NOT_SET:0,ALL_ITEMS:4,ITEM_SELECTOR:5},o.PermissionsType.CachePermissions.prototype.getCacheItemCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.CachePermissions.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.CachePermissions.prototype.toObject=function(e){return o.PermissionsType.CachePermissions.toObject(e,this)},o.PermissionsType.CachePermissions.toObject=function(e,r){var i,s={role:t.Message.getFieldWithDefault(r,1,0),allCaches:(i=r.getAllCaches())&&o.PermissionsType.All.toObject(e,i),cacheSelector:(i=r.getCacheSelector())&&o.PermissionsType.CacheSelector.toObject(e,i),allItems:(i=r.getAllItems())&&o.PermissionsType.All.toObject(e,i),itemSelector:(i=r.getItemSelector())&&o.PermissionsType.CacheItemSelector.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o.PermissionsType.CachePermissions.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.CachePermissions;return o.PermissionsType.CachePermissions.deserializeBinaryFromReader(i,r)},o.PermissionsType.CachePermissions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setRole(r);break;case 2:r=new o.PermissionsType.All;t.readMessage(r,o.PermissionsType.All.deserializeBinaryFromReader),e.setAllCaches(r);break;case 3:r=new o.PermissionsType.CacheSelector;t.readMessage(r,o.PermissionsType.CacheSelector.deserializeBinaryFromReader),e.setCacheSelector(r);break;case 4:r=new o.PermissionsType.All;t.readMessage(r,o.PermissionsType.All.deserializeBinaryFromReader),e.setAllItems(r);break;case 5:r=new o.PermissionsType.CacheItemSelector;t.readMessage(r,o.PermissionsType.CacheItemSelector.deserializeBinaryFromReader),e.setItemSelector(r);break;default:t.skipField()}}return e},o.PermissionsType.CachePermissions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.CachePermissions.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.CachePermissions.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRole())&&t.writeEnum(1,r),null!=(r=e.getAllCaches())&&t.writeMessage(2,r,o.PermissionsType.All.serializeBinaryToWriter),null!=(r=e.getCacheSelector())&&t.writeMessage(3,r,o.PermissionsType.CacheSelector.serializeBinaryToWriter),null!=(r=e.getAllItems())&&t.writeMessage(4,r,o.PermissionsType.All.serializeBinaryToWriter),null!=(r=e.getItemSelector())&&t.writeMessage(5,r,o.PermissionsType.CacheItemSelector.serializeBinaryToWriter)},o.PermissionsType.CachePermissions.prototype.getRole=function(){return t.Message.getFieldWithDefault(this,1,0)},o.PermissionsType.CachePermissions.prototype.setRole=function(e){return t.Message.setProto3EnumField(this,1,e)},o.PermissionsType.CachePermissions.prototype.getAllCaches=function(){return t.Message.getWrapperField(this,o.PermissionsType.All,2)},o.PermissionsType.CachePermissions.prototype.setAllCaches=function(e){return t.Message.setOneofWrapperField(this,2,o.PermissionsType.CachePermissions.oneofGroups_[0],e)},o.PermissionsType.CachePermissions.prototype.clearAllCaches=function(){return this.setAllCaches(void 0)},o.PermissionsType.CachePermissions.prototype.hasAllCaches=function(){return null!=t.Message.getField(this,2)},o.PermissionsType.CachePermissions.prototype.getCacheSelector=function(){return t.Message.getWrapperField(this,o.PermissionsType.CacheSelector,3)},o.PermissionsType.CachePermissions.prototype.setCacheSelector=function(e){return t.Message.setOneofWrapperField(this,3,o.PermissionsType.CachePermissions.oneofGroups_[0],e)},o.PermissionsType.CachePermissions.prototype.clearCacheSelector=function(){return this.setCacheSelector(void 0)},o.PermissionsType.CachePermissions.prototype.hasCacheSelector=function(){return null!=t.Message.getField(this,3)},o.PermissionsType.CachePermissions.prototype.getAllItems=function(){return t.Message.getWrapperField(this,o.PermissionsType.All,4)},o.PermissionsType.CachePermissions.prototype.setAllItems=function(e){return t.Message.setOneofWrapperField(this,4,o.PermissionsType.CachePermissions.oneofGroups_[1],e)},o.PermissionsType.CachePermissions.prototype.clearAllItems=function(){return this.setAllItems(void 0)},o.PermissionsType.CachePermissions.prototype.hasAllItems=function(){return null!=t.Message.getField(this,4)},o.PermissionsType.CachePermissions.prototype.getItemSelector=function(){return t.Message.getWrapperField(this,o.PermissionsType.CacheItemSelector,5)},o.PermissionsType.CachePermissions.prototype.setItemSelector=function(e){return t.Message.setOneofWrapperField(this,5,o.PermissionsType.CachePermissions.oneofGroups_[1],e)},o.PermissionsType.CachePermissions.prototype.clearItemSelector=function(){return this.setItemSelector(void 0)},o.PermissionsType.CachePermissions.prototype.hasItemSelector=function(){return null!=t.Message.getField(this,5)},o.PermissionsType.TopicSelector.oneofGroups_=[[1,2]],o.PermissionsType.TopicSelector.KindCase={KIND_NOT_SET:0,TOPIC_NAME:1,TOPIC_NAME_PREFIX:2},o.PermissionsType.TopicSelector.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.TopicSelector.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.TopicSelector.prototype.toObject=function(e){return o.PermissionsType.TopicSelector.toObject(e,this)},o.PermissionsType.TopicSelector.toObject=function(e,r){var o={topicName:t.Message.getFieldWithDefault(r,1,""),topicNamePrefix:t.Message.getFieldWithDefault(r,2,"")};return e&&(o.$jspbMessageInstance=r),o}),o.PermissionsType.TopicSelector.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.TopicSelector;return o.PermissionsType.TopicSelector.deserializeBinaryFromReader(i,r)},o.PermissionsType.TopicSelector.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setTopicName(r);break;case 2:r=t.readString();e.setTopicNamePrefix(r);break;default:t.skipField()}}return e},o.PermissionsType.TopicSelector.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.TopicSelector.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.TopicSelector.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeString(2,o)},o.PermissionsType.TopicSelector.prototype.getTopicName=function(){return t.Message.getFieldWithDefault(this,1,"")},o.PermissionsType.TopicSelector.prototype.setTopicName=function(e){return t.Message.setOneofField(this,1,o.PermissionsType.TopicSelector.oneofGroups_[0],e)},o.PermissionsType.TopicSelector.prototype.clearTopicName=function(){return t.Message.setOneofField(this,1,o.PermissionsType.TopicSelector.oneofGroups_[0],void 0)},o.PermissionsType.TopicSelector.prototype.hasTopicName=function(){return null!=t.Message.getField(this,1)},o.PermissionsType.TopicSelector.prototype.getTopicNamePrefix=function(){return t.Message.getFieldWithDefault(this,2,"")},o.PermissionsType.TopicSelector.prototype.setTopicNamePrefix=function(e){return t.Message.setOneofField(this,2,o.PermissionsType.TopicSelector.oneofGroups_[0],e)},o.PermissionsType.TopicSelector.prototype.clearTopicNamePrefix=function(){return t.Message.setOneofField(this,2,o.PermissionsType.TopicSelector.oneofGroups_[0],void 0)},o.PermissionsType.TopicSelector.prototype.hasTopicNamePrefix=function(){return null!=t.Message.getField(this,2)},o.PermissionsType.TopicPermissions.oneofGroups_=[[2,3],[4,5]],o.PermissionsType.TopicPermissions.CacheCase={CACHE_NOT_SET:0,ALL_CACHES:2,CACHE_SELECTOR:3},o.PermissionsType.TopicPermissions.prototype.getCacheCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.TopicPermissions.oneofGroups_[0])},o.PermissionsType.TopicPermissions.TopicCase={TOPIC_NOT_SET:0,ALL_TOPICS:4,TOPIC_SELECTOR:5},o.PermissionsType.TopicPermissions.prototype.getTopicCase=function(){return t.Message.computeOneofCase(this,o.PermissionsType.TopicPermissions.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o.PermissionsType.TopicPermissions.prototype.toObject=function(e){return o.PermissionsType.TopicPermissions.toObject(e,this)},o.PermissionsType.TopicPermissions.toObject=function(e,r){var i,s={role:t.Message.getFieldWithDefault(r,1,0),allCaches:(i=r.getAllCaches())&&o.PermissionsType.All.toObject(e,i),cacheSelector:(i=r.getCacheSelector())&&o.PermissionsType.CacheSelector.toObject(e,i),allTopics:(i=r.getAllTopics())&&o.PermissionsType.All.toObject(e,i),topicSelector:(i=r.getTopicSelector())&&o.PermissionsType.TopicSelector.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o.PermissionsType.TopicPermissions.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o.PermissionsType.TopicPermissions;return o.PermissionsType.TopicPermissions.deserializeBinaryFromReader(i,r)},o.PermissionsType.TopicPermissions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setRole(r);break;case 2:r=new o.PermissionsType.All;t.readMessage(r,o.PermissionsType.All.deserializeBinaryFromReader),e.setAllCaches(r);break;case 3:r=new o.PermissionsType.CacheSelector;t.readMessage(r,o.PermissionsType.CacheSelector.deserializeBinaryFromReader),e.setCacheSelector(r);break;case 4:r=new o.PermissionsType.All;t.readMessage(r,o.PermissionsType.All.deserializeBinaryFromReader),e.setAllTopics(r);break;case 5:r=new o.PermissionsType.TopicSelector;t.readMessage(r,o.PermissionsType.TopicSelector.deserializeBinaryFromReader),e.setTopicSelector(r);break;default:t.skipField()}}return e},o.PermissionsType.TopicPermissions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o.PermissionsType.TopicPermissions.serializeBinaryToWriter(this,e),e.getResultBuffer()},o.PermissionsType.TopicPermissions.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRole())&&t.writeEnum(1,r),null!=(r=e.getAllCaches())&&t.writeMessage(2,r,o.PermissionsType.All.serializeBinaryToWriter),null!=(r=e.getCacheSelector())&&t.writeMessage(3,r,o.PermissionsType.CacheSelector.serializeBinaryToWriter),null!=(r=e.getAllTopics())&&t.writeMessage(4,r,o.PermissionsType.All.serializeBinaryToWriter),null!=(r=e.getTopicSelector())&&t.writeMessage(5,r,o.PermissionsType.TopicSelector.serializeBinaryToWriter)},o.PermissionsType.TopicPermissions.prototype.getRole=function(){return t.Message.getFieldWithDefault(this,1,0)},o.PermissionsType.TopicPermissions.prototype.setRole=function(e){return t.Message.setProto3EnumField(this,1,e)},o.PermissionsType.TopicPermissions.prototype.getAllCaches=function(){return t.Message.getWrapperField(this,o.PermissionsType.All,2)},o.PermissionsType.TopicPermissions.prototype.setAllCaches=function(e){return t.Message.setOneofWrapperField(this,2,o.PermissionsType.TopicPermissions.oneofGroups_[0],e)},o.PermissionsType.TopicPermissions.prototype.clearAllCaches=function(){return this.setAllCaches(void 0)},o.PermissionsType.TopicPermissions.prototype.hasAllCaches=function(){return null!=t.Message.getField(this,2)},o.PermissionsType.TopicPermissions.prototype.getCacheSelector=function(){return t.Message.getWrapperField(this,o.PermissionsType.CacheSelector,3)},o.PermissionsType.TopicPermissions.prototype.setCacheSelector=function(e){return t.Message.setOneofWrapperField(this,3,o.PermissionsType.TopicPermissions.oneofGroups_[0],e)},o.PermissionsType.TopicPermissions.prototype.clearCacheSelector=function(){return this.setCacheSelector(void 0)},o.PermissionsType.TopicPermissions.prototype.hasCacheSelector=function(){return null!=t.Message.getField(this,3)},o.PermissionsType.TopicPermissions.prototype.getAllTopics=function(){return t.Message.getWrapperField(this,o.PermissionsType.All,4)},o.PermissionsType.TopicPermissions.prototype.setAllTopics=function(e){return t.Message.setOneofWrapperField(this,4,o.PermissionsType.TopicPermissions.oneofGroups_[1],e)},o.PermissionsType.TopicPermissions.prototype.clearAllTopics=function(){return this.setAllTopics(void 0)},o.PermissionsType.TopicPermissions.prototype.hasAllTopics=function(){return null!=t.Message.getField(this,4)},o.PermissionsType.TopicPermissions.prototype.getTopicSelector=function(){return t.Message.getWrapperField(this,o.PermissionsType.TopicSelector,5)},o.PermissionsType.TopicPermissions.prototype.setTopicSelector=function(e){return t.Message.setOneofWrapperField(this,5,o.PermissionsType.TopicPermissions.oneofGroups_[1],e)},o.PermissionsType.TopicPermissions.prototype.clearTopicSelector=function(){return this.setTopicSelector(void 0)},o.PermissionsType.TopicPermissions.prototype.hasTopicSelector=function(){return null!=t.Message.getField(this,5)},o.PermissionsType.prototype.getCachePermissions=function(){return t.Message.getWrapperField(this,o.PermissionsType.CachePermissions,1)},o.PermissionsType.prototype.setCachePermissions=function(e){return t.Message.setOneofWrapperField(this,1,o.PermissionsType.oneofGroups_[0],e)},o.PermissionsType.prototype.clearCachePermissions=function(){return this.setCachePermissions(void 0)},o.PermissionsType.prototype.hasCachePermissions=function(){return null!=t.Message.getField(this,1)},o.PermissionsType.prototype.getTopicPermissions=function(){return t.Message.getWrapperField(this,o.PermissionsType.TopicPermissions,2)},o.PermissionsType.prototype.setTopicPermissions=function(e){return t.Message.setOneofWrapperField(this,2,o.PermissionsType.oneofGroups_[0],e)},o.PermissionsType.prototype.clearTopicPermissions=function(){return this.setTopicPermissions(void 0)},o.PermissionsType.prototype.hasTopicPermissions=function(){return null!=t.Message.getField(this,2)},o.CacheRole={CACHEPERMITNONE:0,CACHEREADWRITE:1,CACHEREADONLY:2,CACHEWRITEONLY:3},o.TopicRole={TOPICPERMITNONE:0,TOPICREADWRITE:1,TOPICREADONLY:2,TOPICWRITEONLY:3},o.SuperUserPermissions={SUPERUSER:0},r.object.extend(e,o)}(permissionmessages_pb),function(e){var t=googleProtobuf,r=t,o={},i=permissionmessages_pb;r.object.extend(o,i),r.exportSymbol("_GenerateApiTokenRequest",null,o),r.exportSymbol("_GenerateApiTokenRequest.Expires",null,o),r.exportSymbol("_GenerateApiTokenRequest.ExpiryCase",null,o),r.exportSymbol("_GenerateApiTokenRequest.Never",null,o),r.exportSymbol("_GenerateApiTokenResponse",null,o),r.exportSymbol("_LoginRequest",null,o),r.exportSymbol("_LoginResponse",null,o),r.exportSymbol("_LoginResponse.DirectBrowser",null,o),r.exportSymbol("_LoginResponse.Error",null,o),r.exportSymbol("_LoginResponse.LoggedIn",null,o),r.exportSymbol("_LoginResponse.Message",null,o),r.exportSymbol("_LoginResponse.StateCase",null,o),r.exportSymbol("_RefreshApiTokenRequest",null,o),r.exportSymbol("_RefreshApiTokenResponse",null,o),o._LoginRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._LoginRequest,t.Message),r.DEBUG&&!COMPILED&&(o._LoginRequest.displayName="proto._LoginRequest"),o._LoginResponse=function(e){t.Message.initialize(this,e,0,-1,null,o._LoginResponse.oneofGroups_)},r.inherits(o._LoginResponse,t.Message),r.DEBUG&&!COMPILED&&(o._LoginResponse.displayName="proto._LoginResponse"),o._LoginResponse.LoggedIn=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._LoginResponse.LoggedIn,t.Message),r.DEBUG&&!COMPILED&&(o._LoginResponse.LoggedIn.displayName="proto._LoginResponse.LoggedIn"),o._LoginResponse.Error=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._LoginResponse.Error,t.Message),r.DEBUG&&!COMPILED&&(o._LoginResponse.Error.displayName="proto._LoginResponse.Error"),o._LoginResponse.DirectBrowser=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._LoginResponse.DirectBrowser,t.Message),r.DEBUG&&!COMPILED&&(o._LoginResponse.DirectBrowser.displayName="proto._LoginResponse.DirectBrowser"),o._LoginResponse.Message=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._LoginResponse.Message,t.Message),r.DEBUG&&!COMPILED&&(o._LoginResponse.Message.displayName="proto._LoginResponse.Message"),o._GenerateApiTokenRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._GenerateApiTokenRequest.oneofGroups_)},r.inherits(o._GenerateApiTokenRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateApiTokenRequest.displayName="proto._GenerateApiTokenRequest"),o._GenerateApiTokenRequest.Never=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateApiTokenRequest.Never,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateApiTokenRequest.Never.displayName="proto._GenerateApiTokenRequest.Never"),o._GenerateApiTokenRequest.Expires=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateApiTokenRequest.Expires,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateApiTokenRequest.Expires.displayName="proto._GenerateApiTokenRequest.Expires"),o._GenerateApiTokenResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateApiTokenResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateApiTokenResponse.displayName="proto._GenerateApiTokenResponse"),o._RefreshApiTokenRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RefreshApiTokenRequest,t.Message),r.DEBUG&&!COMPILED&&(o._RefreshApiTokenRequest.displayName="proto._RefreshApiTokenRequest"),o._RefreshApiTokenResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RefreshApiTokenResponse,t.Message),r.DEBUG&&!COMPILED&&(o._RefreshApiTokenResponse.displayName="proto._RefreshApiTokenResponse"),t.Message.GENERATE_TO_OBJECT&&(o._LoginRequest.prototype.toObject=function(e){return o._LoginRequest.toObject(e,this)},o._LoginRequest.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._LoginRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginRequest;return o._LoginRequest.deserializeBinaryFromReader(i,r)},o._LoginRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._LoginRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginRequest.serializeBinaryToWriter=function(e,t){},o._LoginResponse.oneofGroups_=[[1,2,3,4]],o._LoginResponse.StateCase={STATE_NOT_SET:0,DIRECT_BROWSER:1,LOGGED_IN:2,MESSAGE:3,ERROR:4},o._LoginResponse.prototype.getStateCase=function(){return t.Message.computeOneofCase(this,o._LoginResponse.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._LoginResponse.prototype.toObject=function(e){return o._LoginResponse.toObject(e,this)},o._LoginResponse.toObject=function(e,t){var r,i={directBrowser:(r=t.getDirectBrowser())&&o._LoginResponse.DirectBrowser.toObject(e,r),loggedIn:(r=t.getLoggedIn())&&o._LoginResponse.LoggedIn.toObject(e,r),message:(r=t.getMessage())&&o._LoginResponse.Message.toObject(e,r),error:(r=t.getError())&&o._LoginResponse.Error.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._LoginResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginResponse;return o._LoginResponse.deserializeBinaryFromReader(i,r)},o._LoginResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._LoginResponse.DirectBrowser;t.readMessage(r,o._LoginResponse.DirectBrowser.deserializeBinaryFromReader),e.setDirectBrowser(r);break;case 2:r=new o._LoginResponse.LoggedIn;t.readMessage(r,o._LoginResponse.LoggedIn.deserializeBinaryFromReader),e.setLoggedIn(r);break;case 3:r=new o._LoginResponse.Message;t.readMessage(r,o._LoginResponse.Message.deserializeBinaryFromReader),e.setMessage(r);break;case 4:r=new o._LoginResponse.Error;t.readMessage(r,o._LoginResponse.Error.deserializeBinaryFromReader),e.setError(r);break;default:t.skipField()}}return e},o._LoginResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginResponse.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getDirectBrowser())&&t.writeMessage(1,r,o._LoginResponse.DirectBrowser.serializeBinaryToWriter),null!=(r=e.getLoggedIn())&&t.writeMessage(2,r,o._LoginResponse.LoggedIn.serializeBinaryToWriter),null!=(r=e.getMessage())&&t.writeMessage(3,r,o._LoginResponse.Message.serializeBinaryToWriter),null!=(r=e.getError())&&t.writeMessage(4,r,o._LoginResponse.Error.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(o._LoginResponse.LoggedIn.prototype.toObject=function(e){return o._LoginResponse.LoggedIn.toObject(e,this)},o._LoginResponse.LoggedIn.toObject=function(e,r){var o={sessionToken:t.Message.getFieldWithDefault(r,1,""),validForSeconds:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._LoginResponse.LoggedIn.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginResponse.LoggedIn;return o._LoginResponse.LoggedIn.deserializeBinaryFromReader(i,r)},o._LoginResponse.LoggedIn.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSessionToken(r);break;case 2:r=t.readUint32();e.setValidForSeconds(r);break;default:t.skipField()}}return e},o._LoginResponse.LoggedIn.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginResponse.LoggedIn.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginResponse.LoggedIn.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSessionToken()).length>0&&t.writeString(1,r),0!==(r=e.getValidForSeconds())&&t.writeUint32(2,r)},o._LoginResponse.LoggedIn.prototype.getSessionToken=function(){return t.Message.getFieldWithDefault(this,1,"")},o._LoginResponse.LoggedIn.prototype.setSessionToken=function(e){return t.Message.setProto3StringField(this,1,e)},o._LoginResponse.LoggedIn.prototype.getValidForSeconds=function(){return t.Message.getFieldWithDefault(this,2,0)},o._LoginResponse.LoggedIn.prototype.setValidForSeconds=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._LoginResponse.Error.prototype.toObject=function(e){return o._LoginResponse.Error.toObject(e,this)},o._LoginResponse.Error.toObject=function(e,r){var o={description:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._LoginResponse.Error.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginResponse.Error;return o._LoginResponse.Error.deserializeBinaryFromReader(i,r)},o._LoginResponse.Error.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setDescription(r)}else t.skipField()}return e},o._LoginResponse.Error.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginResponse.Error.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginResponse.Error.serializeBinaryToWriter=function(e,t){var r;(r=e.getDescription()).length>0&&t.writeString(1,r)},o._LoginResponse.Error.prototype.getDescription=function(){return t.Message.getFieldWithDefault(this,1,"")},o._LoginResponse.Error.prototype.setDescription=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._LoginResponse.DirectBrowser.prototype.toObject=function(e){return o._LoginResponse.DirectBrowser.toObject(e,this)},o._LoginResponse.DirectBrowser.toObject=function(e,r){var o={url:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._LoginResponse.DirectBrowser.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginResponse.DirectBrowser;return o._LoginResponse.DirectBrowser.deserializeBinaryFromReader(i,r)},o._LoginResponse.DirectBrowser.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setUrl(r)}else t.skipField()}return e},o._LoginResponse.DirectBrowser.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginResponse.DirectBrowser.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginResponse.DirectBrowser.serializeBinaryToWriter=function(e,t){var r;(r=e.getUrl()).length>0&&t.writeString(1,r)},o._LoginResponse.DirectBrowser.prototype.getUrl=function(){return t.Message.getFieldWithDefault(this,1,"")},o._LoginResponse.DirectBrowser.prototype.setUrl=function(e){return t.Message.setProto3StringField(this,1,e)},t.Message.GENERATE_TO_OBJECT&&(o._LoginResponse.Message.prototype.toObject=function(e){return o._LoginResponse.Message.toObject(e,this)},o._LoginResponse.Message.toObject=function(e,r){var o={text:t.Message.getFieldWithDefault(r,1,"")};return e&&(o.$jspbMessageInstance=r),o}),o._LoginResponse.Message.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._LoginResponse.Message;return o._LoginResponse.Message.deserializeBinaryFromReader(i,r)},o._LoginResponse.Message.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.setText(r)}else t.skipField()}return e},o._LoginResponse.Message.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._LoginResponse.Message.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._LoginResponse.Message.serializeBinaryToWriter=function(e,t){var r;(r=e.getText()).length>0&&t.writeString(1,r)},o._LoginResponse.Message.prototype.getText=function(){return t.Message.getFieldWithDefault(this,1,"")},o._LoginResponse.Message.prototype.setText=function(e){return t.Message.setProto3StringField(this,1,e)},o._LoginResponse.prototype.getDirectBrowser=function(){return t.Message.getWrapperField(this,o._LoginResponse.DirectBrowser,1)},o._LoginResponse.prototype.setDirectBrowser=function(e){return t.Message.setOneofWrapperField(this,1,o._LoginResponse.oneofGroups_[0],e)},o._LoginResponse.prototype.clearDirectBrowser=function(){return this.setDirectBrowser(void 0)},o._LoginResponse.prototype.hasDirectBrowser=function(){return null!=t.Message.getField(this,1)},o._LoginResponse.prototype.getLoggedIn=function(){return t.Message.getWrapperField(this,o._LoginResponse.LoggedIn,2)},o._LoginResponse.prototype.setLoggedIn=function(e){return t.Message.setOneofWrapperField(this,2,o._LoginResponse.oneofGroups_[0],e)},o._LoginResponse.prototype.clearLoggedIn=function(){return this.setLoggedIn(void 0)},o._LoginResponse.prototype.hasLoggedIn=function(){return null!=t.Message.getField(this,2)},o._LoginResponse.prototype.getMessage=function(){return t.Message.getWrapperField(this,o._LoginResponse.Message,3)},o._LoginResponse.prototype.setMessage=function(e){return t.Message.setOneofWrapperField(this,3,o._LoginResponse.oneofGroups_[0],e)},o._LoginResponse.prototype.clearMessage=function(){return this.setMessage(void 0)},o._LoginResponse.prototype.hasMessage=function(){return null!=t.Message.getField(this,3)},o._LoginResponse.prototype.getError=function(){return t.Message.getWrapperField(this,o._LoginResponse.Error,4)},o._LoginResponse.prototype.setError=function(e){return t.Message.setOneofWrapperField(this,4,o._LoginResponse.oneofGroups_[0],e)},o._LoginResponse.prototype.clearError=function(){return this.setError(void 0)},o._LoginResponse.prototype.hasError=function(){return null!=t.Message.getField(this,4)},o._GenerateApiTokenRequest.oneofGroups_=[[1,2]],o._GenerateApiTokenRequest.ExpiryCase={EXPIRY_NOT_SET:0,NEVER:1,EXPIRES:2},o._GenerateApiTokenRequest.prototype.getExpiryCase=function(){return t.Message.computeOneofCase(this,o._GenerateApiTokenRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._GenerateApiTokenRequest.prototype.toObject=function(e){return o._GenerateApiTokenRequest.toObject(e,this)},o._GenerateApiTokenRequest.toObject=function(e,r){var s,n={never:(s=r.getNever())&&o._GenerateApiTokenRequest.Never.toObject(e,s),expires:(s=r.getExpires())&&o._GenerateApiTokenRequest.Expires.toObject(e,s),authToken:t.Message.getFieldWithDefault(r,3,""),permissions:(s=r.getPermissions())&&i.Permissions.toObject(e,s),tokenId:t.Message.getFieldWithDefault(r,5,"")};return e&&(n.$jspbMessageInstance=r),n}),o._GenerateApiTokenRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateApiTokenRequest;return o._GenerateApiTokenRequest.deserializeBinaryFromReader(i,r)},o._GenerateApiTokenRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._GenerateApiTokenRequest.Never;t.readMessage(r,o._GenerateApiTokenRequest.Never.deserializeBinaryFromReader),e.setNever(r);break;case 2:r=new o._GenerateApiTokenRequest.Expires;t.readMessage(r,o._GenerateApiTokenRequest.Expires.deserializeBinaryFromReader),e.setExpires(r);break;case 3:r=t.readString();e.setAuthToken(r);break;case 4:r=new i.Permissions;t.readMessage(r,i.Permissions.deserializeBinaryFromReader),e.setPermissions(r);break;case 5:r=t.readString();e.setTokenId(r);break;default:t.skipField()}}return e},o._GenerateApiTokenRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateApiTokenRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateApiTokenRequest.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getNever())&&t.writeMessage(1,r,o._GenerateApiTokenRequest.Never.serializeBinaryToWriter),null!=(r=e.getExpires())&&t.writeMessage(2,r,o._GenerateApiTokenRequest.Expires.serializeBinaryToWriter),(r=e.getAuthToken()).length>0&&t.writeString(3,r),null!=(r=e.getPermissions())&&t.writeMessage(4,r,i.Permissions.serializeBinaryToWriter),(r=e.getTokenId()).length>0&&t.writeString(5,r)},t.Message.GENERATE_TO_OBJECT&&(o._GenerateApiTokenRequest.Never.prototype.toObject=function(e){return o._GenerateApiTokenRequest.Never.toObject(e,this)},o._GenerateApiTokenRequest.Never.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._GenerateApiTokenRequest.Never.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateApiTokenRequest.Never;return o._GenerateApiTokenRequest.Never.deserializeBinaryFromReader(i,r)},o._GenerateApiTokenRequest.Never.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._GenerateApiTokenRequest.Never.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateApiTokenRequest.Never.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateApiTokenRequest.Never.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._GenerateApiTokenRequest.Expires.prototype.toObject=function(e){return o._GenerateApiTokenRequest.Expires.toObject(e,this)},o._GenerateApiTokenRequest.Expires.toObject=function(e,r){var o={validForSeconds:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._GenerateApiTokenRequest.Expires.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateApiTokenRequest.Expires;return o._GenerateApiTokenRequest.Expires.deserializeBinaryFromReader(i,r)},o._GenerateApiTokenRequest.Expires.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setValidForSeconds(r)}else t.skipField()}return e},o._GenerateApiTokenRequest.Expires.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateApiTokenRequest.Expires.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateApiTokenRequest.Expires.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getValidForSeconds())&&t.writeUint32(1,r)},o._GenerateApiTokenRequest.Expires.prototype.getValidForSeconds=function(){return t.Message.getFieldWithDefault(this,1,0)},o._GenerateApiTokenRequest.Expires.prototype.setValidForSeconds=function(e){return t.Message.setProto3IntField(this,1,e)},o._GenerateApiTokenRequest.prototype.getNever=function(){return t.Message.getWrapperField(this,o._GenerateApiTokenRequest.Never,1)},o._GenerateApiTokenRequest.prototype.setNever=function(e){return t.Message.setOneofWrapperField(this,1,o._GenerateApiTokenRequest.oneofGroups_[0],e)},o._GenerateApiTokenRequest.prototype.clearNever=function(){return this.setNever(void 0)},o._GenerateApiTokenRequest.prototype.hasNever=function(){return null!=t.Message.getField(this,1)},o._GenerateApiTokenRequest.prototype.getExpires=function(){return t.Message.getWrapperField(this,o._GenerateApiTokenRequest.Expires,2)},o._GenerateApiTokenRequest.prototype.setExpires=function(e){return t.Message.setOneofWrapperField(this,2,o._GenerateApiTokenRequest.oneofGroups_[0],e)},o._GenerateApiTokenRequest.prototype.clearExpires=function(){return this.setExpires(void 0)},o._GenerateApiTokenRequest.prototype.hasExpires=function(){return null!=t.Message.getField(this,2)},o._GenerateApiTokenRequest.prototype.getAuthToken=function(){return t.Message.getFieldWithDefault(this,3,"")},o._GenerateApiTokenRequest.prototype.setAuthToken=function(e){return t.Message.setProto3StringField(this,3,e)},o._GenerateApiTokenRequest.prototype.getPermissions=function(){return t.Message.getWrapperField(this,i.Permissions,4)},o._GenerateApiTokenRequest.prototype.setPermissions=function(e){return t.Message.setWrapperField(this,4,e)},o._GenerateApiTokenRequest.prototype.clearPermissions=function(){return this.setPermissions(void 0)},o._GenerateApiTokenRequest.prototype.hasPermissions=function(){return null!=t.Message.getField(this,4)},o._GenerateApiTokenRequest.prototype.getTokenId=function(){return t.Message.getFieldWithDefault(this,5,"")},o._GenerateApiTokenRequest.prototype.setTokenId=function(e){return t.Message.setProto3StringField(this,5,e)},t.Message.GENERATE_TO_OBJECT&&(o._GenerateApiTokenResponse.prototype.toObject=function(e){return o._GenerateApiTokenResponse.toObject(e,this)},o._GenerateApiTokenResponse.toObject=function(e,r){var o={apiKey:t.Message.getFieldWithDefault(r,1,""),refreshToken:t.Message.getFieldWithDefault(r,2,""),endpoint:t.Message.getFieldWithDefault(r,3,""),validUntil:t.Message.getFieldWithDefault(r,4,0)};return e&&(o.$jspbMessageInstance=r),o}),o._GenerateApiTokenResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateApiTokenResponse;return o._GenerateApiTokenResponse.deserializeBinaryFromReader(i,r)},o._GenerateApiTokenResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setApiKey(r);break;case 2:r=t.readString();e.setRefreshToken(r);break;case 3:r=t.readString();e.setEndpoint(r);break;case 4:r=t.readUint64();e.setValidUntil(r);break;default:t.skipField()}}return e},o._GenerateApiTokenResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateApiTokenResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateApiTokenResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getApiKey()).length>0&&t.writeString(1,r),(r=e.getRefreshToken()).length>0&&t.writeString(2,r),(r=e.getEndpoint()).length>0&&t.writeString(3,r),0!==(r=e.getValidUntil())&&t.writeUint64(4,r)},o._GenerateApiTokenResponse.prototype.getApiKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GenerateApiTokenResponse.prototype.setApiKey=function(e){return t.Message.setProto3StringField(this,1,e)},o._GenerateApiTokenResponse.prototype.getRefreshToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GenerateApiTokenResponse.prototype.setRefreshToken=function(e){return t.Message.setProto3StringField(this,2,e)},o._GenerateApiTokenResponse.prototype.getEndpoint=function(){return t.Message.getFieldWithDefault(this,3,"")},o._GenerateApiTokenResponse.prototype.setEndpoint=function(e){return t.Message.setProto3StringField(this,3,e)},o._GenerateApiTokenResponse.prototype.getValidUntil=function(){return t.Message.getFieldWithDefault(this,4,0)},o._GenerateApiTokenResponse.prototype.setValidUntil=function(e){return t.Message.setProto3IntField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._RefreshApiTokenRequest.prototype.toObject=function(e){return o._RefreshApiTokenRequest.toObject(e,this)},o._RefreshApiTokenRequest.toObject=function(e,r){var o={apiKey:t.Message.getFieldWithDefault(r,1,""),refreshToken:t.Message.getFieldWithDefault(r,2,"")};return e&&(o.$jspbMessageInstance=r),o}),o._RefreshApiTokenRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RefreshApiTokenRequest;return o._RefreshApiTokenRequest.deserializeBinaryFromReader(i,r)},o._RefreshApiTokenRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setApiKey(r);break;case 2:r=t.readString();e.setRefreshToken(r);break;default:t.skipField()}}return e},o._RefreshApiTokenRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RefreshApiTokenRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RefreshApiTokenRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getApiKey()).length>0&&t.writeString(1,r),(r=e.getRefreshToken()).length>0&&t.writeString(2,r)},o._RefreshApiTokenRequest.prototype.getApiKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._RefreshApiTokenRequest.prototype.setApiKey=function(e){return t.Message.setProto3StringField(this,1,e)},o._RefreshApiTokenRequest.prototype.getRefreshToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._RefreshApiTokenRequest.prototype.setRefreshToken=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._RefreshApiTokenResponse.prototype.toObject=function(e){return o._RefreshApiTokenResponse.toObject(e,this)},o._RefreshApiTokenResponse.toObject=function(e,r){var o={apiKey:t.Message.getFieldWithDefault(r,1,""),refreshToken:t.Message.getFieldWithDefault(r,2,""),endpoint:t.Message.getFieldWithDefault(r,3,""),validUntil:t.Message.getFieldWithDefault(r,4,0)};return e&&(o.$jspbMessageInstance=r),o}),o._RefreshApiTokenResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RefreshApiTokenResponse;return o._RefreshApiTokenResponse.deserializeBinaryFromReader(i,r)},o._RefreshApiTokenResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setApiKey(r);break;case 2:r=t.readString();e.setRefreshToken(r);break;case 3:r=t.readString();e.setEndpoint(r);break;case 4:r=t.readUint64();e.setValidUntil(r);break;default:t.skipField()}}return e},o._RefreshApiTokenResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RefreshApiTokenResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RefreshApiTokenResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getApiKey()).length>0&&t.writeString(1,r),(r=e.getRefreshToken()).length>0&&t.writeString(2,r),(r=e.getEndpoint()).length>0&&t.writeString(3,r),0!==(r=e.getValidUntil())&&t.writeUint64(4,r)},o._RefreshApiTokenResponse.prototype.getApiKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._RefreshApiTokenResponse.prototype.setApiKey=function(e){return t.Message.setProto3StringField(this,1,e)},o._RefreshApiTokenResponse.prototype.getRefreshToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._RefreshApiTokenResponse.prototype.setRefreshToken=function(e){return t.Message.setProto3StringField(this,2,e)},o._RefreshApiTokenResponse.prototype.getEndpoint=function(){return t.Message.getFieldWithDefault(this,3,"")},o._RefreshApiTokenResponse.prototype.setEndpoint=function(e){return t.Message.setProto3StringField(this,3,e)},o._RefreshApiTokenResponse.prototype.getValidUntil=function(){return t.Message.getFieldWithDefault(this,4,0)},o._RefreshApiTokenResponse.prototype.setValidUntil=function(e){return t.Message.setProto3IntField(this,4,e)},r.object.extend(e,o)}(auth_pb$1);var __createBinding$6=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$6=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$6=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$6(t,e,r);return __setModuleDefault$6(t,e),t};Object.defineProperty(AuthServiceClientPb,"__esModule",{value:!0}),AuthServiceClientPb.AuthClient=void 0;const grpcWeb$5=__importStar$6(grpcWeb$8),auth_pb=__importStar$6(auth_pb$1);class AuthClient{constructor(e,t,r){this.methodDescriptorLogin=new grpcWeb$5.MethodDescriptor("/auth.Auth/Login",grpcWeb$5.MethodType.SERVER_STREAMING,auth_pb._LoginRequest,auth_pb._LoginResponse,(e=>e.serializeBinary()),auth_pb._LoginResponse.deserializeBinary),this.methodDescriptorGenerateApiToken=new grpcWeb$5.MethodDescriptor("/auth.Auth/GenerateApiToken",grpcWeb$5.MethodType.UNARY,auth_pb._GenerateApiTokenRequest,auth_pb._GenerateApiTokenResponse,(e=>e.serializeBinary()),auth_pb._GenerateApiTokenResponse.deserializeBinary),this.methodDescriptorRefreshApiToken=new grpcWeb$5.MethodDescriptor("/auth.Auth/RefreshApiToken",grpcWeb$5.MethodType.UNARY,auth_pb._RefreshApiTokenRequest,auth_pb._RefreshApiTokenResponse,(e=>e.serializeBinary()),auth_pb._RefreshApiTokenResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$5.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}login(e,t){return this.client_.serverStreaming(this.hostname_+"/auth.Auth/Login",e,t||{},this.methodDescriptorLogin)}generateApiToken(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/auth.Auth/GenerateApiToken",e,t||{},this.methodDescriptorGenerateApiToken,r):this.client_.unaryCall(this.hostname_+"/auth.Auth/GenerateApiToken",e,t||{},this.methodDescriptorGenerateApiToken)}refreshApiToken(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/auth.Auth/RefreshApiToken",e,t||{},this.methodDescriptorRefreshApiToken,r):this.client_.unaryCall(this.hostname_+"/auth.Auth/RefreshApiToken",e,t||{},this.methodDescriptorRefreshApiToken)}}AuthServiceClientPb.AuthClient=AuthClient;var TokenServiceClientPb={},token_pb$1={};!function(e){var t=googleProtobuf,r=t,o={},i=permissionmessages_pb;r.object.extend(o,i),r.exportSymbol("_GenerateDisposableTokenRequest",null,o),r.exportSymbol("_GenerateDisposableTokenRequest.Expires",null,o),r.exportSymbol("_GenerateDisposableTokenResponse",null,o),o._GenerateDisposableTokenRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateDisposableTokenRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateDisposableTokenRequest.displayName="proto._GenerateDisposableTokenRequest"),o._GenerateDisposableTokenRequest.Expires=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateDisposableTokenRequest.Expires,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateDisposableTokenRequest.Expires.displayName="proto._GenerateDisposableTokenRequest.Expires"),o._GenerateDisposableTokenResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GenerateDisposableTokenResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GenerateDisposableTokenResponse.displayName="proto._GenerateDisposableTokenResponse"),t.Message.GENERATE_TO_OBJECT&&(o._GenerateDisposableTokenRequest.prototype.toObject=function(e){return o._GenerateDisposableTokenRequest.toObject(e,this)},o._GenerateDisposableTokenRequest.toObject=function(e,r){var s,n={expires:(s=r.getExpires())&&o._GenerateDisposableTokenRequest.Expires.toObject(e,s),authToken:t.Message.getFieldWithDefault(r,2,""),permissions:(s=r.getPermissions())&&i.Permissions.toObject(e,s),tokenId:t.Message.getFieldWithDefault(r,4,"")};return e&&(n.$jspbMessageInstance=r),n}),o._GenerateDisposableTokenRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateDisposableTokenRequest;return o._GenerateDisposableTokenRequest.deserializeBinaryFromReader(i,r)},o._GenerateDisposableTokenRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._GenerateDisposableTokenRequest.Expires;t.readMessage(r,o._GenerateDisposableTokenRequest.Expires.deserializeBinaryFromReader),e.setExpires(r);break;case 2:r=t.readString();e.setAuthToken(r);break;case 3:r=new i.Permissions;t.readMessage(r,i.Permissions.deserializeBinaryFromReader),e.setPermissions(r);break;case 4:r=t.readString();e.setTokenId(r);break;default:t.skipField()}}return e},o._GenerateDisposableTokenRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateDisposableTokenRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateDisposableTokenRequest.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getExpires())&&t.writeMessage(1,r,o._GenerateDisposableTokenRequest.Expires.serializeBinaryToWriter),(r=e.getAuthToken()).length>0&&t.writeString(2,r),null!=(r=e.getPermissions())&&t.writeMessage(3,r,i.Permissions.serializeBinaryToWriter),(r=e.getTokenId()).length>0&&t.writeString(4,r)},t.Message.GENERATE_TO_OBJECT&&(o._GenerateDisposableTokenRequest.Expires.prototype.toObject=function(e){return o._GenerateDisposableTokenRequest.Expires.toObject(e,this)},o._GenerateDisposableTokenRequest.Expires.toObject=function(e,r){var o={validForSeconds:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._GenerateDisposableTokenRequest.Expires.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateDisposableTokenRequest.Expires;return o._GenerateDisposableTokenRequest.Expires.deserializeBinaryFromReader(i,r)},o._GenerateDisposableTokenRequest.Expires.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setValidForSeconds(r)}else t.skipField()}return e},o._GenerateDisposableTokenRequest.Expires.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateDisposableTokenRequest.Expires.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateDisposableTokenRequest.Expires.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getValidForSeconds())&&t.writeUint32(1,r)},o._GenerateDisposableTokenRequest.Expires.prototype.getValidForSeconds=function(){return t.Message.getFieldWithDefault(this,1,0)},o._GenerateDisposableTokenRequest.Expires.prototype.setValidForSeconds=function(e){return t.Message.setProto3IntField(this,1,e)},o._GenerateDisposableTokenRequest.prototype.getExpires=function(){return t.Message.getWrapperField(this,o._GenerateDisposableTokenRequest.Expires,1)},o._GenerateDisposableTokenRequest.prototype.setExpires=function(e){return t.Message.setWrapperField(this,1,e)},o._GenerateDisposableTokenRequest.prototype.clearExpires=function(){return this.setExpires(void 0)},o._GenerateDisposableTokenRequest.prototype.hasExpires=function(){return null!=t.Message.getField(this,1)},o._GenerateDisposableTokenRequest.prototype.getAuthToken=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GenerateDisposableTokenRequest.prototype.setAuthToken=function(e){return t.Message.setProto3StringField(this,2,e)},o._GenerateDisposableTokenRequest.prototype.getPermissions=function(){return t.Message.getWrapperField(this,i.Permissions,3)},o._GenerateDisposableTokenRequest.prototype.setPermissions=function(e){return t.Message.setWrapperField(this,3,e)},o._GenerateDisposableTokenRequest.prototype.clearPermissions=function(){return this.setPermissions(void 0)},o._GenerateDisposableTokenRequest.prototype.hasPermissions=function(){return null!=t.Message.getField(this,3)},o._GenerateDisposableTokenRequest.prototype.getTokenId=function(){return t.Message.getFieldWithDefault(this,4,"")},o._GenerateDisposableTokenRequest.prototype.setTokenId=function(e){return t.Message.setProto3StringField(this,4,e)},t.Message.GENERATE_TO_OBJECT&&(o._GenerateDisposableTokenResponse.prototype.toObject=function(e){return o._GenerateDisposableTokenResponse.toObject(e,this)},o._GenerateDisposableTokenResponse.toObject=function(e,r){var o={apiKey:t.Message.getFieldWithDefault(r,1,""),endpoint:t.Message.getFieldWithDefault(r,2,""),validUntil:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._GenerateDisposableTokenResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GenerateDisposableTokenResponse;return o._GenerateDisposableTokenResponse.deserializeBinaryFromReader(i,r)},o._GenerateDisposableTokenResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setApiKey(r);break;case 2:r=t.readString();e.setEndpoint(r);break;case 3:r=t.readUint64();e.setValidUntil(r);break;default:t.skipField()}}return e},o._GenerateDisposableTokenResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GenerateDisposableTokenResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GenerateDisposableTokenResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getApiKey()).length>0&&t.writeString(1,r),(r=e.getEndpoint()).length>0&&t.writeString(2,r),0!==(r=e.getValidUntil())&&t.writeUint64(3,r)},o._GenerateDisposableTokenResponse.prototype.getApiKey=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GenerateDisposableTokenResponse.prototype.setApiKey=function(e){return t.Message.setProto3StringField(this,1,e)},o._GenerateDisposableTokenResponse.prototype.getEndpoint=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GenerateDisposableTokenResponse.prototype.setEndpoint=function(e){return t.Message.setProto3StringField(this,2,e)},o._GenerateDisposableTokenResponse.prototype.getValidUntil=function(){return t.Message.getFieldWithDefault(this,3,0)},o._GenerateDisposableTokenResponse.prototype.setValidUntil=function(e){return t.Message.setProto3IntField(this,3,e)},r.object.extend(e,o)}(token_pb$1);var __createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$5(t,e,r);return __setModuleDefault$5(t,e),t};Object.defineProperty(TokenServiceClientPb,"__esModule",{value:!0}),TokenServiceClientPb.TokenClient=void 0;const grpcWeb$4=__importStar$5(grpcWeb$8),token_pb=__importStar$5(token_pb$1);class TokenClient{constructor(e,t,r){this.methodDescriptorGenerateDisposableToken=new grpcWeb$4.MethodDescriptor("/token.Token/GenerateDisposableToken",grpcWeb$4.MethodType.UNARY,token_pb._GenerateDisposableTokenRequest,token_pb._GenerateDisposableTokenResponse,(e=>e.serializeBinary()),token_pb._GenerateDisposableTokenResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$4.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}generateDisposableToken(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/token.Token/GenerateDisposableToken",e,t||{},this.methodDescriptorGenerateDisposableToken,r):this.client_.unaryCall(this.hostname_+"/token.Token/GenerateDisposableToken",e,t||{},this.methodDescriptorGenerateDisposableToken)}}TokenServiceClientPb.TokenClient=TokenClient;var VectorindexServiceClientPb={},vectorindex_pb$1={};!function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("_DeleteItemBatchRequest",null,o),r.exportSymbol("_DeleteItemBatchResponse",null,o),r.exportSymbol("_Item",null,o),r.exportSymbol("_Metadata",null,o),r.exportSymbol("_Metadata.ValueCase",null,o),r.exportSymbol("_Metadata._ListOfStrings",null,o),r.exportSymbol("_MetadataRequest",null,o),r.exportSymbol("_MetadataRequest.All",null,o),r.exportSymbol("_MetadataRequest.KindCase",null,o),r.exportSymbol("_MetadataRequest.Some",null,o),r.exportSymbol("_SearchHit",null,o),r.exportSymbol("_SearchRequest",null,o),r.exportSymbol("_SearchResponse",null,o),r.exportSymbol("_UpsertItemBatchRequest",null,o),r.exportSymbol("_UpsertItemBatchResponse",null,o),r.exportSymbol("_Vector",null,o),o._Item=function(e){t.Message.initialize(this,e,0,-1,o._Item.repeatedFields_,null)},r.inherits(o._Item,t.Message),r.DEBUG&&!COMPILED&&(o._Item.displayName="proto._Item"),o._UpsertItemBatchRequest=function(e){t.Message.initialize(this,e,0,-1,o._UpsertItemBatchRequest.repeatedFields_,null)},r.inherits(o._UpsertItemBatchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._UpsertItemBatchRequest.displayName="proto._UpsertItemBatchRequest"),o._UpsertItemBatchResponse=function(e){t.Message.initialize(this,e,0,-1,o._UpsertItemBatchResponse.repeatedFields_,null)},r.inherits(o._UpsertItemBatchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._UpsertItemBatchResponse.displayName="proto._UpsertItemBatchResponse"),o._DeleteItemBatchRequest=function(e){t.Message.initialize(this,e,0,-1,o._DeleteItemBatchRequest.repeatedFields_,null)},r.inherits(o._DeleteItemBatchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteItemBatchRequest.displayName="proto._DeleteItemBatchRequest"),o._DeleteItemBatchResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteItemBatchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteItemBatchResponse.displayName="proto._DeleteItemBatchResponse"),o._Vector=function(e){t.Message.initialize(this,e,0,-1,o._Vector.repeatedFields_,null)},r.inherits(o._Vector,t.Message),r.DEBUG&&!COMPILED&&(o._Vector.displayName="proto._Vector"),o._Metadata=function(e){t.Message.initialize(this,e,0,-1,null,o._Metadata.oneofGroups_)},r.inherits(o._Metadata,t.Message),r.DEBUG&&!COMPILED&&(o._Metadata.displayName="proto._Metadata"),o._Metadata._ListOfStrings=function(e){t.Message.initialize(this,e,0,-1,o._Metadata._ListOfStrings.repeatedFields_,null)},r.inherits(o._Metadata._ListOfStrings,t.Message),r.DEBUG&&!COMPILED&&(o._Metadata._ListOfStrings.displayName="proto._Metadata._ListOfStrings"),o._MetadataRequest=function(e){t.Message.initialize(this,e,0,-1,null,o._MetadataRequest.oneofGroups_)},r.inherits(o._MetadataRequest,t.Message),r.DEBUG&&!COMPILED&&(o._MetadataRequest.displayName="proto._MetadataRequest"),o._MetadataRequest.Some=function(e){t.Message.initialize(this,e,0,-1,o._MetadataRequest.Some.repeatedFields_,null)},r.inherits(o._MetadataRequest.Some,t.Message),r.DEBUG&&!COMPILED&&(o._MetadataRequest.Some.displayName="proto._MetadataRequest.Some"),o._MetadataRequest.All=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._MetadataRequest.All,t.Message),r.DEBUG&&!COMPILED&&(o._MetadataRequest.All.displayName="proto._MetadataRequest.All"),o._SearchRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SearchRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SearchRequest.displayName="proto._SearchRequest"),o._SearchHit=function(e){t.Message.initialize(this,e,0,-1,o._SearchHit.repeatedFields_,null)},r.inherits(o._SearchHit,t.Message),r.DEBUG&&!COMPILED&&(o._SearchHit.displayName="proto._SearchHit"),o._SearchResponse=function(e){t.Message.initialize(this,e,0,-1,o._SearchResponse.repeatedFields_,null)},r.inherits(o._SearchResponse,t.Message),r.DEBUG&&!COMPILED&&(o._SearchResponse.displayName="proto._SearchResponse"),o._Item.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(o._Item.prototype.toObject=function(e){return o._Item.toObject(e,this)},o._Item.toObject=function(e,r){var i,s={id:t.Message.getFieldWithDefault(r,1,""),vector:(i=r.getVector())&&o._Vector.toObject(e,i),metadataList:t.Message.toObjectList(r.getMetadataList(),o._Metadata.toObject,e)};return e&&(s.$jspbMessageInstance=r),s}),o._Item.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Item;return o._Item.deserializeBinaryFromReader(i,r)},o._Item.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=new o._Vector;t.readMessage(r,o._Vector.deserializeBinaryFromReader),e.setVector(r);break;case 3:r=new o._Metadata;t.readMessage(r,o._Metadata.deserializeBinaryFromReader),e.addMetadata(r);break;default:t.skipField()}}return e},o._Item.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Item.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Item.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getId()).length>0&&t.writeString(1,r),null!=(r=e.getVector())&&t.writeMessage(2,r,o._Vector.serializeBinaryToWriter),(r=e.getMetadataList()).length>0&&t.writeRepeatedMessage(3,r,o._Metadata.serializeBinaryToWriter)},o._Item.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,"")},o._Item.prototype.setId=function(e){return t.Message.setProto3StringField(this,1,e)},o._Item.prototype.getVector=function(){return t.Message.getWrapperField(this,o._Vector,2)},o._Item.prototype.setVector=function(e){return t.Message.setWrapperField(this,2,e)},o._Item.prototype.clearVector=function(){return this.setVector(void 0)},o._Item.prototype.hasVector=function(){return null!=t.Message.getField(this,2)},o._Item.prototype.getMetadataList=function(){return t.Message.getRepeatedWrapperField(this,o._Metadata,3)},o._Item.prototype.setMetadataList=function(e){return t.Message.setRepeatedWrapperField(this,3,e)},o._Item.prototype.addMetadata=function(e,r){return t.Message.addToRepeatedWrapperField(this,3,e,o._Metadata,r)},o._Item.prototype.clearMetadataList=function(){return this.setMetadataList([])},o._UpsertItemBatchRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._UpsertItemBatchRequest.prototype.toObject=function(e){return o._UpsertItemBatchRequest.toObject(e,this)},o._UpsertItemBatchRequest.toObject=function(e,r){var i={indexName:t.Message.getFieldWithDefault(r,1,""),itemsList:t.Message.toObjectList(r.getItemsList(),o._Item.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._UpsertItemBatchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpsertItemBatchRequest;return o._UpsertItemBatchRequest.deserializeBinaryFromReader(i,r)},o._UpsertItemBatchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setIndexName(r);break;case 2:r=new o._Item;t.readMessage(r,o._Item.deserializeBinaryFromReader),e.addItems(r);break;default:t.skipField()}}return e},o._UpsertItemBatchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpsertItemBatchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpsertItemBatchRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIndexName()).length>0&&t.writeString(1,r),(r=e.getItemsList()).length>0&&t.writeRepeatedMessage(2,r,o._Item.serializeBinaryToWriter)},o._UpsertItemBatchRequest.prototype.getIndexName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._UpsertItemBatchRequest.prototype.setIndexName=function(e){return t.Message.setProto3StringField(this,1,e)},o._UpsertItemBatchRequest.prototype.getItemsList=function(){return t.Message.getRepeatedWrapperField(this,o._Item,2)},o._UpsertItemBatchRequest.prototype.setItemsList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},o._UpsertItemBatchRequest.prototype.addItems=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,o._Item,r)},o._UpsertItemBatchRequest.prototype.clearItemsList=function(){return this.setItemsList([])},o._UpsertItemBatchResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._UpsertItemBatchResponse.prototype.toObject=function(e){return o._UpsertItemBatchResponse.toObject(e,this)},o._UpsertItemBatchResponse.toObject=function(e,r){var o,i={errorIndicesList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._UpsertItemBatchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpsertItemBatchResponse;return o._UpsertItemBatchResponse.deserializeBinaryFromReader(i,r)},o._UpsertItemBatchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber())for(var r=t.isDelimited()?t.readPackedUint32():[t.readUint32()],o=0;o<r.length;o++)e.addErrorIndices(r[o]);else t.skipField()}return e},o._UpsertItemBatchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpsertItemBatchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpsertItemBatchResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getErrorIndicesList()).length>0&&t.writePackedUint32(1,r)},o._UpsertItemBatchResponse.prototype.getErrorIndicesList=function(){return t.Message.getRepeatedField(this,1)},o._UpsertItemBatchResponse.prototype.setErrorIndicesList=function(e){return t.Message.setField(this,1,e||[])},o._UpsertItemBatchResponse.prototype.addErrorIndices=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._UpsertItemBatchResponse.prototype.clearErrorIndicesList=function(){return this.setErrorIndicesList([])},o._DeleteItemBatchRequest.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(o._DeleteItemBatchRequest.prototype.toObject=function(e){return o._DeleteItemBatchRequest.toObject(e,this)},o._DeleteItemBatchRequest.toObject=function(e,r){var o,i={indexName:t.Message.getFieldWithDefault(r,1,""),idsList:null==(o=t.Message.getRepeatedField(r,2))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._DeleteItemBatchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteItemBatchRequest;return o._DeleteItemBatchRequest.deserializeBinaryFromReader(i,r)},o._DeleteItemBatchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setIndexName(r);break;case 2:r=t.readString();e.addIds(r);break;default:t.skipField()}}return e},o._DeleteItemBatchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteItemBatchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteItemBatchRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIndexName()).length>0&&t.writeString(1,r),(r=e.getIdsList()).length>0&&t.writeRepeatedString(2,r)},o._DeleteItemBatchRequest.prototype.getIndexName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DeleteItemBatchRequest.prototype.setIndexName=function(e){return t.Message.setProto3StringField(this,1,e)},o._DeleteItemBatchRequest.prototype.getIdsList=function(){return t.Message.getRepeatedField(this,2)},o._DeleteItemBatchRequest.prototype.setIdsList=function(e){return t.Message.setField(this,2,e||[])},o._DeleteItemBatchRequest.prototype.addIds=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},o._DeleteItemBatchRequest.prototype.clearIdsList=function(){return this.setIdsList([])},t.Message.GENERATE_TO_OBJECT&&(o._DeleteItemBatchResponse.prototype.toObject=function(e){return o._DeleteItemBatchResponse.toObject(e,this)},o._DeleteItemBatchResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._DeleteItemBatchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteItemBatchResponse;return o._DeleteItemBatchResponse.deserializeBinaryFromReader(i,r)},o._DeleteItemBatchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._DeleteItemBatchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteItemBatchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteItemBatchResponse.serializeBinaryToWriter=function(e,t){},o._Vector.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._Vector.prototype.toObject=function(e){return o._Vector.toObject(e,this)},o._Vector.toObject=function(e,r){var o,i={elementsList:null==(o=t.Message.getRepeatedFloatingPointField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._Vector.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Vector;return o._Vector.deserializeBinaryFromReader(i,r)},o._Vector.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber())for(var r=t.isDelimited()?t.readPackedFloat():[t.readFloat()],o=0;o<r.length;o++)e.addElements(r[o]);else t.skipField()}return e},o._Vector.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Vector.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Vector.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writePackedFloat(1,r)},o._Vector.prototype.getElementsList=function(){return t.Message.getRepeatedFloatingPointField(this,1)},o._Vector.prototype.setElementsList=function(e){return t.Message.setField(this,1,e||[])},o._Vector.prototype.addElements=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._Vector.prototype.clearElementsList=function(){return this.setElementsList([])},o._Metadata.oneofGroups_=[[2,3,4,5,6]],o._Metadata.ValueCase={VALUE_NOT_SET:0,STRING_VALUE:2,INTEGER_VALUE:3,DOUBLE_VALUE:4,BOOLEAN_VALUE:5,LIST_OF_STRINGS_VALUE:6},o._Metadata.prototype.getValueCase=function(){return t.Message.computeOneofCase(this,o._Metadata.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._Metadata.prototype.toObject=function(e){return o._Metadata.toObject(e,this)},o._Metadata.toObject=function(e,r){var i,s={field:t.Message.getFieldWithDefault(r,1,""),stringValue:t.Message.getFieldWithDefault(r,2,""),integerValue:t.Message.getFieldWithDefault(r,3,0),doubleValue:t.Message.getFloatingPointFieldWithDefault(r,4,0),booleanValue:t.Message.getBooleanFieldWithDefault(r,5,!1),listOfStringsValue:(i=r.getListOfStringsValue())&&o._Metadata._ListOfStrings.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._Metadata.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Metadata;return o._Metadata.deserializeBinaryFromReader(i,r)},o._Metadata.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setField(r);break;case 2:r=t.readString();e.setStringValue(r);break;case 3:r=t.readInt64();e.setIntegerValue(r);break;case 4:r=t.readDouble();e.setDoubleValue(r);break;case 5:r=t.readBool();e.setBooleanValue(r);break;case 6:r=new o._Metadata._ListOfStrings;t.readMessage(r,o._Metadata._ListOfStrings.deserializeBinaryFromReader),e.setListOfStringsValue(r);break;default:t.skipField()}}return e},o._Metadata.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Metadata.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Metadata.serializeBinaryToWriter=function(e,r){var i=void 0;(i=e.getField()).length>0&&r.writeString(1,i),null!=(i=t.Message.getField(e,2))&&r.writeString(2,i),null!=(i=t.Message.getField(e,3))&&r.writeInt64(3,i),null!=(i=t.Message.getField(e,4))&&r.writeDouble(4,i),null!=(i=t.Message.getField(e,5))&&r.writeBool(5,i),null!=(i=e.getListOfStringsValue())&&r.writeMessage(6,i,o._Metadata._ListOfStrings.serializeBinaryToWriter)},o._Metadata._ListOfStrings.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._Metadata._ListOfStrings.prototype.toObject=function(e){return o._Metadata._ListOfStrings.toObject(e,this)},o._Metadata._ListOfStrings.toObject=function(e,r){var o,i={valuesList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._Metadata._ListOfStrings.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Metadata._ListOfStrings;return o._Metadata._ListOfStrings.deserializeBinaryFromReader(i,r)},o._Metadata._ListOfStrings.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.addValues(r)}else t.skipField()}return e},o._Metadata._ListOfStrings.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Metadata._ListOfStrings.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Metadata._ListOfStrings.serializeBinaryToWriter=function(e,t){var r;(r=e.getValuesList()).length>0&&t.writeRepeatedString(1,r)},o._Metadata._ListOfStrings.prototype.getValuesList=function(){return t.Message.getRepeatedField(this,1)},o._Metadata._ListOfStrings.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},o._Metadata._ListOfStrings.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._Metadata._ListOfStrings.prototype.clearValuesList=function(){return this.setValuesList([])},o._Metadata.prototype.getField=function(){return t.Message.getFieldWithDefault(this,1,"")},o._Metadata.prototype.setField=function(e){return t.Message.setProto3StringField(this,1,e)},o._Metadata.prototype.getStringValue=function(){return t.Message.getFieldWithDefault(this,2,"")},o._Metadata.prototype.setStringValue=function(e){return t.Message.setOneofField(this,2,o._Metadata.oneofGroups_[0],e)},o._Metadata.prototype.clearStringValue=function(){return t.Message.setOneofField(this,2,o._Metadata.oneofGroups_[0],void 0)},o._Metadata.prototype.hasStringValue=function(){return null!=t.Message.getField(this,2)},o._Metadata.prototype.getIntegerValue=function(){return t.Message.getFieldWithDefault(this,3,0)},o._Metadata.prototype.setIntegerValue=function(e){return t.Message.setOneofField(this,3,o._Metadata.oneofGroups_[0],e)},o._Metadata.prototype.clearIntegerValue=function(){return t.Message.setOneofField(this,3,o._Metadata.oneofGroups_[0],void 0)},o._Metadata.prototype.hasIntegerValue=function(){return null!=t.Message.getField(this,3)},o._Metadata.prototype.getDoubleValue=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},o._Metadata.prototype.setDoubleValue=function(e){return t.Message.setOneofField(this,4,o._Metadata.oneofGroups_[0],e)},o._Metadata.prototype.clearDoubleValue=function(){return t.Message.setOneofField(this,4,o._Metadata.oneofGroups_[0],void 0)},o._Metadata.prototype.hasDoubleValue=function(){return null!=t.Message.getField(this,4)},o._Metadata.prototype.getBooleanValue=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},o._Metadata.prototype.setBooleanValue=function(e){return t.Message.setOneofField(this,5,o._Metadata.oneofGroups_[0],e)},o._Metadata.prototype.clearBooleanValue=function(){return t.Message.setOneofField(this,5,o._Metadata.oneofGroups_[0],void 0)},o._Metadata.prototype.hasBooleanValue=function(){return null!=t.Message.getField(this,5)},o._Metadata.prototype.getListOfStringsValue=function(){return t.Message.getWrapperField(this,o._Metadata._ListOfStrings,6)},o._Metadata.prototype.setListOfStringsValue=function(e){return t.Message.setOneofWrapperField(this,6,o._Metadata.oneofGroups_[0],e)},o._Metadata.prototype.clearListOfStringsValue=function(){return this.setListOfStringsValue(void 0)},o._Metadata.prototype.hasListOfStringsValue=function(){return null!=t.Message.getField(this,6)},o._MetadataRequest.oneofGroups_=[[2,3]],o._MetadataRequest.KindCase={KIND_NOT_SET:0,SOME:2,ALL:3},o._MetadataRequest.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o._MetadataRequest.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._MetadataRequest.prototype.toObject=function(e){return o._MetadataRequest.toObject(e,this)},o._MetadataRequest.toObject=function(e,t){var r,i={some:(r=t.getSome())&&o._MetadataRequest.Some.toObject(e,r),all:(r=t.getAll())&&o._MetadataRequest.All.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._MetadataRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._MetadataRequest;return o._MetadataRequest.deserializeBinaryFromReader(i,r)},o._MetadataRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new o._MetadataRequest.Some;t.readMessage(r,o._MetadataRequest.Some.deserializeBinaryFromReader),e.setSome(r);break;case 3:r=new o._MetadataRequest.All;t.readMessage(r,o._MetadataRequest.All.deserializeBinaryFromReader),e.setAll(r);break;default:t.skipField()}}return e},o._MetadataRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._MetadataRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._MetadataRequest.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSome())&&t.writeMessage(2,r,o._MetadataRequest.Some.serializeBinaryToWriter),null!=(r=e.getAll())&&t.writeMessage(3,r,o._MetadataRequest.All.serializeBinaryToWriter)},o._MetadataRequest.Some.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._MetadataRequest.Some.prototype.toObject=function(e){return o._MetadataRequest.Some.toObject(e,this)},o._MetadataRequest.Some.toObject=function(e,r){var o,i={fieldsList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._MetadataRequest.Some.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._MetadataRequest.Some;return o._MetadataRequest.Some.deserializeBinaryFromReader(i,r)},o._MetadataRequest.Some.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readString();e.addFields(r)}else t.skipField()}return e},o._MetadataRequest.Some.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._MetadataRequest.Some.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._MetadataRequest.Some.serializeBinaryToWriter=function(e,t){var r;(r=e.getFieldsList()).length>0&&t.writeRepeatedString(1,r)},o._MetadataRequest.Some.prototype.getFieldsList=function(){return t.Message.getRepeatedField(this,1)},o._MetadataRequest.Some.prototype.setFieldsList=function(e){return t.Message.setField(this,1,e||[])},o._MetadataRequest.Some.prototype.addFields=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},o._MetadataRequest.Some.prototype.clearFieldsList=function(){return this.setFieldsList([])},t.Message.GENERATE_TO_OBJECT&&(o._MetadataRequest.All.prototype.toObject=function(e){return o._MetadataRequest.All.toObject(e,this)},o._MetadataRequest.All.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._MetadataRequest.All.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._MetadataRequest.All;return o._MetadataRequest.All.deserializeBinaryFromReader(i,r)},o._MetadataRequest.All.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._MetadataRequest.All.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._MetadataRequest.All.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._MetadataRequest.All.serializeBinaryToWriter=function(e,t){},o._MetadataRequest.prototype.getSome=function(){return t.Message.getWrapperField(this,o._MetadataRequest.Some,2)},o._MetadataRequest.prototype.setSome=function(e){return t.Message.setOneofWrapperField(this,2,o._MetadataRequest.oneofGroups_[0],e)},o._MetadataRequest.prototype.clearSome=function(){return this.setSome(void 0)},o._MetadataRequest.prototype.hasSome=function(){return null!=t.Message.getField(this,2)},o._MetadataRequest.prototype.getAll=function(){return t.Message.getWrapperField(this,o._MetadataRequest.All,3)},o._MetadataRequest.prototype.setAll=function(e){return t.Message.setOneofWrapperField(this,3,o._MetadataRequest.oneofGroups_[0],e)},o._MetadataRequest.prototype.clearAll=function(){return this.setAll(void 0)},o._MetadataRequest.prototype.hasAll=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._SearchRequest.prototype.toObject=function(e){return o._SearchRequest.toObject(e,this)},o._SearchRequest.toObject=function(e,r){var i,s={indexName:t.Message.getFieldWithDefault(r,1,""),topK:t.Message.getFieldWithDefault(r,2,0),queryVector:(i=r.getQueryVector())&&o._Vector.toObject(e,i),metadataFields:(i=r.getMetadataFields())&&o._MetadataRequest.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._SearchRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SearchRequest;return o._SearchRequest.deserializeBinaryFromReader(i,r)},o._SearchRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setIndexName(r);break;case 2:r=t.readUint32();e.setTopK(r);break;case 3:r=new o._Vector;t.readMessage(r,o._Vector.deserializeBinaryFromReader),e.setQueryVector(r);break;case 4:r=new o._MetadataRequest;t.readMessage(r,o._MetadataRequest.deserializeBinaryFromReader),e.setMetadataFields(r);break;default:t.skipField()}}return e},o._SearchRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SearchRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SearchRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIndexName()).length>0&&t.writeString(1,r),0!==(r=e.getTopK())&&t.writeUint32(2,r),null!=(r=e.getQueryVector())&&t.writeMessage(3,r,o._Vector.serializeBinaryToWriter),null!=(r=e.getMetadataFields())&&t.writeMessage(4,r,o._MetadataRequest.serializeBinaryToWriter)},o._SearchRequest.prototype.getIndexName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SearchRequest.prototype.setIndexName=function(e){return t.Message.setProto3StringField(this,1,e)},o._SearchRequest.prototype.getTopK=function(){return t.Message.getFieldWithDefault(this,2,0)},o._SearchRequest.prototype.setTopK=function(e){return t.Message.setProto3IntField(this,2,e)},o._SearchRequest.prototype.getQueryVector=function(){return t.Message.getWrapperField(this,o._Vector,3)},o._SearchRequest.prototype.setQueryVector=function(e){return t.Message.setWrapperField(this,3,e)},o._SearchRequest.prototype.clearQueryVector=function(){return this.setQueryVector(void 0)},o._SearchRequest.prototype.hasQueryVector=function(){return null!=t.Message.getField(this,3)},o._SearchRequest.prototype.getMetadataFields=function(){return t.Message.getWrapperField(this,o._MetadataRequest,4)},o._SearchRequest.prototype.setMetadataFields=function(e){return t.Message.setWrapperField(this,4,e)},o._SearchRequest.prototype.clearMetadataFields=function(){return this.setMetadataFields(void 0)},o._SearchRequest.prototype.hasMetadataFields=function(){return null!=t.Message.getField(this,4)},o._SearchHit.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(o._SearchHit.prototype.toObject=function(e){return o._SearchHit.toObject(e,this)},o._SearchHit.toObject=function(e,r){var i={id:t.Message.getFieldWithDefault(r,1,""),distance:t.Message.getFloatingPointFieldWithDefault(r,2,0),metadataList:t.Message.toObjectList(r.getMetadataList(),o._Metadata.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._SearchHit.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SearchHit;return o._SearchHit.deserializeBinaryFromReader(i,r)},o._SearchHit.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=t.readFloat();e.setDistance(r);break;case 3:r=new o._Metadata;t.readMessage(r,o._Metadata.deserializeBinaryFromReader),e.addMetadata(r);break;default:t.skipField()}}return e},o._SearchHit.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SearchHit.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SearchHit.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getId()).length>0&&t.writeString(1,r),0!==(r=e.getDistance())&&t.writeFloat(2,r),(r=e.getMetadataList()).length>0&&t.writeRepeatedMessage(3,r,o._Metadata.serializeBinaryToWriter)},o._SearchHit.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SearchHit.prototype.setId=function(e){return t.Message.setProto3StringField(this,1,e)},o._SearchHit.prototype.getDistance=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._SearchHit.prototype.setDistance=function(e){return t.Message.setProto3FloatField(this,2,e)},o._SearchHit.prototype.getMetadataList=function(){return t.Message.getRepeatedWrapperField(this,o._Metadata,3)},o._SearchHit.prototype.setMetadataList=function(e){return t.Message.setRepeatedWrapperField(this,3,e)},o._SearchHit.prototype.addMetadata=function(e,r){return t.Message.addToRepeatedWrapperField(this,3,e,o._Metadata,r)},o._SearchHit.prototype.clearMetadataList=function(){return this.setMetadataList([])},o._SearchResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._SearchResponse.prototype.toObject=function(e){return o._SearchResponse.toObject(e,this)},o._SearchResponse.toObject=function(e,r){var i={hitsList:t.Message.toObjectList(r.getHitsList(),o._SearchHit.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._SearchResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SearchResponse;return o._SearchResponse.deserializeBinaryFromReader(i,r)},o._SearchResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._SearchHit;t.readMessage(r,o._SearchHit.deserializeBinaryFromReader),e.addHits(r)}else t.skipField()}return e},o._SearchResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SearchResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SearchResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getHitsList()).length>0&&t.writeRepeatedMessage(1,r,o._SearchHit.serializeBinaryToWriter)},o._SearchResponse.prototype.getHitsList=function(){return t.Message.getRepeatedWrapperField(this,o._SearchHit,1)},o._SearchResponse.prototype.setHitsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._SearchResponse.prototype.addHits=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._SearchHit,r)},o._SearchResponse.prototype.clearHitsList=function(){return this.setHitsList([])},r.object.extend(e,o)}(vectorindex_pb$1);var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$4(t,e,r);return __setModuleDefault$4(t,e),t};Object.defineProperty(VectorindexServiceClientPb,"__esModule",{value:!0}),VectorindexServiceClientPb.VectorIndexClient=void 0;const grpcWeb$3=__importStar$4(grpcWeb$8),vectorindex_pb=__importStar$4(vectorindex_pb$1);class VectorIndexClient{constructor(e,t,r){this.methodDescriptorUpsertItemBatch=new grpcWeb$3.MethodDescriptor("/vectorindex.VectorIndex/UpsertItemBatch",grpcWeb$3.MethodType.UNARY,vectorindex_pb._UpsertItemBatchRequest,vectorindex_pb._UpsertItemBatchResponse,(e=>e.serializeBinary()),vectorindex_pb._UpsertItemBatchResponse.deserializeBinary),this.methodDescriptorDeleteItemBatch=new grpcWeb$3.MethodDescriptor("/vectorindex.VectorIndex/DeleteItemBatch",grpcWeb$3.MethodType.UNARY,vectorindex_pb._DeleteItemBatchRequest,vectorindex_pb._DeleteItemBatchResponse,(e=>e.serializeBinary()),vectorindex_pb._DeleteItemBatchResponse.deserializeBinary),this.methodDescriptorSearch=new grpcWeb$3.MethodDescriptor("/vectorindex.VectorIndex/Search",grpcWeb$3.MethodType.UNARY,vectorindex_pb._SearchRequest,vectorindex_pb._SearchResponse,(e=>e.serializeBinary()),vectorindex_pb._SearchResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$3.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}upsertItemBatch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/vectorindex.VectorIndex/UpsertItemBatch",e,t||{},this.methodDescriptorUpsertItemBatch,r):this.client_.unaryCall(this.hostname_+"/vectorindex.VectorIndex/UpsertItemBatch",e,t||{},this.methodDescriptorUpsertItemBatch)}deleteItemBatch(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/vectorindex.VectorIndex/DeleteItemBatch",e,t||{},this.methodDescriptorDeleteItemBatch,r):this.client_.unaryCall(this.hostname_+"/vectorindex.VectorIndex/DeleteItemBatch",e,t||{},this.methodDescriptorDeleteItemBatch)}search(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/vectorindex.VectorIndex/Search",e,t||{},this.methodDescriptorSearch,r):this.client_.unaryCall(this.hostname_+"/vectorindex.VectorIndex/Search",e,t||{},this.methodDescriptorSearch)}}VectorindexServiceClientPb.VectorIndexClient=VectorIndexClient;var CachepingServiceClientPb={},cacheping_pb$1={};!function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("_PingRequest",null,o),r.exportSymbol("_PingResponse",null,o),o._PingRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._PingRequest,t.Message),r.DEBUG&&!COMPILED&&(o._PingRequest.displayName="proto._PingRequest"),o._PingResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._PingResponse,t.Message),r.DEBUG&&!COMPILED&&(o._PingResponse.displayName="proto._PingResponse"),t.Message.GENERATE_TO_OBJECT&&(o._PingRequest.prototype.toObject=function(e){return o._PingRequest.toObject(e,this)},o._PingRequest.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._PingRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._PingRequest;return o._PingRequest.deserializeBinaryFromReader(i,r)},o._PingRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._PingRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._PingRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._PingRequest.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._PingResponse.prototype.toObject=function(e){return o._PingResponse.toObject(e,this)},o._PingResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._PingResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._PingResponse;return o._PingResponse.deserializeBinaryFromReader(i,r)},o._PingResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._PingResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._PingResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._PingResponse.serializeBinaryToWriter=function(e,t){},r.object.extend(e,o)}(cacheping_pb$1);var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$3(t,e,r);return __setModuleDefault$3(t,e),t};Object.defineProperty(CachepingServiceClientPb,"__esModule",{value:!0}),CachepingServiceClientPb.PingClient=void 0;const grpcWeb$2=__importStar$3(grpcWeb$8),cacheping_pb=__importStar$3(cacheping_pb$1);let PingClient$1=class{constructor(e,t,r){this.methodDescriptorPing=new grpcWeb$2.MethodDescriptor("/cache_client.Ping/Ping",grpcWeb$2.MethodType.UNARY,cacheping_pb._PingRequest,cacheping_pb._PingResponse,(e=>e.serializeBinary()),cacheping_pb._PingResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$2.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}ping(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.Ping/Ping",e,t||{},this.methodDescriptorPing,r):this.client_.unaryCall(this.hostname_+"/cache_client.Ping/Ping",e,t||{},this.methodDescriptorPing)}};CachepingServiceClientPb.PingClient=PingClient$1;var LeaderboardServiceClientPb={},leaderboard_pb$1={};!function(e){var t=googleProtobuf,r=t,o={};r.exportSymbol("_DeleteLeaderboardRequest",null,o),r.exportSymbol("_Element",null,o),r.exportSymbol("_Empty",null,o),r.exportSymbol("_GetByRankRequest",null,o),r.exportSymbol("_GetByRankResponse",null,o),r.exportSymbol("_GetByScoreRequest",null,o),r.exportSymbol("_GetByScoreResponse",null,o),r.exportSymbol("_GetLeaderboardLengthRequest",null,o),r.exportSymbol("_GetLeaderboardLengthResponse",null,o),r.exportSymbol("_GetRankRequest",null,o),r.exportSymbol("_GetRankResponse",null,o),r.exportSymbol("_Order",null,o),r.exportSymbol("_RankRange",null,o),r.exportSymbol("_RankedElement",null,o),r.exportSymbol("_RemoveElementsRequest",null,o),r.exportSymbol("_ScoreRange",null,o),r.exportSymbol("_ScoreRange.MaxCase",null,o),r.exportSymbol("_ScoreRange.MinCase",null,o),r.exportSymbol("_Unbounded",null,o),r.exportSymbol("_UpsertElementsRequest",null,o),o._Element=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Element,t.Message),r.DEBUG&&!COMPILED&&(o._Element.displayName="proto._Element"),o._RankedElement=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RankedElement,t.Message),r.DEBUG&&!COMPILED&&(o._RankedElement.displayName="proto._RankedElement"),o._RankRange=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._RankRange,t.Message),r.DEBUG&&!COMPILED&&(o._RankRange.displayName="proto._RankRange"),o._Unbounded=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Unbounded,t.Message),r.DEBUG&&!COMPILED&&(o._Unbounded.displayName="proto._Unbounded"),o._ScoreRange=function(e){t.Message.initialize(this,e,0,-1,null,o._ScoreRange.oneofGroups_)},r.inherits(o._ScoreRange,t.Message),r.DEBUG&&!COMPILED&&(o._ScoreRange.displayName="proto._ScoreRange"),o._Empty=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Empty,t.Message),r.DEBUG&&!COMPILED&&(o._Empty.displayName="proto._Empty"),o._DeleteLeaderboardRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._DeleteLeaderboardRequest,t.Message),r.DEBUG&&!COMPILED&&(o._DeleteLeaderboardRequest.displayName="proto._DeleteLeaderboardRequest"),o._GetLeaderboardLengthRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetLeaderboardLengthRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GetLeaderboardLengthRequest.displayName="proto._GetLeaderboardLengthRequest"),o._GetLeaderboardLengthResponse=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetLeaderboardLengthResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GetLeaderboardLengthResponse.displayName="proto._GetLeaderboardLengthResponse"),o._UpsertElementsRequest=function(e){t.Message.initialize(this,e,0,-1,o._UpsertElementsRequest.repeatedFields_,null)},r.inherits(o._UpsertElementsRequest,t.Message),r.DEBUG&&!COMPILED&&(o._UpsertElementsRequest.displayName="proto._UpsertElementsRequest"),o._GetByRankRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetByRankRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GetByRankRequest.displayName="proto._GetByRankRequest"),o._GetByRankResponse=function(e){t.Message.initialize(this,e,0,-1,o._GetByRankResponse.repeatedFields_,null)},r.inherits(o._GetByRankResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GetByRankResponse.displayName="proto._GetByRankResponse"),o._GetRankRequest=function(e){t.Message.initialize(this,e,0,-1,o._GetRankRequest.repeatedFields_,null)},r.inherits(o._GetRankRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GetRankRequest.displayName="proto._GetRankRequest"),o._GetRankResponse=function(e){t.Message.initialize(this,e,0,-1,o._GetRankResponse.repeatedFields_,null)},r.inherits(o._GetRankResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GetRankResponse.displayName="proto._GetRankResponse"),o._RemoveElementsRequest=function(e){t.Message.initialize(this,e,0,-1,o._RemoveElementsRequest.repeatedFields_,null)},r.inherits(o._RemoveElementsRequest,t.Message),r.DEBUG&&!COMPILED&&(o._RemoveElementsRequest.displayName="proto._RemoveElementsRequest"),o._GetByScoreRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._GetByScoreRequest,t.Message),r.DEBUG&&!COMPILED&&(o._GetByScoreRequest.displayName="proto._GetByScoreRequest"),o._GetByScoreResponse=function(e){t.Message.initialize(this,e,0,-1,o._GetByScoreResponse.repeatedFields_,null)},r.inherits(o._GetByScoreResponse,t.Message),r.DEBUG&&!COMPILED&&(o._GetByScoreResponse.displayName="proto._GetByScoreResponse"),t.Message.GENERATE_TO_OBJECT&&(o._Element.prototype.toObject=function(e){return o._Element.toObject(e,this)},o._Element.toObject=function(e,r){var o={id:t.Message.getFieldWithDefault(r,1,0),score:t.Message.getFloatingPointFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._Element.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Element;return o._Element.deserializeBinaryFromReader(i,r)},o._Element.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readFloat();e.setScore(r);break;default:t.skipField()}}return e},o._Element.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Element.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Element.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getScore())&&t.writeFloat(2,r)},o._Element.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,0)},o._Element.prototype.setId=function(e){return t.Message.setProto3IntField(this,1,e)},o._Element.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._Element.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._RankedElement.prototype.toObject=function(e){return o._RankedElement.toObject(e,this)},o._RankedElement.toObject=function(e,r){var o={id:t.Message.getFieldWithDefault(r,1,0),score:t.Message.getFloatingPointFieldWithDefault(r,2,0),rank:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._RankedElement.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RankedElement;return o._RankedElement.deserializeBinaryFromReader(i,r)},o._RankedElement.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readFloat();e.setScore(r);break;case 3:r=t.readUint32();e.setRank(r);break;default:t.skipField()}}return e},o._RankedElement.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RankedElement.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RankedElement.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getScore())&&t.writeFloat(2,r),0!==(r=e.getRank())&&t.writeUint32(3,r)},o._RankedElement.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,0)},o._RankedElement.prototype.setId=function(e){return t.Message.setProto3IntField(this,1,e)},o._RankedElement.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._RankedElement.prototype.setScore=function(e){return t.Message.setProto3FloatField(this,2,e)},o._RankedElement.prototype.getRank=function(){return t.Message.getFieldWithDefault(this,3,0)},o._RankedElement.prototype.setRank=function(e){return t.Message.setProto3IntField(this,3,e)},t.Message.GENERATE_TO_OBJECT&&(o._RankRange.prototype.toObject=function(e){return o._RankRange.toObject(e,this)},o._RankRange.toObject=function(e,r){var o={startInclusive:t.Message.getFieldWithDefault(r,1,0),endExclusive:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._RankRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RankRange;return o._RankRange.deserializeBinaryFromReader(i,r)},o._RankRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setStartInclusive(r);break;case 2:r=t.readUint32();e.setEndExclusive(r);break;default:t.skipField()}}return e},o._RankRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RankRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RankRange.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getStartInclusive())&&t.writeUint32(1,r),0!==(r=e.getEndExclusive())&&t.writeUint32(2,r)},o._RankRange.prototype.getStartInclusive=function(){return t.Message.getFieldWithDefault(this,1,0)},o._RankRange.prototype.setStartInclusive=function(e){return t.Message.setProto3IntField(this,1,e)},o._RankRange.prototype.getEndExclusive=function(){return t.Message.getFieldWithDefault(this,2,0)},o._RankRange.prototype.setEndExclusive=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._Unbounded.prototype.toObject=function(e){return o._Unbounded.toObject(e,this)},o._Unbounded.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._Unbounded.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Unbounded;return o._Unbounded.deserializeBinaryFromReader(i,r)},o._Unbounded.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._Unbounded.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Unbounded.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Unbounded.serializeBinaryToWriter=function(e,t){},o._ScoreRange.oneofGroups_=[[1,2],[3,4]],o._ScoreRange.MinCase={MIN_NOT_SET:0,UNBOUNDED_MIN:1,MIN_INCLUSIVE:2},o._ScoreRange.prototype.getMinCase=function(){return t.Message.computeOneofCase(this,o._ScoreRange.oneofGroups_[0])},o._ScoreRange.MaxCase={MAX_NOT_SET:0,UNBOUNDED_MAX:3,MAX_EXCLUSIVE:4},o._ScoreRange.prototype.getMaxCase=function(){return t.Message.computeOneofCase(this,o._ScoreRange.oneofGroups_[1])},t.Message.GENERATE_TO_OBJECT&&(o._ScoreRange.prototype.toObject=function(e){return o._ScoreRange.toObject(e,this)},o._ScoreRange.toObject=function(e,r){var i,s={unboundedMin:(i=r.getUnboundedMin())&&o._Unbounded.toObject(e,i),minInclusive:t.Message.getFloatingPointFieldWithDefault(r,2,0),unboundedMax:(i=r.getUnboundedMax())&&o._Unbounded.toObject(e,i),maxExclusive:t.Message.getFloatingPointFieldWithDefault(r,4,0)};return e&&(s.$jspbMessageInstance=r),s}),o._ScoreRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._ScoreRange;return o._ScoreRange.deserializeBinaryFromReader(i,r)},o._ScoreRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMin(r);break;case 2:r=t.readFloat();e.setMinInclusive(r);break;case 3:r=new o._Unbounded;t.readMessage(r,o._Unbounded.deserializeBinaryFromReader),e.setUnboundedMax(r);break;case 4:r=t.readFloat();e.setMaxExclusive(r);break;default:t.skipField()}}return e},o._ScoreRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._ScoreRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._ScoreRange.serializeBinaryToWriter=function(e,r){var i=void 0;null!=(i=e.getUnboundedMin())&&r.writeMessage(1,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,2))&&r.writeFloat(2,i),null!=(i=e.getUnboundedMax())&&r.writeMessage(3,i,o._Unbounded.serializeBinaryToWriter),null!=(i=t.Message.getField(e,4))&&r.writeFloat(4,i)},o._ScoreRange.prototype.getUnboundedMin=function(){return t.Message.getWrapperField(this,o._Unbounded,1)},o._ScoreRange.prototype.setUnboundedMin=function(e){return t.Message.setOneofWrapperField(this,1,o._ScoreRange.oneofGroups_[0],e)},o._ScoreRange.prototype.clearUnboundedMin=function(){return this.setUnboundedMin(void 0)},o._ScoreRange.prototype.hasUnboundedMin=function(){return null!=t.Message.getField(this,1)},o._ScoreRange.prototype.getMinInclusive=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},o._ScoreRange.prototype.setMinInclusive=function(e){return t.Message.setOneofField(this,2,o._ScoreRange.oneofGroups_[0],e)},o._ScoreRange.prototype.clearMinInclusive=function(){return t.Message.setOneofField(this,2,o._ScoreRange.oneofGroups_[0],void 0)},o._ScoreRange.prototype.hasMinInclusive=function(){return null!=t.Message.getField(this,2)},o._ScoreRange.prototype.getUnboundedMax=function(){return t.Message.getWrapperField(this,o._Unbounded,3)},o._ScoreRange.prototype.setUnboundedMax=function(e){return t.Message.setOneofWrapperField(this,3,o._ScoreRange.oneofGroups_[1],e)},o._ScoreRange.prototype.clearUnboundedMax=function(){return this.setUnboundedMax(void 0)},o._ScoreRange.prototype.hasUnboundedMax=function(){return null!=t.Message.getField(this,3)},o._ScoreRange.prototype.getMaxExclusive=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},o._ScoreRange.prototype.setMaxExclusive=function(e){return t.Message.setOneofField(this,4,o._ScoreRange.oneofGroups_[1],e)},o._ScoreRange.prototype.clearMaxExclusive=function(){return t.Message.setOneofField(this,4,o._ScoreRange.oneofGroups_[1],void 0)},o._ScoreRange.prototype.hasMaxExclusive=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(o._Empty.prototype.toObject=function(e){return o._Empty.toObject(e,this)},o._Empty.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._Empty.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Empty;return o._Empty.deserializeBinaryFromReader(i,r)},o._Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._Empty.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Empty.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._DeleteLeaderboardRequest.prototype.toObject=function(e){return o._DeleteLeaderboardRequest.toObject(e,this)},o._DeleteLeaderboardRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,"")};return e&&(o.$jspbMessageInstance=r),o}),o._DeleteLeaderboardRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._DeleteLeaderboardRequest;return o._DeleteLeaderboardRequest.deserializeBinaryFromReader(i,r)},o._DeleteLeaderboardRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;default:t.skipField()}}return e},o._DeleteLeaderboardRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._DeleteLeaderboardRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._DeleteLeaderboardRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r)},o._DeleteLeaderboardRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._DeleteLeaderboardRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._DeleteLeaderboardRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._DeleteLeaderboardRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._GetLeaderboardLengthRequest.prototype.toObject=function(e){return o._GetLeaderboardLengthRequest.toObject(e,this)},o._GetLeaderboardLengthRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,"")};return e&&(o.$jspbMessageInstance=r),o}),o._GetLeaderboardLengthRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetLeaderboardLengthRequest;return o._GetLeaderboardLengthRequest.deserializeBinaryFromReader(i,r)},o._GetLeaderboardLengthRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;default:t.skipField()}}return e},o._GetLeaderboardLengthRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetLeaderboardLengthRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetLeaderboardLengthRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r)},o._GetLeaderboardLengthRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GetLeaderboardLengthRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._GetLeaderboardLengthRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GetLeaderboardLengthRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._GetLeaderboardLengthResponse.prototype.toObject=function(e){return o._GetLeaderboardLengthResponse.toObject(e,this)},o._GetLeaderboardLengthResponse.toObject=function(e,r){var o={count:t.Message.getFieldWithDefault(r,1,0)};return e&&(o.$jspbMessageInstance=r),o}),o._GetLeaderboardLengthResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetLeaderboardLengthResponse;return o._GetLeaderboardLengthResponse.deserializeBinaryFromReader(i,r)},o._GetLeaderboardLengthResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=t.readUint32();e.setCount(r)}else t.skipField()}return e},o._GetLeaderboardLengthResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetLeaderboardLengthResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetLeaderboardLengthResponse.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getCount())&&t.writeUint32(1,r)},o._GetLeaderboardLengthResponse.prototype.getCount=function(){return t.Message.getFieldWithDefault(this,1,0)},o._GetLeaderboardLengthResponse.prototype.setCount=function(e){return t.Message.setProto3IntField(this,1,e)},o._UpsertElementsRequest.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(o._UpsertElementsRequest.prototype.toObject=function(e){return o._UpsertElementsRequest.toObject(e,this)},o._UpsertElementsRequest.toObject=function(e,r){var i={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,""),elementsList:t.Message.toObjectList(r.getElementsList(),o._Element.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._UpsertElementsRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._UpsertElementsRequest;return o._UpsertElementsRequest.deserializeBinaryFromReader(i,r)},o._UpsertElementsRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;case 3:r=new o._Element;t.readMessage(r,o._Element.deserializeBinaryFromReader),e.addElements(r);break;default:t.skipField()}}return e},o._UpsertElementsRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._UpsertElementsRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._UpsertElementsRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r),(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(3,r,o._Element.serializeBinaryToWriter)},o._UpsertElementsRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._UpsertElementsRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._UpsertElementsRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._UpsertElementsRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},o._UpsertElementsRequest.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._Element,3)},o._UpsertElementsRequest.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,3,e)},o._UpsertElementsRequest.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,3,e,o._Element,r)},o._UpsertElementsRequest.prototype.clearElementsList=function(){return this.setElementsList([])},t.Message.GENERATE_TO_OBJECT&&(o._GetByRankRequest.prototype.toObject=function(e){return o._GetByRankRequest.toObject(e,this)},o._GetByRankRequest.toObject=function(e,r){var i,s={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,""),rankRange:(i=r.getRankRange())&&o._RankRange.toObject(e,i),order:t.Message.getFieldWithDefault(r,4,0)};return e&&(s.$jspbMessageInstance=r),s}),o._GetByRankRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetByRankRequest;return o._GetByRankRequest.deserializeBinaryFromReader(i,r)},o._GetByRankRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;case 3:r=new o._RankRange;t.readMessage(r,o._RankRange.deserializeBinaryFromReader),e.setRankRange(r);break;case 4:r=t.readEnum();e.setOrder(r);break;default:t.skipField()}}return e},o._GetByRankRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetByRankRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetByRankRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r),null!=(r=e.getRankRange())&&t.writeMessage(3,r,o._RankRange.serializeBinaryToWriter),0!==(r=e.getOrder())&&t.writeEnum(4,r)},o._GetByRankRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GetByRankRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._GetByRankRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GetByRankRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},o._GetByRankRequest.prototype.getRankRange=function(){return t.Message.getWrapperField(this,o._RankRange,3)},o._GetByRankRequest.prototype.setRankRange=function(e){return t.Message.setWrapperField(this,3,e)},o._GetByRankRequest.prototype.clearRankRange=function(){return this.setRankRange(void 0)},o._GetByRankRequest.prototype.hasRankRange=function(){return null!=t.Message.getField(this,3)},o._GetByRankRequest.prototype.getOrder=function(){return t.Message.getFieldWithDefault(this,4,0)},o._GetByRankRequest.prototype.setOrder=function(e){return t.Message.setProto3EnumField(this,4,e)},o._GetByRankResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._GetByRankResponse.prototype.toObject=function(e){return o._GetByRankResponse.toObject(e,this)},o._GetByRankResponse.toObject=function(e,r){var i={elementsList:t.Message.toObjectList(r.getElementsList(),o._RankedElement.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._GetByRankResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetByRankResponse;return o._GetByRankResponse.deserializeBinaryFromReader(i,r)},o._GetByRankResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._RankedElement;t.readMessage(r,o._RankedElement.deserializeBinaryFromReader),e.addElements(r)}else t.skipField()}return e},o._GetByRankResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetByRankResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetByRankResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(1,r,o._RankedElement.serializeBinaryToWriter)},o._GetByRankResponse.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._RankedElement,1)},o._GetByRankResponse.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._GetByRankResponse.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._RankedElement,r)},o._GetByRankResponse.prototype.clearElementsList=function(){return this.setElementsList([])},o._GetRankRequest.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(o._GetRankRequest.prototype.toObject=function(e){return o._GetRankRequest.toObject(e,this)},o._GetRankRequest.toObject=function(e,r){var o,i={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,""),idsList:null==(o=t.Message.getRepeatedField(r,3))?void 0:o,order:t.Message.getFieldWithDefault(r,4,0)};return e&&(i.$jspbMessageInstance=r),i}),o._GetRankRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetRankRequest;return o._GetRankRequest.deserializeBinaryFromReader(i,r)},o._GetRankRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;case 3:for(var o=t.isDelimited()?t.readPackedUint32():[t.readUint32()],i=0;i<o.length;i++)e.addIds(o[i]);break;case 4:r=t.readEnum();e.setOrder(r);break;default:t.skipField()}}return e},o._GetRankRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetRankRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetRankRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r),(r=e.getIdsList()).length>0&&t.writePackedUint32(3,r),0!==(r=e.getOrder())&&t.writeEnum(4,r)},o._GetRankRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GetRankRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._GetRankRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GetRankRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},o._GetRankRequest.prototype.getIdsList=function(){return t.Message.getRepeatedField(this,3)},o._GetRankRequest.prototype.setIdsList=function(e){return t.Message.setField(this,3,e||[])},o._GetRankRequest.prototype.addIds=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},o._GetRankRequest.prototype.clearIdsList=function(){return this.setIdsList([])},o._GetRankRequest.prototype.getOrder=function(){return t.Message.getFieldWithDefault(this,4,0)},o._GetRankRequest.prototype.setOrder=function(e){return t.Message.setProto3EnumField(this,4,e)},o._GetRankResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._GetRankResponse.prototype.toObject=function(e){return o._GetRankResponse.toObject(e,this)},o._GetRankResponse.toObject=function(e,r){var i={elementsList:t.Message.toObjectList(r.getElementsList(),o._RankedElement.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._GetRankResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetRankResponse;return o._GetRankResponse.deserializeBinaryFromReader(i,r)},o._GetRankResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._RankedElement;t.readMessage(r,o._RankedElement.deserializeBinaryFromReader),e.addElements(r)}else t.skipField()}return e},o._GetRankResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetRankResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetRankResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(1,r,o._RankedElement.serializeBinaryToWriter)},o._GetRankResponse.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._RankedElement,1)},o._GetRankResponse.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._GetRankResponse.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._RankedElement,r)},o._GetRankResponse.prototype.clearElementsList=function(){return this.setElementsList([])},o._RemoveElementsRequest.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(o._RemoveElementsRequest.prototype.toObject=function(e){return o._RemoveElementsRequest.toObject(e,this)},o._RemoveElementsRequest.toObject=function(e,r){var o,i={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,""),idsList:null==(o=t.Message.getRepeatedField(r,3))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),o._RemoveElementsRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._RemoveElementsRequest;return o._RemoveElementsRequest.deserializeBinaryFromReader(i,r)},o._RemoveElementsRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;case 3:for(var o=t.isDelimited()?t.readPackedUint32():[t.readUint32()],i=0;i<o.length;i++)e.addIds(o[i]);break;default:t.skipField()}}return e},o._RemoveElementsRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._RemoveElementsRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._RemoveElementsRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r),(r=e.getIdsList()).length>0&&t.writePackedUint32(3,r)},o._RemoveElementsRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._RemoveElementsRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._RemoveElementsRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._RemoveElementsRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},o._RemoveElementsRequest.prototype.getIdsList=function(){return t.Message.getRepeatedField(this,3)},o._RemoveElementsRequest.prototype.setIdsList=function(e){return t.Message.setField(this,3,e||[])},o._RemoveElementsRequest.prototype.addIds=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},o._RemoveElementsRequest.prototype.clearIdsList=function(){return this.setIdsList([])},t.Message.GENERATE_TO_OBJECT&&(o._GetByScoreRequest.prototype.toObject=function(e){return o._GetByScoreRequest.toObject(e,this)},o._GetByScoreRequest.toObject=function(e,r){var i,s={cacheName:t.Message.getFieldWithDefault(r,1,""),leaderboard:t.Message.getFieldWithDefault(r,2,""),scoreRange:(i=r.getScoreRange())&&o._ScoreRange.toObject(e,i),offset:t.Message.getFieldWithDefault(r,4,0),limitElements:t.Message.getFieldWithDefault(r,5,0),order:t.Message.getFieldWithDefault(r,6,0)};return e&&(s.$jspbMessageInstance=r),s}),o._GetByScoreRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetByScoreRequest;return o._GetByScoreRequest.deserializeBinaryFromReader(i,r)},o._GetByScoreRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setLeaderboard(r);break;case 3:r=new o._ScoreRange;t.readMessage(r,o._ScoreRange.deserializeBinaryFromReader),e.setScoreRange(r);break;case 4:r=t.readUint32();e.setOffset(r);break;case 5:r=t.readUint32();e.setLimitElements(r);break;case 6:r=t.readEnum();e.setOrder(r);break;default:t.skipField()}}return e},o._GetByScoreRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetByScoreRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetByScoreRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getLeaderboard()).length>0&&t.writeString(2,r),null!=(r=e.getScoreRange())&&t.writeMessage(3,r,o._ScoreRange.serializeBinaryToWriter),0!==(r=e.getOffset())&&t.writeUint32(4,r),0!==(r=e.getLimitElements())&&t.writeUint32(5,r),0!==(r=e.getOrder())&&t.writeEnum(6,r)},o._GetByScoreRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._GetByScoreRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._GetByScoreRequest.prototype.getLeaderboard=function(){return t.Message.getFieldWithDefault(this,2,"")},o._GetByScoreRequest.prototype.setLeaderboard=function(e){return t.Message.setProto3StringField(this,2,e)},o._GetByScoreRequest.prototype.getScoreRange=function(){return t.Message.getWrapperField(this,o._ScoreRange,3)},o._GetByScoreRequest.prototype.setScoreRange=function(e){return t.Message.setWrapperField(this,3,e)},o._GetByScoreRequest.prototype.clearScoreRange=function(){return this.setScoreRange(void 0)},o._GetByScoreRequest.prototype.hasScoreRange=function(){return null!=t.Message.getField(this,3)},o._GetByScoreRequest.prototype.getOffset=function(){return t.Message.getFieldWithDefault(this,4,0)},o._GetByScoreRequest.prototype.setOffset=function(e){return t.Message.setProto3IntField(this,4,e)},o._GetByScoreRequest.prototype.getLimitElements=function(){return t.Message.getFieldWithDefault(this,5,0)},o._GetByScoreRequest.prototype.setLimitElements=function(e){return t.Message.setProto3IntField(this,5,e)},o._GetByScoreRequest.prototype.getOrder=function(){return t.Message.getFieldWithDefault(this,6,0)},o._GetByScoreRequest.prototype.setOrder=function(e){return t.Message.setProto3EnumField(this,6,e)},o._GetByScoreResponse.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(o._GetByScoreResponse.prototype.toObject=function(e){return o._GetByScoreResponse.toObject(e,this)},o._GetByScoreResponse.toObject=function(e,r){var i={elementsList:t.Message.toObjectList(r.getElementsList(),o._RankedElement.toObject,e)};return e&&(i.$jspbMessageInstance=r),i}),o._GetByScoreResponse.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._GetByScoreResponse;return o._GetByScoreResponse.deserializeBinaryFromReader(i,r)},o._GetByScoreResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new o._RankedElement;t.readMessage(r,o._RankedElement.deserializeBinaryFromReader),e.addElements(r)}else t.skipField()}return e},o._GetByScoreResponse.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._GetByScoreResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._GetByScoreResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getElementsList()).length>0&&t.writeRepeatedMessage(1,r,o._RankedElement.serializeBinaryToWriter)},o._GetByScoreResponse.prototype.getElementsList=function(){return t.Message.getRepeatedWrapperField(this,o._RankedElement,1)},o._GetByScoreResponse.prototype.setElementsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},o._GetByScoreResponse.prototype.addElements=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,o._RankedElement,r)},o._GetByScoreResponse.prototype.clearElementsList=function(){return this.setElementsList([])},o._Order={ASCENDING:0,DESCENDING:1},r.object.extend(e,o)}(leaderboard_pb$1);var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$2(t,e,r);return __setModuleDefault$2(t,e),t};Object.defineProperty(LeaderboardServiceClientPb,"__esModule",{value:!0}),LeaderboardServiceClientPb.LeaderboardClient=void 0;const grpcWeb$1=__importStar$2(grpcWeb$8),leaderboard_pb=__importStar$2(leaderboard_pb$1);class LeaderboardClient{constructor(e,t,r){this.methodDescriptorDeleteLeaderboard=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/DeleteLeaderboard",grpcWeb$1.MethodType.UNARY,leaderboard_pb._DeleteLeaderboardRequest,leaderboard_pb._Empty,(e=>e.serializeBinary()),leaderboard_pb._Empty.deserializeBinary),this.methodDescriptorUpsertElements=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/UpsertElements",grpcWeb$1.MethodType.UNARY,leaderboard_pb._UpsertElementsRequest,leaderboard_pb._Empty,(e=>e.serializeBinary()),leaderboard_pb._Empty.deserializeBinary),this.methodDescriptorRemoveElements=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/RemoveElements",grpcWeb$1.MethodType.UNARY,leaderboard_pb._RemoveElementsRequest,leaderboard_pb._Empty,(e=>e.serializeBinary()),leaderboard_pb._Empty.deserializeBinary),this.methodDescriptorGetLeaderboardLength=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/GetLeaderboardLength",grpcWeb$1.MethodType.UNARY,leaderboard_pb._GetLeaderboardLengthRequest,leaderboard_pb._GetLeaderboardLengthResponse,(e=>e.serializeBinary()),leaderboard_pb._GetLeaderboardLengthResponse.deserializeBinary),this.methodDescriptorGetByRank=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/GetByRank",grpcWeb$1.MethodType.UNARY,leaderboard_pb._GetByRankRequest,leaderboard_pb._GetByRankResponse,(e=>e.serializeBinary()),leaderboard_pb._GetByRankResponse.deserializeBinary),this.methodDescriptorGetRank=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/GetRank",grpcWeb$1.MethodType.UNARY,leaderboard_pb._GetRankRequest,leaderboard_pb._GetRankResponse,(e=>e.serializeBinary()),leaderboard_pb._GetRankResponse.deserializeBinary),this.methodDescriptorGetByScore=new grpcWeb$1.MethodDescriptor("/leaderboard.Leaderboard/GetByScore",grpcWeb$1.MethodType.UNARY,leaderboard_pb._GetByScoreRequest,leaderboard_pb._GetByScoreResponse,(e=>e.serializeBinary()),leaderboard_pb._GetByScoreResponse.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb$1.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}deleteLeaderboard(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/DeleteLeaderboard",e,t||{},this.methodDescriptorDeleteLeaderboard,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/DeleteLeaderboard",e,t||{},this.methodDescriptorDeleteLeaderboard)}upsertElements(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/UpsertElements",e,t||{},this.methodDescriptorUpsertElements,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/UpsertElements",e,t||{},this.methodDescriptorUpsertElements)}removeElements(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/RemoveElements",e,t||{},this.methodDescriptorRemoveElements,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/RemoveElements",e,t||{},this.methodDescriptorRemoveElements)}getLeaderboardLength(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/GetLeaderboardLength",e,t||{},this.methodDescriptorGetLeaderboardLength,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/GetLeaderboardLength",e,t||{},this.methodDescriptorGetLeaderboardLength)}getByRank(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/GetByRank",e,t||{},this.methodDescriptorGetByRank,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/GetByRank",e,t||{},this.methodDescriptorGetByRank)}getRank(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/GetRank",e,t||{},this.methodDescriptorGetRank,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/GetRank",e,t||{},this.methodDescriptorGetRank)}getByScore(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/leaderboard.Leaderboard/GetByScore",e,t||{},this.methodDescriptorGetByScore,r):this.client_.unaryCall(this.hostname_+"/leaderboard.Leaderboard/GetByScore",e,t||{},this.methodDescriptorGetByScore)}}LeaderboardServiceClientPb.LeaderboardClient=LeaderboardClient;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$1(t,e,r);return __setModuleDefault$1(t,e),t};Object.defineProperty(dist,"__esModule",{value:!0}),dist.leaderboard=dist.ping=dist.vectorindex=dist.token=dist.auth=dist.control=dist.cache=void 0,dist.cache=__importStar$1(CacheclientServiceClientPb),dist.control=__importStar$1(ControlclientServiceClientPb),dist.auth=__importStar$1(AuthServiceClientPb),dist.token=__importStar$1(TokenServiceClientPb),dist.vectorindex=__importStar$1(VectorindexServiceClientPb),dist.ping=__importStar$1(CachepingServiceClientPb),dist.leaderboard=__importStar$1(LeaderboardServiceClientPb);var cacheServiceErrorMapper={},hasRequiredCacheServiceErrorMapper;function requireCacheServiceErrorMapper(){if(hasRequiredCacheServiceErrorMapper)return cacheServiceErrorMapper;hasRequiredCacheServiceErrorMapper=1,Object.defineProperty(cacheServiceErrorMapper,"__esModule",{value:!0}),cacheServiceErrorMapper.cacheServiceErrorMapper=void 0;const e=requireSrc(),t=grpcWeb$8;return cacheServiceErrorMapper.cacheServiceErrorMapper=function(r){const o=[(null==r?void 0:r.message)||"Unable to process request",null==r?void 0:r.code,null==r?void 0:r.metadata,null==r?void 0:r.stack];switch(null==r?void 0:r.code){case t.StatusCode.PERMISSION_DENIED:return new e.PermissionError(...o);case t.StatusCode.DATA_LOSS:case t.StatusCode.INTERNAL:case t.StatusCode.ABORTED:return new e.InternalServerError(...o);case t.StatusCode.UNKNOWN:return new e.UnknownServiceError(...o);case t.StatusCode.UNAVAILABLE:return new e.ServerUnavailableError(...o);case t.StatusCode.NOT_FOUND:return new e.NotFoundError(...o);case t.StatusCode.OUT_OF_RANGE:case t.StatusCode.UNIMPLEMENTED:return new e.BadRequestError(...o);case t.StatusCode.FAILED_PRECONDITION:return new e.FailedPreconditionError(...o);case t.StatusCode.INVALID_ARGUMENT:return new e.InvalidArgumentError(...o);case t.StatusCode.CANCELLED:return new e.CancelledError(...o);case t.StatusCode.DEADLINE_EXCEEDED:return new e.TimeoutError(...o);case t.StatusCode.UNAUTHENTICATED:return new e.AuthenticationError(...o);case t.StatusCode.RESOURCE_EXHAUSTED:return new e.LimitExceededError(...o);case t.StatusCode.ALREADY_EXISTS:return new e.AlreadyExistsError(...o);default:return new e.UnknownError(...o)}},cacheServiceErrorMapper}var errors$1={},errorUtils={},errors={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.UnknownServiceError=e.UnknownError=e.TimeoutError=e.ServerUnavailableError=e.PermissionError=e.NotFoundError=e.LimitExceededError=e.InvalidArgumentError=e.InternalServerError=e.FailedPreconditionError=e.CancelledError=e.BadRequestError=e.AuthenticationError=e.AlreadyExistsError=e.SdkError=e.MomentoErrorTransportDetails=e.MomentoGrpcErrorDetails=e.MomentoErrorCode=void 0,function(e){e.INVALID_ARGUMENT_ERROR="INVALID_ARGUMENT_ERROR",e.UNKNOWN_SERVICE_ERROR="UNKNOWN_SERVICE_ERROR",e.ALREADY_EXISTS_ERROR="ALREADY_EXISTS_ERROR",e.NOT_FOUND_ERROR="NOT_FOUND_ERROR",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.PERMISSION_ERROR="PERMISSION_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.CANCELLED_ERROR="CANCELLED_ERROR",e.LIMIT_EXCEEDED_ERROR="LIMIT_EXCEEDED_ERROR",e.BAD_REQUEST_ERROR="BAD_REQUEST_ERROR",e.TIMEOUT_ERROR="TIMEOUT_ERROR",e.SERVER_UNAVAILABLE="SERVER_UNAVAILABLE",e.CLIENT_RESOURCE_EXHAUSTED="CLIENT_RESOURCE_EXHAUSTED",e.FAILED_PRECONDITION_ERROR="FAILED_PRECONDITION_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t=e.MomentoErrorCode||(e.MomentoErrorCode={}));class r{constructor(e,t,r){this.code=e,this.details=t,this.metadata=r}}e.MomentoGrpcErrorDetails=r;class o{constructor(e){this.grpc=e}}e.MomentoErrorTransportDetails=o;class i extends Error{constructor(e,t=0,i=void 0,s=void 0){super(e);const n=new r(t,e,i);this._transportDetails=new o(n),this.stack=null!=s?s:void 0}wrappedErrorMessage(){return`${this._messageWrapper}: ${this.message}`}errorCode(){return this._errorCode}transportDetails(){return this._transportDetails}}e.SdkError=i;e.AlreadyExistsError=class extends i{constructor(){super(...arguments),this._errorCode=t.ALREADY_EXISTS_ERROR,this._messageWrapper="A cache with the specified name already exists.  To resolve this error, either delete the existing cache and make a new one, or use a different name"}};e.AuthenticationError=class extends i{constructor(){super(...arguments),this._errorCode=t.AUTHENTICATION_ERROR,this._messageWrapper="Invalid authentication credentials to connect to cache service"}};e.BadRequestError=class extends i{constructor(){super(...arguments),this._errorCode=t.BAD_REQUEST_ERROR,this._messageWrapper="The request was invalid; please contact us at support@momentohq.com"}};e.CancelledError=class extends i{constructor(){super(...arguments),this._errorCode=t.CANCELLED_ERROR,this._messageWrapper="The request was cancelled by the server; please contact us at support@momentohq.com"}};e.FailedPreconditionError=class extends i{constructor(){super(...arguments),this._errorCode=t.FAILED_PRECONDITION_ERROR,this._messageWrapper="System is not in a state required for the operation's execution"}};e.InternalServerError=class extends i{constructor(){super(...arguments),this._errorCode=t.INTERNAL_SERVER_ERROR,this._messageWrapper="An unexpected error occurred while trying to fulfill the request; please contact us at support@momentohq.com"}};e.InvalidArgumentError=class extends i{constructor(){super(...arguments),this._errorCode=t.INVALID_ARGUMENT_ERROR,this._messageWrapper="Invalid argument passed to Momento client"}};e.LimitExceededError=class extends i{constructor(){super(...arguments),this._errorCode=t.LIMIT_EXCEEDED_ERROR,this._messageWrapper="Request rate, bandwidth, or object size exceeded the limits for this account.  To resolve this error, reduce your usage as appropriate or contact us at support@momentohq.com to request a limit increase"}};e.NotFoundError=class extends i{constructor(){super(...arguments),this._errorCode=t.NOT_FOUND_ERROR,this._messageWrapper="A cache with the specified name does not exist.  To resolve this error, make sure you have created the cache before attempting to use it"}};e.PermissionError=class extends i{constructor(){super(...arguments),this._errorCode=t.PERMISSION_ERROR,this._messageWrapper="Insufficient permissions to perform an operation on a cache"}};e.ServerUnavailableError=class extends i{constructor(){super(...arguments),this._errorCode=t.SERVER_UNAVAILABLE,this._messageWrapper="The server was unable to handle the request; consider retrying.  If the error persists, please contact us at support@momentohq.com"}};e.TimeoutError=class extends i{constructor(){super(...arguments),this._errorCode=t.TIMEOUT_ERROR,this._messageWrapper="The client's configured timeout was exceeded; you may need to use a Configuration with more lenient timeouts"}};e.UnknownError=class extends i{constructor(){super(...arguments),this._errorCode=t.UNKNOWN_ERROR,this._messageWrapper="Unknown error has occurred"}};e.UnknownServiceError=class extends i{constructor(){super(...arguments),this._errorCode=t.UNKNOWN_SERVICE_ERROR,this._messageWrapper="Service returned an unknown response; please contact us at support@momentohq.com"}}}(errors),Object.defineProperty(errorUtils,"__esModule",{value:!0}),errorUtils.normalizeSdkError=void 0;const errors_1$5=errors;function normalizeSdkError(e){return e instanceof errors_1$5.SdkError?e:new errors_1$5.UnknownError(e.message)}errorUtils.normalizeSdkError=normalizeSdkError,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(errorUtils,e),r(errors,e)}(errors$1);var utils$1={},auth$2={};function e(e){this.message=e}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var r=String(t).replace(/=+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,n=0,a="";i=r.charAt(n++);~i&&(o=s%4?64*o+i:i,s++%4)?a+=String.fromCharCode(255&o>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function t(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return r(t)}}function n(e){this.message=e}function o(e,r){if("string"!=typeof e)throw new n("Invalid token specified");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(t(e.split(".")[o]))}catch(e){throw new n("Invalid token specified: "+e.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze({__proto__:null,InvalidTokenError:n,default:o}),require$$1=getAugmentedNamespace(jwtDecode_esm),validators={},string={},buffer={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[1];return 3*(t[0]+r)/4-r}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,o=getLens(e),i=o[0],s=o[1],n=new Arr(_byteLength(e,i,s)),a=0,l=s>0?i-4:i;for(r=0;r<l;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],n[a++]=t>>16&255,n[a++]=t>>8&255,n[a++]=255&t;return 2===s&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,n[a++]=255&t),1===s&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,n[a++]=t>>8&255,n[a++]=255&t),n}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var o=[],i=t;i<r;i+=3)o.push(tripletToBase64((e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2])));return o.join("")}function fromByteArray(e){for(var t,r=e.length,o=r%3,i=[],s=16383,n=0,a=r-o;n<a;n+=s)i.push(encodeChunk(e,n,n+s>a?a:n+s));return 1===o?i.push(lookup[(t=e[r-1])>>2]+lookup[t<<4&63]+"=="):2===o&&i.push(lookup[(t=(e[r-2]<<8)+e[r-1])>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"="),i.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,o,i){var s,n,a=8*i-o-1,l=(1<<a)-1,c=l>>1,u=-7,p=r?i-1:0,d=r?-1:1,h=e[t+p];for(p+=d,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+e[t+p],p+=d,u-=8);for(n=s&(1<<-u)-1,s>>=-u,u+=o;u>0;n=256*n+e[t+p],p+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return n?NaN:1/0*(h?-1:1);n+=Math.pow(2,o),s-=c}return(h?-1:1)*n*Math.pow(2,s-o)},write:function(e,t,r,o,i,s){var n,a,l,c=8*s-i-1,u=(1<<c)-1,p=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:s-1,g=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,n=u):(n=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-n))<1&&(n--,l*=2),(t+=n+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(n++,l/=2),n+p>=u?(a=0,n=u):n+p>=1?(a=(t*l-1)*Math.pow(2,i),n+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),n=0));i>=8;e[r+h]=255&a,h+=g,a/=256,i-=8);for(n=n<<i|a,c+=i;c>0;e[r+h]=255&n,h+=g,n/=256,c-=8);e[r+h-g]|=128*f}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(e){const t=base64Js,r=ieee754,o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=n,e.SlowBuffer=function(e){+e!=e&&(e=0);return n.alloc(+e)},e.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,n.prototype),t}function n(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!n.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|h(e,t);let o=s(r);const i=o.write(e,t);i!==r&&(o=o.slice(0,i));return o}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return n.from(o,t,r);const i=function(e){if(n.isBuffer(e)){const t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?s(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),s(e<0?0:0|d(e))}function u(e){const t=e.length<0?0:0|d(e.length),r=s(t);for(let o=0;o<t;o+=1)r[o]=255&e[o];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let o;return o=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(o,n.prototype),o}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(i)return o?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return w(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function f(e,t,r){const o=e[t];e[t]=e[r],e[r]=o}function _(e,t,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=n.from(t,o)),n.isBuffer(t))return 0===t.length?-1:m(e,t,r,o,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,o,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,o,i){let s,n=1,a=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;n=2,a/=2,l/=2,r/=2}function c(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(i){let o=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===o?0:s-o)){if(-1===o&&(o=s),s-o+1===l)return o*n}else-1!==o&&(s-=s-o),o=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){let r=!0;for(let o=0;o<l;o++)if(c(e,s+o)!==c(t,o)){r=!1;break}if(r)return s}return-1}function y(e,t,r,o){r=Number(r)||0;const i=e.length-r;o?(o=Number(o))>i&&(o=i):o=i;const s=t.length;let n;for(o>s/2&&(o=s/2),n=0;n<o;++n){const o=parseInt(t.substr(2*n,2),16);if(K(o))return n;e[r+n]=o}return n}function b(e,t,r,o){return V(q(t,e.length-r),e,r,o)}function S(e,t,r,o){return V(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,o)}function R(e,t,r,o){return V($(t),e,r,o)}function v(e,t,r,o){return V(function(e,t){let r,o,i;const s=[];for(let n=0;n<e.length&&!((t-=2)<0);++n)r=e.charCodeAt(n),o=r>>8,i=r%256,s.push(i),s.push(o);return s}(t,e.length-r),e,r,o)}function x(e,r,o){return t.fromByteArray(0===r&&o===e.length?e:e.slice(r,o))}function E(e,t,r){r=Math.min(e.length,r);const o=[];let i=t;for(;i<r;){const t=e[i];let s=null,n=t>239?4:t>223?3:t>191?2:1;if(i+n<=r){let r,o,a,l;switch(n){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(s=l));break;case 3:r=e[i+1],o=e[i+2],128==(192&r)&&128==(192&o)&&(l=(15&t)<<12|(63&r)<<6|63&o,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:r=e[i+1],o=e[i+2],a=e[i+3],128==(192&r)&&128==(192&o)&&128==(192&a)&&(l=(15&t)<<18|(63&r)<<12|(63&o)<<6|63&a,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,n=1):s>65535&&(s-=65536,o.push(s>>>10&1023|55296),s=56320|1023&s),o.push(s),i+=n}return function(e){const t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);let r="",o=0;for(;o<t;)r+=String.fromCharCode.apply(String,e.slice(o,o+=M));return r}(o)}e.kMaxLength=i,!(n.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())&&"undefined"!=typeof console&&console,Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},n.allocUnsafe=function(e){return c(e)},n.allocUnsafeSlow=function(e){return c(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(H(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,o=t.length;for(let i=0,s=Math.min(r,o);i<s;++i)if(e[i]!==t[i]){r=e[i],o=t[i];break}return r<o?-1:o<r?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const o=n.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(H(t,Uint8Array))i+t.length>o.length?(n.isBuffer(t)||(t=n.from(t)),t.copy(o,i)):Uint8Array.prototype.set.call(o,t,i);else{if(!n.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(o,i)}i+=t.length}return o},n.byteLength=h,n.prototype._isBuffer=!0,n.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)f(this,t,t+1);return this},n.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},n.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},n.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(n.prototype[o]=n.prototype.inspect),n.prototype.compare=function(e,t,r,o,i){if(H(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=r)return 0;if(o>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(o>>>=0),a=(r>>>=0)-(t>>>=0);const l=Math.min(s,a),c=this.slice(o,i),u=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:a<s?1:0},n.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},n.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},n.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},n.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let s=!1;for(;;)switch(o){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const M=4096;function T(e,t,r){let o="";r=Math.min(e.length,r);for(let i=t;i<r;++i)o+=String.fromCharCode(127&e[i]);return o}function w(e,t,r){let o="";r=Math.min(e.length,r);for(let i=t;i<r;++i)o+=String.fromCharCode(e[i]);return o}function F(e,t,r){const o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);let i="";for(let o=t;o<r;++o)i+=Z[e[o]];return i}function B(e,t,r){const o=e.slice(t,r);let i="";for(let e=0;e<o.length-1;e+=2)i+=String.fromCharCode(o[e]+256*o[e+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,o,i,s){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function D(e,t,r,o,i){j(t,o,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let n=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=n,n>>=8,e[r++]=n,n>>=8,e[r++]=n,n>>=8,e[r++]=n,r}function I(e,t,r,o,i){j(t,o,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let n=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=n,n>>=8,e[r+2]=n,n>>=8,e[r+1]=n,n>>=8,e[r]=n,r+8}function O(e,t,r,o,i,s){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,o,i,s){return t=+t,o>>>=0,s||O(e,0,o,4),r.write(e,t,o,i,23,4),o+4}function A(e,t,o,i,s){return t=+t,o>>>=0,s||O(e,0,o,8),r.write(e,t,o,i,52,8),o+8}n.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const o=this.subarray(e,t);return Object.setPrototypeOf(o,n.prototype),o},n.prototype.readUintLE=n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let o=this[e],i=1,s=0;for(;++s<t&&(i*=256);)o+=this[e+s]*i;return o},n.prototype.readUintBE=n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let o=this[e+--t],i=1;for(;t>0&&(i*=256);)o+=this[e+--t]*i;return o},n.prototype.readUint8=n.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readBigUInt64LE=X((function(e){U(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const o=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(o)+(BigInt(i)<<BigInt(32))})),n.prototype.readBigUInt64BE=X((function(e){U(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const o=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(o)<<BigInt(32))+BigInt(i)})),n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let o=this[e],i=1,s=0;for(;++s<t&&(i*=256);)o+=this[e+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let o=t,i=1,s=this[e+--o];for(;o>0&&(i*=256);)s+=this[e+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},n.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readBigInt64LE=X((function(e){U(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);return(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),n.prototype.readBigInt64BE=X((function(e){U(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const o=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(o)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),n.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),r.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),r.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),r.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),r.read(this,e,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){L(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){L(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},n.prototype.writeUint8=n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeBigUInt64LE=X((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),n.prototype.writeBigUInt64BE=X((function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),n.prototype.writeIntLE=function(e,t,r,o){if(e=+e,t>>>=0,!o){const o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}let i=0,s=1,n=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===n&&0!==this[t+i-1]&&(n=1),this[t+i]=(e/s>>0)-n&255;return t+r},n.prototype.writeIntBE=function(e,t,r,o){if(e=+e,t>>>=0,!o){const o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}let i=r-1,s=1,n=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===n&&0!==this[t+i+1]&&(n=1),this[t+i]=(e/s>>0)-n&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeBigInt64LE=X((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),n.prototype.writeBigInt64BE=X((function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),n.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,o){if(!n.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);const i=o-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,o):Uint8Array.prototype.set.call(e,this.subarray(r,o),t),i},n.prototype.fill=function(e,t,r,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!n.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){const t=e.charCodeAt(0);("utf8"===o&&t<128||"latin1"===o)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=n.isBuffer(e)?e:n.from(e,o),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};const k={};function z(e,t,r){k[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length;const o="-"===e[0]?1:0;for(;r>=o+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,o,i,s){if(e>r||e<t){const o="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(s+1)}${o}`:`>= -(2${o} ** ${8*(s+1)-1}${o}) and < 2 ** ${8*(s+1)-1}${o}`:`>= ${t}${o} and <= ${r}${o}`,new k.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){U(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||G(t,e.length-(r+1))}(o,i,s)}function U(e,t){if("number"!=typeof e)throw new k.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,r){if(Math.floor(e)!==e)throw U(e,r),new k.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new k.ERR_BUFFER_OUT_OF_BOUNDS;throw new k.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,r){let o=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=N(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=N(i)),i+="n"),o+=` It must be ${t}. Received ${i}`,o}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const o=e.length;let i=null;const s=[];for(let n=0;n<o;++n){if(r=e.charCodeAt(n),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(n+1===o){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,o){let i;for(i=0;i<o&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const o=16*r;for(let i=0;i<16;++i)t[o+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}})(buffer),Object.defineProperty(string,"__esModule",{value:!0}),string.encodeToBase64=string.decodeFromBase64=void 0;const buffer_1=buffer,decodeFromBase64=e=>buffer_1.Buffer.from(e,"base64").toString("utf8");string.decodeFromBase64=decodeFromBase64;const encodeToBase64=e=>buffer_1.Buffer.from(e,"utf-8").toString("base64");string.encodeToBase64=encodeToBase64,Object.defineProperty(validators,"__esModule",{value:!0}),validators.validateLeaderboardNumberOfElements=validators.validateLeaderboardCount=validators.validateLeaderboardOffset=validators.validateLeaderboardRanks=validators.validateLeaderboardName=validators.isBase64=validators.validateDisposableTokenTokenID=validators.validateDisposableTokenExpiry=validators.validateTimeout=validators.validateValidForSeconds=validators.validateTtlMinutes=validators.validateTopK=validators.validateNumDimensions=validators.validateIndexName=validators.validateTopicName=validators.validateListSliceStartEnd=validators.validateListName=validators.validateDictionaryName=validators.validateSortedSetCount=validators.validateSortedSetOffset=validators.validateSortedSetScores=validators.validateSortedSetRanks=validators.validateSortedSetName=validators.validateSetName=validators.validateCacheKeyOrPrefix=validators.validateCacheName=void 0;const errors_1$4=errors$1,string_1$1=string;function validateCacheName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("cache name must not be empty")}function validateCacheKeyOrPrefix(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("cache key or key prefix must not be empty")}function validateSetName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("set name must not be empty")}function validateSortedSetName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("sorted set name must not be empty")}function validateSortedSetRanks(e,t){if(void 0!==t){if(e>0&&t>0&&e>t)throw new errors_1$4.InvalidArgumentError("start rank must be less than end rank");if(e<0&&t<0&&e>=t)throw new errors_1$4.InvalidArgumentError("negative start rank must be less than negative end rank")}}function validateSortedSetScores(e,t){if(void 0!==e&&void 0!==t&&e>t)throw new errors_1$4.InvalidArgumentError("minScore must be less than or equal to maxScore")}function validateSortedSetOffset(e){if(e<0)throw new errors_1$4.InvalidArgumentError("offset must be non-negative (>= 0)")}function validateSortedSetCount(e){if(e<1)throw new errors_1$4.InvalidArgumentError("count must be strictly positive (> 0)")}function validateDictionaryName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("dictionary name must not be empty")}function validateListName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("list name must not be empty")}function validateListSliceStartEnd(e,t){if(void 0!==e&&void 0!==t&&!(e>0||t<0)&&t<=e)throw new errors_1$4.InvalidArgumentError("endIndex (exclusive) must be larger than startIndex (inclusive)")}function validateTopicName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("topic name must not be empty")}function validateIndexName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("index name must not be empty")}function validateNumDimensions(e){if(e<=0)throw new errors_1$4.InvalidArgumentError("numDimensions must be greater than zero")}function validateTopK(e){if(e<=0)throw new errors_1$4.InvalidArgumentError("topK must be greater than zero")}function validateTtlMinutes(e){if(e<0)throw new errors_1$4.InvalidArgumentError("ttlMinutes must be positive")}function validateValidForSeconds(e){if(e<0)throw new errors_1$4.InvalidArgumentError("validForSeconds must be positive")}function validateTimeout(e){if(e<0)throw new errors_1$4.InvalidArgumentError("timeout must be positive")}function validateDisposableTokenExpiry(e){if(!e.doesExpire())throw new errors_1$4.InvalidArgumentError("disposable tokens must have an expiry");if(e.seconds()<0)throw new errors_1$4.InvalidArgumentError("disposable token expiry must be positive");if(e.seconds()>3600)throw new errors_1$4.InvalidArgumentError("disposable tokens must expire within 1 hour")}function validateDisposableTokenTokenID(e){if(e.length>64)throw new errors_1$4.InvalidArgumentError("TokenID must be less than or equal to 64 characters.")}function isEmpty(e){return!e.trim()}function isBase64(e){try{return(0,string_1$1.encodeToBase64)((0,string_1$1.decodeFromBase64)(e))===e}catch(e){return!1}}function validateLeaderboardName(e){if(isEmpty(e))throw new errors_1$4.InvalidArgumentError("leaderboard name must not be empty")}function validateLeaderboardRanks(e,t){if(e>0&&t>0&&e>=t)throw new errors_1$4.InvalidArgumentError("start rank must be less than end rank");if(e<0||t<0)throw new errors_1$4.InvalidArgumentError("ranks must be positive")}function validateLeaderboardOffset(e){if(e<0)throw new errors_1$4.InvalidArgumentError("offset must be non-negative (>= 0)")}function validateLeaderboardCount(e){if(e<1)throw new errors_1$4.InvalidArgumentError("count must be strictly positive (> 0)")}function validateLeaderboardNumberOfElements(e){if(e<1)throw new errors_1$4.InvalidArgumentError("must provide at least one element")}validators.validateCacheName=validateCacheName,validators.validateCacheKeyOrPrefix=validateCacheKeyOrPrefix,validators.validateSetName=validateSetName,validators.validateSortedSetName=validateSortedSetName,validators.validateSortedSetRanks=validateSortedSetRanks,validators.validateSortedSetScores=validateSortedSetScores,validators.validateSortedSetOffset=validateSortedSetOffset,validators.validateSortedSetCount=validateSortedSetCount,validators.validateDictionaryName=validateDictionaryName,validators.validateListName=validateListName,validators.validateListSliceStartEnd=validateListSliceStartEnd,validators.validateTopicName=validateTopicName,validators.validateIndexName=validateIndexName,validators.validateNumDimensions=validateNumDimensions,validators.validateTopK=validateTopK,validators.validateTtlMinutes=validateTtlMinutes,validators.validateValidForSeconds=validateValidForSeconds,validators.validateTimeout=validateTimeout,validators.validateDisposableTokenExpiry=validateDisposableTokenExpiry,validators.validateDisposableTokenTokenID=validateDisposableTokenTokenID,validators.isBase64=isBase64,validators.validateLeaderboardName=validateLeaderboardName,validators.validateLeaderboardRanks=validateLeaderboardRanks,validators.validateLeaderboardOffset=validateLeaderboardOffset,validators.validateLeaderboardCount=validateLeaderboardCount,validators.validateLeaderboardNumberOfElements=validateLeaderboardNumberOfElements;var permissionScope={};!function(e){var t,r;function o(e){return"role"in e&&"cache"in e&&!("topic"in e)}function i(e){return"role"in e&&"cache"in e&&"topic"in e}function s(e){if(!("permissions"in e))return!1;return e.permissions.every((e=>function(e){return o(e)||i(e)}(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.PredefinedScope=e.asPermissionsObject=e.isPermissionsObject=e.AllDataReadWrite=e.asTopicPermission=e.isTopicPermission=e.isTopicName=e.TopicRole=e.asCachePermission=e.isCachePermission=e.isCacheName=e.AllCacheItems=e.AllTopics=e.AllCaches=e.CacheRole=void 0,function(e){e.ReadWrite="readwrite",e.ReadOnly="readonly",e.WriteOnly="writeonly"}(t=e.CacheRole||(e.CacheRole={})),e.AllCaches=Symbol(),e.AllTopics=Symbol(),e.AllCacheItems=Symbol(),e.isCacheName=function(t){return t!==e.AllCaches&&"name"in t},e.isCachePermission=o,e.asCachePermission=function(e){if(!o(e))throw new Error(`permission is not a CachePermission object: ${JSON.stringify(e)}`);return e},function(e){e.PublishSubscribe="publishsubscribe",e.SubscribeOnly="subscribeonly",e.PublishOnly="publishonly"}(r=e.TopicRole||(e.TopicRole={})),e.isTopicName=function(t){return t!==e.AllTopics&&"name"in t},e.isTopicPermission=i,e.asTopicPermission=function(e){if(!i(e))throw new Error(`permission is not a TopicPermission object: ${JSON.stringify(e)}`);return e},e.AllDataReadWrite={permissions:[{role:t.ReadWrite,cache:e.AllCaches},{role:r.PublishSubscribe,cache:e.AllCaches,topic:e.AllTopics}]},e.isPermissionsObject=s,e.asPermissionsObject=function(e){if(!s(e))throw new Error(`Token scope is not a Permissions object: ${JSON.stringify(e)}`);return e};e.PredefinedScope=class{}}(permissionScope),Object.defineProperty(auth$2,"__esModule",{value:!0}),auth$2.InternalSuperUserPermissions=auth$2.decodeAuthToken=auth$2.populateAllEndpointsFromBaseEndpoint=void 0;const errors_1$3=errors$1,jwt_decode_1=require$$1,validators_1=validators,string_1=string,permission_scope_1$2=permissionScope;function decodeAuthTokenClaims(e){return(0,jwt_decode_1.default)(e)}function populateAllEndpointsFromBaseEndpoint(e){return{controlEndpoint:`control.${e}`,cacheEndpoint:`cache.${e}`,tokenEndpoint:`token.${e}`,vectorEndpoint:`vector.${e}`}}auth$2.populateAllEndpointsFromBaseEndpoint=populateAllEndpointsFromBaseEndpoint;const decodeAuthToken=e=>{if(!e)throw new errors_1$3.InvalidArgumentError("malformed auth token");try{if((0,validators_1.isBase64)(e)){const t=JSON.parse((0,string_1.decodeFromBase64)(e));if(!t.endpoint||!t.api_key)throw new errors_1$3.InvalidArgumentError("failed to parse token");return{...populateAllEndpointsFromBaseEndpoint(t.endpoint),authToken:t.api_key}}{const t=decodeAuthTokenClaims(e);return{controlEndpoint:t.cp,cacheEndpoint:t.c,tokenEndpoint:t.c,vectorEndpoint:t.c,authToken:e}}}catch(e){throw new errors_1$3.InvalidArgumentError(`failed to parse token: ${e}`)}};auth$2.decodeAuthToken=decodeAuthToken;class InternalSuperUserPermissions extends permission_scope_1$2.PredefinedScope{}auth$2.InternalSuperUserPermissions=InternalSuperUserPermissions;var collections={};function range(e){return[...Array(e).keys()]}Object.defineProperty(collections,"__esModule",{value:!0}),collections.range=void 0,collections.range=range;var display={};function truncateString(e,t=32){return e.length>t?e.substring(0,t)+"...":e}Object.defineProperty(display,"__esModule",{value:!0}),display.truncateStringArray=display.truncateString=void 0,display.truncateString=truncateString;const DISPLAY_SIZE_LIMIT=5;function truncateStringArrayToSize(e,t){return e.length<=t?e:e.slice(0,t).concat(["..."])}function truncateStringArray(e,t=DISPLAY_SIZE_LIMIT){return truncateStringArrayToSize(e,t).map((e=>truncateString(e)))}display.truncateStringArray=truncateStringArray;var object={};function fromEntries(e){return e.reduce(((e,[t,r])=>({...e,[t]:r})),{})}Object.defineProperty(object,"__esModule",{value:!0}),object.fromEntries=void 0,object.fromEntries=fromEntries;var sleep$1={};Object.defineProperty(sleep$1,"__esModule",{value:!0}),sleep$1.sleep=void 0;const sleep=e=>new Promise((t=>setTimeout(t,e)));sleep$1.sleep=sleep,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(auth$2,e),r(collections,e),r(display,e),r(object,e),r(sleep$1,e),r(string,e),r(validators,e)}(utils$1);var webClientUtils={};function convertToB64String(e){return"string"==typeof e?btoa(e):btoa(String.fromCharCode.apply(null,e))}function createCallMetadata(e,t){return{cache:e,deadline:(Date.now()+t).toString()}}function getWebControlEndpoint(e){return e.areEndpointsOverridden()?withProtocolPrefix(e.getControlEndpoint()):withProtocolPrefix(`web.${e.getControlEndpoint()}`)}function getWebCacheEndpoint(e){return e.areEndpointsOverridden()?withProtocolPrefix(e.getCacheEndpoint()):withProtocolPrefix(`web.${e.getCacheEndpoint()}`)}function getWebTokenEndpoint(e){return e.areEndpointsOverridden()?withProtocolPrefix(e.getTokenEndpoint()):withProtocolPrefix(`web.${e.getTokenEndpoint()}`)}function getWebVectorEndpoint(e){return e.areEndpointsOverridden()?withProtocolPrefix(e.getVectorEndpoint()):withProtocolPrefix(`web.${e.getVectorEndpoint()}`)}function withProtocolPrefix(e){return e.match(/^http(?:s)?:\/\//)?e:`https://${e}`}Object.defineProperty(webClientUtils,"__esModule",{value:!0}),webClientUtils.getWebVectorEndpoint=webClientUtils.getWebTokenEndpoint=webClientUtils.getWebCacheEndpoint=webClientUtils.getWebControlEndpoint=webClientUtils.createCallMetadata=webClientUtils.convertToB64String=void 0,webClientUtils.convertToB64String=convertToB64String,webClientUtils.createCallMetadata=createCallMetadata,webClientUtils.getWebControlEndpoint=getWebControlEndpoint,webClientUtils.getWebCacheEndpoint=getWebCacheEndpoint,webClientUtils.getWebTokenEndpoint=getWebTokenEndpoint,webClientUtils.getWebVectorEndpoint=getWebVectorEndpoint;var clientMetadataProvider={},name="@gomomento/sdk-web",version="1.45.5",description="Client SDK for Momento services",main="dist/src/index.js",files=["dist/src","dist/package.json"],types="dist/src/index.d.ts",repository={type:"git",url:"https://github.com/momentohq/client-sdk-nodejs"},scripts={prebuild:"eslint . --ext .ts",test:"jest --testPathIgnorePatterns auth-client.test.ts --reporters=jest-silent-reporter","unit-test":"jest unit --reporters=jest-silent-reporter","integration-test-auth":"jest auth-client.test.ts --reporters=jest-silent-reporter","integration-test-vector":"jest vector-control-plane.test.ts vector-data-plane.test.ts --reporters=jest-silent-reporter","integration-test":'jest integration --reporters=jest-silent-reporter --testPathIgnorePatterns "auth-client.test.ts|vector-control-plane.test.ts|vector-data-plane.test.ts"',"build-deps":"cd ../core && npm run build && cd - && cd ../common-integration-tests && npm run build && cd -","build-and-run-tests":"npm run build-deps && jest --testPathIgnorePatterns auth-client.test.ts --maxWorkers 1",lint:"eslint . --ext .ts",format:"eslint . --ext .ts --fix",watch:"tsc -w",build:"cd ../core && npm run build && cd - && rm -rf dist && tsc"},author="",license="Apache-2.0",devDependencies={"@gomomento/common-integration-tests":"file:../common-integration-tests/gomomento-common-integration-tests-1.45.5.tgz","@types/google-protobuf":"3.15.6","@types/jest":"^27.0.2","@types/node":"14.18.3","@typescript-eslint/eslint-plugin":"^5.0.0","@typescript-eslint/parser":"^5.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-config-standard":"^16.0.3","eslint-plugin-import":"^2.25.1","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^5.1.0",jest:"^29","jest-environment-jsdom":"^29.5.0","jest-extended":"^3.2.3","jest-silent-reporter":"^0.5.0",prettier:"^2.4.1","ts-jest":"^29","ts-node":"^10.3.0",typescript:"^4.4.3",xhr2:"^0.2.1"},dependencies={"@gomomento/generated-types-webtext":"0.87.0","@gomomento/sdk-core":"1.45.5","google-protobuf":"3.21.2","grpc-web":"1.4.2","jwt-decode":"3.1.2"},engines={node:">= 14"},require$$0={name:name,version:version,description:description,main:main,files:files,types:types,repository:repository,scripts:scripts,author:author,license:license,devDependencies:devDependencies,dependencies:dependencies,engines:engines};Object.defineProperty(clientMetadataProvider,"__esModule",{value:!0}),clientMetadataProvider.ClientMetadataProvider=void 0;const package_json_1=require$$0;class ClientMetadataProvider{constructor(e){this.isAgentSent=!1,this.authToken=e.authToken}createClientMetadata(){const e={};return this.authToken&&(e.authorization=this.authToken),this.isAgentSent||(this.isAgentSent=!0,e.Agent=`${ClientMetadataProvider.agentName}:${package_json_1.version}`),e}}var hasRequiredCacheControlClient;function requireCacheControlClient(){if(hasRequiredCacheControlClient)return cacheControlClient;hasRequiredCacheControlClient=1,Object.defineProperty(cacheControlClient,"__esModule",{value:!0}),cacheControlClient.CacheControlClient=void 0;const e=dist,t=requireSrc(),r=grpcWeb$8,o=controlclient_pb$1,i=requireCacheServiceErrorMapper(),s=errors$1,n=utils$1,a=webClientUtils,l=clientMetadataProvider;return cacheControlClient.CacheControlClient=class{constructor(t){this.logger=t.configuration.getLoggerFactory().getLogger(this),this.logger.debug(`Creating control client using endpoint: '${(0,a.getWebControlEndpoint)(t.credentialProvider)}`),this.clientMetadataProvider=new l.ClientMetadataProvider({authToken:t.credentialProvider.getAuthToken()}),this.clientWrapper=new e.control.ScsControlClient((0,a.getWebControlEndpoint)(t.credentialProvider),null,{})}async createCache(e){try{(0,n.validateCacheName)(e)}catch(e){return new t.CreateCache.Error((0,s.normalizeSdkError)(e))}this.logger.info(`Creating cache: ${e}`);const a=new o._CreateCacheRequest;return a.setCacheName(e),await new Promise((e=>{this.clientWrapper.createCache(a,this.clientMetadataProvider.createClientMetadata(),((o,s)=>{e(o?o.code===r.StatusCode.ALREADY_EXISTS?new t.CreateCache.AlreadyExists:new t.CreateCache.Error((0,i.cacheServiceErrorMapper)(o)):new t.CreateCache.Success)}))}))}async deleteCache(e){try{(0,n.validateCacheName)(e)}catch(e){return new t.DeleteCache.Error((0,s.normalizeSdkError)(e))}const r=new o._DeleteCacheRequest;return r.setCacheName(e),this.logger.info(`Deleting cache: ${e}`),await new Promise((e=>{this.clientWrapper.deleteCache(r,this.clientMetadataProvider.createClientMetadata(),((r,o)=>{e(r?new t.DeleteCache.Error((0,i.cacheServiceErrorMapper)(r)):new t.DeleteCache.Success)}))}))}async flushCache(e){try{(0,n.validateCacheName)(e)}catch(e){return new t.CacheFlush.Error((0,s.normalizeSdkError)(e))}return this.logger.trace(`Flushing cache: ${e}`),await this.sendFlushCache(e)}async sendFlushCache(e){const r=new o._FlushCacheRequest;return r.setCacheName(e),await new Promise((e=>{this.clientWrapper.flushCache(r,this.clientMetadataProvider.createClientMetadata(),((r,o)=>{e(o?new t.CacheFlush.Success:new t.CacheFlush.Error((0,i.cacheServiceErrorMapper)(r)))}))}))}async listCaches(){const e=new o._ListCachesRequest;return e.setNextToken(""),this.logger.debug("Issuing 'listCaches' request"),await new Promise((r=>{this.clientWrapper.listCaches(e,this.clientMetadataProvider.createClientMetadata(),((e,o)=>{if(e)r(new t.ListCaches.Error((0,i.cacheServiceErrorMapper)(e)));else{const e=o.getCacheList().map((e=>{var r,o,i,s,n,a,l;const c=e.getCacheName(),u={maxPublishMessageSizeKb:(null===(r=e.getTopicLimits())||void 0===r?void 0:r.getMaxPublishMessageSizeKb())||0,maxSubscriptionCount:(null===(o=e.getTopicLimits())||void 0===o?void 0:o.getMaxSubscriptionCount())||0,maxPublishRate:(null===(i=e.getTopicLimits())||void 0===i?void 0:i.getMaxPublishRate())||0},p={maxTtlSeconds:(null===(s=e.getCacheLimits())||void 0===s?void 0:s.getMaxTtlSeconds())||0,maxItemSizeKb:(null===(n=e.getCacheLimits())||void 0===n?void 0:n.getMaxItemSizeKb())||0,maxThroughputKbps:(null===(a=e.getCacheLimits())||void 0===a?void 0:a.getMaxThroughputKbps())||0,maxTrafficRate:(null===(l=e.getCacheLimits())||void 0===l?void 0:l.getMaxTrafficRate())||0};return new t.CacheInfo(c,u,p)}));r(new t.ListCaches.Success(e))}}))}))}},cacheControlClient}clientMetadataProvider.ClientMetadataProvider=ClientMetadataProvider,ClientMetadataProvider.agentName="js-web";var cacheDataClient={},grpcResponseTypes={},hasRequiredCacheDataClient;function requireCacheDataClient(){if(hasRequiredCacheDataClient)return cacheDataClient;hasRequiredCacheDataClient=1,Object.defineProperty(cacheDataClient,"__esModule",{value:!0}),cacheDataClient.CacheDataClient=void 0;const e=dist,t=requireSrc(),r=requireCacheServiceErrorMapper(),o=grpcResponseTypes,i=cacheclient_pb$1,s=utils$1,n=errors$1,a=webClientUtils,l=clientMetadataProvider;return cacheDataClient.CacheDataClient=class{constructor(t){this.logger=t.configuration.getLoggerFactory().getLogger(this),this.logger.debug(`Creating data client using endpoint: '${(0,a.getWebCacheEndpoint)(t.credentialProvider)}`),this.deadlineMillis=t.configuration.getTransportStrategy().getGrpcConfig().getDeadlineMillis(),this.defaultTtlSeconds=t.defaultTtlSeconds,this.clientMetadataProvider=new l.ClientMetadataProvider({authToken:t.credentialProvider.getAuthToken()}),this.clientWrapper=new e.cache.ScsClient((0,a.getWebCacheEndpoint)(t.credentialProvider),null,{}),this.textEncoder=new TextEncoder}async get(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheGet.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'get' request; key: ${r.toString()}`);const o=await this.sendGet(e,(0,a.convertToB64String)(r));return this.logger.trace(`'get' request result: ${o.toString()}`),o}async sendGet(e,o){const s=new i._GetRequest;return s.setCacheKey(o),await new Promise((o=>{this.clientWrapper.get(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{if(s)switch(s.getResult()){case i.ECacheResult.MISS:o(new t.CacheGet.Miss);break;case i.ECacheResult.HIT:o(new t.CacheGet.Hit(s.getCacheBody_asU8()));break;case i.ECacheResult.INVALID:case i.ECacheResult.OK:o(new t.CacheGet.Error(new t.UnknownError(s.getMessage())));break;default:o(new t.CacheGet.Error(new t.UnknownError("An unknown error occurred: "+s.getMessage())))}else o(new t.CacheGet.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async set(e,r,o,i){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheSet.Error((0,n.normalizeSdkError)(e))}if(i&&i<0)return new t.CacheSet.Error(new t.InvalidArgumentError("ttl must be a positive integer"));const l=i||this.defaultTtlSeconds;return this.logger.trace(`Issuing 'set' request; key: ${r.toString()}, value length: ${o.length}, ttl: ${l.toString()}`),await this.sendSet(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),l)}async sendSet(e,o,s,n){const l=new i._SetRequest;return l.setCacheKey(o),l.setCacheBody(s),l.setTtlMilliseconds(this.convertSecondsToMilliseconds(n)),await new Promise((o=>{this.clientWrapper.set(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheSet.Success:new t.CacheSet.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async setIfNotExists(e,r,o,i){var l;try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheSetIfNotExists.Error((0,n.normalizeSdkError)(e))}if(i&&i<0)return new t.CacheSetIfNotExists.Error(new t.InvalidArgumentError("ttl must be a positive integer"));this.logger.trace(`Issuing 'setIfNotExists' request; key: ${r.toString()}, field: ${o.toString()}, ttlSeconds: ${null!==(l=null==i?void 0:i.toString())&&void 0!==l?l:"null"}`);const c=await this.sendSetIfNotExists(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),i?1e3*i:1e3*this.defaultTtlSeconds);return this.logger.trace(`'setIfNotExists' request result: ${c.toString()}`),c}async sendSetIfNotExists(e,o,s,n){const l=new i._SetIfNotExistsRequest;return l.setCacheKey(o),l.setCacheBody(s),l.setTtlMilliseconds(n),await new Promise((o=>{this.clientWrapper.setIfNotExists(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{if(s)switch(s.getResultCase()){case i._SetIfNotExistsResponse.ResultCase.STORED:o(new t.CacheSetIfNotExists.Stored);break;case i._SetIfNotExistsResponse.ResultCase.NOT_STORED:o(new t.CacheSetIfNotExists.NotStored);break;default:o(new t.CacheGet.Error(new t.UnknownError("SetIfNotExists responded with an unknown result")))}else o(new t.CacheSetIfNotExists.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async delete(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheDelete.Error((0,n.normalizeSdkError)(e))}return this.logger.trace(`Issuing 'delete' request; key: ${r.toString()}`),await this.sendDelete(e,(0,a.convertToB64String)(r))}async sendDelete(e,o){const s=new i._DeleteRequest;return s.setCacheKey(o),await new Promise((o=>{this.clientWrapper.delete(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheDelete.Success:new t.CacheDelete.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async increment(e,r,o=1,i){var l;try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheIncrement.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'increment' request; field: ${r.toString()}, amount : ${o}, ttl: ${null!==(l=null==i?void 0:i.toString())&&void 0!==l?l:"null"}`);const c=await this.sendIncrement(e,(0,a.convertToB64String)(r),o,i||1e3*this.defaultTtlSeconds);return this.logger.trace(`'increment' request result: ${c.toString()}`),c}async sendIncrement(e,o,s=1,n){const l=new i._IncrementRequest;return l.setCacheKey(o),l.setAmount(s),l.setTtlMilliseconds(n),await new Promise((o=>{this.clientWrapper.increment(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{i?i.getValue()?o(new t.CacheIncrement.Success(i.getValue())):o(new t.CacheIncrement.Success(0)):o(new t.CacheIncrement.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async setFetch(e,r){try{(0,s.validateCacheName)(e),(0,s.validateSetName)(r)}catch(e){return new t.CacheSetFetch.Error((0,n.normalizeSdkError)(e))}return await this.sendSetFetch(e,(0,a.convertToB64String)(r))}async sendSetFetch(e,o){const s=new i._SetFetchRequest;return s.setSetName(o),await new Promise((o=>{this.clientWrapper.setFetch(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{const s=null==i?void 0:i.getFound();if(s&&s.getElementsList()){const e=s.getElementsList();o(new t.CacheSetFetch.Hit(this.convertArrayToUint8(e)))}else(null==i?void 0:i.getMissing())?o(new t.CacheSetFetch.Miss):o(new t.CacheSetFetch.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async setAddElements(e,r,o,i=t.CollectionTtl.fromCacheTtl()){try{(0,s.validateCacheName)(e),(0,s.validateSetName)(r)}catch(e){return new t.CacheSetAddElements.Error((0,n.normalizeSdkError)(e))}return await this.sendSetAddElements(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o),i.ttlMilliseconds()||1e3*this.defaultTtlSeconds,i.refreshTtl())}async sendSetAddElements(e,o,s,n,l){const c=new i._SetUnionRequest;return c.setSetName(o),c.setElementsList(s),c.setTtlMilliseconds(n),c.setRefreshTtl(l),await new Promise((o=>{this.clientWrapper.setUnion(c,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},(e=>{o(e?new t.CacheSetAddElements.Error((0,r.cacheServiceErrorMapper)(e)):new t.CacheSetAddElements.Success)}))}))}async setRemoveElements(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateSetName)(r)}catch(e){return new t.CacheSetRemoveElements.Error((0,n.normalizeSdkError)(e))}return await this.sendSetRemoveElements(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o))}async sendSetRemoveElements(e,o,s){const n=new i._SetDifferenceRequest._Subtrahend,l=new i._SetDifferenceRequest._Subtrahend._Set;l.setElementsList(s),n.setSet(l);const c=new i._SetDifferenceRequest;return c.setSetName(o),c.setSubtrahend(n),await new Promise((o=>{this.clientWrapper.setDifference(c,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},(e=>{o(e?new t.CacheSetRemoveElements.Error((0,r.cacheServiceErrorMapper)(e)):new t.CacheSetRemoveElements.Success)}))}))}async listConcatenateBack(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListConcatenateBack.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listConcatenateBack' request; listName: ${r}, values length: ${o.length}, ${l.toString()}, truncateFrontToSize: ${null!==(c=null==i?void 0:i.toString())&&void 0!==c?c:"null"}`);const u=await this.sendListConcatenateBack(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl(),i);return this.logger.trace(`'listConcatenateBack' request result: ${u.toString()}`),u}async sendListConcatenateBack(e,o,s,n,l,c){const u=new i._ListConcatenateBackRequest;return u.setListName(o),u.setValuesList(s),u.setTtlMilliseconds(n),u.setRefreshTtl(l),u.setTruncateFrontToSize(c||0),await new Promise((o=>{this.clientWrapper.listConcatenateBack(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListConcatenateBack.Success(i.getListLength()):new t.CacheListConcatenateBack.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listConcatenateFront(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListConcatenateFront.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listConcatenateFront' request; listName: ${r}, values length: ${o.length}, ${l.toString()}, truncateBackToSize: ${null!==(c=null==i?void 0:i.toString())&&void 0!==c?c:"null"}`);const u=await this.sendListConcatenateFront(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl(),i);return this.logger.trace(`'listConcatenateFront' request result: ${u.toString()}`),u}async sendListConcatenateFront(e,o,s,n,l,c){const u=new i._ListConcatenateFrontRequest;return u.setListName(o),u.setValuesList(s),u.setTtlMilliseconds(n),u.setRefreshTtl(l),u.setTruncateBackToSize(c||0),await new Promise((o=>{this.clientWrapper.listConcatenateFront(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListConcatenateFront.Success(i.getListLength()):new t.CacheListConcatenateFront.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listFetch(e,r,o,i){try{(0,s.validateCacheName)(e),(0,s.validateListName)(r),(0,s.validateListSliceStartEnd)(o,i)}catch(e){return new t.CacheListFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'listFetch' request; listName: %s, startIndex: %s, endIndex: %s",r,null!=o?o:"null",null!=i?i:"null");const l=await this.sendListFetch(e,(0,a.convertToB64String)(r),o,i);return this.logger.trace("'listFetch' request result: %s",l.toString()),l}async sendListFetch(e,o,s,n){const l=new i._ListFetchRequest;return l.setListName(o),s?l.setInclusiveStart(s):l.setUnboundedStart(new i._Unbounded),n?l.setExclusiveEnd(n):l.setUnboundedEnd(new i._Unbounded),await new Promise((o=>{this.clientWrapper.listFetch(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{if(null==i?void 0:i.getMissing())o(new t.CacheListFetch.Miss);else if(null==i?void 0:i.getFound()){const e=null==i?void 0:i.getFound();if(void 0!==e){const r=e.getValuesList();o(new t.CacheListFetch.Hit(this.convertArrayToUint8(r)))}else o(new t.CacheListFetch.Miss)}else o(new t.CacheListFetch.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listRetain(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateListName)(r),(0,s.validateListSliceStartEnd)(o,i)}catch(e){return new t.CacheListRetain.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'listRetain' request; listName: %s, startIndex: %s, endIndex: %s, ttl: %s",r,null!=o?o:"null",null!=i?i:"null",null!==(c=l.ttlSeconds.toString())&&void 0!==c?c:"null");const u=await this.sendListRetain(e,(0,a.convertToB64String)(r),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl(),o,i);return this.logger.trace("'listRetain' request result: %s",u.toString()),u}async sendListRetain(e,o,s,n,l,c){const u=new i._ListRetainRequest;return u.setListName(o),u.setTtlMilliseconds(s),u.setRefreshTtl(n),l?u.setInclusiveStart(l):u.setUnboundedStart(new i._Unbounded),c?u.setExclusiveEnd(c):u.setUnboundedEnd(new i._Unbounded),await new Promise((o=>{this.clientWrapper.listRetain(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListRetain.Success:new t.CacheListRetain.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listLength(e,r){try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListLength.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listLength' request; listName: ${r}`);const o=await this.sendListLength(e,(0,a.convertToB64String)(r));return this.logger.trace(`'listLength' request result: ${o.toString()}`),o}async sendListLength(e,o){const s=new i._ListLengthRequest;return s.setListName(o),await new Promise((o=>{this.clientWrapper.listLength(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheListLength.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getLength();o(e?new t.CacheListLength.Hit(e):new t.CacheListLength.Miss)}else o(new t.CacheListLength.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listPopBack(e,r){try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListPopBack.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'listPopBack' request");const o=await this.sendListPopBack(e,(0,a.convertToB64String)(r));return this.logger.trace(`'listPopBack' request result: ${o.toString()}`),o}async sendListPopBack(e,o){const s=new i._ListPopBackRequest;return s.setListName(o),await new Promise((o=>{this.clientWrapper.listPopBack(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheListPopBack.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getBack();o(e?new t.CacheListPopBack.Hit(this.convertToUint8Array(e)):new t.CacheListPopBack.Miss)}else o(new t.CacheListPopBack.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listPopFront(e,r){try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListPopFront.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'listPopFront' request");const o=await this.sendListPopFront(e,(0,a.convertToB64String)(r));return this.logger.trace(`'listPopFront' request result: ${o.toString()}`),o}async sendListPopFront(e,o){const s=new i._ListPopFrontRequest;return s.setListName(o),await new Promise((o=>{this.clientWrapper.listPopFront(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheListPopFront.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getFront();o(e?new t.CacheListPopFront.Hit(this.convertToUint8Array(e)):new t.CacheListPopFront.Miss)}else o(new t.CacheListPopFront.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listPushBack(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListPushBack.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listPushBack' request; listName: ${r}, value length: ${o.length}, ${l.toString()}, truncateFrontToSize: ${null!==(c=null==i?void 0:i.toString())&&void 0!==c?c:"null"}`);const u=await this.sendListPushBack(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl(),i);return this.logger.trace(`'listPushBack' request result: ${u.toString()}`),u}async sendListPushBack(e,o,s,n,l,c){const u=new i._ListPushBackRequest;return u.setListName(o),u.setValue(s),u.setTtlMilliseconds(n),u.setRefreshTtl(l),u.setTruncateFrontToSize(c||0),await new Promise((o=>{this.clientWrapper.listPushBack(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListPushBack.Success(i.getListLength()):new t.CacheListPushBack.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listPushFront(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListPushFront.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listPushFront' request; listName: ${r}, value length: ${o.length}, ${l.toString()}, truncateBackToSize: ${null!==(c=null==i?void 0:i.toString())&&void 0!==c?c:"null"}`);const u=await this.sendListPushFront(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl(),i);return this.logger.trace(`'listPushFront' request result: ${u.toString()}`),u}async sendListPushFront(e,o,s,n,l,c){const u=new i._ListPushFrontRequest;return u.setListName(o),u.setValue(s),u.setTtlMilliseconds(n),u.setRefreshTtl(l),u.setTruncateBackToSize(c||0),await new Promise((o=>{this.clientWrapper.listPushFront(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListPushFront.Success(i.getListLength()):new t.CacheListPushFront.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async listRemoveValue(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateListName)(r)}catch(e){return new t.CacheListRemoveValue.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'listRemoveValue' request; listName: ${r}, value length: ${o.length}`);const i=await this.sendListRemoveValue(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o));return this.logger.trace(`'listRemoveValue' request result: ${i.toString()}`),i}async sendListRemoveValue(e,o,s){const n=new i._ListRemoveRequest;return n.setListName(o),n.setAllElementsWithValue(s),await new Promise((o=>{this.clientWrapper.listRemove(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheListRemoveValue.Success:new t.CacheListRemoveValue.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionarySetField(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionarySetField.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionarySetField' request; field: ${o.toString()}, value length: ${i.length}, ttl: ${null!==(c=l.ttlSeconds.toString())&&void 0!==c?c:"null"}`);const u=await this.sendDictionarySetField(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),(0,a.convertToB64String)(i),l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl());return this.logger.trace(`'dictionarySetField' request result: ${u.toString()}`),u}async sendDictionarySetField(e,o,s,n,l,c){const u=new i._DictionarySetRequest;u.setDictionaryName(o);const p=new i._DictionaryFieldValuePair;return p.setField(s),p.setValue(n),u.setItemsList([p]),u.setTtlMilliseconds(l),u.setRefreshTtl(c),await new Promise((o=>{this.clientWrapper.dictionarySet(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheDictionarySetField.Success:new t.CacheDictionarySetField.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionarySetFields(e,r,o,i=t.CollectionTtl.fromCacheTtl()){var l;try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionarySetFields.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionarySetFields' request; elements: ${o.toString()}, ttl: ${null!==(l=i.ttlSeconds.toString())&&void 0!==l?l:"null"}`);const c=this.convertMapOrRecord(o),u=await this.sendDictionarySetFields(e,(0,a.convertToB64String)(r),c,i.ttlMilliseconds()||1e3*this.defaultTtlSeconds,i.refreshTtl());return this.logger.trace(`'dictionarySetFields' request result: ${u.toString()}`),u}async sendDictionarySetFields(e,o,s,n,l){const c=new i._DictionarySetRequest;return c.setDictionaryName(o),c.setItemsList(s),c.setTtlMilliseconds(n),c.setRefreshTtl(l),await new Promise((o=>{this.clientWrapper.dictionarySet(c,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheDictionarySetFields.Success:new t.CacheDictionarySetFields.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryGetField(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryGetField.Error((0,n.normalizeSdkError)(e),this.convertToUint8Array(o))}this.logger.trace(`Issuing 'dictionaryGetField' request; field: ${o.toString()}`);const i=await this.sendDictionaryGetField(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o));return this.logger.trace(`'dictionaryGetField' request result: ${i.toString()}`),i}async sendDictionaryGetField(e,o,s){const n=new i._DictionaryGetRequest;return n.setDictionaryName(o),n.setFieldsList([s]),await new Promise((o=>{this.clientWrapper.dictionaryGet(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,n)=>{if(null==n?void 0:n.getMissing())o(new t.CacheDictionaryGetField.Miss(this.convertToUint8Array(s)));else if(null==n?void 0:n.getFound()){const e=n.getFound();e&&0===e.getItemsList().length?o(new t.CacheDictionaryGetField.Error(new t.UnknownError("_DictionaryGetResponseResponse contained no data but was found"),this.convertToUint8Array(s))):e&&e.getItemsList()[0].getResult()===i.ECacheResult.MISS?o(new t.CacheDictionaryGetField.Miss(this.convertToUint8Array(s))):e&&o(new t.CacheDictionaryGetField.Hit(e.getItemsList()[0].getCacheBody_asU8(),this.convertToUint8Array(s)))}else o(new t.CacheDictionaryGetField.Error((0,r.cacheServiceErrorMapper)(e),this.convertToUint8Array(s)))}))}))}async dictionaryGetFields(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryGetFields.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryGetFields' request; fields: ${o.toString()}`);const i=await this.sendDictionaryGetFields(e,(0,a.convertToB64String)(r),o);return this.logger.trace(`'dictionaryGetFields' request result: ${i.toString()}`),i}async sendDictionaryGetFields(e,s,n){const l=new i._DictionaryGetRequest;return l.setDictionaryName(s),l.setFieldsList(this.convertArrayToB64Strings(n)),await new Promise((i=>{this.clientWrapper.dictionaryGet(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{const a=null==s?void 0:s.getFound();if(a){const e=a.getItemsList().map((e=>{const t=this.convertECacheResult(e.getResult());return new o._DictionaryGetResponsePart(t,e.getCacheBody_asU8())}));i(new t.CacheDictionaryGetFields.Hit(e,this.convertArrayToUint8(n)))}else(null==s?void 0:s.getMissing())?i(new t.CacheDictionaryGetFields.Miss):i(new t.CacheDictionaryGetFields.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryFetch(e,r){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryFetch' request; dictionaryName: ${r}`);const o=await this.sendDictionaryFetch(e,(0,a.convertToB64String)(r));return this.logger.trace(`'dictionaryFetch' request result: ${o.toString()}`),o}async sendDictionaryFetch(e,s){const n=new i._DictionaryFetchRequest;return n.setDictionaryName(s),await new Promise((i=>{this.clientWrapper.dictionaryFetch(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{const n=null==s?void 0:s.getFound();if(n&&n.getItemsList()){const e=[];n.getItemsList().forEach((t=>{const r=new o._DictionaryFieldValuePair({field:t.getField_asU8(),value:this.convertToUint8Array(t.getValue())});e.push(r)})),i(new t.CacheDictionaryFetch.Hit(e))}else(null==s?void 0:s.getMissing())?i(new t.CacheDictionaryFetch.Miss):i(new t.CacheDictionaryFetch.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryIncrement(e,r,o,i=1,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryIncrement.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryIncrement' request; field: ${o.toString()}, amount : ${i}, ttl: ${null!==(c=l.ttlSeconds.toString())&&void 0!==c?c:"null"}`);const u=await this.sendDictionaryIncrement(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),i,l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl());return this.logger.trace(`'dictionaryIncrement' request result: ${u.toString()}`),u}async sendDictionaryIncrement(e,o,s,n,l,c){const u=new i._DictionaryIncrementRequest;return u.setDictionaryName(o),u.setField(s),u.setAmount(n),u.setTtlMilliseconds(l),u.setRefreshTtl(c),await new Promise((o=>{this.clientWrapper.dictionaryIncrement(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{i?i.getValue()?o(new t.CacheDictionaryIncrement.Success(i.getValue())):o(new t.CacheDictionaryIncrement.Success(0)):o(new t.CacheDictionaryIncrement.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryRemoveField(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryRemoveField.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryRemoveField' request; field: ${o.toString()}`);const i=await this.sendDictionaryRemoveField(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o));return this.logger.trace(`'dictionaryRemoveField' request result: ${i.toString()}`),i}async sendDictionaryRemoveField(e,o,s){const n=new i._DictionaryDeleteRequest;return n.setDictionaryName(o),n.setSome((new i._DictionaryDeleteRequest.Some).addFields(s)),await new Promise((o=>{this.clientWrapper.dictionaryDelete(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheDictionaryRemoveField.Success:new t.CacheDictionaryRemoveField.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryRemoveFields(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryRemoveFields.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryRemoveFields' request; fields: ${o.toString()}`);const i=await this.sendDictionaryRemoveFields(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o));return this.logger.trace(`'dictionaryRemoveFields' request result: ${i.toString()}`),i}async sendDictionaryRemoveFields(e,o,s){const n=new i._DictionaryDeleteRequest;return n.setDictionaryName(o),n.setSome((new i._DictionaryDeleteRequest.Some).setFieldsList(s)),await new Promise((o=>{this.clientWrapper.dictionaryDelete(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheDictionaryRemoveFields.Success:new t.CacheDictionaryRemoveFields.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async dictionaryLength(e,r){try{(0,s.validateCacheName)(e),(0,s.validateDictionaryName)(r)}catch(e){return new t.CacheDictionaryLength.Error((0,n.normalizeSdkError)(e))}this.logger.trace(`Issuing 'dictionaryLength' request; dictionaryName: ${r}`);const o=await this.sendDictionaryLength(e,(0,a.convertToB64String)(r));return this.logger.trace(`'dictionaryLength' request result: ${o.toString()}`),o}async sendDictionaryLength(e,o){const s=new i._DictionaryLengthRequest;return s.setDictionaryName(o),await new Promise((o=>{this.clientWrapper.dictionaryLength(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheDictionaryLength.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getLength();o(e?new t.CacheDictionaryLength.Hit(e):new t.CacheDictionaryLength.Miss)}else o(new t.CacheDictionaryLength.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetFetchByRank(e,r,o,i,l){var c,u;try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r),(0,s.validateSortedSetRanks)(i,l)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetFetchByRank' request; startRank: %s, endRank : %s, order: %s",null!==(c=i.toString())&&void 0!==c?c:"null",null!==(u=null==l?void 0:l.toString())&&void 0!==u?u:"null",o.toString());const p=await this.sendSortedSetFetchByRank(e,(0,a.convertToB64String)(r),o,i,l);return this.logger.trace("'sortedSetFetchByRank' request result: %s",p.toString()),p}async sendSortedSetFetchByRank(e,s,n,l,c){const u=new i._SortedSetFetchRequest._ByIndex;l?u.setInclusiveStartIndex(l):u.setUnboundedStart(new i._Unbounded),c?u.setExclusiveEndIndex(c):u.setUnboundedEnd(new i._Unbounded);const p=n===t.SortedSetOrder.Descending?i._SortedSetFetchRequest.Order.DESCENDING:i._SortedSetFetchRequest.Order.ASCENDING,d=new i._SortedSetFetchRequest;return d.setSetName(s),d.setOrder(p),d.setWithScores(!0),d.setByIndex(u),await new Promise((i=>{this.clientWrapper.sortedSetFetch(d,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{var n,a;if(s&&s.getFound()){const e=null===(a=null===(n=s.getFound())||void 0===n?void 0:n.getValuesWithScores())||void 0===a?void 0:a.getElementsList();if(e){const r=e.map((e=>new o._SortedSetElement(this.convertToUint8Array(e.getValue()),e.getScore())));i(new t.CacheSortedSetFetch.Hit(r))}else i(new t.CacheSortedSetFetch.Error(new t.UnknownError("Unknown sorted set fetch hit response type")))}else(null==s?void 0:s.getMissing())?i(new t.CacheSortedSetFetch.Miss):i(new t.CacheSortedSetFetch.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetFetchByScore(e,r,o,i,l,c,u){var p,d,h,g;try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r),(0,s.validateSortedSetScores)(i,l),void 0!==c&&(0,s.validateSortedSetOffset)(c),void 0!==u&&(0,s.validateSortedSetCount)(u)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetFetchByScore' request; minScore: %s, maxScore : %s, order: %s, offset: %s, count: %s",null!==(p=null==i?void 0:i.toString())&&void 0!==p?p:"null",null!==(d=null==l?void 0:l.toString())&&void 0!==d?d:"null",o.toString(),null!==(h=null==c?void 0:c.toString())&&void 0!==h?h:"null",null!==(g=null==u?void 0:u.toString())&&void 0!==g?g:"null");const f=await this.sendSortedSetFetchByScore(e,(0,a.convertToB64String)(r),o,i,l,c,u);return this.logger.trace("'sortedSetFetchByScore' request result: %s",f.toString()),f}async sendSortedSetFetchByScore(e,s,n,l,c,u,p){const d=new i._SortedSetFetchRequest._ByScore;void 0!==l?d.setMinScore((new i._SortedSetFetchRequest._ByScore._Score).setScore(l).setExclusive(!1)):d.setUnboundedMin(new i._Unbounded),void 0!==c?d.setMaxScore((new i._SortedSetFetchRequest._ByScore._Score).setScore(c).setExclusive(!1)):d.setUnboundedMax(new i._Unbounded),d.setOffset(null!=u?u:0),d.setCount(null!=p?p:-1);const h=n===t.SortedSetOrder.Descending?i._SortedSetFetchRequest.Order.DESCENDING:i._SortedSetFetchRequest.Order.ASCENDING,g=new i._SortedSetFetchRequest;return g.setSetName(s),g.setOrder(h),g.setWithScores(!0),g.setByScore(d),await new Promise((i=>{this.clientWrapper.sortedSetFetch(g,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{var n,a,l;if(s)if(null===(n=null==s?void 0:s.getFound())||void 0===n?void 0:n.getValuesWithScores()){const e=null===(l=null===(a=s.getFound())||void 0===a?void 0:a.getValuesWithScores())||void 0===l?void 0:l.getElementsList();if(e){const r=e.map((e=>new o._SortedSetElement(this.convertToUint8Array(e.getValue()),e.getScore())));i(new t.CacheSortedSetFetch.Hit(r))}else i(new t.CacheSortedSetFetch.Error(new t.UnknownError("Unknown sorted set fetch hit response type")))}else(null==s?void 0:s.getMissing())?i(new t.CacheSortedSetFetch.Miss):i(new t.CacheSortedSetFetch.Error(new t.UnknownError("Unknown sorted set fetch response type")));else i(new t.CacheSortedSetFetch.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetPutElement(e,r,o,i,l=t.CollectionTtl.fromCacheTtl()){var c;try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetPutElement.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetPutElement' request; value: %s, score : %s, ttl: %s",(0,s.truncateString)(o.toString()),i,null!==(c=l.ttlSeconds.toString())&&void 0!==c?c:"null");const u=await this.sendSortedSetPutElement(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),i,l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl());return this.logger.trace("'sortedSetPutElement' request result: %s",u.toString()),u}async sendSortedSetPutElement(e,o,s,n,l,c){const u=new i._SortedSetPutRequest,p=new i._SortedSetElement;return p.setValue(s),p.setScore(n),u.setSetName(o),u.setElementsList([p]),u.setTtlMilliseconds(l),u.setRefreshTtl(c),await new Promise((o=>{this.clientWrapper.sortedSetPut(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheSortedSetPutElement.Success:new t.CacheSortedSetPutElement.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetPutElements(e,r,o,i=t.CollectionTtl.fromCacheTtl()){var l;try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetPutElements.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetPutElements' request; value: %s, score : %s, ttl: %s",o.toString(),null!==(l=i.ttlSeconds.toString())&&void 0!==l?l:"null");const c=this.convertSortedSetMapOrRecord(o),u=await this.sendSortedSetPutElements(e,(0,a.convertToB64String)(r),c,i.ttlMilliseconds()||1e3*this.defaultTtlSeconds,i.refreshTtl());return this.logger.trace("'sortedSetPutElements' request result: %s",u.toString()),u}async sendSortedSetPutElements(e,o,s,n,l){const c=new i._SortedSetPutRequest;return c.setSetName(o),c.setElementsList(s),c.setTtlMilliseconds(n),c.setRefreshTtl(l),await new Promise((o=>{this.clientWrapper.sortedSetPut(c,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheSortedSetPutElements.Success:new t.CacheSortedSetPutElements.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetGetScore(e,r,o){const i=await this.sortedSetGetScores(e,r,[o]);return i instanceof t.CacheSortedSetGetScores.Hit?i.responses()[0]:i instanceof t.CacheSortedSetGetScores.Miss?new t.CacheSortedSetGetScore.Miss(this.convertToUint8Array(o)):new t.CacheSortedSetGetScore.Error(i instanceof t.CacheSortedSetGetScores.Error?i.innerException():new t.UnknownError("Unknown response type"),this.convertToUint8Array(o))}async sortedSetGetScores(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetGetScores.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetGetScores' request; values: %s",(0,s.truncateString)(o.toString()));const i=await this.sendSortedSetGetScores(e,(0,a.convertToB64String)(r),o.map((e=>(0,a.convertToB64String)(e))));return this.logger.trace("'sortedSetGetScores' request result: %s",(0,s.truncateString)(i.toString())),i}async sendSortedSetGetScores(e,s,n){const l=new i._SortedSetGetScoreRequest;return l.setSetName(s),l.setValuesList(n),await new Promise((i=>{this.clientWrapper.sortedSetGetScore(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{var a;if(null==s?void 0:s.getMissing())i(new t.CacheSortedSetGetScores.Miss);else if(null==s?void 0:s.getFound()){const e=null===(a=s.getFound())||void 0===a?void 0:a.getElementsList().map((e=>{const t=this.convertECacheResult(e.getResult());return new o._SortedSetGetScoreResponsePart(t,e.getScore())}));i(e?new t.CacheSortedSetGetScores.Hit(e,this.convertArrayToUint8(n.map((e=>atob(e))))):new t.CacheSortedSetGetScores.Error(new t.UnknownError("Unknown sorted set fetch hit response type")))}else i(new t.CacheSortedSetGetScores.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetGetRank(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetGetRank.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetGetRank' request; value: %s",(0,s.truncateString)(o.toString()));const i=await this.sendSortedSetGetRank(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o));return this.logger.trace("'sortedSetGetRank' request result: %s",(0,s.truncateString)(i.toString())),i}async sendSortedSetGetRank(e,o,s){const n=new i._SortedSetGetRankRequest;return n.setSetName(o),n.setValue(s),await new Promise((o=>{this.clientWrapper.sortedSetGetRank(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,s)=>{var n,a,l;if((null==s?void 0:s.getMissing())||(null===(n=null==s?void 0:s.getElementRank())||void 0===n?void 0:n.getResult())===i.ECacheResult.MISS)o(new t.CacheSortedSetGetRank.Miss);else if((null===(a=null==s?void 0:s.getElementRank())||void 0===a?void 0:a.getResult())===i.ECacheResult.HIT){const e=null===(l=null==s?void 0:s.getElementRank())||void 0===l?void 0:l.getRank();o(void 0!==e?new t.CacheSortedSetGetRank.Hit(e):new t.CacheSortedSetGetRank.Miss)}else o(new t.CacheSortedSetGetRank.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetIncrementScore(e,r,o,i=1,l=t.CollectionTtl.fromCacheTtl()){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetIncrementScore.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetIncrementScore' request; value: %s",(0,s.truncateString)(o.toString()));const c=await this.sendSortedSetIncrementScore(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o),i,l.ttlMilliseconds()||1e3*this.defaultTtlSeconds,l.refreshTtl());return this.logger.trace("'sortedSetIncrementScore' request result: %s",(0,s.truncateString)(c.toString())),c}async sendSortedSetIncrementScore(e,o,s,n,l,c){const u=new i._SortedSetIncrementRequest;return u.setSetName(o),u.setValue(s),u.setAmount(n),u.setTtlMilliseconds(l),u.setRefreshTtl(c),await new Promise((o=>{this.clientWrapper.sortedSetIncrement(u,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{i?i.getScore()?o(new t.CacheSortedSetIncrementScore.Success(i.getScore())):o(new t.CacheSortedSetIncrementScore.Success(0)):o(new t.CacheSortedSetIncrementScore.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetRemoveElement(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetRemoveElement' request");const i=await this.sendSortedSetRemoveElement(e,(0,a.convertToB64String)(r),(0,a.convertToB64String)(o));return this.logger.trace("'sortedSetRemoveElement' request result: %s",(0,s.truncateString)(i.toString())),i}async sendSortedSetRemoveElement(e,o,s){const n=new i._SortedSetRemoveRequest;return n.setSetName(o),n.setSome((new i._SortedSetRemoveRequest._Some).setValuesList([s])),await new Promise((o=>{this.clientWrapper.sortedSetRemove(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},(e=>{o(e?new t.CacheSortedSetRemoveElement.Error((0,r.cacheServiceErrorMapper)(e)):new t.CacheSortedSetRemoveElement.Success)}))}))}async sortedSetRemoveElements(e,r,o){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetRemoveElements' request");const i=await this.sendSortedSetRemoveElements(e,(0,a.convertToB64String)(r),this.convertArrayToB64Strings(o));return this.logger.trace("'sortedSetRemoveElements' request result: %s",(0,s.truncateString)(i.toString())),i}async sendSortedSetRemoveElements(e,o,s){const n=new i._SortedSetRemoveRequest;return n.setSetName(o),n.setSome((new i._SortedSetRemoveRequest._Some).setValuesList(s)),await new Promise((o=>{this.clientWrapper.sortedSetRemove(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},(e=>{o(e?new t.CacheSortedSetRemoveElements.Error((0,r.cacheServiceErrorMapper)(e)):new t.CacheSortedSetRemoveElements.Success)}))}))}async sortedSetLength(e,r){try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetLength' request");const o=await this.sendSortedSetLength(e,(0,a.convertToB64String)(r));return this.logger.trace("'sortedSetLength' request result: %s",(0,s.truncateString)(o.toString())),o}async sendSortedSetLength(e,o){const s=new i._SortedSetLengthRequest;return s.setSetName(o),await new Promise((o=>{this.clientWrapper.sortedSetLength(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheSortedSetLength.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getLength();o(e?new t.CacheSortedSetLength.Hit(e):new t.CacheSortedSetLength.Miss)}else o(new t.CacheSortedSetLength.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async sortedSetLengthByScore(e,r,o,i){var l,c;try{(0,s.validateCacheName)(e),(0,s.validateSortedSetName)(r),(0,s.validateSortedSetScores)(o,i)}catch(e){return new t.CacheSortedSetFetch.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'sortedSetLengthByScore' request; minScore: %s, maxScore: %s",null!==(l=null==o?void 0:o.toString())&&void 0!==l?l:"null",null!==(c=null==i?void 0:i.toString())&&void 0!==c?c:"null");const u=await this.sendSortedSetLengthByScore(e,(0,a.convertToB64String)(r),o,i);return this.logger.trace("'sortedSetLengthByScore' request result: %s",(0,s.truncateString)(u.toString())),u}async sendSortedSetLengthByScore(e,o,s,n){const l=new i._SortedSetLengthByScoreRequest;return l.setSetName(o),void 0===s?l.setUnboundedMin(new i._Unbounded):l.setInclusiveMin(s),void 0===n?l.setUnboundedMax(new i._Unbounded):l.setInclusiveMax(n),await new Promise((o=>{this.clientWrapper.sortedSetLengthByScore(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{var s;if(null==i?void 0:i.getMissing())o(new t.CacheSortedSetLengthByScore.Miss);else if(null==i?void 0:i.getFound()){const e=null===(s=i.getFound())||void 0===s?void 0:s.getLength();o(e?new t.CacheSortedSetLengthByScore.Hit(e):new t.CacheSortedSetLengthByScore.Miss)}else o(new t.CacheSortedSetLengthByScore.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async itemGetType(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheItemGetType.Error((0,n.normalizeSdkError)(e))}return await this.sendItemGetType(e,(0,a.convertToB64String)(r))}async sendItemGetType(e,o){const s=new i._ItemGetTypeRequest;return s.setCacheKey(o),await new Promise((o=>{this.clientWrapper.itemGetType(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{const s=i.getFound();if(s){const e=s.getItemType();o(new t.CacheItemGetType.Hit(this.convertItemTypeResult(e)))}else(null==i?void 0:i.getMissing())?o(new t.CacheItemGetType.Miss):o(new t.CacheItemGetType.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async itemGetTtl(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheItemGetTtl.Error((0,n.normalizeSdkError)(e))}return await this.sendItemGetTtl(e,(0,a.convertToB64String)(r))}async sendItemGetTtl(e,o){const s=new i._ItemGetTtlRequest;return s.setCacheKey(o),await new Promise((o=>{this.clientWrapper.itemGetTtl(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{const s=i.getFound();s?o(new t.CacheItemGetTtl.Hit(s.getRemainingTtlMillis())):(null==i?void 0:i.getMissing())?o(new t.CacheItemGetTtl.Miss):o(new t.CacheItemGetTtl.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async keyExists(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheKeyExists.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'keyExists' request");const o=await this.sendKeyExists(e,(0,a.convertToB64String)(r));return this.logger.trace("'keyExists' request result: %s",(0,s.truncateString)(o.toString())),o}async sendKeyExists(e,o){const s=new i._KeysExistRequest;return s.setCacheKeysList([o]),await new Promise((o=>{this.clientWrapper.keysExist(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheKeyExists.Success(i.getExistsList()):new t.CacheKeyExists.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async keysExist(e,r){try{(0,s.validateCacheName)(e)}catch(e){return new t.CacheKeysExist.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'keysExist' request");const o=await this.sendKeysExist(e,this.convertArrayToB64Strings(r));return this.logger.trace("'keysExist' request result: %s",(0,s.truncateString)(o.toString())),o}async sendKeysExist(e,o){const s=new i._KeysExistRequest;return s.setCacheKeysList(o),await new Promise((o=>{this.clientWrapper.keysExist(s,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{o(i?new t.CacheKeysExist.Success(i.getExistsList()):new t.CacheKeysExist.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async updateTtl(e,r,o){var i;try{(0,s.validateCacheName)(e),(0,s.validateValidForSeconds)(o)}catch(e){return new t.CacheUpdateTtl.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'updateTtl' request; ttlMilliseconds: %s",null!==(i=null==o?void 0:o.toString())&&void 0!==i?i:"null");const l=await this.sendUpdateTtl(e,(0,a.convertToB64String)(r),o);return this.logger.trace("'updateTtl' request result: %s",(0,s.truncateString)(l.toString())),l}async sendUpdateTtl(e,o,s){const n=new i._UpdateTtlRequest;return n.setCacheKey(o),n.setOverwriteToMilliseconds(s),await new Promise((o=>{this.clientWrapper.updateTtl(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{(null==i?void 0:i.getMissing())?o(new t.CacheUpdateTtl.Miss):(null==i?void 0:i.getSet())?o(new t.CacheUpdateTtl.Set):o(new t.CacheUpdateTtl.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async increaseTtl(e,r,o){var i;try{(0,s.validateCacheName)(e),(0,s.validateValidForSeconds)(o)}catch(e){return new t.CacheIncreaseTtl.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'increaseTtl' request; ttlMilliseconds: %s",null!==(i=null==o?void 0:o.toString())&&void 0!==i?i:"null");const l=await this.sendIncreaseTtl(e,(0,a.convertToB64String)(r),o);return this.logger.trace("'increaseTtl' request result: %s",(0,s.truncateString)(l.toString())),l}async sendIncreaseTtl(e,o,s){const n=new i._UpdateTtlRequest;return n.setCacheKey(o),n.setIncreaseToMilliseconds(s),await new Promise((o=>{this.clientWrapper.updateTtl(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{(null==i?void 0:i.getMissing())?o(new t.CacheIncreaseTtl.Miss):(null==i?void 0:i.getSet())?o(new t.CacheIncreaseTtl.Set):o(new t.CacheIncreaseTtl.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}async decreaseTtl(e,r,o){var i;try{(0,s.validateCacheName)(e),(0,s.validateValidForSeconds)(o)}catch(e){return new t.CacheDecreaseTtl.Error((0,n.normalizeSdkError)(e))}this.logger.trace("Issuing 'decreaseTtl' request; ttlMilliseconds: %s",null!==(i=null==o?void 0:o.toString())&&void 0!==i?i:"null");const l=await this.sendDecreaseTtl(e,(0,a.convertToB64String)(r),o);return this.logger.trace("'decreaseTtl' request result: %s",(0,s.truncateString)(l.toString())),l}async sendDecreaseTtl(e,o,s){const n=new i._UpdateTtlRequest;return n.setCacheKey(o),n.setDecreaseToMilliseconds(s),await new Promise((o=>{this.clientWrapper.updateTtl(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,a.createCallMetadata)(e,this.deadlineMillis)},((e,i)=>{(null==i?void 0:i.getMissing())?o(new t.CacheDecreaseTtl.Miss):(null==i?void 0:i.getSet())?o(new t.CacheDecreaseTtl.Set):o(new t.CacheDecreaseTtl.Error((0,r.cacheServiceErrorMapper)(e)))}))}))}convertSecondsToMilliseconds(e){return 1e3*e}convertArrayToB64Strings(e){return e.map((e=>(0,a.convertToB64String)(e)))}convertToUint8Array(e){return"string"==typeof e?this.textEncoder.encode(e):e}convertArrayToUint8(e){return e.map((e=>this.convertToUint8Array(e)))}convertMapOrRecord(e){return e instanceof Map?[...e.entries()].map((e=>(new i._DictionaryFieldValuePair).setField((0,a.convertToB64String)(e[0])).setValue((0,a.convertToB64String)(e[1])))):Object.entries(e).map((e=>(new i._DictionaryFieldValuePair).setField((0,a.convertToB64String)(e[0])).setValue((0,a.convertToB64String)(e[1]))))}convertSortedSetMapOrRecord(e){return e instanceof Map?[...e.entries()].map((e=>(new i._SortedSetElement).setValue((0,a.convertToB64String)(e[0])).setScore(e[1]))):Object.entries(e).map((e=>(new i._SortedSetElement).setValue((0,a.convertToB64String)(e[0])).setScore(e[1])))}convertECacheResult(e){switch(e){case i.ECacheResult.HIT:return o._ECacheResult.Hit;case i.ECacheResult.INVALID:return o._ECacheResult.Invalid;case i.ECacheResult.MISS:return o._ECacheResult.Miss;case i.ECacheResult.OK:return o._ECacheResult.Ok}}convertItemTypeResult(e){switch(e){case i._ItemGetTypeResponse.ItemType.SCALAR:return t.ItemType.SCALAR;case i._ItemGetTypeResponse.ItemType.LIST:return t.ItemType.LIST;case i._ItemGetTypeResponse.ItemType.DICTIONARY:return t.ItemType.DICTIONARY;case i._ItemGetTypeResponse.ItemType.SET:return t.ItemType.SET;case i._ItemGetTypeResponse.ItemType.SORTED_SET:return t.ItemType.SORTED_SET}}},cacheDataClient}!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e._RankedElement=e._SortedSetElement=e._SigningKey=e._SortedSetGetScoreResponsePart=e._DictionaryGetResponsePart=e._DictionaryFieldValuePair=e._ECacheResult=void 0,(t=e._ECacheResult||(e._ECacheResult={}))[t.Invalid=0]="Invalid",t[t.Ok=1]="Ok",t[t.Hit=2]="Hit",t[t.Miss=3]="Miss";e._DictionaryFieldValuePair=class{constructor({field:e,value:t}){this.field=e,this.value=t}};e._DictionaryGetResponsePart=class{constructor(e,t){this.result=e,this.cacheBody=t}};e._SortedSetGetScoreResponsePart=class{constructor(e,t){this.result=e,this.score=t}};e._SigningKey=class{constructor(e,t){this.key=null!=e?e:"",this.expiresAt=null!=t?t:0}};e._SortedSetElement=class{constructor(e,t){this.value=e,this.score=t}};e._RankedElement=class{constructor(e,t,r){this.id=e,this.score=t,this.rank=r}}}(grpcResponseTypes);var pingClient={};Object.defineProperty(pingClient,"__esModule",{value:!0}),pingClient.PingClient=void 0;const generated_types_webtext_1=dist,cacheping_pb_1=cacheping_pb$1,client_metadata_provider_1=clientMetadataProvider;class PingClient{constructor(e){this.logger=e.configuration.getLoggerFactory().getLogger(this),this.clientMetadataProvider=new client_metadata_provider_1.ClientMetadataProvider({}),this.clientWrapper=new generated_types_webtext_1.ping.PingClient(e.endpoint,null,{})}async ping(){this.logger.debug("pinging...");const e=new cacheping_pb_1._PingRequest;await this.clientWrapper.ping(e,this.clientMetadataProvider.createClientMetadata())}}pingClient.PingClient=PingClient;var clients={},cache={},AbstractCacheClient={},src={},cacheGet={},responseBase={};Object.defineProperty(responseBase,"__esModule",{value:!0}),responseBase.ResponseNotFound=responseBase.ResponseFound=responseBase.ResponseSuccess=responseBase.ResponseMiss=responseBase.ResponseHit=responseBase.ResponseError=responseBase.ResponseBase=void 0;class ResponseBase{toString(){return this.constructor.name}}function ResponseError(e){return class extends e{message(){return this._innerException.wrappedErrorMessage()}innerException(){return this._innerException}errorCode(){return this._innerException.errorCode()}toString(){return this.message()}}}function ResponseHit(e){return class extends e{}}function ResponseMiss(e){return class extends e{constructor(){super(...arguments),this.is_miss=!0}}}function ResponseSuccess(e){return class extends e{constructor(){super(...arguments),this.is_success=!0}}}function ResponseFound(e){return class extends e{}}function ResponseNotFound(e){return class extends e{}}responseBase.ResponseBase=ResponseBase,responseBase.ResponseError=ResponseError,responseBase.ResponseHit=ResponseHit,responseBase.ResponseMiss=ResponseMiss,responseBase.ResponseSuccess=ResponseSuccess,responseBase.ResponseFound=ResponseFound,responseBase.ResponseNotFound=ResponseNotFound,Object.defineProperty(cacheGet,"__esModule",{value:!0}),cacheGet.Error=cacheGet.Miss=cacheGet.Hit=cacheGet.Response=void 0;const response_base_1$15=responseBase,utils_1$c=utils$1,TEXT_DECODER$8=new TextDecoder;let Response$16=class extends response_base_1$15.ResponseBase{value(){if(this instanceof Hit$h)return this.value()}};cacheGet.Response=Response$16;let _Hit$h=class extends Response$16{constructor(e){super(),this.body=e}value(){return TEXT_DECODER$8.decode(this.body)}valueString(){return TEXT_DECODER$8.decode(this.body)}valueUint8Array(){return this.body}toString(){const e=(0,utils_1$c.truncateString)(this.valueString());return`${super.toString()}: ${e}`}},Hit$h=class extends((0,response_base_1$15.ResponseHit)(_Hit$h)){};cacheGet.Hit=Hit$h;let _Miss$k=class extends Response$16{},Miss$k=class extends((0,response_base_1$15.ResponseMiss)(_Miss$k)){};cacheGet.Miss=Miss$k;let _Error$15=class extends Response$16{constructor(e){super(),this._innerException=e}},Error$16=class extends((0,response_base_1$15.ResponseError)(_Error$15)){};cacheGet.Error=Error$16;var cacheListConcatenateBack={};Object.defineProperty(cacheListConcatenateBack,"__esModule",{value:!0}),cacheListConcatenateBack.Error=cacheListConcatenateBack.Success=cacheListConcatenateBack.Response=void 0;const response_base_1$14=responseBase;let Response$15=class extends response_base_1$14.ResponseBase{};cacheListConcatenateBack.Response=Response$15;let _Success$K=class extends Response$15{constructor(e){super(),this._list_length=e}listLength(){return this._list_length}toString(){return`${super.toString()}: listLength: ${this._list_length}`}},Success$K=class extends((0,response_base_1$14.ResponseSuccess)(_Success$K)){};cacheListConcatenateBack.Success=Success$K;let _Error$14=class extends Response$15{},Error$15=class extends((0,response_base_1$14.ResponseError)(_Error$14)){constructor(e){super(),this._innerException=e}};cacheListConcatenateBack.Error=Error$15;var cacheListConcatenateFront={};Object.defineProperty(cacheListConcatenateFront,"__esModule",{value:!0}),cacheListConcatenateFront.Error=cacheListConcatenateFront.Success=cacheListConcatenateFront.Response=void 0;const response_base_1$13=responseBase;let Response$14=class extends response_base_1$13.ResponseBase{};cacheListConcatenateFront.Response=Response$14;let _Success$J=class extends Response$14{constructor(e){super(),this._list_length=e}listLength(){return this._list_length}toString(){return`${super.toString()}: listLength: ${this._list_length}`}},Success$J=class extends((0,response_base_1$13.ResponseSuccess)(_Success$J)){};cacheListConcatenateFront.Success=Success$J;let _Error$13=class extends Response$14{},Error$14=class extends((0,response_base_1$13.ResponseError)(_Error$13)){constructor(e){super(),this._innerException=e}};cacheListConcatenateFront.Error=Error$14;var cacheListFetch={};Object.defineProperty(cacheListFetch,"__esModule",{value:!0}),cacheListFetch.Error=cacheListFetch.Miss=cacheListFetch.Hit=cacheListFetch.Response=void 0;const response_base_1$12=responseBase,utils_1$b=utils$1,TEXT_DECODER$7=new TextDecoder;let Response$13=class extends response_base_1$12.ResponseBase{value(){if(this instanceof Hit$g)return this.value()}};cacheListFetch.Response=Response$13;let _Hit$g=class extends Response$13{constructor(e){super(),this._values=e}valueListUint8Array(){return this._values}valueListString(){return this._values.map((e=>TEXT_DECODER$7.decode(e)))}valueList(){return this.valueListString()}value(){return this.valueListString()}toString(){const e=(0,utils_1$b.truncateStringArray)(this.valueListString());return`${super.toString()}: [${e.toString()}]`}},Hit$g=class extends((0,response_base_1$12.ResponseHit)(_Hit$g)){};cacheListFetch.Hit=Hit$g;let _Miss$j=class extends Response$13{},Miss$j=class extends((0,response_base_1$12.ResponseMiss)(_Miss$j)){};cacheListFetch.Miss=Miss$j;let _Error$12=class extends Response$13{constructor(e){super(),this._innerException=e}},Error$13=class extends((0,response_base_1$12.ResponseError)(_Error$12)){};cacheListFetch.Error=Error$13;var cacheListLength={};Object.defineProperty(cacheListLength,"__esModule",{value:!0}),cacheListLength.Error=cacheListLength.Miss=cacheListLength.Hit=cacheListLength.Response=void 0;const response_base_1$11=responseBase;let Response$12=class extends response_base_1$11.ResponseBase{};cacheListLength.Response=Response$12;let _Hit$f=class extends Response$12{constructor(e){super(),this._length=e}length(){return this._length}toString(){return`${super.toString()}: length ${this._length}`}},Hit$f=class extends((0,response_base_1$11.ResponseHit)(_Hit$f)){};cacheListLength.Hit=Hit$f;let _Miss$i=class extends Response$12{},Miss$i=class extends((0,response_base_1$11.ResponseMiss)(_Miss$i)){};cacheListLength.Miss=Miss$i;let _Error$11=class extends Response$12{constructor(e){super(),this._innerException=e}},Error$12=class extends((0,response_base_1$11.ResponseError)(_Error$11)){};cacheListLength.Error=Error$12;var cacheListPopBack={};Object.defineProperty(cacheListPopBack,"__esModule",{value:!0}),cacheListPopBack.Error=cacheListPopBack.Miss=cacheListPopBack.Hit=cacheListPopBack.Response=void 0;const response_base_1$10=responseBase,utils_1$a=utils$1,TEXT_DECODER$6=new TextDecoder;let Response$11=class extends response_base_1$10.ResponseBase{value(){if(this instanceof Hit$e)return this.value()}};cacheListPopBack.Response=Response$11;let _Hit$e=class extends Response$11{constructor(e){super(),this.body=e}valueString(){return TEXT_DECODER$6.decode(this.body)}value(){return TEXT_DECODER$6.decode(this.body)}valueUint8Array(){return this.body}toString(){const e=(0,utils_1$a.truncateString)(this.valueString());return`${super.toString()}: ${e}`}},Hit$e=class extends((0,response_base_1$10.ResponseHit)(_Hit$e)){};cacheListPopBack.Hit=Hit$e;let _Miss$h=class extends Response$11{},Miss$h=class extends((0,response_base_1$10.ResponseMiss)(_Miss$h)){};cacheListPopBack.Miss=Miss$h;let _Error$10=class extends Response$11{constructor(e){super(),this._innerException=e}},Error$11=class extends((0,response_base_1$10.ResponseError)(_Error$10)){};cacheListPopBack.Error=Error$11;var cacheListPopFront={};Object.defineProperty(cacheListPopFront,"__esModule",{value:!0}),cacheListPopFront.Error=cacheListPopFront.Miss=cacheListPopFront.Hit=cacheListPopFront.Response=void 0;const response_base_1$$=responseBase,utils_1$9=utils$1,TEXT_DECODER$5=new TextDecoder;let Response$10=class extends response_base_1$$.ResponseBase{value(){if(this instanceof Hit$d)return this.value()}};cacheListPopFront.Response=Response$10;let _Hit$d=class extends Response$10{constructor(e){super(),this.body=e}valueString(){return TEXT_DECODER$5.decode(this.body)}value(){return TEXT_DECODER$5.decode(this.body)}valueUint8Array(){return this.body}toString(){const e=(0,utils_1$9.truncateString)(this.valueString());return`${super.toString()}: ${e}`}},Hit$d=class extends((0,response_base_1$$.ResponseHit)(_Hit$d)){};cacheListPopFront.Hit=Hit$d;let _Miss$g=class extends Response$10{},Miss$g=class extends((0,response_base_1$$.ResponseMiss)(_Miss$g)){};cacheListPopFront.Miss=Miss$g;let _Error$$=class extends Response$10{constructor(e){super(),this._innerException=e}},Error$10=class extends((0,response_base_1$$.ResponseError)(_Error$$)){};cacheListPopFront.Error=Error$10;var cacheListPushBack={};Object.defineProperty(cacheListPushBack,"__esModule",{value:!0}),cacheListPushBack.Error=cacheListPushBack.Success=cacheListPushBack.Response=void 0;const response_base_1$_=responseBase;let Response$$=class extends response_base_1$_.ResponseBase{};cacheListPushBack.Response=Response$$;let _Success$I=class extends Response$${constructor(e){super(),this._list_length=e}listLength(){return this._list_length}toString(){return`${super.toString()}: listLength: ${this._list_length}`}},Success$I=class extends((0,response_base_1$_.ResponseSuccess)(_Success$I)){};cacheListPushBack.Success=Success$I;let _Error$_=class extends Response$${},Error$$=class extends((0,response_base_1$_.ResponseError)(_Error$_)){constructor(e){super(),this._innerException=e}};cacheListPushBack.Error=Error$$;var cacheListPushFront={};Object.defineProperty(cacheListPushFront,"__esModule",{value:!0}),cacheListPushFront.Error=cacheListPushFront.Success=cacheListPushFront.Response=void 0;const response_base_1$Z=responseBase;let Response$_=class extends response_base_1$Z.ResponseBase{};cacheListPushFront.Response=Response$_;let _Success$H=class extends Response$_{constructor(e){super(),this._list_length=e}listLength(){return this._list_length}toString(){return`${super.toString()}: listLength: ${this._list_length}`}},Success$H=class extends((0,response_base_1$Z.ResponseSuccess)(_Success$H)){};cacheListPushFront.Success=Success$H;let _Error$Z=class extends Response$_{},Error$_=class extends((0,response_base_1$Z.ResponseError)(_Error$Z)){constructor(e){super(),this._innerException=e}};cacheListPushFront.Error=Error$_;var cacheListRemoveValue={};Object.defineProperty(cacheListRemoveValue,"__esModule",{value:!0}),cacheListRemoveValue.Error=cacheListRemoveValue.Success=cacheListRemoveValue.Response=void 0;const response_base_1$Y=responseBase;let Response$Z=class extends response_base_1$Y.ResponseBase{};cacheListRemoveValue.Response=Response$Z;let _Success$G=class extends Response$Z{},Success$G=class extends((0,response_base_1$Y.ResponseSuccess)(_Success$G)){};cacheListRemoveValue.Success=Success$G;let _Error$Y=class extends Response$Z{constructor(e){super(),this._innerException=e}},Error$Z=class extends((0,response_base_1$Y.ResponseError)(_Error$Y)){};cacheListRemoveValue.Error=Error$Z;var cacheListRetain={};Object.defineProperty(cacheListRetain,"__esModule",{value:!0}),cacheListRetain.Error=cacheListRetain.Success=cacheListRetain.Response=void 0;const response_base_1$X=responseBase;let Response$Y=class extends response_base_1$X.ResponseBase{};cacheListRetain.Response=Response$Y;let _Success$F=class extends Response$Y{},Success$F=class extends((0,response_base_1$X.ResponseSuccess)(_Success$F)){};cacheListRetain.Success=Success$F;let _Error$X=class extends Response$Y{constructor(e){super(),this._innerException=e}},Error$Y=class extends((0,response_base_1$X.ResponseError)(_Error$X)){};cacheListRetain.Error=Error$Y;var cacheSet={};Object.defineProperty(cacheSet,"__esModule",{value:!0}),cacheSet.Error=cacheSet.Success=cacheSet.Response=void 0;const response_base_1$W=responseBase;let Response$X=class extends response_base_1$W.ResponseBase{};cacheSet.Response=Response$X;let _Success$E=class extends Response$X{},Success$E=class extends((0,response_base_1$W.ResponseSuccess)(_Success$E)){};cacheSet.Success=Success$E;let _Error$W=class extends Response$X{constructor(e){super(),this._innerException=e}},Error$X=class extends((0,response_base_1$W.ResponseError)(_Error$W)){};cacheSet.Error=Error$X;var cacheDelete={};Object.defineProperty(cacheDelete,"__esModule",{value:!0}),cacheDelete.Error=cacheDelete.Success=cacheDelete.Response=void 0;const response_base_1$V=responseBase;let Response$W=class extends response_base_1$V.ResponseBase{};cacheDelete.Response=Response$W;let _Success$D=class extends Response$W{},Success$D=class extends((0,response_base_1$V.ResponseSuccess)(_Success$D)){};cacheDelete.Success=Success$D;let _Error$V=class extends Response$W{constructor(e){super(),this._innerException=e}},Error$W=class extends((0,response_base_1$V.ResponseError)(_Error$V)){};cacheDelete.Error=Error$W;var cacheFlush={};Object.defineProperty(cacheFlush,"__esModule",{value:!0}),cacheFlush.Error=cacheFlush.Success=cacheFlush.Response=void 0;const response_base_1$U=responseBase;let Response$V=class extends response_base_1$U.ResponseBase{};cacheFlush.Response=Response$V;let _Success$C=class extends Response$V{},Success$C=class extends((0,response_base_1$U.ResponseSuccess)(_Success$C)){};cacheFlush.Success=Success$C;let _Error$U=class extends Response$V{constructor(e){super(),this._innerException=e}},Error$V=class extends((0,response_base_1$U.ResponseError)(_Error$U)){};cacheFlush.Error=Error$V;var createCache={};Object.defineProperty(createCache,"__esModule",{value:!0}),createCache.AlreadyExists=createCache.Error=createCache.Success=createCache.Response=void 0;const response_base_1$T=responseBase;let Response$U=class extends response_base_1$T.ResponseBase{};createCache.Response=Response$U;let _Success$B=class extends Response$U{},Success$B=class extends((0,response_base_1$T.ResponseSuccess)(_Success$B)){};createCache.Success=Success$B;let _Error$T=class extends Response$U{constructor(e){super(),this._innerException=e}},Error$U=class extends((0,response_base_1$T.ResponseError)(_Error$T)){};createCache.Error=Error$U;let AlreadyExists$1=class extends Response$U{};createCache.AlreadyExists=AlreadyExists$1;var deleteCache={};Object.defineProperty(deleteCache,"__esModule",{value:!0}),deleteCache.Error=deleteCache.Success=deleteCache.Response=void 0;const response_base_1$S=responseBase;let Response$T=class extends response_base_1$S.ResponseBase{};deleteCache.Response=Response$T;let _Success$A=class extends Response$T{},Success$A=class extends((0,response_base_1$S.ResponseSuccess)(_Success$A)){};deleteCache.Success=Success$A;let _Error$S=class extends Response$T{constructor(e){super(),this._innerException=e}},Error$T=class extends((0,response_base_1$S.ResponseError)(_Error$S)){};deleteCache.Error=Error$T;var listCaches={};Object.defineProperty(listCaches,"__esModule",{value:!0}),listCaches.Error=listCaches.Success=listCaches.Response=void 0;const response_base_1$R=responseBase;let Response$S=class extends response_base_1$R.ResponseBase{};listCaches.Response=Response$S;let _Success$z=class extends Response$S{constructor(e){super(),this.caches=e}getCaches(){return this.caches}toString(){const e=this.caches.map((e=>e.getName()));return super.toString()+": "+e.join(", ")}},Success$z=class extends((0,response_base_1$R.ResponseSuccess)(_Success$z)){};listCaches.Success=Success$z;let _Error$R=class extends Response$S{constructor(e){super(),this._innerException=e}},Error$S=class extends((0,response_base_1$R.ResponseError)(_Error$R)){};listCaches.Error=Error$S;var createSigningKey={};Object.defineProperty(createSigningKey,"__esModule",{value:!0}),createSigningKey.Error=createSigningKey.Success=createSigningKey.Response=void 0;const response_base_1$Q=responseBase;let Response$R=class extends response_base_1$Q.ResponseBase{};createSigningKey.Response=Response$R;let _Success$y=class extends Response$R{constructor(e,t){var r,o;super();const i=null!==(r=null==t?void 0:t.key)&&void 0!==r?r:"";this.keyId=JSON.parse(i).kid,this.endpoint=e,this.key=i,this.expiresAt=new Date(null!==(o=null==t?void 0:t.expiresAt)&&void 0!==o?o:0)}getKeyId(){return this.keyId}getEndpoint(){return this.endpoint}getKey(){return this.key}getExpiresAt(){return this.expiresAt}},Success$y=class extends((0,response_base_1$Q.ResponseSuccess)(_Success$y)){};createSigningKey.Success=Success$y;let _Error$Q=class extends Response$R{constructor(e){super(),this._innerException=e}},Error$R=class extends((0,response_base_1$Q.ResponseError)(_Error$Q)){};createSigningKey.Error=Error$R;var listSigningKeys={},signingKey={};Object.defineProperty(signingKey,"__esModule",{value:!0}),signingKey.SigningKey=void 0;class SigningKey{constructor(e,t,r){this.keyId=e,this.expiresAt=t,this.endpoint=r}getKeyId(){return this.keyId}getExpiresAt(){return this.expiresAt}getEndpoint(){return this.endpoint}}signingKey.SigningKey=SigningKey,Object.defineProperty(listSigningKeys,"__esModule",{value:!0}),listSigningKeys.Error=listSigningKeys.Success=listSigningKeys.Response=void 0;const signing_key_1=signingKey,response_base_1$P=responseBase;let Response$Q=class extends response_base_1$P.ResponseBase{};listSigningKeys.Response=Response$Q;let _Success$x=class extends Response$Q{constructor(e,t,r){var o;super(),this.nextToken=r,this.signingKeys=null!==(o=t.map((t=>new signing_key_1.SigningKey(t.key,new Date(1e3*t.expiresAt),e))))&&void 0!==o?o:[]}getNextToken(){return this.nextToken}getSigningKeys(){return this.signingKeys}},Success$x=class extends((0,response_base_1$P.ResponseSuccess)(_Success$x)){};listSigningKeys.Success=Success$x;let _Error$P=class extends Response$Q{constructor(e){super(),this._innerException=e}},Error$Q=class extends((0,response_base_1$P.ResponseError)(_Error$P)){};listSigningKeys.Error=Error$Q;var revokeSigningKey={};Object.defineProperty(revokeSigningKey,"__esModule",{value:!0}),revokeSigningKey.Error=revokeSigningKey.Success=revokeSigningKey.Response=void 0;const response_base_1$O=responseBase;let Response$P=class extends response_base_1$O.ResponseBase{};revokeSigningKey.Response=Response$P;let _Success$w=class extends Response$P{},Success$w=class extends((0,response_base_1$O.ResponseSuccess)(_Success$w)){};revokeSigningKey.Success=Success$w;let _Error$O=class extends Response$P{constructor(e){super(),this._innerException=e}},Error$P=class extends((0,response_base_1$O.ResponseError)(_Error$O)){};revokeSigningKey.Error=Error$P;var cacheSetFetch={};Object.defineProperty(cacheSetFetch,"__esModule",{value:!0}),cacheSetFetch.Error=cacheSetFetch.Miss=cacheSetFetch.Hit=cacheSetFetch.Response=void 0;const response_base_1$N=responseBase,utils_1$8=utils$1,TEXT_DECODER$4=new TextDecoder;let Response$O=class extends response_base_1$N.ResponseBase{value(){if(this instanceof Hit$c)return this.value()}};cacheSetFetch.Response=Response$O;let _Hit$c=class extends Response$O{constructor(e){super(),this.elements=e}valueSet(){return this.valueSetString()}valueSetString(){return new Set(this.elements.map((e=>TEXT_DECODER$4.decode(e))))}valueSetUint8Array(){return new Set(this.elements)}value(){return this.valueArrayString()}valueArray(){return this.valueArrayString()}valueArrayString(){return this.elements.map((e=>TEXT_DECODER$4.decode(e)))}valueArrayUint8Array(){return this.elements}toString(){const e=(0,utils_1$8.truncateStringArray)(Array.from(this.valueSetString()));return`${super.toString()}: [${e.toString()}]`}},Hit$c=class extends((0,response_base_1$N.ResponseHit)(_Hit$c)){};cacheSetFetch.Hit=Hit$c;let _Miss$f=class extends Response$O{},Miss$f=class extends((0,response_base_1$N.ResponseMiss)(_Miss$f)){};cacheSetFetch.Miss=Miss$f;let _Error$N=class extends Response$O{constructor(e){super(),this._innerException=e}},Error$O=class extends((0,response_base_1$N.ResponseError)(_Error$N)){};cacheSetFetch.Error=Error$O;var cacheDictionaryFetch={};Object.defineProperty(cacheDictionaryFetch,"__esModule",{value:!0}),cacheDictionaryFetch.Error=cacheDictionaryFetch.Miss=cacheDictionaryFetch.Hit=cacheDictionaryFetch.Response=void 0;const response_base_1$M=responseBase,TEXT_DECODER$3=new TextDecoder;let Response$N=class extends response_base_1$M.ResponseBase{value(){if(this instanceof Hit$b)return this.value()}};cacheDictionaryFetch.Response=Response$N;let _Hit$b=class extends Response$N{constructor(e){super(),this._displayListSizeLimit=5,this.items=e}valueMap(){return this.valueMapStringString()}valueMapUint8ArrayUint8Array(){return this.items.reduce(((e,t)=>(e.set(t.field,t.value),e)),new Map)}valueMapStringString(){return this.items.reduce(((e,t)=>(e.set(TEXT_DECODER$3.decode(t.field),TEXT_DECODER$3.decode(t.value)),e)),new Map)}valueMapStringUint8Array(){return this.items.reduce(((e,t)=>(e.set(TEXT_DECODER$3.decode(t.field),t.value),e)),new Map)}value(){return this.valueRecordStringString()}valueRecord(){return this.valueRecordStringString()}valueRecordStringString(){return this.items.reduce(((e,t)=>(e[TEXT_DECODER$3.decode(t.field)]=TEXT_DECODER$3.decode(t.value),e)),{})}valueRecordStringUint8Array(){return this.items.reduce(((e,t)=>(e[TEXT_DECODER$3.decode(t.field)]=t.value,e)),{})}truncateValueStrings(){const e=this.valueMapStringString().entries(),t=Array.from(e);if(t.length<=this._displayListSizeLimit){const e=[];return t.forEach((t=>{e.push(`${t[0]}: ${t[1]}`)})),e.join(",")}{const e=t.slice(0,this._displayListSizeLimit),r=[];return e.forEach((e=>{r.push(`${e[0]}: ${e[1]}`)})),r.join(",")}}toString(){return`${super.toString()}: valueDictionaryStringString: ${this.truncateValueStrings()}`}},Hit$b=class extends((0,response_base_1$M.ResponseHit)(_Hit$b)){};cacheDictionaryFetch.Hit=Hit$b;let _Miss$e=class extends Response$N{},Miss$e=class extends((0,response_base_1$M.ResponseMiss)(_Miss$e)){};cacheDictionaryFetch.Miss=Miss$e;let _Error$M=class extends Response$N{constructor(e){super(),this._innerException=e}},Error$N=class extends((0,response_base_1$M.ResponseError)(_Error$M)){};cacheDictionaryFetch.Error=Error$N;var cacheDictionarySetField={};Object.defineProperty(cacheDictionarySetField,"__esModule",{value:!0}),cacheDictionarySetField.Error=cacheDictionarySetField.Success=cacheDictionarySetField.Response=void 0;const response_base_1$L=responseBase;let Response$M=class extends response_base_1$L.ResponseBase{};cacheDictionarySetField.Response=Response$M;let _Success$v=class extends Response$M{},Success$v=class extends((0,response_base_1$L.ResponseSuccess)(_Success$v)){};cacheDictionarySetField.Success=Success$v;let _Error$L=class extends Response$M{constructor(e){super(),this._innerException=e}},Error$M=class extends((0,response_base_1$L.ResponseError)(_Error$L)){};cacheDictionarySetField.Error=Error$M;var cacheDictionarySetFields={};Object.defineProperty(cacheDictionarySetFields,"__esModule",{value:!0}),cacheDictionarySetFields.Error=cacheDictionarySetFields.Success=cacheDictionarySetFields.Response=void 0;const response_base_1$K=responseBase;let Response$L=class extends response_base_1$K.ResponseBase{};cacheDictionarySetFields.Response=Response$L;let _Success$u=class extends Response$L{},Success$u=class extends((0,response_base_1$K.ResponseSuccess)(_Success$u)){};cacheDictionarySetFields.Success=Success$u;let _Error$K=class extends Response$L{constructor(e){super(),this._innerException=e}},Error$L=class extends((0,response_base_1$K.ResponseError)(_Error$K)){};cacheDictionarySetFields.Error=Error$L;var cacheDictionaryGetField={};Object.defineProperty(cacheDictionaryGetField,"__esModule",{value:!0}),cacheDictionaryGetField.Error=cacheDictionaryGetField.Miss=cacheDictionaryGetField.Hit=cacheDictionaryGetField.Response=void 0;const response_base_1$J=responseBase,utils_1$7=utils$1,TEXT_DECODER$2=new TextDecoder;let Response$K=class extends response_base_1$J.ResponseBase{value(){if(this instanceof Hit$a)return this.value()}};cacheDictionaryGetField.Response=Response$K;let _Hit$a=class extends Response$K{constructor(e){super(),this.body=e}value(){return this.valueString()}valueString(){return TEXT_DECODER$2.decode(this.body)}valueUint8Array(){return this.body}toString(){const e=(0,utils_1$7.truncateString)(this.valueString());return`${super.toString()}: ${e}`}},Hit$a=class extends((0,response_base_1$J.ResponseHit)(_Hit$a)){constructor(e,t){super(e),this.field=t}fieldString(){return TEXT_DECODER$2.decode(this.field)}fieldUint8Array(){return this.field}};cacheDictionaryGetField.Hit=Hit$a;let _Miss$d=class extends Response$K{},Miss$d=class extends((0,response_base_1$J.ResponseMiss)(_Miss$d)){constructor(e){super(),this.field=e}fieldString(){return TEXT_DECODER$2.decode(this.field)}fieldUint8Array(){return this.field}};cacheDictionaryGetField.Miss=Miss$d;let _Error$J=class extends Response$K{constructor(e){super(),this._innerException=e}},Error$K=class extends((0,response_base_1$J.ResponseError)(_Error$J)){constructor(e,t){super(e),this._innerException=e,this.field=t}fieldString(){return TEXT_DECODER$2.decode(this.field)}fieldUint8Array(){return this.field}};cacheDictionaryGetField.Error=Error$K;var cacheDictionaryGetFields={};Object.defineProperty(cacheDictionaryGetFields,"__esModule",{value:!0}),cacheDictionaryGetFields.Error=cacheDictionaryGetFields.Miss=cacheDictionaryGetFields.Hit=cacheDictionaryGetFields.Response=void 0;const errors_1$2=errors$1,response_base_1$I=responseBase,CacheDictionaryGetFieldResponse=cacheDictionaryGetField,grpc_response_types_1$1=grpcResponseTypes,TEXT_DECODER$1=new TextDecoder;let Response$J=class extends response_base_1$I.ResponseBase{value(){if(this instanceof Hit$9)return this.value()}};cacheDictionaryGetFields.Response=Response$J;let _Hit$9=class extends Response$J{constructor(e,t){super(),this.responses=[],this.items=e,this.fields=t,e.forEach(((e,r)=>{this.responses.push(e.result===grpc_response_types_1$1._ECacheResult.Hit?new CacheDictionaryGetFieldResponse.Hit(e.cacheBody,t[r]):e.result===grpc_response_types_1$1._ECacheResult.Miss?new CacheDictionaryGetFieldResponse.Miss(t[r]):new CacheDictionaryGetFieldResponse.Error(new errors_1$2.UnknownError(e.result.toString()),t[r]))}))}valueMapUint8ArrayUint8Array(){return this.items.reduce(((e,t,r)=>(t.result===grpc_response_types_1$1._ECacheResult.Hit&&e.set(this.fields[r],t.cacheBody),e)),new Map)}valueMapStringString(){return this.items.reduce(((e,t,r)=>(t.result===grpc_response_types_1$1._ECacheResult.Hit&&e.set(TEXT_DECODER$1.decode(this.fields[r]),TEXT_DECODER$1.decode(t.cacheBody)),e)),new Map)}valueMap(){return this.valueMapStringString()}valueMapStringUint8Array(){return this.items.reduce(((e,t,r)=>(t.result===grpc_response_types_1$1._ECacheResult.Hit&&e.set(TEXT_DECODER$1.decode(this.fields[r]),t.cacheBody),e)),new Map)}valueRecordStringString(){return this.items.reduce(((e,t,r)=>(t.result===grpc_response_types_1$1._ECacheResult.Hit&&(e[TEXT_DECODER$1.decode(this.fields[r])]=TEXT_DECODER$1.decode(t.cacheBody)),e)),{})}valueRecord(){return this.valueRecordStringString()}value(){return this.valueRecordStringString()}valueRecordStringUint8Array(){return this.items.reduce(((e,t,r)=>(t.result===grpc_response_types_1$1._ECacheResult.Hit&&(e[TEXT_DECODER$1.decode(this.fields[r])]=t.cacheBody),e)),{})}toString(){let e="";return this.valueMapStringString().forEach(((t,r)=>{e+=`${r}: ${t}, `})),`${super.toString()}: valueDictionaryStringString: ${e.slice(0,-2)}`}},Hit$9=class extends((0,response_base_1$I.ResponseHit)(_Hit$9)){};cacheDictionaryGetFields.Hit=Hit$9;let _Miss$c=class extends Response$J{},Miss$c=class extends((0,response_base_1$I.ResponseMiss)(_Miss$c)){};cacheDictionaryGetFields.Miss=Miss$c;let _Error$I=class extends Response$J{constructor(e){super(),this._innerException=e}},Error$J=class extends((0,response_base_1$I.ResponseError)(_Error$I)){};cacheDictionaryGetFields.Error=Error$J;var cacheDictionaryRemoveField={};Object.defineProperty(cacheDictionaryRemoveField,"__esModule",{value:!0}),cacheDictionaryRemoveField.Error=cacheDictionaryRemoveField.Success=cacheDictionaryRemoveField.Response=void 0;const response_base_1$H=responseBase;let Response$I=class extends response_base_1$H.ResponseBase{};cacheDictionaryRemoveField.Response=Response$I;let _Success$t=class extends Response$I{},Success$t=class extends((0,response_base_1$H.ResponseSuccess)(_Success$t)){};cacheDictionaryRemoveField.Success=Success$t;let _Error$H=class extends Response$I{constructor(e){super(),this._innerException=e}},Error$I=class extends((0,response_base_1$H.ResponseError)(_Error$H)){};cacheDictionaryRemoveField.Error=Error$I;var cacheDictionaryRemoveFields={};Object.defineProperty(cacheDictionaryRemoveFields,"__esModule",{value:!0}),cacheDictionaryRemoveFields.Error=cacheDictionaryRemoveFields.Success=cacheDictionaryRemoveFields.Response=void 0;const response_base_1$G=responseBase;let Response$H=class extends response_base_1$G.ResponseBase{};cacheDictionaryRemoveFields.Response=Response$H;let _Success$s=class extends Response$H{},Success$s=class extends((0,response_base_1$G.ResponseSuccess)(_Success$s)){};cacheDictionaryRemoveFields.Success=Success$s;let _Error$G=class extends Response$H{constructor(e){super(),this._innerException=e}},Error$H=class extends((0,response_base_1$G.ResponseError)(_Error$G)){};cacheDictionaryRemoveFields.Error=Error$H;var cacheDictionaryIncrement={};Object.defineProperty(cacheDictionaryIncrement,"__esModule",{value:!0}),cacheDictionaryIncrement.Error=cacheDictionaryIncrement.Success=cacheDictionaryIncrement.Response=void 0;const response_base_1$F=responseBase;let Response$G=class extends response_base_1$F.ResponseBase{value(){if(this instanceof Success$r)return this.value()}};cacheDictionaryIncrement.Response=Response$G;let _Success$r=class extends Response$G{constructor(e){super(),this._value=e}value(){return this._value}valueNumber(){return this._value}toString(){return`${super.toString()}: value: ${this.valueNumber()}`}},Success$r=class extends((0,response_base_1$F.ResponseSuccess)(_Success$r)){};cacheDictionaryIncrement.Success=Success$r;let _Error$F=class extends Response$G{constructor(e){super(),this._innerException=e}},Error$G=class extends((0,response_base_1$F.ResponseError)(_Error$F)){};cacheDictionaryIncrement.Error=Error$G;var cacheDictionaryLength={};Object.defineProperty(cacheDictionaryLength,"__esModule",{value:!0}),cacheDictionaryLength.Error=cacheDictionaryLength.Miss=cacheDictionaryLength.Hit=cacheDictionaryLength.Response=void 0;const response_base_1$E=responseBase;let Response$F=class extends response_base_1$E.ResponseBase{};cacheDictionaryLength.Response=Response$F;let _Hit$8=class extends Response$F{constructor(e){super(),this._length=e}length(){return this._length}toString(){return`${super.toString()}: length ${this._length}`}},Hit$8=class extends((0,response_base_1$E.ResponseHit)(_Hit$8)){};cacheDictionaryLength.Hit=Hit$8;let _Miss$b=class extends Response$F{},Miss$b=class extends((0,response_base_1$E.ResponseMiss)(_Miss$b)){};cacheDictionaryLength.Miss=Miss$b;let _Error$E=class extends Response$F{constructor(e){super(),this._innerException=e}},Error$F=class extends((0,response_base_1$E.ResponseError)(_Error$E)){};cacheDictionaryLength.Error=Error$F;var cacheSetAddElements={},cacheSetAddElement={};Object.defineProperty(cacheSetAddElement,"__esModule",{value:!0}),cacheSetAddElement.Error=cacheSetAddElement.Success=cacheSetAddElement.Response=void 0;const response_base_1$D=responseBase;let Response$E=class extends response_base_1$D.ResponseBase{};cacheSetAddElement.Response=Response$E;let _Success$q=class extends Response$E{},Success$q=class extends((0,response_base_1$D.ResponseSuccess)(_Success$q)){};cacheSetAddElement.Success=Success$q;let _Error$D=class extends Response$E{constructor(e){super(),this._innerException=e}},Error$E=class extends((0,response_base_1$D.ResponseError)(_Error$D)){};cacheSetAddElement.Error=Error$E,Object.defineProperty(cacheSetAddElements,"__esModule",{value:!0}),cacheSetAddElements.Error=cacheSetAddElements.Success=cacheSetAddElements.Response=void 0;const response_base_1$C=responseBase,CacheSetAddElement=cacheSetAddElement;let Response$D=class extends response_base_1$C.ResponseBase{};cacheSetAddElements.Response=Response$D;let _Success$p=class extends Response$D{toSingularResponse(){return new CacheSetAddElement.Success}},Success$p=class extends((0,response_base_1$C.ResponseSuccess)(_Success$p)){};cacheSetAddElements.Success=Success$p;let _Error$C=class extends Response$D{constructor(e){super(),this._innerException=e}toSingularResponse(){return new CacheSetAddElement.Error(this._innerException)}},Error$D=class extends((0,response_base_1$C.ResponseError)(_Error$C)){};cacheSetAddElements.Error=Error$D;var cacheSetRemoveElements={},cacheSetRemoveElement={};Object.defineProperty(cacheSetRemoveElement,"__esModule",{value:!0}),cacheSetRemoveElement.Error=cacheSetRemoveElement.Success=cacheSetRemoveElement.Response=void 0;const response_base_1$B=responseBase;let Response$C=class extends response_base_1$B.ResponseBase{};cacheSetRemoveElement.Response=Response$C;let _Success$o=class extends Response$C{},Success$o=class extends((0,response_base_1$B.ResponseSuccess)(_Success$o)){};cacheSetRemoveElement.Success=Success$o;let _Error$B=class extends Response$C{constructor(e){super(),this._innerException=e}},Error$C=class extends((0,response_base_1$B.ResponseError)(_Error$B)){};cacheSetRemoveElement.Error=Error$C,Object.defineProperty(cacheSetRemoveElements,"__esModule",{value:!0}),cacheSetRemoveElements.Error=cacheSetRemoveElements.Success=cacheSetRemoveElements.Response=void 0;const CacheSetRemoveElement=cacheSetRemoveElement,response_base_1$A=responseBase;let _Success$n=class extends response_base_1$A.ResponseBase{},_Error$A=class extends response_base_1$A.ResponseBase{constructor(e){super(),this._innerException=e}},Response$B=class extends response_base_1$A.ResponseBase{};cacheSetRemoveElements.Response=Response$B;let Success$n=class extends((0,response_base_1$A.ResponseSuccess)(_Success$n)){toSingularResponse(){return new CacheSetRemoveElement.Success}};cacheSetRemoveElements.Success=Success$n;let Error$B=class extends((0,response_base_1$A.ResponseError)(_Error$A)){toSingularResponse(){return new CacheSetRemoveElement.Error(this._innerException)}};cacheSetRemoveElements.Error=Error$B;var cacheIncrement={};Object.defineProperty(cacheIncrement,"__esModule",{value:!0}),cacheIncrement.Error=cacheIncrement.Success=cacheIncrement.Response=void 0;const response_base_1$z=responseBase;let Response$A=class extends response_base_1$z.ResponseBase{value(){if(this instanceof Success$m)return this.value()}};cacheIncrement.Response=Response$A;let _Success$m=class extends Response$A{constructor(e){super(),this._value=e}value(){return this._value}valueNumber(){return this._value}toString(){return`${super.toString()}: value: ${this.valueNumber()}`}},Success$m=class extends((0,response_base_1$z.ResponseSuccess)(_Success$m)){};cacheIncrement.Success=Success$m;let _Error$z=class extends Response$A{constructor(e){super(),this._innerException=e}},Error$A=class extends((0,response_base_1$z.ResponseError)(_Error$z)){};cacheIncrement.Error=Error$A;var cacheSetIfNotExists={};Object.defineProperty(cacheSetIfNotExists,"__esModule",{value:!0}),cacheSetIfNotExists.Error=cacheSetIfNotExists.NotStored=cacheSetIfNotExists.Stored=cacheSetIfNotExists.Response=void 0;const response_base_1$y=responseBase;let Response$z=class extends response_base_1$y.ResponseBase{};cacheSetIfNotExists.Response=Response$z;class _Stored extends Response$z{}class Stored extends((0,response_base_1$y.ResponseSuccess)(_Stored)){}cacheSetIfNotExists.Stored=Stored;class _NotStored extends Response$z{}class NotStored extends((0,response_base_1$y.ResponseSuccess)(_NotStored)){}cacheSetIfNotExists.NotStored=NotStored;let _Error$y=class extends Response$z{constructor(e){super(),this._innerException=e}},Error$z=class extends((0,response_base_1$y.ResponseError)(_Error$y)){};cacheSetIfNotExists.Error=Error$z;var cacheSortedSetPutElement={};Object.defineProperty(cacheSortedSetPutElement,"__esModule",{value:!0}),cacheSortedSetPutElement.Error=cacheSortedSetPutElement.Success=cacheSortedSetPutElement.Response=void 0;const response_base_1$x=responseBase;let Response$y=class extends response_base_1$x.ResponseBase{};cacheSortedSetPutElement.Response=Response$y;let _Success$l=class extends Response$y{},Success$l=class extends((0,response_base_1$x.ResponseSuccess)(_Success$l)){};cacheSortedSetPutElement.Success=Success$l;let _Error$x=class extends Response$y{constructor(e){super(),this._innerException=e}},Error$y=class extends((0,response_base_1$x.ResponseError)(_Error$x)){};cacheSortedSetPutElement.Error=Error$y;var cacheSortedSetPutElements={};Object.defineProperty(cacheSortedSetPutElements,"__esModule",{value:!0}),cacheSortedSetPutElements.Error=cacheSortedSetPutElements.Success=cacheSortedSetPutElements.Response=void 0;const response_base_1$w=responseBase;let Response$x=class extends response_base_1$w.ResponseBase{};cacheSortedSetPutElements.Response=Response$x;let _Success$k=class extends Response$x{},Success$k=class extends((0,response_base_1$w.ResponseSuccess)(_Success$k)){};cacheSortedSetPutElements.Success=Success$k;let _Error$w=class extends Response$x{constructor(e){super(),this._innerException=e}},Error$x=class extends((0,response_base_1$w.ResponseError)(_Error$w)){};cacheSortedSetPutElements.Error=Error$x;var cacheSortedSetFetch={};Object.defineProperty(cacheSortedSetFetch,"__esModule",{value:!0}),cacheSortedSetFetch.Error=cacheSortedSetFetch.Miss=cacheSortedSetFetch.Hit=cacheSortedSetFetch.Response=void 0;const response_base_1$v=responseBase,TEXT_DECODER=new TextDecoder;let Response$w=class extends response_base_1$v.ResponseBase{value(){if(this instanceof Hit$7)return this.value()}};cacheSortedSetFetch.Response=Response$w;let _Hit$7=class extends Response$w{constructor(e){super(),this._displayListSizeLimit=5,this.elements=e}valueArrayUint8Elements(){return this.elements.map((e=>({value:e.value,score:e.score})))}valueArrayStringElements(){return this.elements.map((e=>({value:TEXT_DECODER.decode(e.value),score:e.score})))}valueArray(){return this.valueArrayStringElements()}value(){return this.valueArrayStringElements()}truncateValueStrings(){const e=this.valueArrayStringElements(),t=[];if(e.length<=this._displayListSizeLimit)e.forEach((e=>{t.push(`${e.value}: ${e.score}`)}));else{e.slice(0,this._displayListSizeLimit).forEach((e=>{t.push(`${e.value}: ${e.score}`)}))}return t.join(", ")}toString(){return`${super.toString()}: valueArrayStringElements: ${this.truncateValueStrings()}`}},Hit$7=class extends((0,response_base_1$v.ResponseHit)(_Hit$7)){};cacheSortedSetFetch.Hit=Hit$7;let _Miss$a=class extends Response$w{},Miss$a=class extends((0,response_base_1$v.ResponseMiss)(_Miss$a)){};cacheSortedSetFetch.Miss=Miss$a;let _Error$v=class extends Response$w{constructor(e){super(),this._innerException=e}},Error$w=class extends((0,response_base_1$v.ResponseError)(_Error$v)){};cacheSortedSetFetch.Error=Error$w;var cacheSortedSetGetRank={};Object.defineProperty(cacheSortedSetGetRank,"__esModule",{value:!0}),cacheSortedSetGetRank.Error=cacheSortedSetGetRank.Miss=cacheSortedSetGetRank.Hit=cacheSortedSetGetRank.Response=void 0;const response_base_1$u=responseBase;let Response$v=class extends response_base_1$u.ResponseBase{};cacheSortedSetGetRank.Response=Response$v;let _Hit$6=class extends Response$v{constructor(e){super(),this._rank=e}rank(){return this._rank}toString(){return`${super.toString()}: rank: ${this.rank()}`}},Hit$6=class extends((0,response_base_1$u.ResponseHit)(_Hit$6)){};cacheSortedSetGetRank.Hit=Hit$6;let _Miss$9=class extends Response$v{},Miss$9=class extends((0,response_base_1$u.ResponseMiss)(_Miss$9)){};cacheSortedSetGetRank.Miss=Miss$9;let _Error$u=class extends Response$v{constructor(e){super(),this._innerException=e}},Error$v=class extends((0,response_base_1$u.ResponseError)(_Error$u)){};cacheSortedSetGetRank.Error=Error$v;var cacheSortedSetGetScore={};Object.defineProperty(cacheSortedSetGetScore,"__esModule",{value:!0}),cacheSortedSetGetScore.Error=cacheSortedSetGetScore.Miss=cacheSortedSetGetScore.Hit=cacheSortedSetGetScore.Response=void 0;const response_base_1$t=responseBase;let Response$u=class extends response_base_1$t.ResponseBase{score(){if(this instanceof Hit$5)return this.score()}};cacheSortedSetGetScore.Response=Response$u;let _Hit$5=class extends Response$u{constructor(e,t){super(),this._value=t,this._score=e}valueUint8Array(){return this._value}valueString(){return(new TextDecoder).decode(this._value)}score(){return this._score}toString(){return`${super.toString()}: value: ${this.valueString()}, score: ${this.score()}`}},Hit$5=class extends((0,response_base_1$t.ResponseHit)(_Hit$5)){};cacheSortedSetGetScore.Hit=Hit$5;let _Miss$8=class extends Response$u{constructor(e){super(),this._value=e}valueUint8Array(){return this._value}valueString(){return(new TextDecoder).decode(this._value)}toString(){return`${super.toString()}: value: ${this.valueString()}`}},Miss$8=class extends((0,response_base_1$t.ResponseMiss)(_Miss$8)){};cacheSortedSetGetScore.Miss=Miss$8;let _Error$t=class extends Response$u{constructor(e,t){super(),this._innerException=e,this._value=t}valueUint8Array(){return this._value}valueString(){return(new TextDecoder).decode(this._value)}},Error$u=class extends((0,response_base_1$t.ResponseError)(_Error$t)){};cacheSortedSetGetScore.Error=Error$u;var cacheSortedSetGetScores={};Object.defineProperty(cacheSortedSetGetScores,"__esModule",{value:!0}),cacheSortedSetGetScores.Error=cacheSortedSetGetScores.Miss=cacheSortedSetGetScores.Hit=cacheSortedSetGetScores.Response=void 0;const errors_1$1=errors$1,response_base_1$s=responseBase,CacheSortedSetGetScoreResponse=cacheSortedSetGetScore,grpc_response_types_1=grpcResponseTypes;let Response$t=class extends response_base_1$s.ResponseBase{value(){if(this instanceof Hit$4)return this.value()}};cacheSortedSetGetScores.Response=Response$t;let _Hit$4=class extends Response$t{constructor(e,t){super(),this._responses=[],e.forEach(((e,r)=>{this._responses.push(e.result===grpc_response_types_1._ECacheResult.Hit?new CacheSortedSetGetScoreResponse.Hit(e.score,t[r]):e.result===grpc_response_types_1._ECacheResult.Miss?new CacheSortedSetGetScoreResponse.Miss(t[r]):new CacheSortedSetGetScoreResponse.Error(new errors_1$1.UnknownError(e.result.toString()),t[r]))}))}responses(){return this._responses}valueMapUint8Array(){return this._responses.reduce(((e,t)=>(t instanceof CacheSortedSetGetScoreResponse.Hit&&e.set(t.valueUint8Array(),t.score()),e)),new Map)}valueMapString(){return this._responses.reduce(((e,t)=>(t instanceof CacheSortedSetGetScoreResponse.Hit&&e.set(t.valueString(),t.score()),e)),new Map)}valueMap(){return this.valueMapString()}valueRecordString(){return this._responses.reduce(((e,t)=>(t instanceof CacheSortedSetGetScoreResponse.Hit&&(e[t.valueString()]=t.score()),e)),{})}valueRecord(){return this.valueRecordString()}value(){return this.valueRecord()}toString(){let e="";return this.valueMapString().forEach(((t,r)=>{e+=`${r}: ${t}, `})),`${super.toString()}: valueMapString: ${e.slice(0,-2)}`}},Hit$4=class extends((0,response_base_1$s.ResponseHit)(_Hit$4)){};cacheSortedSetGetScores.Hit=Hit$4;let _Miss$7=class extends Response$t{},Miss$7=class extends((0,response_base_1$s.ResponseMiss)(_Miss$7)){};cacheSortedSetGetScores.Miss=Miss$7;let _Error$s=class extends Response$t{constructor(e){super(),this._innerException=e}},Error$t=class extends((0,response_base_1$s.ResponseError)(_Error$s)){};cacheSortedSetGetScores.Error=Error$t;var cacheSortedSetIncrementScore={};Object.defineProperty(cacheSortedSetIncrementScore,"__esModule",{value:!0}),cacheSortedSetIncrementScore.Error=cacheSortedSetIncrementScore.Success=cacheSortedSetIncrementScore.Response=void 0;const response_base_1$r=responseBase;let Response$s=class extends response_base_1$r.ResponseBase{score(){if(this instanceof Success$j)return this.score()}};cacheSortedSetIncrementScore.Response=Response$s;let _Success$j=class extends Response$s{constructor(e){super(),this._score=e}score(){return this._score}toString(){return`${super.toString()}: value: ${this.score()}`}},Success$j=class extends((0,response_base_1$r.ResponseSuccess)(_Success$j)){};cacheSortedSetIncrementScore.Success=Success$j;let _Error$r=class extends Response$s{constructor(e){super(),this._innerException=e}},Error$s=class extends((0,response_base_1$r.ResponseError)(_Error$r)){};cacheSortedSetIncrementScore.Error=Error$s;var cacheSortedSetRemoveElement={};Object.defineProperty(cacheSortedSetRemoveElement,"__esModule",{value:!0}),cacheSortedSetRemoveElement.Error=cacheSortedSetRemoveElement.Success=cacheSortedSetRemoveElement.Response=void 0;const response_base_1$q=responseBase;let Response$r=class extends response_base_1$q.ResponseBase{};cacheSortedSetRemoveElement.Response=Response$r;let _Success$i=class extends Response$r{},Success$i=class extends((0,response_base_1$q.ResponseSuccess)(_Success$i)){};cacheSortedSetRemoveElement.Success=Success$i;let _Error$q=class extends Response$r{constructor(e){super(),this._innerException=e}},Error$r=class extends((0,response_base_1$q.ResponseError)(_Error$q)){};cacheSortedSetRemoveElement.Error=Error$r;var cacheSortedSetRemoveElements={};Object.defineProperty(cacheSortedSetRemoveElements,"__esModule",{value:!0}),cacheSortedSetRemoveElements.Error=cacheSortedSetRemoveElements.Success=cacheSortedSetRemoveElements.Response=void 0;const response_base_1$p=responseBase;let Response$q=class extends response_base_1$p.ResponseBase{};cacheSortedSetRemoveElements.Response=Response$q;let _Success$h=class extends Response$q{},Success$h=class extends((0,response_base_1$p.ResponseSuccess)(_Success$h)){};cacheSortedSetRemoveElements.Success=Success$h;let _Error$p=class extends Response$q{constructor(e){super(),this._innerException=e}},Error$q=class extends((0,response_base_1$p.ResponseError)(_Error$p)){};cacheSortedSetRemoveElements.Error=Error$q;var cacheSortedSetLength={};Object.defineProperty(cacheSortedSetLength,"__esModule",{value:!0}),cacheSortedSetLength.Error=cacheSortedSetLength.Miss=cacheSortedSetLength.Hit=cacheSortedSetLength.Response=void 0;const response_base_1$o=responseBase;let Response$p=class extends response_base_1$o.ResponseBase{};cacheSortedSetLength.Response=Response$p;let _Hit$3=class extends Response$p{constructor(e){super(),this._length=e}length(){return this._length}toString(){return`${super.toString()}: length ${this._length}`}},Hit$3=class extends((0,response_base_1$o.ResponseHit)(_Hit$3)){};cacheSortedSetLength.Hit=Hit$3;let _Miss$6=class extends Response$p{},Miss$6=class extends((0,response_base_1$o.ResponseMiss)(_Miss$6)){};cacheSortedSetLength.Miss=Miss$6;let _Error$o=class extends Response$p{constructor(e){super(),this._innerException=e}},Error$p=class extends((0,response_base_1$o.ResponseError)(_Error$o)){};cacheSortedSetLength.Error=Error$p;var cacheSortedSetLengthByScore={};Object.defineProperty(cacheSortedSetLengthByScore,"__esModule",{value:!0}),cacheSortedSetLengthByScore.Error=cacheSortedSetLengthByScore.Miss=cacheSortedSetLengthByScore.Hit=cacheSortedSetLengthByScore.Response=void 0;const response_base_1$n=responseBase;let Response$o=class extends response_base_1$n.ResponseBase{};cacheSortedSetLengthByScore.Response=Response$o;let _Hit$2=class extends Response$o{constructor(e){super(),this._length=e}length(){return this._length}toString(){return`${super.toString()}: length ${this._length}`}},Hit$2=class extends((0,response_base_1$n.ResponseHit)(_Hit$2)){};cacheSortedSetLengthByScore.Hit=Hit$2;let _Miss$5=class extends Response$o{},Miss$5=class extends((0,response_base_1$n.ResponseMiss)(_Miss$5)){};cacheSortedSetLengthByScore.Miss=Miss$5;let _Error$n=class extends Response$o{constructor(e){super(),this._innerException=e}},Error$o=class extends((0,response_base_1$n.ResponseError)(_Error$n)){};cacheSortedSetLengthByScore.Error=Error$o;var cacheItemGetType={};Object.defineProperty(cacheItemGetType,"__esModule",{value:!0}),cacheItemGetType.Error=cacheItemGetType.Miss=cacheItemGetType.Hit=cacheItemGetType.Response=void 0;const response_base_1$m=responseBase;let Response$n=class extends response_base_1$m.ResponseBase{};cacheItemGetType.Response=Response$n;let _Hit$1=class extends Response$n{constructor(e){super(),this.keyType=e}itemType(){return this.keyType}},Hit$1=class extends((0,response_base_1$m.ResponseHit)(_Hit$1)){};cacheItemGetType.Hit=Hit$1;let _Miss$4=class extends Response$n{},Miss$4=class extends((0,response_base_1$m.ResponseMiss)(_Miss$4)){};cacheItemGetType.Miss=Miss$4;let _Error$m=class extends Response$n{constructor(e){super(),this._innerException=e}},Error$n=class extends((0,response_base_1$m.ResponseError)(_Error$m)){};cacheItemGetType.Error=Error$n;var cacheItemGetTtl={};Object.defineProperty(cacheItemGetTtl,"__esModule",{value:!0}),cacheItemGetTtl.Error=cacheItemGetTtl.Miss=cacheItemGetTtl.Hit=cacheItemGetTtl.Response=void 0;const response_base_1$l=responseBase;let Response$m=class extends response_base_1$l.ResponseBase{};cacheItemGetTtl.Response=Response$m;class _Hit extends Response$m{constructor(e){super(),this.ttlMillis=e}remainingTtlMillis(){return this.ttlMillis}}class Hit extends((0,response_base_1$l.ResponseHit)(_Hit)){}cacheItemGetTtl.Hit=Hit;let _Miss$3=class extends Response$m{},Miss$3=class extends((0,response_base_1$l.ResponseMiss)(_Miss$3)){};cacheItemGetTtl.Miss=Miss$3;let _Error$l=class extends Response$m{constructor(e){super(),this._innerException=e}},Error$m=class extends((0,response_base_1$l.ResponseError)(_Error$l)){};cacheItemGetTtl.Error=Error$m;var cacheKeyExists={};Object.defineProperty(cacheKeyExists,"__esModule",{value:!0}),cacheKeyExists.Error=cacheKeyExists.Success=cacheKeyExists.Response=void 0;const response_base_1$k=responseBase;let Response$l=class extends response_base_1$k.ResponseBase{};cacheKeyExists.Response=Response$l;let _Success$g=class extends Response$l{constructor(e){super(),this._exists=e[0]}exists(){return this._exists}toString(){return`${super.toString()}: exists: ${String(this.exists())}`}},Success$g=class extends((0,response_base_1$k.ResponseSuccess)(_Success$g)){};cacheKeyExists.Success=Success$g;let _Error$k=class extends Response$l{constructor(e){super(),this._innerException=e}},Error$l=class extends((0,response_base_1$k.ResponseError)(_Error$k)){};cacheKeyExists.Error=Error$l;var cacheKeysExist={};Object.defineProperty(cacheKeysExist,"__esModule",{value:!0}),cacheKeysExist.Error=cacheKeysExist.Success=cacheKeysExist.Response=void 0;const response_base_1$j=responseBase;let Response$k=class extends response_base_1$j.ResponseBase{};cacheKeysExist.Response=Response$k;let _Success$f=class extends Response$k{constructor(e){super(),this._exists=e}exists(){return this._exists}toString(){const e=this._exists.map((e=>e));return super.toString()+": exists: "+e.join(", ")}},Success$f=class extends((0,response_base_1$j.ResponseSuccess)(_Success$f)){};cacheKeysExist.Success=Success$f;let _Error$j=class extends Response$k{constructor(e){super(),this._innerException=e}},Error$k=class extends((0,response_base_1$j.ResponseError)(_Error$j)){};cacheKeysExist.Error=Error$k;var cacheTtlUpdate={};Object.defineProperty(cacheTtlUpdate,"__esModule",{value:!0}),cacheTtlUpdate.Error=cacheTtlUpdate.Miss=cacheTtlUpdate.Set=cacheTtlUpdate.Response=void 0;const response_base_1$i=responseBase;let Response$j=class extends response_base_1$i.ResponseBase{};cacheTtlUpdate.Response=Response$j;let _Set$2=class extends Response$j{},Set$3=class extends((0,response_base_1$i.ResponseSuccess)(_Set$2)){};cacheTtlUpdate.Set=Set$3;let _Miss$2=class extends Response$j{},Miss$2=class extends((0,response_base_1$i.ResponseMiss)(_Miss$2)){};cacheTtlUpdate.Miss=Miss$2;let _Error$i=class extends Response$j{constructor(e){super(),this._innerException=e}},Error$j=class extends((0,response_base_1$i.ResponseError)(_Error$i)){};cacheTtlUpdate.Error=Error$j;var cacheTtlIncrease={};Object.defineProperty(cacheTtlIncrease,"__esModule",{value:!0}),cacheTtlIncrease.Error=cacheTtlIncrease.Miss=cacheTtlIncrease.Set=cacheTtlIncrease.Response=void 0;const response_base_1$h=responseBase;let Response$i=class extends response_base_1$h.ResponseBase{};cacheTtlIncrease.Response=Response$i;let _Set$1=class extends Response$i{},Set$2=class extends((0,response_base_1$h.ResponseSuccess)(_Set$1)){};cacheTtlIncrease.Set=Set$2;let _Miss$1=class extends Response$i{},Miss$1=class extends((0,response_base_1$h.ResponseMiss)(_Miss$1)){};cacheTtlIncrease.Miss=Miss$1;let _Error$h=class extends Response$i{constructor(e){super(),this._innerException=e}},Error$i=class extends((0,response_base_1$h.ResponseError)(_Error$h)){};cacheTtlIncrease.Error=Error$i;var cacheTtlDecrease={};Object.defineProperty(cacheTtlDecrease,"__esModule",{value:!0}),cacheTtlDecrease.Error=cacheTtlDecrease.Miss=cacheTtlDecrease.Set=cacheTtlDecrease.Response=void 0;const response_base_1$g=responseBase;let Response$h=class extends response_base_1$g.ResponseBase{};cacheTtlDecrease.Response=Response$h;class _Set extends Response$h{}let Set$1=class extends((0,response_base_1$g.ResponseSuccess)(_Set)){};cacheTtlDecrease.Set=Set$1;class _Miss extends Response$h{}class Miss extends((0,response_base_1$g.ResponseMiss)(_Miss)){}cacheTtlDecrease.Miss=Miss;let _Error$g=class extends Response$h{constructor(e){super(),this._innerException=e}},Error$h=class extends((0,response_base_1$g.ResponseError)(_Error$g)){};cacheTtlDecrease.Error=Error$h;var topicPublish={};Object.defineProperty(topicPublish,"__esModule",{value:!0}),topicPublish.Error=topicPublish.Success=topicPublish.Response=void 0;const response_base_1$f=responseBase;let Response$g=class extends response_base_1$f.ResponseBase{};topicPublish.Response=Response$g;let _Success$e=class extends Response$g{},Success$e=class extends((0,response_base_1$f.ResponseSuccess)(_Success$e)){};topicPublish.Success=Success$e;let _Error$f=class extends Response$g{constructor(e){super(),this._innerException=e}},Error$g=class extends((0,response_base_1$f.ResponseError)(_Error$f)){};topicPublish.Error=Error$g;var topicSubscribe={};Object.defineProperty(topicSubscribe,"__esModule",{value:!0}),topicSubscribe.Error=topicSubscribe.Subscription=topicSubscribe.Response=void 0;const response_base_1$e=responseBase;let Response$f=class extends response_base_1$e.ResponseBase{};topicSubscribe.Response=Response$f;class Subscription extends Response$f{constructor(e){super(),this.subscriptionState=e}unsubscribe(){this.subscriptionState.unsubscribe()}get isSubscribed(){return this.subscriptionState.isSubscribed}}topicSubscribe.Subscription=Subscription;let _Error$e=class extends Response$f{constructor(e){super(),this._innerException=e}},Error$f=class extends((0,response_base_1$e.ResponseError)(_Error$e)){};topicSubscribe.Error=Error$f;var topicItem={};Object.defineProperty(topicItem,"__esModule",{value:!0}),topicItem.TopicItem=void 0;const utils_1$6=utils$1;class TopicItem{constructor(e,t){this._value=e,this._tokenId=null==t?void 0:t.tokenId}value(){return this._value}valueString(){return this.value().toString()}valueUint8Array(){return this.value()}tokenId(){return this._tokenId}toString(){const e=(0,utils_1$6.truncateString)(this.value().toString());let t=`${this.constructor.name}: ${e}`;return void 0!==this._tokenId&&(t+=`; Token Id: ${this._tokenId}`),t}}topicItem.TopicItem=TopicItem;var generateApiKey={};Object.defineProperty(generateApiKey,"__esModule",{value:!0}),generateApiKey.Error=generateApiKey.Success=generateApiKey.Response=void 0;const response_base_1$d=responseBase,utils_1$5=utils$1;let Response$e=class extends response_base_1$d.ResponseBase{};generateApiKey.Response=Response$e;let _Success$d=class extends Response$e{get authToken(){return this.apiKey}constructor(e,t,r,o){super(),this.apiKey=(0,utils_1$5.encodeToBase64)(JSON.stringify({endpoint:r,api_key:e})),this.refreshToken=t,this.endpoint=r,this.expiresAt=o}},Success$d=class extends((0,response_base_1$d.ResponseSuccess)(_Success$d)){};generateApiKey.Success=Success$d;let _Error$d=class extends Response$e{constructor(e){super(),this._innerException=e}},Error$e=class extends((0,response_base_1$d.ResponseError)(_Error$d)){};generateApiKey.Error=Error$e;var refreshApiKey={};Object.defineProperty(refreshApiKey,"__esModule",{value:!0}),refreshApiKey.Error=refreshApiKey.Success=refreshApiKey.Response=void 0;const response_base_1$c=responseBase,utils_1$4=utils$1;let Response$d=class extends response_base_1$c.ResponseBase{};refreshApiKey.Response=Response$d;let _Success$c=class extends Response$d{get authToken(){return this.apiKey}constructor(e,t,r,o){super(),this.apiKey=(0,utils_1$4.encodeToBase64)(JSON.stringify({endpoint:r,api_key:e})),this.refreshToken=t,this.endpoint=r,this.expiresAt=o}},Success$c=class extends((0,response_base_1$c.ResponseSuccess)(_Success$c)){};refreshApiKey.Success=Success$c;let _Error$c=class extends Response$d{constructor(e){super(),this._innerException=e}},Error$d=class extends((0,response_base_1$c.ResponseError)(_Error$c)){};refreshApiKey.Error=Error$d;var generateDisposableToken={};Object.defineProperty(generateDisposableToken,"__esModule",{value:!0}),generateDisposableToken.Error=generateDisposableToken.Success=generateDisposableToken.Response=void 0;const response_base_1$b=responseBase,utils_1$3=utils$1;let Response$c=class extends response_base_1$b.ResponseBase{};generateDisposableToken.Response=Response$c;let _Success$b=class extends Response$c{constructor(e,t,r){super(),this.authToken=(0,utils_1$3.encodeToBase64)(JSON.stringify({endpoint:t,api_key:e})),this.endpoint=t,this.expiresAt=r}},Success$b=class extends((0,response_base_1$b.ResponseSuccess)(_Success$b)){};generateDisposableToken.Success=Success$b;let _Error$b=class extends Response$c{constructor(e){super(),this._innerException=e}},Error$c=class extends((0,response_base_1$b.ResponseError)(_Error$b)){};generateDisposableToken.Error=Error$c;var vector$1={},createVectorIndex={};Object.defineProperty(createVectorIndex,"__esModule",{value:!0}),createVectorIndex.AlreadyExists=createVectorIndex.Error=createVectorIndex.Success=createVectorIndex.Response=void 0;const response_base_1$a=responseBase;let Response$b=class extends response_base_1$a.ResponseBase{};createVectorIndex.Response=Response$b;let _Success$a=class extends Response$b{},Success$a=class extends((0,response_base_1$a.ResponseSuccess)(_Success$a)){};createVectorIndex.Success=Success$a;let _Error$a=class extends Response$b{constructor(e){super(),this._innerException=e}},Error$b=class extends((0,response_base_1$a.ResponseError)(_Error$a)){};createVectorIndex.Error=Error$b;class AlreadyExists extends Response$b{}createVectorIndex.AlreadyExists=AlreadyExists;var listVectorIndexes={};Object.defineProperty(listVectorIndexes,"__esModule",{value:!0}),listVectorIndexes.Error=listVectorIndexes.Success=listVectorIndexes.Response=void 0;const response_base_1$9=responseBase;let Response$a=class extends response_base_1$9.ResponseBase{};listVectorIndexes.Response=Response$a;let _Success$9=class extends Response$a{constructor(e){super(),this.indexNames=e}getIndexNames(){return this.indexNames}toString(){return super.toString()+": "+this.indexNames.join(", ")}},Success$9=class extends((0,response_base_1$9.ResponseSuccess)(_Success$9)){};listVectorIndexes.Success=Success$9;let _Error$9=class extends Response$a{constructor(e){super(),this._innerException=e}},Error$a=class extends((0,response_base_1$9.ResponseError)(_Error$9)){};listVectorIndexes.Error=Error$a;var deleteVectorIndex={};Object.defineProperty(deleteVectorIndex,"__esModule",{value:!0}),deleteVectorIndex.Error=deleteVectorIndex.Success=deleteVectorIndex.Response=void 0;const response_base_1$8=responseBase;let Response$9=class extends response_base_1$8.ResponseBase{};deleteVectorIndex.Response=Response$9;let _Success$8=class extends Response$9{},Success$8=class extends((0,response_base_1$8.ResponseSuccess)(_Success$8)){};deleteVectorIndex.Success=Success$8;let _Error$8=class extends Response$9{constructor(e){super(),this._innerException=e}},Error$9=class extends((0,response_base_1$8.ResponseError)(_Error$8)){};deleteVectorIndex.Error=Error$9;var vectorUpsertItemBatch={};Object.defineProperty(vectorUpsertItemBatch,"__esModule",{value:!0}),vectorUpsertItemBatch.Error=vectorUpsertItemBatch.Success=vectorUpsertItemBatch.Response=void 0;const response_base_1$7=responseBase;let Response$8=class extends response_base_1$7.ResponseBase{};vectorUpsertItemBatch.Response=Response$8;let _Success$7=class extends Response$8{},Success$7=class extends((0,response_base_1$7.ResponseSuccess)(_Success$7)){};vectorUpsertItemBatch.Success=Success$7;let _Error$7=class extends Response$8{constructor(e){super(),this._innerException=e}},Error$8=class extends((0,response_base_1$7.ResponseError)(_Error$7)){};vectorUpsertItemBatch.Error=Error$8;var vectorSearch={};Object.defineProperty(vectorSearch,"__esModule",{value:!0}),vectorSearch.Error=vectorSearch.Success=vectorSearch.Response=void 0;const response_base_1$6=responseBase;let Response$7=class extends response_base_1$6.ResponseBase{hits(){if(this instanceof Success$6)return this.hits()}};vectorSearch.Response=Response$7;let _Success$6=class extends Response$7{},Success$6=class extends((0,response_base_1$6.ResponseSuccess)(_Success$6)){constructor(e){super(),this._hits=e}hits(){return this._hits}};vectorSearch.Success=Success$6;let _Error$6=class extends Response$7{constructor(e){super(),this._innerException=e}},Error$7=class extends((0,response_base_1$6.ResponseError)(_Error$6)){};vectorSearch.Error=Error$7;var vectorDeleteItemBatch={};Object.defineProperty(vectorDeleteItemBatch,"__esModule",{value:!0}),vectorDeleteItemBatch.Error=vectorDeleteItemBatch.Success=vectorDeleteItemBatch.Response=void 0;const response_base_1$5=responseBase;let Response$6=class extends response_base_1$5.ResponseBase{};vectorDeleteItemBatch.Response=Response$6;let _Success$5=class extends Response$6{},Success$5=class extends((0,response_base_1$5.ResponseSuccess)(_Success$5)){};vectorDeleteItemBatch.Success=Success$5;let _Error$5=class extends Response$6{constructor(e){super(),this._innerException=e}},Error$6=class extends((0,response_base_1$5.ResponseError)(_Error$5)){};vectorDeleteItemBatch.Error=Error$6,Object.defineProperty(vector$1,"__esModule",{value:!0}),vector$1.VectorDeleteItemBatch=vector$1.VectorSearch=vector$1.VectorUpsertItemBatch=vector$1.DeleteVectorIndex=vector$1.ListVectorIndexes=vector$1.CreateVectorIndex=void 0,vector$1.CreateVectorIndex=createVectorIndex,vector$1.ListVectorIndexes=listVectorIndexes,vector$1.DeleteVectorIndex=deleteVectorIndex,vector$1.VectorUpsertItemBatch=vectorUpsertItemBatch,vector$1.VectorSearch=vectorSearch,vector$1.VectorDeleteItemBatch=vectorDeleteItemBatch;var leaderboard$2={},leaderboardDelete={};Object.defineProperty(leaderboardDelete,"__esModule",{value:!0}),leaderboardDelete.Error=leaderboardDelete.Success=leaderboardDelete.Response=void 0;const response_base_1$4=responseBase;let Response$5=class extends response_base_1$4.ResponseBase{};leaderboardDelete.Response=Response$5;let _Success$4=class extends Response$5{},Success$4=class extends((0,response_base_1$4.ResponseSuccess)(_Success$4)){};leaderboardDelete.Success=Success$4;let _Error$4=class extends Response$5{constructor(e){super(),this._innerException=e}},Error$5=class extends((0,response_base_1$4.ResponseError)(_Error$4)){};leaderboardDelete.Error=Error$5;var leaderboardFetch={};Object.defineProperty(leaderboardFetch,"__esModule",{value:!0}),leaderboardFetch.Error=leaderboardFetch.Success=leaderboardFetch.Response=void 0;const response_base_1$3=responseBase;let Response$4=class extends response_base_1$3.ResponseBase{};leaderboardFetch.Response=Response$4;let _Success$3=class extends Response$4{constructor(e){super(),this._elements=e}values(){return this._elements.map((e=>({id:e.id,score:e.score,rank:e.rank})))}},Success$3=class extends((0,response_base_1$3.ResponseSuccess)(_Success$3)){};leaderboardFetch.Success=Success$3;let _Error$3=class extends Response$4{constructor(e){super(),this._innerException=e}},Error$4=class extends((0,response_base_1$3.ResponseError)(_Error$3)){};leaderboardFetch.Error=Error$4;var leaderboardLength={};Object.defineProperty(leaderboardLength,"__esModule",{value:!0}),leaderboardLength.Error=leaderboardLength.Success=leaderboardLength.Response=void 0;const response_base_1$2=responseBase;let Response$3=class extends response_base_1$2.ResponseBase{};leaderboardLength.Response=Response$3;let _Success$2=class extends Response$3{constructor(e){super(),this._length=e}length(){return this._length}toString(){return`${super.toString()}: length ${this._length}`}},Success$2=class extends((0,response_base_1$2.ResponseSuccess)(_Success$2)){};leaderboardLength.Success=Success$2;let _Error$2=class extends Response$3{constructor(e){super(),this._innerException=e}},Error$3=class extends((0,response_base_1$2.ResponseError)(_Error$2)){};leaderboardLength.Error=Error$3;var leaderboardRemoveElements={};Object.defineProperty(leaderboardRemoveElements,"__esModule",{value:!0}),leaderboardRemoveElements.Error=leaderboardRemoveElements.Success=leaderboardRemoveElements.Response=void 0;const response_base_1$1=responseBase;let Response$2=class extends response_base_1$1.ResponseBase{};leaderboardRemoveElements.Response=Response$2;let _Success$1=class extends Response$2{},Success$1=class extends((0,response_base_1$1.ResponseSuccess)(_Success$1)){};leaderboardRemoveElements.Success=Success$1;let _Error$1=class extends Response$2{constructor(e){super(),this._innerException=e}},Error$2=class extends((0,response_base_1$1.ResponseError)(_Error$1)){};leaderboardRemoveElements.Error=Error$2;var leaderboardUpsert={};Object.defineProperty(leaderboardUpsert,"__esModule",{value:!0}),leaderboardUpsert.Error=leaderboardUpsert.Success=leaderboardUpsert.Response=void 0;const response_base_1=responseBase;let Response$1=class extends response_base_1.ResponseBase{};leaderboardUpsert.Response=Response$1;class _Success extends Response$1{}class Success extends((0,response_base_1.ResponseSuccess)(_Success)){}leaderboardUpsert.Success=Success;class _Error extends Response$1{constructor(e){super(),this._innerException=e}}let Error$1=class extends((0,response_base_1.ResponseError)(_Error)){};leaderboardUpsert.Error=Error$1,Object.defineProperty(leaderboard$2,"__esModule",{value:!0}),leaderboard$2.LeaderboardUpsert=leaderboard$2.LeaderboardRemoveElements=leaderboard$2.LeaderboardLength=leaderboard$2.LeaderboardFetch=leaderboard$2.LeaderboardDelete=void 0,leaderboard$2.LeaderboardDelete=leaderboardDelete,leaderboard$2.LeaderboardFetch=leaderboardFetch,leaderboard$2.LeaderboardLength=leaderboardLength,leaderboard$2.LeaderboardRemoveElements=leaderboardRemoveElements,leaderboard$2.LeaderboardUpsert=leaderboardUpsert;var cacheInfo={};Object.defineProperty(cacheInfo,"__esModule",{value:!0}),cacheInfo.CacheInfo=void 0;class CacheInfo{constructor(e,t,r){this.name=e,this.topicLimits=t,this.cacheLimits=r}getName(){return this.name}getTopicLimits(){return this.topicLimits}getCacheLimits(){return this.cacheLimits}}cacheInfo.CacheInfo=CacheInfo;var utils={},cacheCallOptions={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.LeaderboardOrder=e.SortedSetOrder=void 0,(t=e.SortedSetOrder||(e.SortedSetOrder={})).Ascending="ASC",t.Descending="DESC",(r=e.LeaderboardOrder||(e.LeaderboardOrder={})).Ascending="ASC",r.Descending="DESC"}(cacheCallOptions);var collectionTtl={};Object.defineProperty(collectionTtl,"__esModule",{value:!0}),collectionTtl.CollectionTtl=void 0;class CollectionTtl{constructor(e=null,t=!0){this._refreshTtl=t,this._ttlSeconds=e}ttlSeconds(){return this._ttlSeconds}ttlMilliseconds(){return null===this._ttlSeconds?null:1e3*this._ttlSeconds}refreshTtl(){return this._refreshTtl}static fromCacheTtl(){return new CollectionTtl(null,!0)}static of(e){return new CollectionTtl(e,!0)}static refreshTtlIfProvided(e=null){return new CollectionTtl(e,null!==e)}withRefreshTtlOnUpdates(){return new CollectionTtl(this._ttlSeconds,!0)}withNoRefreshTtlOnUpdates(){return new CollectionTtl(this._ttlSeconds,!1)}toString(){return`ttl: ${this._ttlSeconds||"null"}, refreshTtl: ${this._refreshTtl?"true":"false"}`}}collectionTtl.CollectionTtl=CollectionTtl;var topicCallOptions={};Object.defineProperty(topicCallOptions,"__esModule",{value:!0});var expiration={};Object.defineProperty(expiration,"__esModule",{value:!0}),expiration.ExpiresAt=expiration.ExpiresIn=void 0;class Expiration{constructor(e){this._doesExpire=e}doesExpire(){return this._doesExpire}}class ExpiresIn extends Expiration{constructor(e){super(e!==1/0),this._validForSeconds=null===e?1/0:e}seconds(){return this._validForSeconds}static never(){return new ExpiresIn(1/0)}static seconds(e){return new ExpiresIn(e)}static minutes(e){return new ExpiresIn(60*e)}static hours(e){return new ExpiresIn(3600*e)}static days(e){return new ExpiresIn(86400*e)}static epoch(e){const t=(new Date).getTime()/1e3,r=Math.round(e-t);return new ExpiresIn(r)}}expiration.ExpiresIn=ExpiresIn;class ExpiresAt extends Expiration{constructor(e){super(void 0!==e&&0!==e),this.validUntil=this.doesExpire()?e:1/0}epoch(){return this.validUntil}static fromEpoch(e){return new ExpiresAt(e)}}expiration.ExpiresAt=ExpiresAt;var itemType={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ItemType=void 0,(t=e.ItemType||(e.ItemType={}))[t.SCALAR=0]="SCALAR",t[t.DICTIONARY=1]="DICTIONARY",t[t.LIST=2]="LIST",t[t.SET=3]="SET",t[t.SORTED_SET=4]="SORTED_SET"}(itemType),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(cacheCallOptions,e),r(collectionTtl,e),r(topicCallOptions,e),r(expiration,e),r(itemType,e)}(utils);var auth$1={},credentialProvider={};Object.defineProperty(credentialProvider,"__esModule",{value:!0}),credentialProvider.EnvMomentoTokenProvider=credentialProvider.StringMomentoTokenProvider=credentialProvider.CredentialProvider=void 0;const utils_1$2=utils$1;function isBaseEndpointOverride(e){return void 0!==e.baseEndpoint}function isAllEndpoints(e){return void 0!==e.cacheEndpoint&&void 0!==e.controlEndpoint&&void 0!==e.tokenEndpoint&&void 0!==e.vectorEndpoint}class CredentialProvider{static fromEnvironmentVariable(e){return new EnvMomentoTokenProvider(e)}static fromString(e){return new StringMomentoTokenProvider(e)}}credentialProvider.CredentialProvider=CredentialProvider;class CredentialProviderBase{valueOf(){const e=Object.entries(this).filter((([e])=>"authToken"!==e));return(0,utils_1$2.fromEntries)(e).valueOf()}}class StringMomentoTokenProvider extends CredentialProviderBase{constructor(e){let t;if(super(),"authToken"in e)t=e.authToken;else{if(!("apiKey"in e))throw new Error("Missing required property: authToken or apiKey");t=e.apiKey}const r=(0,utils_1$2.decodeAuthToken)(t);if(this.apiKey=r.authToken,void 0===e.endpointOverrides){if(this.endpointsOverridden=!1,void 0===r.controlEndpoint)throw new Error("Malformed token; unable to determine control endpoint.  Depending on the type of token you are using, you may need to specify the controlEndpoint explicitly.");if(void 0===r.cacheEndpoint)throw new Error("Malformed token; unable to determine cache endpoint.  Depending on the type of token you are using, you may need to specify the cacheEndpoint explicitly.");if(void 0===r.tokenEndpoint)throw new Error("Malformed token; unable to determine token endpoint.  Depending on the type of token you are using, you may need to specify the tokenEndpoint explicitly.");if(void 0===r.vectorEndpoint)throw new Error("Malformed token; unable to determine vector endpoint.  Depending on the type of token you are using, you may need to specify the vectorEndpoint explicitly.");this.allEndpoints={controlEndpoint:r.controlEndpoint,cacheEndpoint:r.cacheEndpoint,tokenEndpoint:r.tokenEndpoint,vectorEndpoint:r.vectorEndpoint}}else if(isAllEndpoints(e.endpointOverrides))this.endpointsOverridden=!0,this.allEndpoints=e.endpointOverrides;else{if(!isBaseEndpointOverride(e.endpointOverrides))throw new Error(`Unsupported endpointOverrides: ${e.endpointOverrides}`);this.endpointsOverridden=!0,this.allEndpoints=(0,utils_1$2.populateAllEndpointsFromBaseEndpoint)(e.endpointOverrides.baseEndpoint)}}getAuthToken(){return this.apiKey}getCacheEndpoint(){return this.allEndpoints.cacheEndpoint}getControlEndpoint(){return this.allEndpoints.controlEndpoint}getTokenEndpoint(){return this.allEndpoints.tokenEndpoint}getVectorEndpoint(){return this.allEndpoints.vectorEndpoint}areEndpointsOverridden(){return this.endpointsOverridden}}credentialProvider.StringMomentoTokenProvider=StringMomentoTokenProvider;class EnvMomentoTokenProvider extends StringMomentoTokenProvider{constructor(e){const t=process.env[e.environmentVariableName];if(!t)throw new Error(`Missing required environment variable ${e.environmentVariableName}`);super({authToken:t,endpointOverrides:e.endpointOverrides}),this.environmentVariableName=e.environmentVariableName}}credentialProvider.EnvMomentoTokenProvider=EnvMomentoTokenProvider,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(credentialProvider,e)}(auth$1);var noopMomentoLogger={};Object.defineProperty(noopMomentoLogger,"__esModule",{value:!0}),noopMomentoLogger.NoopMomentoLoggerFactory=noopMomentoLogger.NoopMomentoLogger=void 0;class NoopMomentoLogger{debug(e,...t){}error(e,...t){}info(e,...t){}trace(e,...t){}warn(e,...t){}}noopMomentoLogger.NoopMomentoLogger=NoopMomentoLogger;class NoopMomentoLoggerFactory{getLogger(e){return new NoopMomentoLogger}}noopMomentoLogger.NoopMomentoLoggerFactory=NoopMomentoLoggerFactory;var IVectorIndexClient={};Object.defineProperty(IVectorIndexClient,"__esModule",{value:!0}),IVectorIndexClient.ALL_VECTOR_METADATA=void 0,IVectorIndexClient.ALL_VECTOR_METADATA=Symbol("ALL_VECTOR_METADATA");var disposableTokenScope={};Object.defineProperty(disposableTokenScope,"__esModule",{value:!0}),disposableTokenScope.asDisposableTokenPermissionsObject=disposableTokenScope.isDisposableTokenPermissionsObject=disposableTokenScope.asDisposableTokenCachePermission=disposableTokenScope.isDisposableTokenCachePermission=disposableTokenScope.isCacheItemKeyPrefix=disposableTokenScope.isCacheItemKey=void 0;const permission_scope_1$1=permissionScope;function isCacheItemKey(e){return e!==permission_scope_1$1.AllCacheItems&&("string"==typeof e||"key"in e)}function isCacheItemKeyPrefix(e){return e!==permission_scope_1$1.AllCacheItems&&("string"!=typeof e&&"keyPrefix"in e)}function isDisposableTokenCachePermission(e){return"role"in e&&"cache"in e&&"item"in e&&!("topic"in e)}function asDisposableTokenCachePermission(e){if(!isDisposableTokenCachePermission(e))throw new Error(`permission is not a DisposableTokenCachePermission object: ${JSON.stringify(e)}`);return e}function isDisposableTokenPermissionObject(e){return isDisposableTokenCachePermission(e)}function isDisposableTokenPermissionsObject(e){if(!("permissions"in e))return!1;return e.permissions.every((e=>isDisposableTokenPermissionObject(e)))}function asDisposableTokenPermissionsObject(e){if(!isDisposableTokenPermissionsObject(e))throw new Error(`Token scope is not a DisposableTokenCachePermissions object: ${JSON.stringify(e)}`);return e}disposableTokenScope.isCacheItemKey=isCacheItemKey,disposableTokenScope.isCacheItemKeyPrefix=isCacheItemKeyPrefix,disposableTokenScope.isDisposableTokenCachePermission=isDisposableTokenCachePermission,disposableTokenScope.asDisposableTokenCachePermission=asDisposableTokenCachePermission,disposableTokenScope.isDisposableTokenPermissionsObject=isDisposableTokenPermissionsObject,disposableTokenScope.asDisposableTokenPermissionsObject=asDisposableTokenPermissionsObject;var permissionScopes={};Object.defineProperty(permissionScopes,"__esModule",{value:!0}),permissionScopes.topicPublishOnly=permissionScopes.topicPublishSubscribe=permissionScopes.topicSubscribeOnly=permissionScopes.cacheWriteOnly=permissionScopes.cacheReadOnly=permissionScopes.cacheReadWrite=void 0;const permission_scope_1=permissionScope;function cacheReadWrite(e){return{permissions:[{role:permission_scope_1.CacheRole.ReadWrite,cache:e}]}}function cacheReadOnly(e){return{permissions:[{role:permission_scope_1.CacheRole.ReadOnly,cache:e}]}}function cacheWriteOnly(e){return{permissions:[{role:permission_scope_1.CacheRole.WriteOnly,cache:e}]}}function topicSubscribeOnly(e,t){return{permissions:[{role:permission_scope_1.TopicRole.SubscribeOnly,cache:e,topic:t}]}}function topicPublishSubscribe(e,t){return{permissions:[{role:permission_scope_1.TopicRole.PublishSubscribe,cache:e,topic:t}]}}function topicPublishOnly(e,t){return{permissions:[{role:permission_scope_1.TopicRole.PublishOnly,cache:e,topic:t}]}}permissionScopes.cacheReadWrite=cacheReadWrite,permissionScopes.cacheReadOnly=cacheReadOnly,permissionScopes.cacheWriteOnly=cacheWriteOnly,permissionScopes.topicSubscribeOnly=topicSubscribeOnly,permissionScopes.topicPublishSubscribe=topicPublishSubscribe,permissionScopes.topicPublishOnly=topicPublishOnly;var disposableTokenScopes={},hasRequiredSrc$1;function requireSrc$1(){return hasRequiredSrc$1||(hasRequiredSrc$1=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.RevokeSigningKey=e.ListSigningKeys=e.CreateSigningKey=e.CacheIncrement=e.ListCaches=e.DeleteCache=e.CreateCache=e.CacheFlush=e.CacheDelete=e.CacheSetIfNotExists=e.CacheSet=e.CacheListRetain=e.CacheListRemoveValue=e.CacheListPushFront=e.CacheListPushBack=e.CacheListPopFront=e.CacheListPopBack=e.CacheListLength=e.CacheListFetch=e.CacheListConcatenateFront=e.CacheListConcatenateBack=e.CacheGet=e.EnvMomentoTokenProvider=e.StringMomentoTokenProvider=e.CredentialProvider=e.LeaderboardOrder=e.SortedSetOrder=e.ItemType=e.CollectionTtl=e.ExpiresAt=e.ExpiresIn=e.DisposableTokenScopes=e.TokenScopes=e.PermissionScopes=e.isCacheItemKeyPrefix=e.isCacheItemKey=e.AllCacheItems=e.AllTopics=e.AllCaches=e.isTopicName=e.isCacheName=e.AllDataReadWrite=e.TopicRole=e.CacheRole=e.VectorSimilarityMetric=e.ALL_VECTOR_METADATA=e.NoopMomentoLoggerFactory=e.NoopMomentoLogger=e.leaderboard=e.vector=void 0,e.InvalidArgumentError=e.InternalServerError=e.LimitExceededError=e.FailedPreconditionError=e.CancelledError=e.AuthenticationError=e.AlreadyExistsError=e.SdkError=e.MomentoErrorCode=e.GenerateDisposableToken=e.RefreshAuthToken=e.RefreshApiKey=e.GenerateAuthToken=e.GenerateApiKey=e.TopicItem=e.TopicSubscribe=e.TopicPublish=e.CacheInfo=e.CacheDecreaseTtl=e.CacheIncreaseTtl=e.CacheUpdateTtl=e.CacheKeysExist=e.CacheKeyExists=e.CacheItemGetTtl=e.CacheItemGetType=e.CacheSortedSetLengthByScore=e.CacheSortedSetLength=e.CacheSortedSetRemoveElements=e.CacheSortedSetRemoveElement=e.CacheSortedSetIncrementScore=e.CacheSortedSetGetScores=e.CacheSortedSetGetScore=e.CacheSortedSetGetRank=e.CacheSortedSetFetch=e.CacheSortedSetPutElements=e.CacheSortedSetPutElement=e.CacheSetRemoveElement=e.CacheSetRemoveElements=e.CacheSetAddElement=e.CacheSetAddElements=e.CacheDictionaryLength=e.CacheDictionaryIncrement=e.CacheDictionaryRemoveFields=e.CacheDictionaryRemoveField=e.CacheDictionaryGetFields=e.CacheDictionaryGetField=e.CacheDictionarySetFields=e.CacheDictionarySetField=e.CacheDictionaryFetch=e.CacheSetFetch=void 0,e.UnknownError=e.NotFoundError=e.PermissionError=e.BadRequestError=e.TimeoutError=e.ServerUnavailableError=e.UnknownServiceError=void 0;e.CacheGet=cacheGet;e.CacheListConcatenateBack=cacheListConcatenateBack;e.CacheListConcatenateFront=cacheListConcatenateFront;e.CacheListFetch=cacheListFetch;e.CacheListLength=cacheListLength;e.CacheListPopBack=cacheListPopBack;e.CacheListPopFront=cacheListPopFront;e.CacheListPushBack=cacheListPushBack;e.CacheListPushFront=cacheListPushFront;e.CacheListRemoveValue=cacheListRemoveValue;e.CacheListRetain=cacheListRetain;e.CacheSet=cacheSet;e.CacheDelete=cacheDelete;e.CacheFlush=cacheFlush;e.CreateCache=createCache;e.DeleteCache=deleteCache;e.ListCaches=listCaches;e.CreateSigningKey=createSigningKey;e.ListSigningKeys=listSigningKeys;e.RevokeSigningKey=revokeSigningKey;e.CacheSetFetch=cacheSetFetch;e.CacheDictionaryFetch=cacheDictionaryFetch;e.CacheDictionarySetField=cacheDictionarySetField;e.CacheDictionarySetFields=cacheDictionarySetFields;e.CacheDictionaryGetField=cacheDictionaryGetField;e.CacheDictionaryGetFields=cacheDictionaryGetFields;e.CacheDictionaryRemoveField=cacheDictionaryRemoveField;e.CacheDictionaryRemoveFields=cacheDictionaryRemoveFields;e.CacheDictionaryIncrement=cacheDictionaryIncrement;e.CacheDictionaryLength=cacheDictionaryLength;e.CacheSetAddElements=cacheSetAddElements;e.CacheSetAddElement=cacheSetAddElement;e.CacheSetRemoveElements=cacheSetRemoveElements;e.CacheSetRemoveElement=cacheSetRemoveElement;e.CacheIncrement=cacheIncrement;e.CacheSetIfNotExists=cacheSetIfNotExists;e.CacheSortedSetPutElement=cacheSortedSetPutElement;e.CacheSortedSetPutElements=cacheSortedSetPutElements;e.CacheSortedSetFetch=cacheSortedSetFetch;e.CacheSortedSetGetRank=cacheSortedSetGetRank;e.CacheSortedSetGetScore=cacheSortedSetGetScore;e.CacheSortedSetGetScores=cacheSortedSetGetScores;e.CacheSortedSetIncrementScore=cacheSortedSetIncrementScore;e.CacheSortedSetRemoveElement=cacheSortedSetRemoveElement;e.CacheSortedSetRemoveElements=cacheSortedSetRemoveElements;e.CacheSortedSetLength=cacheSortedSetLength;e.CacheSortedSetLengthByScore=cacheSortedSetLengthByScore;e.CacheItemGetType=cacheItemGetType;e.CacheItemGetTtl=cacheItemGetTtl;e.CacheKeyExists=cacheKeyExists;e.CacheKeysExist=cacheKeysExist;e.CacheUpdateTtl=cacheTtlUpdate;e.CacheIncreaseTtl=cacheTtlIncrease;e.CacheDecreaseTtl=cacheTtlDecrease;e.TopicPublish=topicPublish;e.TopicSubscribe=topicSubscribe;const o=topicItem;Object.defineProperty(e,"TopicItem",{enumerable:!0,get:function(){return o.TopicItem}});const i=generateApiKey;e.GenerateApiKey=i,e.GenerateAuthToken=i;const s=refreshApiKey;e.RefreshApiKey=s,e.RefreshAuthToken=s;e.GenerateDisposableToken=generateDisposableToken,e.vector=vector$1,r(vector$1,e),e.leaderboard=leaderboard$2,r(leaderboard$2,e);const n=cacheInfo;Object.defineProperty(e,"CacheInfo",{enumerable:!0,get:function(){return n.CacheInfo}});const a=utils;Object.defineProperty(e,"CollectionTtl",{enumerable:!0,get:function(){return a.CollectionTtl}}),Object.defineProperty(e,"SortedSetOrder",{enumerable:!0,get:function(){return a.SortedSetOrder}}),Object.defineProperty(e,"LeaderboardOrder",{enumerable:!0,get:function(){return a.LeaderboardOrder}}),Object.defineProperty(e,"ExpiresIn",{enumerable:!0,get:function(){return a.ExpiresIn}}),Object.defineProperty(e,"ExpiresAt",{enumerable:!0,get:function(){return a.ExpiresAt}}),Object.defineProperty(e,"ItemType",{enumerable:!0,get:function(){return a.ItemType}});const l=auth$1;Object.defineProperty(e,"CredentialProvider",{enumerable:!0,get:function(){return l.CredentialProvider}}),Object.defineProperty(e,"StringMomentoTokenProvider",{enumerable:!0,get:function(){return l.StringMomentoTokenProvider}}),Object.defineProperty(e,"EnvMomentoTokenProvider",{enumerable:!0,get:function(){return l.EnvMomentoTokenProvider}});const c=errors$1;Object.defineProperty(e,"MomentoErrorCode",{enumerable:!0,get:function(){return c.MomentoErrorCode}}),Object.defineProperty(e,"SdkError",{enumerable:!0,get:function(){return c.SdkError}}),Object.defineProperty(e,"AlreadyExistsError",{enumerable:!0,get:function(){return c.AlreadyExistsError}}),Object.defineProperty(e,"AuthenticationError",{enumerable:!0,get:function(){return c.AuthenticationError}}),Object.defineProperty(e,"CancelledError",{enumerable:!0,get:function(){return c.CancelledError}}),Object.defineProperty(e,"FailedPreconditionError",{enumerable:!0,get:function(){return c.FailedPreconditionError}}),Object.defineProperty(e,"LimitExceededError",{enumerable:!0,get:function(){return c.LimitExceededError}}),Object.defineProperty(e,"InternalServerError",{enumerable:!0,get:function(){return c.InternalServerError}}),Object.defineProperty(e,"InvalidArgumentError",{enumerable:!0,get:function(){return c.InvalidArgumentError}}),Object.defineProperty(e,"UnknownServiceError",{enumerable:!0,get:function(){return c.UnknownServiceError}}),Object.defineProperty(e,"ServerUnavailableError",{enumerable:!0,get:function(){return c.ServerUnavailableError}}),Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return c.TimeoutError}}),Object.defineProperty(e,"BadRequestError",{enumerable:!0,get:function(){return c.BadRequestError}}),Object.defineProperty(e,"PermissionError",{enumerable:!0,get:function(){return c.PermissionError}}),Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return c.NotFoundError}}),Object.defineProperty(e,"UnknownError",{enumerable:!0,get:function(){return c.UnknownError}});var u=noopMomentoLogger;Object.defineProperty(e,"NoopMomentoLogger",{enumerable:!0,get:function(){return u.NoopMomentoLogger}}),Object.defineProperty(e,"NoopMomentoLoggerFactory",{enumerable:!0,get:function(){return u.NoopMomentoLoggerFactory}});var p=IVectorIndexClient;Object.defineProperty(e,"ALL_VECTOR_METADATA",{enumerable:!0,get:function(){return p.ALL_VECTOR_METADATA}});var d=requireClients();Object.defineProperty(e,"VectorSimilarityMetric",{enumerable:!0,get:function(){return d.VectorSimilarityMetric}});var h=permissionScope;Object.defineProperty(e,"CacheRole",{enumerable:!0,get:function(){return h.CacheRole}}),Object.defineProperty(e,"TopicRole",{enumerable:!0,get:function(){return h.TopicRole}}),Object.defineProperty(e,"AllDataReadWrite",{enumerable:!0,get:function(){return h.AllDataReadWrite}}),Object.defineProperty(e,"isCacheName",{enumerable:!0,get:function(){return h.isCacheName}}),Object.defineProperty(e,"isTopicName",{enumerable:!0,get:function(){return h.isTopicName}}),Object.defineProperty(e,"AllCaches",{enumerable:!0,get:function(){return h.AllCaches}}),Object.defineProperty(e,"AllTopics",{enumerable:!0,get:function(){return h.AllTopics}}),Object.defineProperty(e,"AllCacheItems",{enumerable:!0,get:function(){return h.AllCacheItems}});var g=disposableTokenScope;Object.defineProperty(e,"isCacheItemKey",{enumerable:!0,get:function(){return g.isCacheItemKey}}),Object.defineProperty(e,"isCacheItemKeyPrefix",{enumerable:!0,get:function(){return g.isCacheItemKeyPrefix}}),e.PermissionScopes=permissionScopes,e.TokenScopes=permissionScopes,e.DisposableTokenScopes=disposableTokenScopes}(src)),src}!function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.cacheKeyPrefixWriteOnly=e.cacheKeyWriteOnly=e.cacheKeyPrefixReadOnly=e.cacheKeyReadOnly=e.cacheKeyPrefixReadWrite=e.cacheKeyReadWrite=void 0;const o=permissionScope;r(permissionScopes,e),e.cacheKeyReadWrite=function(e,t){return{permissions:[{role:o.CacheRole.ReadWrite,cache:e,item:t}]}},e.cacheKeyPrefixReadWrite=function(e,t){return{permissions:[{role:o.CacheRole.ReadWrite,cache:e,item:{keyPrefix:t}}]}},e.cacheKeyReadOnly=function(e,t){return{permissions:[{role:o.CacheRole.ReadOnly,cache:e,item:t}]}},e.cacheKeyPrefixReadOnly=function(e,t){return{permissions:[{role:o.CacheRole.ReadOnly,cache:e,item:{keyPrefix:t}}]}},e.cacheKeyWriteOnly=function(e,t){return{permissions:[{role:o.CacheRole.WriteOnly,cache:e,item:t}]}},e.cacheKeyPrefixWriteOnly=function(e,t){return{permissions:[{role:o.CacheRole.WriteOnly,cache:e,item:{keyPrefix:t}}]}}}(disposableTokenScopes);var momentoCache={},hasRequiredAbstractCacheClient;Object.defineProperty(momentoCache,"__esModule",{value:!0}),momentoCache.MomentoCache=void 0;class MomentoCache{constructor(e,t){this.cacheClient=e,this.cacheName=t}get(e){return this.cacheClient.get(this.cacheName,e)}set(e,t,r){return this.cacheClient.set(this.cacheName,e,t,r)}delete(e){return this.cacheClient.delete(this.cacheName,e)}increment(e,t,r){return this.cacheClient.increment(this.cacheName,e,t,r)}setIfNotExists(e,t,r){return this.cacheClient.setIfNotExists(this.cacheName,e,t,r)}setFetch(e){return this.cacheClient.setFetch(this.cacheName,e)}setAddElement(e,t,r){return this.cacheClient.setAddElement(this.cacheName,e,t,r)}setAddElements(e,t,r){return this.cacheClient.setAddElements(this.cacheName,e,t,r)}setRemoveElement(e,t){return this.cacheClient.setRemoveElement(this.cacheName,e,t)}setRemoveElements(e,t){return this.cacheClient.setRemoveElements(this.cacheName,e,t)}listFetch(e,t){return this.cacheClient.listFetch(this.cacheName,e,t)}listLength(e){return this.cacheClient.listLength(this.cacheName,e)}listPushFront(e,t,r){return this.cacheClient.listPushFront(this.cacheName,e,t,r)}listPushBack(e,t,r){return this.cacheClient.listPushBack(this.cacheName,e,t,r)}listConcatenateBack(e,t,r){return this.cacheClient.listConcatenateBack(this.cacheName,e,t,r)}listConcatenateFront(e,t,r){return this.cacheClient.listConcatenateFront(this.cacheName,e,t,r)}listPopBack(e){return this.cacheClient.listPopBack(this.cacheName,e)}listPopFront(e){return this.cacheClient.listPopFront(this.cacheName,e)}listRemoveValue(e,t){return this.cacheClient.listRemoveValue(this.cacheName,e,t)}listRetain(e,t){return this.cacheClient.listRetain(this.cacheName,e,t)}dictionarySetField(e,t,r,o){return this.cacheClient.dictionarySetField(this.cacheName,e,t,r,o)}dictionarySetFields(e,t,r){return this.cacheClient.dictionarySetFields(this.cacheName,e,t,r)}dictionaryGetField(e,t){return this.cacheClient.dictionaryGetField(this.cacheName,e,t)}dictionaryGetFields(e,t){return this.cacheClient.dictionaryGetFields(this.cacheName,e,t)}dictionaryFetch(e){return this.cacheClient.dictionaryFetch(this.cacheName,e)}dictionaryIncrement(e,t,r,o){return this.cacheClient.dictionaryIncrement(this.cacheName,e,t,r,o)}dictionaryRemoveField(e,t){return this.cacheClient.dictionaryRemoveField(this.cacheName,e,t)}dictionaryRemoveFields(e,t){return this.cacheClient.dictionaryRemoveFields(this.cacheName,e,t)}dictionaryLength(e){return this.cacheClient.dictionaryLength(this.cacheName,e)}sortedSetFetchByRank(e,t){return this.cacheClient.sortedSetFetchByRank(this.cacheName,e,t)}sortedSetFetchByScore(e,t){return this.cacheClient.sortedSetFetchByScore(this.cacheName,e,t)}sortedSetPutElement(e,t,r,o){return this.cacheClient.sortedSetPutElement(this.cacheName,e,t,r,o)}sortedSetPutElements(e,t,r){return this.cacheClient.sortedSetPutElements(this.cacheName,e,t,r)}sortedSetGetRank(e,t){return this.cacheClient.sortedSetGetRank(this.cacheName,e,t)}sortedSetGetScore(e,t){return this.cacheClient.sortedSetGetScore(this.cacheName,e,t)}sortedSetGetScores(e,t){return this.cacheClient.sortedSetGetScores(this.cacheName,e,t)}sortedSetIncrementScore(e,t,r,o){return this.cacheClient.sortedSetIncrementScore(this.cacheName,e,t,r,o)}sortedSetRemoveElement(e,t){return this.cacheClient.sortedSetRemoveElement(this.cacheName,e,t)}sortedSetRemoveElements(e,t){return this.cacheClient.sortedSetRemoveElements(this.cacheName,e,t)}sortedSetLength(e){return this.cacheClient.sortedSetLength(this.cacheName,e)}sortedSetLengthByScore(e,t){return this.cacheClient.sortedSetLengthByScore(this.cacheName,e,t)}itemGetType(e){return this.cacheClient.itemGetType(this.cacheName,e)}itemGetTtl(e){return this.cacheClient.itemGetTtl(this.cacheName,e)}keyExists(e){return this.cacheClient.keyExists(this.cacheName,e)}keysExist(e){return this.cacheClient.keysExist(this.cacheName,e)}updateTtl(e,t){return this.cacheClient.updateTtl(this.cacheName,e,t)}increaseTtl(e,t){return this.cacheClient.increaseTtl(this.cacheName,e,t)}decreaseTtl(e,t){return this.cacheClient.decreaseTtl(this.cacheName,e,t)}}function requireAbstractCacheClient(){if(hasRequiredAbstractCacheClient)return AbstractCacheClient;hasRequiredAbstractCacheClient=1,Object.defineProperty(AbstractCacheClient,"__esModule",{value:!0}),AbstractCacheClient.AbstractCacheClient=void 0;const e=requireSrc$1(),t=momentoCache;return AbstractCacheClient.AbstractCacheClient=class{constructor(e,t,r){this.controlClient=e,this.dataClients=t,this.pingClient=r,this.nextDataClientIndex=0}cache(e){return new t.MomentoCache(this,e)}async ping(){var e;return await(null===(e=this.pingClient)||void 0===e?void 0:e.ping())}async createCache(e){return await this.controlClient.createCache(e)}async deleteCache(e){return await this.controlClient.deleteCache(e)}async listCaches(){return await this.controlClient.listCaches()}async get(e,t){return await this.getNextDataClient().get(e,t)}async set(e,t,r,o){const i=this.getNextDataClient();return await i.set(e,t,r,null==o?void 0:o.ttl)}async delete(e,t){const r=this.getNextDataClient();return await r.delete(e,t)}async listConcatenateBack(e,t,r,o){const i=this.getNextDataClient();return await i.listConcatenateBack(e,t,r,null==o?void 0:o.truncateFrontToSize,null==o?void 0:o.ttl)}async listConcatenateFront(e,t,r,o){const i=this.getNextDataClient();return await i.listConcatenateFront(e,t,r,null==o?void 0:o.truncateBackToSize,null==o?void 0:o.ttl)}async listFetch(e,t,r){const o=this.getNextDataClient();return await o.listFetch(e,t,null==r?void 0:r.startIndex,null==r?void 0:r.endIndex)}async listLength(e,t){const r=this.getNextDataClient();return await r.listLength(e,t)}async listPopBack(e,t){const r=this.getNextDataClient();return await r.listPopBack(e,t)}async listPopFront(e,t){const r=this.getNextDataClient();return await r.listPopFront(e,t)}async listPushBack(e,t,r,o){const i=this.getNextDataClient();return await i.listPushBack(e,t,r,null==o?void 0:o.truncateFrontToSize,null==o?void 0:o.ttl)}async listPushFront(e,t,r,o){const i=this.getNextDataClient();return await i.listPushFront(e,t,r,null==o?void 0:o.truncateBackToSize,null==o?void 0:o.ttl)}async listRemoveValue(e,t,r){const o=this.getNextDataClient();return await o.listRemoveValue(e,t,r)}async listRetain(e,t,r){const o=this.getNextDataClient();return await o.listRetain(e,t,null==r?void 0:r.startIndex,null==r?void 0:r.endIndex,null==r?void 0:r.ttl)}async setFetch(e,t){const r=this.getNextDataClient();return await r.setFetch(e,t)}async setAddElement(e,t,r,o){return(await this.setAddElements(e,t,[r],o)).toSingularResponse()}async setAddElements(e,t,r,o){const i=this.getNextDataClient();return await i.setAddElements(e,t,r,null==o?void 0:o.ttl)}async setRemoveElement(e,t,r){return(await this.setRemoveElements(e,t,[r])).toSingularResponse()}async setRemoveElements(e,t,r){const o=this.getNextDataClient();return await o.setRemoveElements(e,t,r)}async setIfNotExists(e,t,r,o){const i=this.getNextDataClient();return await i.setIfNotExists(e,t,r,null==o?void 0:o.ttl)}async flushCache(e){return await this.controlClient.flushCache(e)}async dictionaryFetch(e,t){const r=this.getNextDataClient();return await r.dictionaryFetch(e,t)}async increment(e,t,r=1,o){const i=this.getNextDataClient();return await i.increment(e,t,r,null==o?void 0:o.ttl)}async dictionarySetField(e,t,r,o,i){const s=this.getNextDataClient();return await s.dictionarySetField(e,t,r,o,null==i?void 0:i.ttl)}async dictionarySetFields(e,t,r,o){const i=this.getNextDataClient();return await i.dictionarySetFields(e,t,r,null==o?void 0:o.ttl)}async dictionaryGetField(e,t,r){const o=this.getNextDataClient();return await o.dictionaryGetField(e,t,r)}async dictionaryGetFields(e,t,r){const o=this.getNextDataClient();return await o.dictionaryGetFields(e,t,r)}async dictionaryRemoveField(e,t,r){const o=this.getNextDataClient();return await o.dictionaryRemoveField(e,t,r)}async dictionaryRemoveFields(e,t,r){const o=this.getNextDataClient();return await o.dictionaryRemoveFields(e,t,r)}async dictionaryIncrement(e,t,r,o=1,i){const s=this.getNextDataClient();return await s.dictionaryIncrement(e,t,r,o,null==i?void 0:i.ttl)}async dictionaryLength(e,t){const r=this.getNextDataClient();return await r.dictionaryLength(e,t)}async sortedSetPutElement(e,t,r,o,i){const s=this.getNextDataClient();return await s.sortedSetPutElement(e,t,r,o,null==i?void 0:i.ttl)}async sortedSetPutElements(e,t,r,o){const i=this.getNextDataClient();return await i.sortedSetPutElements(e,t,r,null==o?void 0:o.ttl)}async sortedSetFetchByRank(t,r,o){var i,s;const n=this.getNextDataClient();return await n.sortedSetFetchByRank(t,r,null!==(i=null==o?void 0:o.order)&&void 0!==i?i:e.SortedSetOrder.Ascending,null!==(s=null==o?void 0:o.startRank)&&void 0!==s?s:0,null==o?void 0:o.endRank)}async sortedSetFetchByScore(t,r,o){var i;const s=this.getNextDataClient();return await s.sortedSetFetchByScore(t,r,null!==(i=null==o?void 0:o.order)&&void 0!==i?i:e.SortedSetOrder.Ascending,null==o?void 0:o.minScore,null==o?void 0:o.maxScore,null==o?void 0:o.offset,null==o?void 0:o.count)}async sortedSetGetRank(e,t,r){const o=this.getNextDataClient();return await o.sortedSetGetRank(e,t,r)}async sortedSetGetScore(e,t,r){const o=this.getNextDataClient();return await o.sortedSetGetScore(e,t,r)}async sortedSetGetScores(e,t,r){const o=this.getNextDataClient();return await o.sortedSetGetScores(e,t,r)}async sortedSetIncrementScore(e,t,r,o,i){const s=this.getNextDataClient();return await s.sortedSetIncrementScore(e,t,r,o||1,null==i?void 0:i.ttl)}async sortedSetRemoveElement(e,t,r){const o=this.getNextDataClient();return await o.sortedSetRemoveElement(e,t,r)}async sortedSetRemoveElements(e,t,r){const o=this.getNextDataClient();return await o.sortedSetRemoveElements(e,t,r)}async sortedSetLength(e,t){const r=this.getNextDataClient();return await r.sortedSetLength(e,t)}async sortedSetLengthByScore(e,t,r){const o=this.getNextDataClient();return await o.sortedSetLengthByScore(e,t,null==r?void 0:r.minScore,null==r?void 0:r.maxScore)}async itemGetType(e,t){const r=this.getNextDataClient();return await r.itemGetType(e,t)}async itemGetTtl(e,t){const r=this.getNextDataClient();return await r.itemGetTtl(e,t)}async keyExists(e,t){const r=this.getNextDataClient();return await r.keyExists(e,t)}async keysExist(e,t){const r=this.getNextDataClient();return await r.keysExist(e,t)}async updateTtl(e,t,r){const o=this.getNextDataClient();return await o.updateTtl(e,t,r)}async increaseTtl(e,t,r){const o=this.getNextDataClient();return await o.increaseTtl(e,t,r)}async decreaseTtl(e,t,r){const o=this.getNextDataClient();return await o.decreaseTtl(e,t,r)}getNextDataClient(){const e=this.dataClients[this.nextDataClientIndex];return this.nextDataClientIndex=(this.nextDataClientIndex+1)%this.dataClients.length,e}},AbstractCacheClient}momentoCache.MomentoCache=MomentoCache;var ICacheClient={};Object.defineProperty(ICacheClient,"__esModule",{value:!0});var IControlClient={};Object.defineProperty(IControlClient,"__esModule",{value:!0});var IDataClient={};Object.defineProperty(IDataClient,"__esModule",{value:!0});var IPingClient={},hasRequiredCache;function requireCache(){return hasRequiredCache||(hasRequiredCache=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(requireAbstractCacheClient(),e),r(ICacheClient,e),r(IControlClient,e),r(IDataClient,e),r(IPingClient,e)}(cache)),cache}Object.defineProperty(IPingClient,"__esModule",{value:!0});var auth={},AbstractAuthClient$1={};Object.defineProperty(AbstractAuthClient$1,"__esModule",{value:!0}),AbstractAuthClient$1.AbstractAuthClient=void 0;class AbstractAuthClient{constructor(e){this.authClient=e.createAuthClient()}async generateApiKey(e,t){return await this.authClient.generateApiKey(e,t)}async generateAuthToken(e,t){return await this.generateApiKey(e,t)}async refreshApiKey(e){return await this.authClient.refreshApiKey(e)}async refreshAuthToken(e){return await this.refreshApiKey(e)}async generateDisposableToken(e,t,r){return await this.authClient.generateDisposableToken(e,t,r)}}AbstractAuthClient$1.AbstractAuthClient=AbstractAuthClient;var IAuthClient={};Object.defineProperty(IAuthClient,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(AbstractAuthClient$1,e),r(IAuthClient,e)}(auth);var pubsub={},ITopicClient={};Object.defineProperty(ITopicClient,"__esModule",{value:!0});var IPubsubClient={};Object.defineProperty(IPubsubClient,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(ITopicClient,e),r(IPubsubClient,e)}(pubsub);var vector={},AbstractVectorIndexClient$1={};Object.defineProperty(AbstractVectorIndexClient$1,"__esModule",{value:!0}),AbstractVectorIndexClient$1.AbstractVectorIndexClient=void 0;class AbstractVectorIndexClient{constructor(e,t){this.controlClient=e,this.dataClient=t}async createIndex(e,t,r){return await this.controlClient.createIndex(e,t,r)}async listIndexes(){return await this.controlClient.listIndexes()}async deleteIndex(e){return await this.controlClient.deleteIndex(e)}async upsertItemBatch(e,t){return await this.dataClient.upsertItemBatch(e,t)}async search(e,t,r){return await this.dataClient.search(e,t,r)}async deleteItemBatch(e,t){return await this.dataClient.deleteItemBatch(e,t)}}AbstractVectorIndexClient$1.AbstractVectorIndexClient=AbstractVectorIndexClient;var IVectorIndexControlClient={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.VectorSimilarityMetric=void 0,(t=e.VectorSimilarityMetric||(e.VectorSimilarityMetric={}))[t.COSINE_SIMILARITY=0]="COSINE_SIMILARITY",t[t.INNER_PRODUCT=1]="INNER_PRODUCT",t[t.EUCLIDEAN_SIMILARITY=2]="EUCLIDEAN_SIMILARITY"}(IVectorIndexControlClient),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(AbstractVectorIndexClient$1,e),r(IVectorIndexControlClient,e),r(IVectorIndexClient,e)}(vector);var leaderboard$1={},ILeaderboard={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LeaderboardOrder=void 0;const t=cacheCallOptions;Object.defineProperty(e,"LeaderboardOrder",{enumerable:!0,get:function(){return t.LeaderboardOrder}})}(ILeaderboard);var ILeaderboardClient={};Object.defineProperty(ILeaderboardClient,"__esModule",{value:!0});var AbstractLeaderboard$1={},hasRequiredClients,hasRequiredCacheClient;Object.defineProperty(AbstractLeaderboard$1,"__esModule",{value:!0}),AbstractLeaderboard$1.AbstractLeaderboard=void 0;class AbstractLeaderboard{constructor(e,t,r){this.cacheName=e,this.leaderboardName=t,this.dataClient=r}async upsert(e){return await this.dataClient.upsert(this.cacheName,this.leaderboardName,e)}async fetchByScore(e){return await this.dataClient.fetchByScore(this.cacheName,this.leaderboardName,null==e?void 0:e.minScore,null==e?void 0:e.maxScore,null==e?void 0:e.order,null==e?void 0:e.offset,null==e?void 0:e.count)}async fetchByRank(e,t,r){return await this.dataClient.fetchByRank(this.cacheName,this.leaderboardName,e,t,null==r?void 0:r.order)}async getRank(e,t){return await this.dataClient.getRank(this.cacheName,this.leaderboardName,e,null==t?void 0:t.order)}async length(){return await this.dataClient.length(this.cacheName,this.leaderboardName)}async removeElements(e){return await this.dataClient.removeElements(this.cacheName,this.leaderboardName,e)}async delete(){return await this.dataClient.delete(this.cacheName,this.leaderboardName)}}function requireClients(){return hasRequiredClients||(hasRequiredClients=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(requireCache(),e),r(auth,e),r(pubsub,e),r(vector,e),r(leaderboard$1,e)}(clients)),clients}function requireCacheClient(){if(hasRequiredCacheClient)return cacheClient;hasRequiredCacheClient=1,Object.defineProperty(cacheClient,"__esModule",{value:!0}),cacheClient.CacheClient=void 0;const e=requireCacheControlClient(),t=requireCacheDataClient(),r=pingClient,o=requireClients(),i=webClientUtils;return cacheClient.CacheClient=class extends o.AbstractCacheClient{constructor(o){const s=function(t){return new e.CacheControlClient({configuration:t.configuration,credentialProvider:t.credentialProvider})}(o),n=function(e){return new t.CacheDataClient({configuration:e.configuration,credentialProvider:e.credentialProvider,defaultTtlSeconds:e.defaultTtlSeconds})}(o),a=function(e){return new r.PingClient({endpoint:(0,i.getWebCacheEndpoint)(e.credentialProvider),configuration:e.configuration})}(o);super(s,[n],a)}},cacheClient}AbstractLeaderboard$1.AbstractLeaderboard=AbstractLeaderboard,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(ILeaderboard,e),r(ILeaderboardClient,e),r(AbstractLeaderboard$1,e)}(leaderboard$1);var authClient$1={},authClient={},hasRequiredAuthClient$1,hasRequiredAuthClient;function requireAuthClient$1(){if(hasRequiredAuthClient$1)return authClient;hasRequiredAuthClient$1=1,Object.defineProperty(authClient,"__esModule",{value:!0}),authClient.permissionsFromScope=authClient.InternalWebGrpcAuthClient=void 0;const e=dist,t=auth_pb$1,r=requireCacheServiceErrorMapper();var o=t._GenerateApiTokenRequest.Never,i=t._GenerateApiTokenRequest.Expires;const s=requireSrc$1(),n=utils$1,a=errors$1,l=webClientUtils,c=clientMetadataProvider,u=permissionScope,p=disposableTokenScope,d=token_pb$1,h=permissionmessages_pb;function g(e){const t=new h.Permissions;if(e instanceof n.InternalSuperUserPermissions)return t.setSuperUser(h.SuperUserPermissions.SUPERUSER),t;if(!(e instanceof u.PredefinedScope)&&(0,p.isDisposableTokenPermissionsObject)(e)){const r=(0,p.asDisposableTokenPermissionsObject)(e),o=new h.ExplicitPermissions;return o.setPermissionsList(r.permissions.map((e=>function(e){const t=new h.PermissionsType;if((0,p.isDisposableTokenCachePermission)(e))return t.setCachePermissions(function(e){let t=new h.PermissionsType.CachePermissions;return t=f(e,t),t=_(e,t),t=function(e,t){const r=new h.PermissionsType.CacheItemSelector;if(e.item===s.AllCacheItems)t.setAllItems(new h.PermissionsType.All);else if("string"==typeof e.item)r.setKey((0,l.convertToB64String)(e.item)),t.setItemSelector(r);else if((0,s.isCacheItemKey)(e.item))(0,n.validateCacheKeyOrPrefix)(e.item.key),r.setKey((0,l.convertToB64String)(e.item.key)),t.setItemSelector(r);else{if(!(0,s.isCacheItemKeyPrefix)(e.item))throw new Error(`Unrecognized cache item specification in cache permission: ${JSON.stringify(e)}`);(0,n.validateCacheKeyOrPrefix)(e.item.keyPrefix),r.setKeyPrefix((0,l.convertToB64String)(e.item.keyPrefix)),t.setItemSelector(r)}return t}(e,t),t}((0,p.asDisposableTokenCachePermission)(e))),t;throw new Error(`Unrecognized token permission: ${JSON.stringify(e)}`)}(e)))),t.setExplicit(o),t}if((0,u.isPermissionsObject)(e)){const r=(0,u.asPermissionsObject)(e),o=new h.ExplicitPermissions;return o.setPermissionsList(r.permissions.map((e=>function(e){const t=new h.PermissionsType;if((0,u.isTopicPermission)(e))return t.setTopicPermissions(function(e){const t=new h.PermissionsType.TopicPermissions;switch(e.role){case s.TopicRole.PublishSubscribe:t.setRole(h.TopicRole.TOPICREADWRITE);break;case s.TopicRole.SubscribeOnly:t.setRole(h.TopicRole.TOPICREADONLY);break;case s.TopicRole.PublishOnly:t.setRole(h.TopicRole.TOPICWRITEONLY);break;default:throw new Error(`Unrecognized topic role: ${JSON.stringify(e)}`)}const r=new h.PermissionsType.CacheSelector;if(e.cache===s.AllCaches)t.setAllCaches(new h.PermissionsType.All);else if("string"==typeof e.cache)r.setCacheName(e.cache),t.setCacheSelector(r);else{if(!(0,s.isCacheName)(e.cache))throw new Error(`Unrecognized cache specification in topic permission: ${JSON.stringify(e)}`);r.setCacheName(e.cache.name),t.setCacheSelector(r)}const o=new h.PermissionsType.TopicSelector;if(e.topic===s.AllTopics)t.setAllTopics(new h.PermissionsType.All);else if("string"==typeof e.topic)o.setTopicName(e.topic),t.setTopicSelector(o);else{if(!(0,s.isTopicName)(e.topic))throw new Error(`Unrecognized topic specification in topic permission: ${JSON.stringify(e)}`);o.setTopicName(e.topic.name),t.setTopicSelector(o)}return t}((0,u.asTopicPermission)(e))),t;if((0,u.isCachePermission)(e))return t.setCachePermissions(function(e){let t=new h.PermissionsType.CachePermissions;return t=f(e,t),t=_(e,t),t}((0,u.asCachePermission)(e))),t;throw new Error(`Unrecognized token permission: ${JSON.stringify(e)}`)}(e)))),t.setExplicit(o),t}throw new Error(`Unrecognized token scope: ${JSON.stringify(e)}`)}function f(e,t){switch(e.role){case s.CacheRole.ReadWrite:t.setRole(h.CacheRole.CACHEREADWRITE);break;case s.CacheRole.ReadOnly:t.setRole(h.CacheRole.CACHEREADONLY);break;case s.CacheRole.WriteOnly:t.setRole(h.CacheRole.CACHEWRITEONLY);break;default:throw new Error(`Unrecognized cache role: ${JSON.stringify(e)}`)}return t}function _(e,t){const r=new h.PermissionsType.CacheSelector;if(e.cache===s.AllCaches)t.setAllCaches(new h.PermissionsType.All);else if("string"==typeof e.cache)r.setCacheName(e.cache),t.setCacheSelector(r);else{if(!(0,s.isCacheName)(e.cache))throw new Error(`Unrecognized cache specification in cache permission: ${JSON.stringify(e)}`);r.setCacheName(e.cache.name),t.setCacheSelector(r)}return t}return authClient.InternalWebGrpcAuthClient=class{constructor(t){this.creds=t.credentialProvider,this.clientMetadataProvider=new c.ClientMetadataProvider({}),this.authClient=new e.auth.AuthClient((0,l.getWebControlEndpoint)(this.creds),null,{})}async generateApiKey(e,l){const c=new t._GenerateApiTokenRequest;let u;c.setAuthToken(this.creds.getAuthToken());try{u=g(e)}catch(e){return new s.GenerateApiKey.Error((0,a.normalizeSdkError)(e))}if(c.setPermissions(u),l.doesExpire()){try{(0,n.validateValidForSeconds)(l.seconds())}catch(e){return new s.GenerateApiKey.Error((0,a.normalizeSdkError)(e))}const e=new i;e.setValidForSeconds(l.seconds()),c.setExpires(e)}else c.setNever(new o);return await new Promise((e=>{this.authClient.generateApiToken(c,this.clientMetadataProvider.createClientMetadata(),((t,o)=>{e(t||!o?new s.GenerateApiKey.Error((0,r.cacheServiceErrorMapper)(t)):new s.GenerateApiKey.Success(o.getApiKey(),o.getRefreshToken(),o.getEndpoint(),s.ExpiresAt.fromEpoch(o.getValidUntil())))}))}))}generateAuthToken(e,t){return this.generateApiKey(e,t)}async refreshApiKey(e){const o=new t._RefreshApiTokenRequest;return o.setApiKey(this.creds.getAuthToken()),o.setRefreshToken(e),await new Promise((e=>{this.authClient.refreshApiToken(o,this.clientMetadataProvider.createClientMetadata(),((t,o)=>{e(t||!o?new s.RefreshApiKey.Error((0,r.cacheServiceErrorMapper)(t)):new s.RefreshApiKey.Success(o.getApiKey(),o.getRefreshToken(),o.getEndpoint(),s.ExpiresAt.fromEpoch(o.getValidUntil())))}))}))}refreshAuthToken(e){return this.refreshApiKey(e)}async generateDisposableToken(t,o,i){const c=new e.token.TokenClient((0,l.getWebTokenEndpoint)(this.creds),null,{}),u=new d._GenerateDisposableTokenRequest;let p;u.setAuthToken(this.creds.getAuthToken());try{p=g(t)}catch(e){return new s.GenerateDisposableToken.Error((0,a.normalizeSdkError)(e))}u.setPermissions(p);const h=null==i?void 0:i.tokenId;if(void 0!==h){try{(0,n.validateDisposableTokenTokenID)(h)}catch(e){return new s.GenerateDisposableToken.Error((0,a.normalizeSdkError)(e))}u.setTokenId(h)}try{(0,n.validateDisposableTokenExpiry)(o)}catch(e){return new s.GenerateDisposableToken.Error((0,a.normalizeSdkError)(e))}const f=new d._GenerateDisposableTokenRequest.Expires;return f.setValidForSeconds(o.seconds()),u.setExpires(f),await new Promise((e=>{c.generateDisposableToken(u,this.clientMetadataProvider.createClientMetadata(),((t,o)=>{e(t||!o?new s.GenerateDisposableToken.Error((0,r.cacheServiceErrorMapper)(t)):new s.GenerateDisposableToken.Success(o.getApiKey(),o.getEndpoint(),s.ExpiresAt.fromEpoch(o.getValidUntil())))}))}))}},authClient.permissionsFromScope=g,authClient}function requireAuthClient(){if(hasRequiredAuthClient)return authClient$1;hasRequiredAuthClient=1,Object.defineProperty(authClient$1,"__esModule",{value:!0}),authClient$1.AuthClient=void 0;const e=requireClients(),t=requireAuthClient$1();return authClient$1.AuthClient=class extends e.AbstractAuthClient{constructor(e){super({createAuthClient:()=>new t.InternalWebGrpcAuthClient(e)})}},authClient$1}var topicClient={},pubsubClient={},CachepubsubServiceClientPb={},cachepubsub_pb$1={},extensions_pb={},descriptor_pb={};!function(e){var t=googleProtobuf,r=t,o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.google.protobuf.DescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.DescriptorProto.ExtensionRange",null,o),r.exportSymbol("proto.google.protobuf.DescriptorProto.ReservedRange",null,o),r.exportSymbol("proto.google.protobuf.EnumDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.EnumDescriptorProto.EnumReservedRange",null,o),r.exportSymbol("proto.google.protobuf.EnumOptions",null,o),r.exportSymbol("proto.google.protobuf.EnumValueDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.EnumValueOptions",null,o),r.exportSymbol("proto.google.protobuf.ExtensionRangeOptions",null,o),r.exportSymbol("proto.google.protobuf.FieldDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.FieldDescriptorProto.Label",null,o),r.exportSymbol("proto.google.protobuf.FieldDescriptorProto.Type",null,o),r.exportSymbol("proto.google.protobuf.FieldOptions",null,o),r.exportSymbol("proto.google.protobuf.FieldOptions.CType",null,o),r.exportSymbol("proto.google.protobuf.FieldOptions.JSType",null,o),r.exportSymbol("proto.google.protobuf.FileDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.FileDescriptorSet",null,o),r.exportSymbol("proto.google.protobuf.FileOptions",null,o),r.exportSymbol("proto.google.protobuf.FileOptions.OptimizeMode",null,o),r.exportSymbol("proto.google.protobuf.GeneratedCodeInfo",null,o),r.exportSymbol("proto.google.protobuf.GeneratedCodeInfo.Annotation",null,o),r.exportSymbol("proto.google.protobuf.MessageOptions",null,o),r.exportSymbol("proto.google.protobuf.MethodDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.MethodOptions",null,o),r.exportSymbol("proto.google.protobuf.MethodOptions.IdempotencyLevel",null,o),r.exportSymbol("proto.google.protobuf.OneofDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.OneofOptions",null,o),r.exportSymbol("proto.google.protobuf.ServiceDescriptorProto",null,o),r.exportSymbol("proto.google.protobuf.ServiceOptions",null,o),r.exportSymbol("proto.google.protobuf.SourceCodeInfo",null,o),r.exportSymbol("proto.google.protobuf.SourceCodeInfo.Location",null,o),r.exportSymbol("proto.google.protobuf.UninterpretedOption",null,o),r.exportSymbol("proto.google.protobuf.UninterpretedOption.NamePart",null,o),proto.google.protobuf.FileDescriptorSet=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.FileDescriptorSet.repeatedFields_,null)},r.inherits(proto.google.protobuf.FileDescriptorSet,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.FileDescriptorSet.displayName="proto.google.protobuf.FileDescriptorSet"),proto.google.protobuf.FileDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.FileDescriptorProto.repeatedFields_,null)},r.inherits(proto.google.protobuf.FileDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.FileDescriptorProto.displayName="proto.google.protobuf.FileDescriptorProto"),proto.google.protobuf.DescriptorProto=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.DescriptorProto.repeatedFields_,null)},r.inherits(proto.google.protobuf.DescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.displayName="proto.google.protobuf.DescriptorProto"),proto.google.protobuf.DescriptorProto.ExtensionRange=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.DescriptorProto.ExtensionRange,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.ExtensionRange.displayName="proto.google.protobuf.DescriptorProto.ExtensionRange"),proto.google.protobuf.DescriptorProto.ReservedRange=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.DescriptorProto.ReservedRange,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.DescriptorProto.ReservedRange.displayName="proto.google.protobuf.DescriptorProto.ReservedRange"),proto.google.protobuf.ExtensionRangeOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.ExtensionRangeOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.ExtensionRangeOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.ExtensionRangeOptions.displayName="proto.google.protobuf.ExtensionRangeOptions"),proto.google.protobuf.ExtensionRangeOptions.extensions={},proto.google.protobuf.ExtensionRangeOptions.extensionsBinary={},proto.google.protobuf.FieldDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.FieldDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.FieldDescriptorProto.displayName="proto.google.protobuf.FieldDescriptorProto"),proto.google.protobuf.OneofDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.OneofDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.OneofDescriptorProto.displayName="proto.google.protobuf.OneofDescriptorProto"),proto.google.protobuf.EnumDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.EnumDescriptorProto.repeatedFields_,null)},r.inherits(proto.google.protobuf.EnumDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumDescriptorProto.displayName="proto.google.protobuf.EnumDescriptorProto"),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.displayName="proto.google.protobuf.EnumDescriptorProto.EnumReservedRange"),proto.google.protobuf.EnumValueDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.EnumValueDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumValueDescriptorProto.displayName="proto.google.protobuf.EnumValueDescriptorProto"),proto.google.protobuf.ServiceDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.ServiceDescriptorProto.repeatedFields_,null)},r.inherits(proto.google.protobuf.ServiceDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.ServiceDescriptorProto.displayName="proto.google.protobuf.ServiceDescriptorProto"),proto.google.protobuf.MethodDescriptorProto=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.MethodDescriptorProto,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.MethodDescriptorProto.displayName="proto.google.protobuf.MethodDescriptorProto"),proto.google.protobuf.FileOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.FileOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.FileOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.FileOptions.displayName="proto.google.protobuf.FileOptions"),proto.google.protobuf.FileOptions.extensions={},proto.google.protobuf.FileOptions.extensionsBinary={},proto.google.protobuf.MessageOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.MessageOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.MessageOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.MessageOptions.displayName="proto.google.protobuf.MessageOptions"),proto.google.protobuf.MessageOptions.extensions={},proto.google.protobuf.MessageOptions.extensionsBinary={},proto.google.protobuf.FieldOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.FieldOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.FieldOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.FieldOptions.displayName="proto.google.protobuf.FieldOptions"),proto.google.protobuf.FieldOptions.extensions={},proto.google.protobuf.FieldOptions.extensionsBinary={},proto.google.protobuf.OneofOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.OneofOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.OneofOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.OneofOptions.displayName="proto.google.protobuf.OneofOptions"),proto.google.protobuf.OneofOptions.extensions={},proto.google.protobuf.OneofOptions.extensionsBinary={},proto.google.protobuf.EnumOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.EnumOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.EnumOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumOptions.displayName="proto.google.protobuf.EnumOptions"),proto.google.protobuf.EnumOptions.extensions={},proto.google.protobuf.EnumOptions.extensionsBinary={},proto.google.protobuf.EnumValueOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.EnumValueOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.EnumValueOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.EnumValueOptions.displayName="proto.google.protobuf.EnumValueOptions"),proto.google.protobuf.EnumValueOptions.extensions={},proto.google.protobuf.EnumValueOptions.extensionsBinary={},proto.google.protobuf.ServiceOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.ServiceOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.ServiceOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.ServiceOptions.displayName="proto.google.protobuf.ServiceOptions"),proto.google.protobuf.ServiceOptions.extensions={},proto.google.protobuf.ServiceOptions.extensionsBinary={},proto.google.protobuf.MethodOptions=function(e){t.Message.initialize(this,e,0,500,proto.google.protobuf.MethodOptions.repeatedFields_,null)},r.inherits(proto.google.protobuf.MethodOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.MethodOptions.displayName="proto.google.protobuf.MethodOptions"),proto.google.protobuf.MethodOptions.extensions={},proto.google.protobuf.MethodOptions.extensionsBinary={},proto.google.protobuf.UninterpretedOption=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.UninterpretedOption.repeatedFields_,null)},r.inherits(proto.google.protobuf.UninterpretedOption,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.UninterpretedOption.displayName="proto.google.protobuf.UninterpretedOption"),proto.google.protobuf.UninterpretedOption.NamePart=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.UninterpretedOption.NamePart,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.UninterpretedOption.NamePart.displayName="proto.google.protobuf.UninterpretedOption.NamePart"),proto.google.protobuf.SourceCodeInfo=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.SourceCodeInfo.repeatedFields_,null)},r.inherits(proto.google.protobuf.SourceCodeInfo,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.SourceCodeInfo.displayName="proto.google.protobuf.SourceCodeInfo"),proto.google.protobuf.SourceCodeInfo.Location=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.SourceCodeInfo.Location.repeatedFields_,null)},r.inherits(proto.google.protobuf.SourceCodeInfo.Location,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.SourceCodeInfo.Location.displayName="proto.google.protobuf.SourceCodeInfo.Location"),proto.google.protobuf.GeneratedCodeInfo=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.GeneratedCodeInfo.repeatedFields_,null)},r.inherits(proto.google.protobuf.GeneratedCodeInfo,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.GeneratedCodeInfo.displayName="proto.google.protobuf.GeneratedCodeInfo"),proto.google.protobuf.GeneratedCodeInfo.Annotation=function(e){t.Message.initialize(this,e,0,-1,proto.google.protobuf.GeneratedCodeInfo.Annotation.repeatedFields_,null)},r.inherits(proto.google.protobuf.GeneratedCodeInfo.Annotation,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.GeneratedCodeInfo.Annotation.displayName="proto.google.protobuf.GeneratedCodeInfo.Annotation"),proto.google.protobuf.FileDescriptorSet.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileDescriptorSet.prototype.toObject=function(e){return proto.google.protobuf.FileDescriptorSet.toObject(e,this)},proto.google.protobuf.FileDescriptorSet.toObject=function(e,r){var o={fileList:t.Message.toObjectList(r.getFileList(),proto.google.protobuf.FileDescriptorProto.toObject,e)};return e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.FileDescriptorSet.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.FileDescriptorSet;return proto.google.protobuf.FileDescriptorSet.deserializeBinaryFromReader(o,r)},proto.google.protobuf.FileDescriptorSet.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new proto.google.protobuf.FileDescriptorProto;t.readMessage(r,proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader),e.addFile(r)}else t.skipField()}return e},proto.google.protobuf.FileDescriptorSet.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.FileDescriptorSet.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.FileDescriptorSet.serializeBinaryToWriter=function(e,t){var r;(r=e.getFileList()).length>0&&t.writeRepeatedMessage(1,r,proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter)},proto.google.protobuf.FileDescriptorSet.prototype.getFileList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.FileDescriptorProto,1)},proto.google.protobuf.FileDescriptorSet.prototype.setFileList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.google.protobuf.FileDescriptorSet.prototype.addFile=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.google.protobuf.FileDescriptorProto,r)},proto.google.protobuf.FileDescriptorSet.prototype.clearFileList=function(){return this.setFileList([])},proto.google.protobuf.FileDescriptorProto.repeatedFields_=[3,10,11,4,5,6,7],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.FileDescriptorProto.toObject(e,this)},proto.google.protobuf.FileDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,pb_package:null==(o=t.Message.getField(r,2))?void 0:o,dependencyList:null==(o=t.Message.getRepeatedField(r,3))?void 0:o,publicDependencyList:null==(o=t.Message.getRepeatedField(r,10))?void 0:o,weakDependencyList:null==(o=t.Message.getRepeatedField(r,11))?void 0:o,messageTypeList:t.Message.toObjectList(r.getMessageTypeList(),proto.google.protobuf.DescriptorProto.toObject,e),enumTypeList:t.Message.toObjectList(r.getEnumTypeList(),proto.google.protobuf.EnumDescriptorProto.toObject,e),serviceList:t.Message.toObjectList(r.getServiceList(),proto.google.protobuf.ServiceDescriptorProto.toObject,e),extensionList:t.Message.toObjectList(r.getExtensionList(),proto.google.protobuf.FieldDescriptorProto.toObject,e),options:(o=r.getOptions())&&proto.google.protobuf.FileOptions.toObject(e,o),sourceCodeInfo:(o=r.getSourceCodeInfo())&&proto.google.protobuf.SourceCodeInfo.toObject(e,o),syntax:null==(o=t.Message.getField(r,12))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.FileDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.FileDescriptorProto;return proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.FileDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString();e.setPackage(r);break;case 3:r=t.readString();e.addDependency(r);break;case 10:for(var o=t.isDelimited()?t.readPackedInt32():[t.readInt32()],i=0;i<o.length;i++)e.addPublicDependency(o[i]);break;case 11:for(o=t.isDelimited()?t.readPackedInt32():[t.readInt32()],i=0;i<o.length;i++)e.addWeakDependency(o[i]);break;case 4:r=new proto.google.protobuf.DescriptorProto;t.readMessage(r,proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader),e.addMessageType(r);break;case 5:r=new proto.google.protobuf.EnumDescriptorProto;t.readMessage(r,proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader),e.addEnumType(r);break;case 6:r=new proto.google.protobuf.ServiceDescriptorProto;t.readMessage(r,proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader),e.addService(r);break;case 7:r=new proto.google.protobuf.FieldDescriptorProto;t.readMessage(r,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),e.addExtension$(r);break;case 8:r=new proto.google.protobuf.FileOptions;t.readMessage(r,proto.google.protobuf.FileOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 9:r=new proto.google.protobuf.SourceCodeInfo;t.readMessage(r,proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader),e.setSourceCodeInfo(r);break;case 12:r=t.readString();e.setSyntax(r);break;default:t.skipField()}}return e},proto.google.protobuf.FileDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.FileDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeString(2,o),(o=e.getDependencyList()).length>0&&r.writeRepeatedString(3,o),(o=e.getPublicDependencyList()).length>0&&r.writeRepeatedInt32(10,o),(o=e.getWeakDependencyList()).length>0&&r.writeRepeatedInt32(11,o),(o=e.getMessageTypeList()).length>0&&r.writeRepeatedMessage(4,o,proto.google.protobuf.DescriptorProto.serializeBinaryToWriter),(o=e.getEnumTypeList()).length>0&&r.writeRepeatedMessage(5,o,proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter),(o=e.getServiceList()).length>0&&r.writeRepeatedMessage(6,o,proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter),(o=e.getExtensionList()).length>0&&r.writeRepeatedMessage(7,o,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),null!=(o=e.getOptions())&&r.writeMessage(8,o,proto.google.protobuf.FileOptions.serializeBinaryToWriter),null!=(o=e.getSourceCodeInfo())&&r.writeMessage(9,o,proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter),null!=(o=t.Message.getField(e,12))&&r.writeString(12,o)},proto.google.protobuf.FileDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FileDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.FileDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.FileDescriptorProto.prototype.getPackage=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.FileDescriptorProto.prototype.setPackage=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.FileDescriptorProto.prototype.clearPackage=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasPackage=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.FileDescriptorProto.prototype.getDependencyList=function(){return t.Message.getRepeatedField(this,3)},proto.google.protobuf.FileDescriptorProto.prototype.setDependencyList=function(e){return t.Message.setField(this,3,e||[])},proto.google.protobuf.FileDescriptorProto.prototype.addDependency=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearDependencyList=function(){return this.setDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getPublicDependencyList=function(){return t.Message.getRepeatedField(this,10)},proto.google.protobuf.FileDescriptorProto.prototype.setPublicDependencyList=function(e){return t.Message.setField(this,10,e||[])},proto.google.protobuf.FileDescriptorProto.prototype.addPublicDependency=function(e,r){return t.Message.addToRepeatedField(this,10,e,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearPublicDependencyList=function(){return this.setPublicDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getWeakDependencyList=function(){return t.Message.getRepeatedField(this,11)},proto.google.protobuf.FileDescriptorProto.prototype.setWeakDependencyList=function(e){return t.Message.setField(this,11,e||[])},proto.google.protobuf.FileDescriptorProto.prototype.addWeakDependency=function(e,r){return t.Message.addToRepeatedField(this,11,e,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearWeakDependencyList=function(){return this.setWeakDependencyList([])},proto.google.protobuf.FileDescriptorProto.prototype.getMessageTypeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto,4)},proto.google.protobuf.FileDescriptorProto.prototype.setMessageTypeList=function(e){return t.Message.setRepeatedWrapperField(this,4,e)},proto.google.protobuf.FileDescriptorProto.prototype.addMessageType=function(e,r){return t.Message.addToRepeatedWrapperField(this,4,e,proto.google.protobuf.DescriptorProto,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearMessageTypeList=function(){return this.setMessageTypeList([])},proto.google.protobuf.FileDescriptorProto.prototype.getEnumTypeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto,5)},proto.google.protobuf.FileDescriptorProto.prototype.setEnumTypeList=function(e){return t.Message.setRepeatedWrapperField(this,5,e)},proto.google.protobuf.FileDescriptorProto.prototype.addEnumType=function(e,r){return t.Message.addToRepeatedWrapperField(this,5,e,proto.google.protobuf.EnumDescriptorProto,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearEnumTypeList=function(){return this.setEnumTypeList([])},proto.google.protobuf.FileDescriptorProto.prototype.getServiceList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.ServiceDescriptorProto,6)},proto.google.protobuf.FileDescriptorProto.prototype.setServiceList=function(e){return t.Message.setRepeatedWrapperField(this,6,e)},proto.google.protobuf.FileDescriptorProto.prototype.addService=function(e,r){return t.Message.addToRepeatedWrapperField(this,6,e,proto.google.protobuf.ServiceDescriptorProto,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearServiceList=function(){return this.setServiceList([])},proto.google.protobuf.FileDescriptorProto.prototype.getExtensionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,7)},proto.google.protobuf.FileDescriptorProto.prototype.setExtensionList=function(e){return t.Message.setRepeatedWrapperField(this,7,e)},proto.google.protobuf.FileDescriptorProto.prototype.addExtension$=function(e,r){return t.Message.addToRepeatedWrapperField(this,7,e,proto.google.protobuf.FieldDescriptorProto,r)},proto.google.protobuf.FileDescriptorProto.prototype.clearExtensionList=function(){return this.setExtensionList([])},proto.google.protobuf.FileDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.FileOptions,8)},proto.google.protobuf.FileDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,8,e)},proto.google.protobuf.FileDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,8)},proto.google.protobuf.FileDescriptorProto.prototype.getSourceCodeInfo=function(){return t.Message.getWrapperField(this,proto.google.protobuf.SourceCodeInfo,9)},proto.google.protobuf.FileDescriptorProto.prototype.setSourceCodeInfo=function(e){return t.Message.setWrapperField(this,9,e)},proto.google.protobuf.FileDescriptorProto.prototype.clearSourceCodeInfo=function(){return this.setSourceCodeInfo(void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasSourceCodeInfo=function(){return null!=t.Message.getField(this,9)},proto.google.protobuf.FileDescriptorProto.prototype.getSyntax=function(){return t.Message.getFieldWithDefault(this,12,"")},proto.google.protobuf.FileDescriptorProto.prototype.setSyntax=function(e){return t.Message.setField(this,12,e)},proto.google.protobuf.FileDescriptorProto.prototype.clearSyntax=function(){return t.Message.setField(this,12,void 0)},proto.google.protobuf.FileDescriptorProto.prototype.hasSyntax=function(){return null!=t.Message.getField(this,12)},proto.google.protobuf.DescriptorProto.repeatedFields_=[2,6,3,4,5,8,9,10],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.DescriptorProto.toObject(e,this)},proto.google.protobuf.DescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,fieldList:t.Message.toObjectList(r.getFieldList(),proto.google.protobuf.FieldDescriptorProto.toObject,e),extensionList:t.Message.toObjectList(r.getExtensionList(),proto.google.protobuf.FieldDescriptorProto.toObject,e),nestedTypeList:t.Message.toObjectList(r.getNestedTypeList(),proto.google.protobuf.DescriptorProto.toObject,e),enumTypeList:t.Message.toObjectList(r.getEnumTypeList(),proto.google.protobuf.EnumDescriptorProto.toObject,e),extensionRangeList:t.Message.toObjectList(r.getExtensionRangeList(),proto.google.protobuf.DescriptorProto.ExtensionRange.toObject,e),oneofDeclList:t.Message.toObjectList(r.getOneofDeclList(),proto.google.protobuf.OneofDescriptorProto.toObject,e),options:(o=r.getOptions())&&proto.google.protobuf.MessageOptions.toObject(e,o),reservedRangeList:t.Message.toObjectList(r.getReservedRangeList(),proto.google.protobuf.DescriptorProto.ReservedRange.toObject,e),reservedNameList:null==(o=t.Message.getRepeatedField(r,10))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.DescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.DescriptorProto;return proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=new proto.google.protobuf.FieldDescriptorProto;t.readMessage(r,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),e.addField(r);break;case 6:r=new proto.google.protobuf.FieldDescriptorProto;t.readMessage(r,proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader),e.addExtension$(r);break;case 3:r=new proto.google.protobuf.DescriptorProto;t.readMessage(r,proto.google.protobuf.DescriptorProto.deserializeBinaryFromReader),e.addNestedType(r);break;case 4:r=new proto.google.protobuf.EnumDescriptorProto;t.readMessage(r,proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader),e.addEnumType(r);break;case 5:r=new proto.google.protobuf.DescriptorProto.ExtensionRange;t.readMessage(r,proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader),e.addExtensionRange(r);break;case 8:r=new proto.google.protobuf.OneofDescriptorProto;t.readMessage(r,proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader),e.addOneofDecl(r);break;case 7:r=new proto.google.protobuf.MessageOptions;t.readMessage(r,proto.google.protobuf.MessageOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 9:r=new proto.google.protobuf.DescriptorProto.ReservedRange;t.readMessage(r,proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader),e.addReservedRange(r);break;case 10:r=t.readString();e.addReservedName(r);break;default:t.skipField()}}return e},proto.google.protobuf.DescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.DescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.DescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),(o=e.getFieldList()).length>0&&r.writeRepeatedMessage(2,o,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),(o=e.getExtensionList()).length>0&&r.writeRepeatedMessage(6,o,proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter),(o=e.getNestedTypeList()).length>0&&r.writeRepeatedMessage(3,o,proto.google.protobuf.DescriptorProto.serializeBinaryToWriter),(o=e.getEnumTypeList()).length>0&&r.writeRepeatedMessage(4,o,proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter),(o=e.getExtensionRangeList()).length>0&&r.writeRepeatedMessage(5,o,proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter),(o=e.getOneofDeclList()).length>0&&r.writeRepeatedMessage(8,o,proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter),null!=(o=e.getOptions())&&r.writeMessage(7,o,proto.google.protobuf.MessageOptions.serializeBinaryToWriter),(o=e.getReservedRangeList()).length>0&&r.writeRepeatedMessage(9,o,proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter),(o=e.getReservedNameList()).length>0&&r.writeRepeatedString(10,o)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.toObject=function(e){return proto.google.protobuf.DescriptorProto.ExtensionRange.toObject(e,this)},proto.google.protobuf.DescriptorProto.ExtensionRange.toObject=function(e,r){var o,i={start:null==(o=t.Message.getField(r,1))?void 0:o,end:null==(o=t.Message.getField(r,2))?void 0:o,options:(o=r.getOptions())&&proto.google.protobuf.ExtensionRangeOptions.toObject(e,o)};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.DescriptorProto.ExtensionRange;return proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader(o,r)},proto.google.protobuf.DescriptorProto.ExtensionRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setStart(r);break;case 2:r=t.readInt32();e.setEnd(r);break;case 3:r=new proto.google.protobuf.ExtensionRangeOptions;t.readMessage(r,proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}}return e},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.DescriptorProto.ExtensionRange.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeInt32(1,o),null!=(o=t.Message.getField(e,2))&&r.writeInt32(2,o),null!=(o=e.getOptions())&&r.writeMessage(3,o,proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getStart=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setStart=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearStart=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasStart=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getEnd=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setEnd=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearEnd=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasEnd=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.ExtensionRangeOptions,3)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.DescriptorProto.ExtensionRange.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DescriptorProto.ReservedRange.prototype.toObject=function(e){return proto.google.protobuf.DescriptorProto.ReservedRange.toObject(e,this)},proto.google.protobuf.DescriptorProto.ReservedRange.toObject=function(e,r){var o,i={start:null==(o=t.Message.getField(r,1))?void 0:o,end:null==(o=t.Message.getField(r,2))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.DescriptorProto.ReservedRange;return proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader(o,r)},proto.google.protobuf.DescriptorProto.ReservedRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setStart(r);break;case 2:r=t.readInt32();e.setEnd(r);break;default:t.skipField()}}return e},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.DescriptorProto.ReservedRange.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeInt32(1,o),null!=(o=t.Message.getField(e,2))&&r.writeInt32(2,o)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.getStart=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.setStart=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.clearStart=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.hasStart=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.getEnd=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.setEnd=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.clearEnd=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.DescriptorProto.ReservedRange.prototype.hasEnd=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.DescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.DescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.DescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.DescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.DescriptorProto.prototype.getFieldList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,2)},proto.google.protobuf.DescriptorProto.prototype.setFieldList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},proto.google.protobuf.DescriptorProto.prototype.addField=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,proto.google.protobuf.FieldDescriptorProto,r)},proto.google.protobuf.DescriptorProto.prototype.clearFieldList=function(){return this.setFieldList([])},proto.google.protobuf.DescriptorProto.prototype.getExtensionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.FieldDescriptorProto,6)},proto.google.protobuf.DescriptorProto.prototype.setExtensionList=function(e){return t.Message.setRepeatedWrapperField(this,6,e)},proto.google.protobuf.DescriptorProto.prototype.addExtension$=function(e,r){return t.Message.addToRepeatedWrapperField(this,6,e,proto.google.protobuf.FieldDescriptorProto,r)},proto.google.protobuf.DescriptorProto.prototype.clearExtensionList=function(){return this.setExtensionList([])},proto.google.protobuf.DescriptorProto.prototype.getNestedTypeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto,3)},proto.google.protobuf.DescriptorProto.prototype.setNestedTypeList=function(e){return t.Message.setRepeatedWrapperField(this,3,e)},proto.google.protobuf.DescriptorProto.prototype.addNestedType=function(e,r){return t.Message.addToRepeatedWrapperField(this,3,e,proto.google.protobuf.DescriptorProto,r)},proto.google.protobuf.DescriptorProto.prototype.clearNestedTypeList=function(){return this.setNestedTypeList([])},proto.google.protobuf.DescriptorProto.prototype.getEnumTypeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto,4)},proto.google.protobuf.DescriptorProto.prototype.setEnumTypeList=function(e){return t.Message.setRepeatedWrapperField(this,4,e)},proto.google.protobuf.DescriptorProto.prototype.addEnumType=function(e,r){return t.Message.addToRepeatedWrapperField(this,4,e,proto.google.protobuf.EnumDescriptorProto,r)},proto.google.protobuf.DescriptorProto.prototype.clearEnumTypeList=function(){return this.setEnumTypeList([])},proto.google.protobuf.DescriptorProto.prototype.getExtensionRangeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto.ExtensionRange,5)},proto.google.protobuf.DescriptorProto.prototype.setExtensionRangeList=function(e){return t.Message.setRepeatedWrapperField(this,5,e)},proto.google.protobuf.DescriptorProto.prototype.addExtensionRange=function(e,r){return t.Message.addToRepeatedWrapperField(this,5,e,proto.google.protobuf.DescriptorProto.ExtensionRange,r)},proto.google.protobuf.DescriptorProto.prototype.clearExtensionRangeList=function(){return this.setExtensionRangeList([])},proto.google.protobuf.DescriptorProto.prototype.getOneofDeclList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.OneofDescriptorProto,8)},proto.google.protobuf.DescriptorProto.prototype.setOneofDeclList=function(e){return t.Message.setRepeatedWrapperField(this,8,e)},proto.google.protobuf.DescriptorProto.prototype.addOneofDecl=function(e,r){return t.Message.addToRepeatedWrapperField(this,8,e,proto.google.protobuf.OneofDescriptorProto,r)},proto.google.protobuf.DescriptorProto.prototype.clearOneofDeclList=function(){return this.setOneofDeclList([])},proto.google.protobuf.DescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.MessageOptions,7)},proto.google.protobuf.DescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,7,e)},proto.google.protobuf.DescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.DescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,7)},proto.google.protobuf.DescriptorProto.prototype.getReservedRangeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.DescriptorProto.ReservedRange,9)},proto.google.protobuf.DescriptorProto.prototype.setReservedRangeList=function(e){return t.Message.setRepeatedWrapperField(this,9,e)},proto.google.protobuf.DescriptorProto.prototype.addReservedRange=function(e,r){return t.Message.addToRepeatedWrapperField(this,9,e,proto.google.protobuf.DescriptorProto.ReservedRange,r)},proto.google.protobuf.DescriptorProto.prototype.clearReservedRangeList=function(){return this.setReservedRangeList([])},proto.google.protobuf.DescriptorProto.prototype.getReservedNameList=function(){return t.Message.getRepeatedField(this,10)},proto.google.protobuf.DescriptorProto.prototype.setReservedNameList=function(e){return t.Message.setField(this,10,e||[])},proto.google.protobuf.DescriptorProto.prototype.addReservedName=function(e,r){return t.Message.addToRepeatedField(this,10,e,r)},proto.google.protobuf.DescriptorProto.prototype.clearReservedNameList=function(){return this.setReservedNameList([])},proto.google.protobuf.ExtensionRangeOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ExtensionRangeOptions.prototype.toObject=function(e){return proto.google.protobuf.ExtensionRangeOptions.toObject(e,this)},proto.google.protobuf.ExtensionRangeOptions.toObject=function(e,r){var o={uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,o,proto.google.protobuf.ExtensionRangeOptions.extensions,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.ExtensionRangeOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.ExtensionRangeOptions;return proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.ExtensionRangeOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){if(999===r.getFieldNumber()){var o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o)}else t.Message.readBinaryExtension(e,r,proto.google.protobuf.ExtensionRangeOptions.extensionsBinary,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension,proto.google.protobuf.ExtensionRangeOptions.prototype.setExtension)}return e},proto.google.protobuf.ExtensionRangeOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.ExtensionRangeOptions.serializeBinaryToWriter=function(e,r){var o;(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.ExtensionRangeOptions.extensionsBinary,proto.google.protobuf.ExtensionRangeOptions.prototype.getExtension)},proto.google.protobuf.ExtensionRangeOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.ExtensionRangeOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.ExtensionRangeOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.ExtensionRangeOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FieldDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.FieldDescriptorProto.toObject(e,this)},proto.google.protobuf.FieldDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,number:null==(o=t.Message.getField(r,3))?void 0:o,label:null==(o=t.Message.getField(r,4))?void 0:o,type:null==(o=t.Message.getField(r,5))?void 0:o,typeName:null==(o=t.Message.getField(r,6))?void 0:o,extendee:null==(o=t.Message.getField(r,2))?void 0:o,defaultValue:null==(o=t.Message.getField(r,7))?void 0:o,oneofIndex:null==(o=t.Message.getField(r,9))?void 0:o,jsonName:null==(o=t.Message.getField(r,10))?void 0:o,options:(o=r.getOptions())&&proto.google.protobuf.FieldOptions.toObject(e,o),proto3Optional:null==(o=t.Message.getBooleanField(r,17))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.FieldDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.FieldDescriptorProto;return proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.FieldDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 3:r=t.readInt32();e.setNumber(r);break;case 4:r=t.readEnum();e.setLabel(r);break;case 5:r=t.readEnum();e.setType(r);break;case 6:r=t.readString();e.setTypeName(r);break;case 2:r=t.readString();e.setExtendee(r);break;case 7:r=t.readString();e.setDefaultValue(r);break;case 9:r=t.readInt32();e.setOneofIndex(r);break;case 10:r=t.readString();e.setJsonName(r);break;case 8:r=new proto.google.protobuf.FieldOptions;t.readMessage(r,proto.google.protobuf.FieldOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 17:r=t.readBool();e.setProto3Optional(r);break;default:t.skipField()}}return e},proto.google.protobuf.FieldDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.FieldDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,3))&&r.writeInt32(3,o),null!=(o=t.Message.getField(e,4))&&r.writeEnum(4,o),null!=(o=t.Message.getField(e,5))&&r.writeEnum(5,o),null!=(o=t.Message.getField(e,6))&&r.writeString(6,o),null!=(o=t.Message.getField(e,2))&&r.writeString(2,o),null!=(o=t.Message.getField(e,7))&&r.writeString(7,o),null!=(o=t.Message.getField(e,9))&&r.writeInt32(9,o),null!=(o=t.Message.getField(e,10))&&r.writeString(10,o),null!=(o=e.getOptions())&&r.writeMessage(8,o,proto.google.protobuf.FieldOptions.serializeBinaryToWriter),null!=(o=t.Message.getField(e,17))&&r.writeBool(17,o)},proto.google.protobuf.FieldDescriptorProto.Type={TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18},proto.google.protobuf.FieldDescriptorProto.Label={LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3},proto.google.protobuf.FieldDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.FieldDescriptorProto.prototype.getNumber=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.google.protobuf.FieldDescriptorProto.prototype.setNumber=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearNumber=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasNumber=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.FieldDescriptorProto.prototype.getLabel=function(){return t.Message.getFieldWithDefault(this,4,1)},proto.google.protobuf.FieldDescriptorProto.prototype.setLabel=function(e){return t.Message.setField(this,4,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearLabel=function(){return t.Message.setField(this,4,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasLabel=function(){return null!=t.Message.getField(this,4)},proto.google.protobuf.FieldDescriptorProto.prototype.getType=function(){return t.Message.getFieldWithDefault(this,5,1)},proto.google.protobuf.FieldDescriptorProto.prototype.setType=function(e){return t.Message.setField(this,5,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearType=function(){return t.Message.setField(this,5,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasType=function(){return null!=t.Message.getField(this,5)},proto.google.protobuf.FieldDescriptorProto.prototype.getTypeName=function(){return t.Message.getFieldWithDefault(this,6,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setTypeName=function(e){return t.Message.setField(this,6,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearTypeName=function(){return t.Message.setField(this,6,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasTypeName=function(){return null!=t.Message.getField(this,6)},proto.google.protobuf.FieldDescriptorProto.prototype.getExtendee=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setExtendee=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearExtendee=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasExtendee=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.FieldDescriptorProto.prototype.getDefaultValue=function(){return t.Message.getFieldWithDefault(this,7,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setDefaultValue=function(e){return t.Message.setField(this,7,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearDefaultValue=function(){return t.Message.setField(this,7,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasDefaultValue=function(){return null!=t.Message.getField(this,7)},proto.google.protobuf.FieldDescriptorProto.prototype.getOneofIndex=function(){return t.Message.getFieldWithDefault(this,9,0)},proto.google.protobuf.FieldDescriptorProto.prototype.setOneofIndex=function(e){return t.Message.setField(this,9,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearOneofIndex=function(){return t.Message.setField(this,9,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasOneofIndex=function(){return null!=t.Message.getField(this,9)},proto.google.protobuf.FieldDescriptorProto.prototype.getJsonName=function(){return t.Message.getFieldWithDefault(this,10,"")},proto.google.protobuf.FieldDescriptorProto.prototype.setJsonName=function(e){return t.Message.setField(this,10,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearJsonName=function(){return t.Message.setField(this,10,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasJsonName=function(){return null!=t.Message.getField(this,10)},proto.google.protobuf.FieldDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.FieldOptions,8)},proto.google.protobuf.FieldDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,8,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,8)},proto.google.protobuf.FieldDescriptorProto.prototype.getProto3Optional=function(){return t.Message.getBooleanFieldWithDefault(this,17,!1)},proto.google.protobuf.FieldDescriptorProto.prototype.setProto3Optional=function(e){return t.Message.setField(this,17,e)},proto.google.protobuf.FieldDescriptorProto.prototype.clearProto3Optional=function(){return t.Message.setField(this,17,void 0)},proto.google.protobuf.FieldDescriptorProto.prototype.hasProto3Optional=function(){return null!=t.Message.getField(this,17)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.OneofDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.OneofDescriptorProto.toObject(e,this)},proto.google.protobuf.OneofDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,options:(o=r.getOptions())&&proto.google.protobuf.OneofOptions.toObject(e,o)};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.OneofDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.OneofDescriptorProto;return proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.OneofDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=new proto.google.protobuf.OneofOptions;t.readMessage(r,proto.google.protobuf.OneofOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}}return e},proto.google.protobuf.OneofDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.OneofDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=e.getOptions())&&r.writeMessage(2,o,proto.google.protobuf.OneofOptions.serializeBinaryToWriter)},proto.google.protobuf.OneofDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.OneofDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.OneofDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.OneofDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.OneofDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.OneofOptions,2)},proto.google.protobuf.OneofDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.google.protobuf.OneofDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.OneofDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.EnumDescriptorProto.repeatedFields_=[2,4,5],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.EnumDescriptorProto.toObject(e,this)},proto.google.protobuf.EnumDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,valueList:t.Message.toObjectList(r.getValueList(),proto.google.protobuf.EnumValueDescriptorProto.toObject,e),options:(o=r.getOptions())&&proto.google.protobuf.EnumOptions.toObject(e,o),reservedRangeList:t.Message.toObjectList(r.getReservedRangeList(),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject,e),reservedNameList:null==(o=t.Message.getRepeatedField(r,5))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.EnumDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.EnumDescriptorProto;return proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.EnumDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=new proto.google.protobuf.EnumValueDescriptorProto;t.readMessage(r,proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader),e.addValue(r);break;case 3:r=new proto.google.protobuf.EnumOptions;t.readMessage(r,proto.google.protobuf.EnumOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 4:r=new proto.google.protobuf.EnumDescriptorProto.EnumReservedRange;t.readMessage(r,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader),e.addReservedRange(r);break;case 5:r=t.readString();e.addReservedName(r);break;default:t.skipField()}}return e},proto.google.protobuf.EnumDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.EnumDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),(o=e.getValueList()).length>0&&r.writeRepeatedMessage(2,o,proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter),null!=(o=e.getOptions())&&r.writeMessage(3,o,proto.google.protobuf.EnumOptions.serializeBinaryToWriter),(o=e.getReservedRangeList()).length>0&&r.writeRepeatedMessage(4,o,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter),(o=e.getReservedNameList()).length>0&&r.writeRepeatedString(5,o)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.toObject=function(e){return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(e,this)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject=function(e,r){var o,i={start:null==(o=t.Message.getField(r,1))?void 0:o,end:null==(o=t.Message.getField(r,2))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.EnumDescriptorProto.EnumReservedRange;return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader(o,r)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setStart(r);break;case 2:r=t.readInt32();e.setEnd(r);break;default:t.skipField()}}return e},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeInt32(1,o),null!=(o=t.Message.getField(e,2))&&r.writeInt32(2,o)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.getStart=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.setStart=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.clearStart=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.hasStart=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.getEnd=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.setEnd=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.clearEnd=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.EnumDescriptorProto.EnumReservedRange.prototype.hasEnd=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.EnumDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.EnumDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.EnumDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.EnumDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.EnumDescriptorProto.prototype.getValueList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumValueDescriptorProto,2)},proto.google.protobuf.EnumDescriptorProto.prototype.setValueList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},proto.google.protobuf.EnumDescriptorProto.prototype.addValue=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,proto.google.protobuf.EnumValueDescriptorProto,r)},proto.google.protobuf.EnumDescriptorProto.prototype.clearValueList=function(){return this.setValueList([])},proto.google.protobuf.EnumDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.EnumOptions,3)},proto.google.protobuf.EnumDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.google.protobuf.EnumDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.EnumDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.EnumDescriptorProto.prototype.getReservedRangeList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,4)},proto.google.protobuf.EnumDescriptorProto.prototype.setReservedRangeList=function(e){return t.Message.setRepeatedWrapperField(this,4,e)},proto.google.protobuf.EnumDescriptorProto.prototype.addReservedRange=function(e,r){return t.Message.addToRepeatedWrapperField(this,4,e,proto.google.protobuf.EnumDescriptorProto.EnumReservedRange,r)},proto.google.protobuf.EnumDescriptorProto.prototype.clearReservedRangeList=function(){return this.setReservedRangeList([])},proto.google.protobuf.EnumDescriptorProto.prototype.getReservedNameList=function(){return t.Message.getRepeatedField(this,5)},proto.google.protobuf.EnumDescriptorProto.prototype.setReservedNameList=function(e){return t.Message.setField(this,5,e||[])},proto.google.protobuf.EnumDescriptorProto.prototype.addReservedName=function(e,r){return t.Message.addToRepeatedField(this,5,e,r)},proto.google.protobuf.EnumDescriptorProto.prototype.clearReservedNameList=function(){return this.setReservedNameList([])},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumValueDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.EnumValueDescriptorProto.toObject(e,this)},proto.google.protobuf.EnumValueDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,number:null==(o=t.Message.getField(r,2))?void 0:o,options:(o=r.getOptions())&&proto.google.protobuf.EnumValueOptions.toObject(e,o)};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.EnumValueDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.EnumValueDescriptorProto;return proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.EnumValueDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readInt32();e.setNumber(r);break;case 3:r=new proto.google.protobuf.EnumValueOptions;t.readMessage(r,proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}}return e},proto.google.protobuf.EnumValueDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.EnumValueDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeInt32(2,o),null!=(o=e.getOptions())&&r.writeMessage(3,o,proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter)},proto.google.protobuf.EnumValueDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.EnumValueDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.EnumValueDescriptorProto.prototype.getNumber=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.setNumber=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearNumber=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasNumber=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.EnumValueDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.EnumValueOptions,3)},proto.google.protobuf.EnumValueDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.google.protobuf.EnumValueDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.EnumValueDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.ServiceDescriptorProto.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ServiceDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.ServiceDescriptorProto.toObject(e,this)},proto.google.protobuf.ServiceDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,methodList:t.Message.toObjectList(r.getMethodList(),proto.google.protobuf.MethodDescriptorProto.toObject,e),options:(o=r.getOptions())&&proto.google.protobuf.ServiceOptions.toObject(e,o)};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.ServiceDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.ServiceDescriptorProto;return proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.ServiceDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=new proto.google.protobuf.MethodDescriptorProto;t.readMessage(r,proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader),e.addMethod(r);break;case 3:r=new proto.google.protobuf.ServiceOptions;t.readMessage(r,proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}}return e},proto.google.protobuf.ServiceDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.ServiceDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),(o=e.getMethodList()).length>0&&r.writeRepeatedMessage(2,o,proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter),null!=(o=e.getOptions())&&r.writeMessage(3,o,proto.google.protobuf.ServiceOptions.serializeBinaryToWriter)},proto.google.protobuf.ServiceDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.ServiceDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.ServiceDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.ServiceDescriptorProto.prototype.getMethodList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.MethodDescriptorProto,2)},proto.google.protobuf.ServiceDescriptorProto.prototype.setMethodList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},proto.google.protobuf.ServiceDescriptorProto.prototype.addMethod=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,proto.google.protobuf.MethodDescriptorProto,r)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearMethodList=function(){return this.setMethodList([])},proto.google.protobuf.ServiceDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.ServiceOptions,3)},proto.google.protobuf.ServiceDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.google.protobuf.ServiceDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.ServiceDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MethodDescriptorProto.prototype.toObject=function(e){return proto.google.protobuf.MethodDescriptorProto.toObject(e,this)},proto.google.protobuf.MethodDescriptorProto.toObject=function(e,r){var o,i={name:null==(o=t.Message.getField(r,1))?void 0:o,inputType:null==(o=t.Message.getField(r,2))?void 0:o,outputType:null==(o=t.Message.getField(r,3))?void 0:o,options:(o=r.getOptions())&&proto.google.protobuf.MethodOptions.toObject(e,o),clientStreaming:t.Message.getBooleanFieldWithDefault(r,5,!1),serverStreaming:t.Message.getBooleanFieldWithDefault(r,6,!1)};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.MethodDescriptorProto.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.MethodDescriptorProto;return proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader(o,r)},proto.google.protobuf.MethodDescriptorProto.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString();e.setInputType(r);break;case 3:r=t.readString();e.setOutputType(r);break;case 4:r=new proto.google.protobuf.MethodOptions;t.readMessage(r,proto.google.protobuf.MethodOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 5:r=t.readBool();e.setClientStreaming(r);break;case 6:r=t.readBool();e.setServerStreaming(r);break;default:t.skipField()}}return e},proto.google.protobuf.MethodDescriptorProto.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.MethodDescriptorProto.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeString(2,o),null!=(o=t.Message.getField(e,3))&&r.writeString(3,o),null!=(o=e.getOptions())&&r.writeMessage(4,o,proto.google.protobuf.MethodOptions.serializeBinaryToWriter),null!=(o=t.Message.getField(e,5))&&r.writeBool(5,o),null!=(o=t.Message.getField(e,6))&&r.writeBool(6,o)},proto.google.protobuf.MethodDescriptorProto.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.MethodDescriptorProto.prototype.getInputType=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setInputType=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearInputType=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasInputType=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.MethodDescriptorProto.prototype.getOutputType=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.MethodDescriptorProto.prototype.setOutputType=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearOutputType=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasOutputType=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.MethodDescriptorProto.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.google.protobuf.MethodOptions,4)},proto.google.protobuf.MethodDescriptorProto.prototype.setOptions=function(e){return t.Message.setWrapperField(this,4,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasOptions=function(){return null!=t.Message.getField(this,4)},proto.google.protobuf.MethodDescriptorProto.prototype.getClientStreaming=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.google.protobuf.MethodDescriptorProto.prototype.setClientStreaming=function(e){return t.Message.setField(this,5,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearClientStreaming=function(){return t.Message.setField(this,5,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasClientStreaming=function(){return null!=t.Message.getField(this,5)},proto.google.protobuf.MethodDescriptorProto.prototype.getServerStreaming=function(){return t.Message.getBooleanFieldWithDefault(this,6,!1)},proto.google.protobuf.MethodDescriptorProto.prototype.setServerStreaming=function(e){return t.Message.setField(this,6,e)},proto.google.protobuf.MethodDescriptorProto.prototype.clearServerStreaming=function(){return t.Message.setField(this,6,void 0)},proto.google.protobuf.MethodDescriptorProto.prototype.hasServerStreaming=function(){return null!=t.Message.getField(this,6)},proto.google.protobuf.FileOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FileOptions.prototype.toObject=function(e){return proto.google.protobuf.FileOptions.toObject(e,this)},proto.google.protobuf.FileOptions.toObject=function(e,r){var o,i={javaPackage:null==(o=t.Message.getField(r,1))?void 0:o,javaOuterClassname:null==(o=t.Message.getField(r,8))?void 0:o,javaMultipleFiles:t.Message.getBooleanFieldWithDefault(r,10,!1),javaGenerateEqualsAndHash:null==(o=t.Message.getBooleanField(r,20))?void 0:o,javaStringCheckUtf8:t.Message.getBooleanFieldWithDefault(r,27,!1),optimizeFor:t.Message.getFieldWithDefault(r,9,1),goPackage:null==(o=t.Message.getField(r,11))?void 0:o,ccGenericServices:t.Message.getBooleanFieldWithDefault(r,16,!1),javaGenericServices:t.Message.getBooleanFieldWithDefault(r,17,!1),pyGenericServices:t.Message.getBooleanFieldWithDefault(r,18,!1),phpGenericServices:t.Message.getBooleanFieldWithDefault(r,42,!1),deprecated:t.Message.getBooleanFieldWithDefault(r,23,!1),ccEnableArenas:t.Message.getBooleanFieldWithDefault(r,31,!0),objcClassPrefix:null==(o=t.Message.getField(r,36))?void 0:o,csharpNamespace:null==(o=t.Message.getField(r,37))?void 0:o,swiftPrefix:null==(o=t.Message.getField(r,39))?void 0:o,phpClassPrefix:null==(o=t.Message.getField(r,40))?void 0:o,phpNamespace:null==(o=t.Message.getField(r,41))?void 0:o,phpMetadataNamespace:null==(o=t.Message.getField(r,44))?void 0:o,rubyPackage:null==(o=t.Message.getField(r,45))?void 0:o,uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,i,proto.google.protobuf.FileOptions.extensions,proto.google.protobuf.FileOptions.prototype.getExtension,e),e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.FileOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.FileOptions;return proto.google.protobuf.FileOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.FileOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 1:var o=r.readString();e.setJavaPackage(o);break;case 8:o=r.readString();e.setJavaOuterClassname(o);break;case 10:o=r.readBool();e.setJavaMultipleFiles(o);break;case 20:o=r.readBool();e.setJavaGenerateEqualsAndHash(o);break;case 27:o=r.readBool();e.setJavaStringCheckUtf8(o);break;case 9:o=r.readEnum();e.setOptimizeFor(o);break;case 11:o=r.readString();e.setGoPackage(o);break;case 16:o=r.readBool();e.setCcGenericServices(o);break;case 17:o=r.readBool();e.setJavaGenericServices(o);break;case 18:o=r.readBool();e.setPyGenericServices(o);break;case 42:o=r.readBool();e.setPhpGenericServices(o);break;case 23:o=r.readBool();e.setDeprecated(o);break;case 31:o=r.readBool();e.setCcEnableArenas(o);break;case 36:o=r.readString();e.setObjcClassPrefix(o);break;case 37:o=r.readString();e.setCsharpNamespace(o);break;case 39:o=r.readString();e.setSwiftPrefix(o);break;case 40:o=r.readString();e.setPhpClassPrefix(o);break;case 41:o=r.readString();e.setPhpNamespace(o);break;case 44:o=r.readString();e.setPhpMetadataNamespace(o);break;case 45:o=r.readString();e.setRubyPackage(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.FileOptions.extensionsBinary,proto.google.protobuf.FileOptions.prototype.getExtension,proto.google.protobuf.FileOptions.prototype.setExtension)}}return e},proto.google.protobuf.FileOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.FileOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.FileOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,8))&&r.writeString(8,o),null!=(o=t.Message.getField(e,10))&&r.writeBool(10,o),null!=(o=t.Message.getField(e,20))&&r.writeBool(20,o),null!=(o=t.Message.getField(e,27))&&r.writeBool(27,o),null!=(o=t.Message.getField(e,9))&&r.writeEnum(9,o),null!=(o=t.Message.getField(e,11))&&r.writeString(11,o),null!=(o=t.Message.getField(e,16))&&r.writeBool(16,o),null!=(o=t.Message.getField(e,17))&&r.writeBool(17,o),null!=(o=t.Message.getField(e,18))&&r.writeBool(18,o),null!=(o=t.Message.getField(e,42))&&r.writeBool(42,o),null!=(o=t.Message.getField(e,23))&&r.writeBool(23,o),null!=(o=t.Message.getField(e,31))&&r.writeBool(31,o),null!=(o=t.Message.getField(e,36))&&r.writeString(36,o),null!=(o=t.Message.getField(e,37))&&r.writeString(37,o),null!=(o=t.Message.getField(e,39))&&r.writeString(39,o),null!=(o=t.Message.getField(e,40))&&r.writeString(40,o),null!=(o=t.Message.getField(e,41))&&r.writeString(41,o),null!=(o=t.Message.getField(e,44))&&r.writeString(44,o),null!=(o=t.Message.getField(e,45))&&r.writeString(45,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.FileOptions.extensionsBinary,proto.google.protobuf.FileOptions.prototype.getExtension)},proto.google.protobuf.FileOptions.OptimizeMode={SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3},proto.google.protobuf.FileOptions.prototype.getJavaPackage=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.FileOptions.prototype.setJavaPackage=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.FileOptions.prototype.clearJavaPackage=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaPackage=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.FileOptions.prototype.getJavaOuterClassname=function(){return t.Message.getFieldWithDefault(this,8,"")},proto.google.protobuf.FileOptions.prototype.setJavaOuterClassname=function(e){return t.Message.setField(this,8,e)},proto.google.protobuf.FileOptions.prototype.clearJavaOuterClassname=function(){return t.Message.setField(this,8,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaOuterClassname=function(){return null!=t.Message.getField(this,8)},proto.google.protobuf.FileOptions.prototype.getJavaMultipleFiles=function(){return t.Message.getBooleanFieldWithDefault(this,10,!1)},proto.google.protobuf.FileOptions.prototype.setJavaMultipleFiles=function(e){return t.Message.setField(this,10,e)},proto.google.protobuf.FileOptions.prototype.clearJavaMultipleFiles=function(){return t.Message.setField(this,10,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaMultipleFiles=function(){return null!=t.Message.getField(this,10)},proto.google.protobuf.FileOptions.prototype.getJavaGenerateEqualsAndHash=function(){return t.Message.getBooleanFieldWithDefault(this,20,!1)},proto.google.protobuf.FileOptions.prototype.setJavaGenerateEqualsAndHash=function(e){return t.Message.setField(this,20,e)},proto.google.protobuf.FileOptions.prototype.clearJavaGenerateEqualsAndHash=function(){return t.Message.setField(this,20,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaGenerateEqualsAndHash=function(){return null!=t.Message.getField(this,20)},proto.google.protobuf.FileOptions.prototype.getJavaStringCheckUtf8=function(){return t.Message.getBooleanFieldWithDefault(this,27,!1)},proto.google.protobuf.FileOptions.prototype.setJavaStringCheckUtf8=function(e){return t.Message.setField(this,27,e)},proto.google.protobuf.FileOptions.prototype.clearJavaStringCheckUtf8=function(){return t.Message.setField(this,27,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaStringCheckUtf8=function(){return null!=t.Message.getField(this,27)},proto.google.protobuf.FileOptions.prototype.getOptimizeFor=function(){return t.Message.getFieldWithDefault(this,9,1)},proto.google.protobuf.FileOptions.prototype.setOptimizeFor=function(e){return t.Message.setField(this,9,e)},proto.google.protobuf.FileOptions.prototype.clearOptimizeFor=function(){return t.Message.setField(this,9,void 0)},proto.google.protobuf.FileOptions.prototype.hasOptimizeFor=function(){return null!=t.Message.getField(this,9)},proto.google.protobuf.FileOptions.prototype.getGoPackage=function(){return t.Message.getFieldWithDefault(this,11,"")},proto.google.protobuf.FileOptions.prototype.setGoPackage=function(e){return t.Message.setField(this,11,e)},proto.google.protobuf.FileOptions.prototype.clearGoPackage=function(){return t.Message.setField(this,11,void 0)},proto.google.protobuf.FileOptions.prototype.hasGoPackage=function(){return null!=t.Message.getField(this,11)},proto.google.protobuf.FileOptions.prototype.getCcGenericServices=function(){return t.Message.getBooleanFieldWithDefault(this,16,!1)},proto.google.protobuf.FileOptions.prototype.setCcGenericServices=function(e){return t.Message.setField(this,16,e)},proto.google.protobuf.FileOptions.prototype.clearCcGenericServices=function(){return t.Message.setField(this,16,void 0)},proto.google.protobuf.FileOptions.prototype.hasCcGenericServices=function(){return null!=t.Message.getField(this,16)},proto.google.protobuf.FileOptions.prototype.getJavaGenericServices=function(){return t.Message.getBooleanFieldWithDefault(this,17,!1)},proto.google.protobuf.FileOptions.prototype.setJavaGenericServices=function(e){return t.Message.setField(this,17,e)},proto.google.protobuf.FileOptions.prototype.clearJavaGenericServices=function(){return t.Message.setField(this,17,void 0)},proto.google.protobuf.FileOptions.prototype.hasJavaGenericServices=function(){return null!=t.Message.getField(this,17)},proto.google.protobuf.FileOptions.prototype.getPyGenericServices=function(){return t.Message.getBooleanFieldWithDefault(this,18,!1)},proto.google.protobuf.FileOptions.prototype.setPyGenericServices=function(e){return t.Message.setField(this,18,e)},proto.google.protobuf.FileOptions.prototype.clearPyGenericServices=function(){return t.Message.setField(this,18,void 0)},proto.google.protobuf.FileOptions.prototype.hasPyGenericServices=function(){return null!=t.Message.getField(this,18)},proto.google.protobuf.FileOptions.prototype.getPhpGenericServices=function(){return t.Message.getBooleanFieldWithDefault(this,42,!1)},proto.google.protobuf.FileOptions.prototype.setPhpGenericServices=function(e){return t.Message.setField(this,42,e)},proto.google.protobuf.FileOptions.prototype.clearPhpGenericServices=function(){return t.Message.setField(this,42,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpGenericServices=function(){return null!=t.Message.getField(this,42)},proto.google.protobuf.FileOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,23,!1)},proto.google.protobuf.FileOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,23,e)},proto.google.protobuf.FileOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,23,void 0)},proto.google.protobuf.FileOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,23)},proto.google.protobuf.FileOptions.prototype.getCcEnableArenas=function(){return t.Message.getBooleanFieldWithDefault(this,31,!0)},proto.google.protobuf.FileOptions.prototype.setCcEnableArenas=function(e){return t.Message.setField(this,31,e)},proto.google.protobuf.FileOptions.prototype.clearCcEnableArenas=function(){return t.Message.setField(this,31,void 0)},proto.google.protobuf.FileOptions.prototype.hasCcEnableArenas=function(){return null!=t.Message.getField(this,31)},proto.google.protobuf.FileOptions.prototype.getObjcClassPrefix=function(){return t.Message.getFieldWithDefault(this,36,"")},proto.google.protobuf.FileOptions.prototype.setObjcClassPrefix=function(e){return t.Message.setField(this,36,e)},proto.google.protobuf.FileOptions.prototype.clearObjcClassPrefix=function(){return t.Message.setField(this,36,void 0)},proto.google.protobuf.FileOptions.prototype.hasObjcClassPrefix=function(){return null!=t.Message.getField(this,36)},proto.google.protobuf.FileOptions.prototype.getCsharpNamespace=function(){return t.Message.getFieldWithDefault(this,37,"")},proto.google.protobuf.FileOptions.prototype.setCsharpNamespace=function(e){return t.Message.setField(this,37,e)},proto.google.protobuf.FileOptions.prototype.clearCsharpNamespace=function(){return t.Message.setField(this,37,void 0)},proto.google.protobuf.FileOptions.prototype.hasCsharpNamespace=function(){return null!=t.Message.getField(this,37)},proto.google.protobuf.FileOptions.prototype.getSwiftPrefix=function(){return t.Message.getFieldWithDefault(this,39,"")},proto.google.protobuf.FileOptions.prototype.setSwiftPrefix=function(e){return t.Message.setField(this,39,e)},proto.google.protobuf.FileOptions.prototype.clearSwiftPrefix=function(){return t.Message.setField(this,39,void 0)},proto.google.protobuf.FileOptions.prototype.hasSwiftPrefix=function(){return null!=t.Message.getField(this,39)},proto.google.protobuf.FileOptions.prototype.getPhpClassPrefix=function(){return t.Message.getFieldWithDefault(this,40,"")},proto.google.protobuf.FileOptions.prototype.setPhpClassPrefix=function(e){return t.Message.setField(this,40,e)},proto.google.protobuf.FileOptions.prototype.clearPhpClassPrefix=function(){return t.Message.setField(this,40,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpClassPrefix=function(){return null!=t.Message.getField(this,40)},proto.google.protobuf.FileOptions.prototype.getPhpNamespace=function(){return t.Message.getFieldWithDefault(this,41,"")},proto.google.protobuf.FileOptions.prototype.setPhpNamespace=function(e){return t.Message.setField(this,41,e)},proto.google.protobuf.FileOptions.prototype.clearPhpNamespace=function(){return t.Message.setField(this,41,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpNamespace=function(){return null!=t.Message.getField(this,41)},proto.google.protobuf.FileOptions.prototype.getPhpMetadataNamespace=function(){return t.Message.getFieldWithDefault(this,44,"")},proto.google.protobuf.FileOptions.prototype.setPhpMetadataNamespace=function(e){return t.Message.setField(this,44,e)},proto.google.protobuf.FileOptions.prototype.clearPhpMetadataNamespace=function(){return t.Message.setField(this,44,void 0)},proto.google.protobuf.FileOptions.prototype.hasPhpMetadataNamespace=function(){return null!=t.Message.getField(this,44)},proto.google.protobuf.FileOptions.prototype.getRubyPackage=function(){return t.Message.getFieldWithDefault(this,45,"")},proto.google.protobuf.FileOptions.prototype.setRubyPackage=function(e){return t.Message.setField(this,45,e)},proto.google.protobuf.FileOptions.prototype.clearRubyPackage=function(){return t.Message.setField(this,45,void 0)},proto.google.protobuf.FileOptions.prototype.hasRubyPackage=function(){return null!=t.Message.getField(this,45)},proto.google.protobuf.FileOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.FileOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.FileOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.FileOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.MessageOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MessageOptions.prototype.toObject=function(e){return proto.google.protobuf.MessageOptions.toObject(e,this)},proto.google.protobuf.MessageOptions.toObject=function(e,r){var o,i={messageSetWireFormat:t.Message.getBooleanFieldWithDefault(r,1,!1),noStandardDescriptorAccessor:t.Message.getBooleanFieldWithDefault(r,2,!1),deprecated:t.Message.getBooleanFieldWithDefault(r,3,!1),mapEntry:null==(o=t.Message.getBooleanField(r,7))?void 0:o,uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,i,proto.google.protobuf.MessageOptions.extensions,proto.google.protobuf.MessageOptions.prototype.getExtension,e),e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.MessageOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.MessageOptions;return proto.google.protobuf.MessageOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.MessageOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 1:var o=r.readBool();e.setMessageSetWireFormat(o);break;case 2:o=r.readBool();e.setNoStandardDescriptorAccessor(o);break;case 3:o=r.readBool();e.setDeprecated(o);break;case 7:o=r.readBool();e.setMapEntry(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.MessageOptions.extensionsBinary,proto.google.protobuf.MessageOptions.prototype.getExtension,proto.google.protobuf.MessageOptions.prototype.setExtension)}}return e},proto.google.protobuf.MessageOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.MessageOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.MessageOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeBool(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBool(2,o),null!=(o=t.Message.getField(e,3))&&r.writeBool(3,o),null!=(o=t.Message.getField(e,7))&&r.writeBool(7,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.MessageOptions.extensionsBinary,proto.google.protobuf.MessageOptions.prototype.getExtension)},proto.google.protobuf.MessageOptions.prototype.getMessageSetWireFormat=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.MessageOptions.prototype.setMessageSetWireFormat=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.MessageOptions.prototype.clearMessageSetWireFormat=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.MessageOptions.prototype.hasMessageSetWireFormat=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.MessageOptions.prototype.getNoStandardDescriptorAccessor=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.MessageOptions.prototype.setNoStandardDescriptorAccessor=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.MessageOptions.prototype.clearNoStandardDescriptorAccessor=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.MessageOptions.prototype.hasNoStandardDescriptorAccessor=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.MessageOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.MessageOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.MessageOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.MessageOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.MessageOptions.prototype.getMapEntry=function(){return t.Message.getBooleanFieldWithDefault(this,7,!1)},proto.google.protobuf.MessageOptions.prototype.setMapEntry=function(e){return t.Message.setField(this,7,e)},proto.google.protobuf.MessageOptions.prototype.clearMapEntry=function(){return t.Message.setField(this,7,void 0)},proto.google.protobuf.MessageOptions.prototype.hasMapEntry=function(){return null!=t.Message.getField(this,7)},proto.google.protobuf.MessageOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.MessageOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.MessageOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.MessageOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.FieldOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FieldOptions.prototype.toObject=function(e){return proto.google.protobuf.FieldOptions.toObject(e,this)},proto.google.protobuf.FieldOptions.toObject=function(e,r){var o,i={ctype:t.Message.getFieldWithDefault(r,1,0),packed:null==(o=t.Message.getBooleanField(r,2))?void 0:o,jstype:t.Message.getFieldWithDefault(r,6,0),lazy:t.Message.getBooleanFieldWithDefault(r,5,!1),unverifiedLazy:t.Message.getBooleanFieldWithDefault(r,15,!1),deprecated:t.Message.getBooleanFieldWithDefault(r,3,!1),weak:t.Message.getBooleanFieldWithDefault(r,10,!1),uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,i,proto.google.protobuf.FieldOptions.extensions,proto.google.protobuf.FieldOptions.prototype.getExtension,e),e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.FieldOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.FieldOptions;return proto.google.protobuf.FieldOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.FieldOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 1:var o=r.readEnum();e.setCtype(o);break;case 2:o=r.readBool();e.setPacked(o);break;case 6:o=r.readEnum();e.setJstype(o);break;case 5:o=r.readBool();e.setLazy(o);break;case 15:o=r.readBool();e.setUnverifiedLazy(o);break;case 3:o=r.readBool();e.setDeprecated(o);break;case 10:o=r.readBool();e.setWeak(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.FieldOptions.extensionsBinary,proto.google.protobuf.FieldOptions.prototype.getExtension,proto.google.protobuf.FieldOptions.prototype.setExtension)}}return e},proto.google.protobuf.FieldOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.FieldOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.FieldOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeEnum(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBool(2,o),null!=(o=t.Message.getField(e,6))&&r.writeEnum(6,o),null!=(o=t.Message.getField(e,5))&&r.writeBool(5,o),null!=(o=t.Message.getField(e,15))&&r.writeBool(15,o),null!=(o=t.Message.getField(e,3))&&r.writeBool(3,o),null!=(o=t.Message.getField(e,10))&&r.writeBool(10,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.FieldOptions.extensionsBinary,proto.google.protobuf.FieldOptions.prototype.getExtension)},proto.google.protobuf.FieldOptions.CType={STRING:0,CORD:1,STRING_PIECE:2},proto.google.protobuf.FieldOptions.JSType={JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2},proto.google.protobuf.FieldOptions.prototype.getCtype=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.FieldOptions.prototype.setCtype=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.FieldOptions.prototype.clearCtype=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.FieldOptions.prototype.hasCtype=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.FieldOptions.prototype.getPacked=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.FieldOptions.prototype.setPacked=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.FieldOptions.prototype.clearPacked=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.FieldOptions.prototype.hasPacked=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.FieldOptions.prototype.getJstype=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.google.protobuf.FieldOptions.prototype.setJstype=function(e){return t.Message.setField(this,6,e)},proto.google.protobuf.FieldOptions.prototype.clearJstype=function(){return t.Message.setField(this,6,void 0)},proto.google.protobuf.FieldOptions.prototype.hasJstype=function(){return null!=t.Message.getField(this,6)},proto.google.protobuf.FieldOptions.prototype.getLazy=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.google.protobuf.FieldOptions.prototype.setLazy=function(e){return t.Message.setField(this,5,e)},proto.google.protobuf.FieldOptions.prototype.clearLazy=function(){return t.Message.setField(this,5,void 0)},proto.google.protobuf.FieldOptions.prototype.hasLazy=function(){return null!=t.Message.getField(this,5)},proto.google.protobuf.FieldOptions.prototype.getUnverifiedLazy=function(){return t.Message.getBooleanFieldWithDefault(this,15,!1)},proto.google.protobuf.FieldOptions.prototype.setUnverifiedLazy=function(e){return t.Message.setField(this,15,e)},proto.google.protobuf.FieldOptions.prototype.clearUnverifiedLazy=function(){return t.Message.setField(this,15,void 0)},proto.google.protobuf.FieldOptions.prototype.hasUnverifiedLazy=function(){return null!=t.Message.getField(this,15)},proto.google.protobuf.FieldOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.FieldOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.FieldOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.FieldOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.FieldOptions.prototype.getWeak=function(){return t.Message.getBooleanFieldWithDefault(this,10,!1)},proto.google.protobuf.FieldOptions.prototype.setWeak=function(e){return t.Message.setField(this,10,e)},proto.google.protobuf.FieldOptions.prototype.clearWeak=function(){return t.Message.setField(this,10,void 0)},proto.google.protobuf.FieldOptions.prototype.hasWeak=function(){return null!=t.Message.getField(this,10)},proto.google.protobuf.FieldOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.FieldOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.FieldOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.FieldOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.OneofOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.OneofOptions.prototype.toObject=function(e){return proto.google.protobuf.OneofOptions.toObject(e,this)},proto.google.protobuf.OneofOptions.toObject=function(e,r){var o={uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,o,proto.google.protobuf.OneofOptions.extensions,proto.google.protobuf.OneofOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.OneofOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.OneofOptions;return proto.google.protobuf.OneofOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.OneofOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){if(999===r.getFieldNumber()){var o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o)}else t.Message.readBinaryExtension(e,r,proto.google.protobuf.OneofOptions.extensionsBinary,proto.google.protobuf.OneofOptions.prototype.getExtension,proto.google.protobuf.OneofOptions.prototype.setExtension)}return e},proto.google.protobuf.OneofOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.OneofOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.OneofOptions.serializeBinaryToWriter=function(e,r){var o;(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.OneofOptions.extensionsBinary,proto.google.protobuf.OneofOptions.prototype.getExtension)},proto.google.protobuf.OneofOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.OneofOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.OneofOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.OneofOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.EnumOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumOptions.prototype.toObject=function(e){return proto.google.protobuf.EnumOptions.toObject(e,this)},proto.google.protobuf.EnumOptions.toObject=function(e,r){var o,i={allowAlias:null==(o=t.Message.getBooleanField(r,2))?void 0:o,deprecated:t.Message.getBooleanFieldWithDefault(r,3,!1),uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,i,proto.google.protobuf.EnumOptions.extensions,proto.google.protobuf.EnumOptions.prototype.getExtension,e),e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.EnumOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.EnumOptions;return proto.google.protobuf.EnumOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.EnumOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 2:var o=r.readBool();e.setAllowAlias(o);break;case 3:o=r.readBool();e.setDeprecated(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.EnumOptions.extensionsBinary,proto.google.protobuf.EnumOptions.prototype.getExtension,proto.google.protobuf.EnumOptions.prototype.setExtension)}}return e},proto.google.protobuf.EnumOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.EnumOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.EnumOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,2))&&r.writeBool(2,o),null!=(o=t.Message.getField(e,3))&&r.writeBool(3,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.EnumOptions.extensionsBinary,proto.google.protobuf.EnumOptions.prototype.getExtension)},proto.google.protobuf.EnumOptions.prototype.getAllowAlias=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.EnumOptions.prototype.setAllowAlias=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.EnumOptions.prototype.clearAllowAlias=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.EnumOptions.prototype.hasAllowAlias=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.EnumOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.google.protobuf.EnumOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.EnumOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.EnumOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.EnumOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.EnumOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.EnumOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.EnumOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.EnumValueOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.EnumValueOptions.prototype.toObject=function(e){return proto.google.protobuf.EnumValueOptions.toObject(e,this)},proto.google.protobuf.EnumValueOptions.toObject=function(e,r){var o={deprecated:t.Message.getBooleanFieldWithDefault(r,1,!1),uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,o,proto.google.protobuf.EnumValueOptions.extensions,proto.google.protobuf.EnumValueOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.EnumValueOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.EnumValueOptions;return proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.EnumValueOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 1:var o=r.readBool();e.setDeprecated(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.EnumValueOptions.extensionsBinary,proto.google.protobuf.EnumValueOptions.prototype.getExtension,proto.google.protobuf.EnumValueOptions.prototype.setExtension)}}return e},proto.google.protobuf.EnumValueOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.EnumValueOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeBool(1,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.EnumValueOptions.extensionsBinary,proto.google.protobuf.EnumValueOptions.prototype.getExtension)},proto.google.protobuf.EnumValueOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.EnumValueOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.EnumValueOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.EnumValueOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.EnumValueOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.EnumValueOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.EnumValueOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.EnumValueOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.ServiceOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.ServiceOptions.prototype.toObject=function(e){return proto.google.protobuf.ServiceOptions.toObject(e,this)},proto.google.protobuf.ServiceOptions.toObject=function(e,r){var o={deprecated:t.Message.getBooleanFieldWithDefault(r,33,!1),uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,o,proto.google.protobuf.ServiceOptions.extensions,proto.google.protobuf.ServiceOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.ServiceOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.ServiceOptions;return proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.ServiceOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 33:var o=r.readBool();e.setDeprecated(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.ServiceOptions.extensionsBinary,proto.google.protobuf.ServiceOptions.prototype.getExtension,proto.google.protobuf.ServiceOptions.prototype.setExtension)}}return e},proto.google.protobuf.ServiceOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.ServiceOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.ServiceOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,33))&&r.writeBool(33,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.ServiceOptions.extensionsBinary,proto.google.protobuf.ServiceOptions.prototype.getExtension)},proto.google.protobuf.ServiceOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,33,!1)},proto.google.protobuf.ServiceOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,33,e)},proto.google.protobuf.ServiceOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,33,void 0)},proto.google.protobuf.ServiceOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,33)},proto.google.protobuf.ServiceOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.ServiceOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.ServiceOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.ServiceOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.MethodOptions.repeatedFields_=[999],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.MethodOptions.prototype.toObject=function(e){return proto.google.protobuf.MethodOptions.toObject(e,this)},proto.google.protobuf.MethodOptions.toObject=function(e,r){var o={deprecated:t.Message.getBooleanFieldWithDefault(r,33,!1),idempotencyLevel:t.Message.getFieldWithDefault(r,34,0),uninterpretedOptionList:t.Message.toObjectList(r.getUninterpretedOptionList(),proto.google.protobuf.UninterpretedOption.toObject,e)};return t.Message.toObjectExtension(r,o,proto.google.protobuf.MethodOptions.extensions,proto.google.protobuf.MethodOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.MethodOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.MethodOptions;return proto.google.protobuf.MethodOptions.deserializeBinaryFromReader(o,r)},proto.google.protobuf.MethodOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();){switch(r.getFieldNumber()){case 33:var o=r.readBool();e.setDeprecated(o);break;case 34:o=r.readEnum();e.setIdempotencyLevel(o);break;case 999:o=new proto.google.protobuf.UninterpretedOption;r.readMessage(o,proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader),e.addUninterpretedOption(o);break;default:t.Message.readBinaryExtension(e,r,proto.google.protobuf.MethodOptions.extensionsBinary,proto.google.protobuf.MethodOptions.prototype.getExtension,proto.google.protobuf.MethodOptions.prototype.setExtension)}}return e},proto.google.protobuf.MethodOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.MethodOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.MethodOptions.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,33))&&r.writeBool(33,o),null!=(o=t.Message.getField(e,34))&&r.writeEnum(34,o),(o=e.getUninterpretedOptionList()).length>0&&r.writeRepeatedMessage(999,o,proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter),t.Message.serializeBinaryExtensions(e,r,proto.google.protobuf.MethodOptions.extensionsBinary,proto.google.protobuf.MethodOptions.prototype.getExtension)},proto.google.protobuf.MethodOptions.IdempotencyLevel={IDEMPOTENCY_UNKNOWN:0,NO_SIDE_EFFECTS:1,IDEMPOTENT:2},proto.google.protobuf.MethodOptions.prototype.getDeprecated=function(){return t.Message.getBooleanFieldWithDefault(this,33,!1)},proto.google.protobuf.MethodOptions.prototype.setDeprecated=function(e){return t.Message.setField(this,33,e)},proto.google.protobuf.MethodOptions.prototype.clearDeprecated=function(){return t.Message.setField(this,33,void 0)},proto.google.protobuf.MethodOptions.prototype.hasDeprecated=function(){return null!=t.Message.getField(this,33)},proto.google.protobuf.MethodOptions.prototype.getIdempotencyLevel=function(){return t.Message.getFieldWithDefault(this,34,0)},proto.google.protobuf.MethodOptions.prototype.setIdempotencyLevel=function(e){return t.Message.setField(this,34,e)},proto.google.protobuf.MethodOptions.prototype.clearIdempotencyLevel=function(){return t.Message.setField(this,34,void 0)},proto.google.protobuf.MethodOptions.prototype.hasIdempotencyLevel=function(){return null!=t.Message.getField(this,34)},proto.google.protobuf.MethodOptions.prototype.getUninterpretedOptionList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption,999)},proto.google.protobuf.MethodOptions.prototype.setUninterpretedOptionList=function(e){return t.Message.setRepeatedWrapperField(this,999,e)},proto.google.protobuf.MethodOptions.prototype.addUninterpretedOption=function(e,r){return t.Message.addToRepeatedWrapperField(this,999,e,proto.google.protobuf.UninterpretedOption,r)},proto.google.protobuf.MethodOptions.prototype.clearUninterpretedOptionList=function(){return this.setUninterpretedOptionList([])},proto.google.protobuf.UninterpretedOption.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UninterpretedOption.prototype.toObject=function(e){return proto.google.protobuf.UninterpretedOption.toObject(e,this)},proto.google.protobuf.UninterpretedOption.toObject=function(e,r){var o,i={nameList:t.Message.toObjectList(r.getNameList(),proto.google.protobuf.UninterpretedOption.NamePart.toObject,e),identifierValue:null==(o=t.Message.getField(r,3))?void 0:o,positiveIntValue:null==(o=t.Message.getField(r,4))?void 0:o,negativeIntValue:null==(o=t.Message.getField(r,5))?void 0:o,doubleValue:null==(o=t.Message.getOptionalFloatingPointField(r,6))?void 0:o,stringValue:r.getStringValue_asB64(),aggregateValue:null==(o=t.Message.getField(r,8))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.UninterpretedOption.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.UninterpretedOption;return proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader(o,r)},proto.google.protobuf.UninterpretedOption.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.google.protobuf.UninterpretedOption.NamePart;t.readMessage(r,proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader),e.addName(r);break;case 3:r=t.readString();e.setIdentifierValue(r);break;case 4:r=t.readUint64();e.setPositiveIntValue(r);break;case 5:r=t.readInt64();e.setNegativeIntValue(r);break;case 6:r=t.readDouble();e.setDoubleValue(r);break;case 7:r=t.readBytes();e.setStringValue(r);break;case 8:r=t.readString();e.setAggregateValue(r);break;default:t.skipField()}}return e},proto.google.protobuf.UninterpretedOption.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.UninterpretedOption.serializeBinaryToWriter=function(e,r){var o=void 0;(o=e.getNameList()).length>0&&r.writeRepeatedMessage(2,o,proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter),null!=(o=t.Message.getField(e,3))&&r.writeString(3,o),null!=(o=t.Message.getField(e,4))&&r.writeUint64(4,o),null!=(o=t.Message.getField(e,5))&&r.writeInt64(5,o),null!=(o=t.Message.getField(e,6))&&r.writeDouble(6,o),null!=(o=t.Message.getField(e,7))&&r.writeBytes(7,o),null!=(o=t.Message.getField(e,8))&&r.writeString(8,o)},t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UninterpretedOption.NamePart.prototype.toObject=function(e){return proto.google.protobuf.UninterpretedOption.NamePart.toObject(e,this)},proto.google.protobuf.UninterpretedOption.NamePart.toObject=function(e,r){var o,i={namePart:null==(o=t.Message.getField(r,1))?void 0:o,isExtension:null==(o=t.Message.getBooleanField(r,2))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.UninterpretedOption.NamePart;return proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader(o,r)},proto.google.protobuf.UninterpretedOption.NamePart.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setNamePart(r);break;case 2:r=t.readBool();e.setIsExtension(r);break;default:t.skipField()}}return e},proto.google.protobuf.UninterpretedOption.NamePart.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.UninterpretedOption.NamePart.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBool(2,o)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.getNamePart=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.UninterpretedOption.NamePart.prototype.setNamePart=function(e){return t.Message.setField(this,1,e)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.clearNamePart=function(){return t.Message.setField(this,1,void 0)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.hasNamePart=function(){return null!=t.Message.getField(this,1)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.getIsExtension=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.setIsExtension=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.clearIsExtension=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.UninterpretedOption.NamePart.prototype.hasIsExtension=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.UninterpretedOption.prototype.getNameList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.UninterpretedOption.NamePart,2)},proto.google.protobuf.UninterpretedOption.prototype.setNameList=function(e){return t.Message.setRepeatedWrapperField(this,2,e)},proto.google.protobuf.UninterpretedOption.prototype.addName=function(e,r){return t.Message.addToRepeatedWrapperField(this,2,e,proto.google.protobuf.UninterpretedOption.NamePart,r)},proto.google.protobuf.UninterpretedOption.prototype.clearNameList=function(){return this.setNameList([])},proto.google.protobuf.UninterpretedOption.prototype.getIdentifierValue=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.UninterpretedOption.prototype.setIdentifierValue=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.UninterpretedOption.prototype.clearIdentifierValue=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasIdentifierValue=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.UninterpretedOption.prototype.getPositiveIntValue=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.google.protobuf.UninterpretedOption.prototype.setPositiveIntValue=function(e){return t.Message.setField(this,4,e)},proto.google.protobuf.UninterpretedOption.prototype.clearPositiveIntValue=function(){return t.Message.setField(this,4,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasPositiveIntValue=function(){return null!=t.Message.getField(this,4)},proto.google.protobuf.UninterpretedOption.prototype.getNegativeIntValue=function(){return t.Message.getFieldWithDefault(this,5,0)},proto.google.protobuf.UninterpretedOption.prototype.setNegativeIntValue=function(e){return t.Message.setField(this,5,e)},proto.google.protobuf.UninterpretedOption.prototype.clearNegativeIntValue=function(){return t.Message.setField(this,5,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasNegativeIntValue=function(){return null!=t.Message.getField(this,5)},proto.google.protobuf.UninterpretedOption.prototype.getDoubleValue=function(){return t.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.google.protobuf.UninterpretedOption.prototype.setDoubleValue=function(e){return t.Message.setField(this,6,e)},proto.google.protobuf.UninterpretedOption.prototype.clearDoubleValue=function(){return t.Message.setField(this,6,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasDoubleValue=function(){return null!=t.Message.getField(this,6)},proto.google.protobuf.UninterpretedOption.prototype.getStringValue=function(){return t.Message.getFieldWithDefault(this,7,"")},proto.google.protobuf.UninterpretedOption.prototype.getStringValue_asB64=function(){return t.Message.bytesAsB64(this.getStringValue())},proto.google.protobuf.UninterpretedOption.prototype.getStringValue_asU8=function(){return t.Message.bytesAsU8(this.getStringValue())},proto.google.protobuf.UninterpretedOption.prototype.setStringValue=function(e){return t.Message.setField(this,7,e)},proto.google.protobuf.UninterpretedOption.prototype.clearStringValue=function(){return t.Message.setField(this,7,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasStringValue=function(){return null!=t.Message.getField(this,7)},proto.google.protobuf.UninterpretedOption.prototype.getAggregateValue=function(){return t.Message.getFieldWithDefault(this,8,"")},proto.google.protobuf.UninterpretedOption.prototype.setAggregateValue=function(e){return t.Message.setField(this,8,e)},proto.google.protobuf.UninterpretedOption.prototype.clearAggregateValue=function(){return t.Message.setField(this,8,void 0)},proto.google.protobuf.UninterpretedOption.prototype.hasAggregateValue=function(){return null!=t.Message.getField(this,8)},proto.google.protobuf.SourceCodeInfo.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.SourceCodeInfo.prototype.toObject=function(e){return proto.google.protobuf.SourceCodeInfo.toObject(e,this)},proto.google.protobuf.SourceCodeInfo.toObject=function(e,r){var o={locationList:t.Message.toObjectList(r.getLocationList(),proto.google.protobuf.SourceCodeInfo.Location.toObject,e)};return e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.SourceCodeInfo.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.SourceCodeInfo;return proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader(o,r)},proto.google.protobuf.SourceCodeInfo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new proto.google.protobuf.SourceCodeInfo.Location;t.readMessage(r,proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader),e.addLocation(r)}else t.skipField()}return e},proto.google.protobuf.SourceCodeInfo.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.SourceCodeInfo.serializeBinaryToWriter=function(e,t){var r;(r=e.getLocationList()).length>0&&t.writeRepeatedMessage(1,r,proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter)},proto.google.protobuf.SourceCodeInfo.Location.repeatedFields_=[1,2,6],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.SourceCodeInfo.Location.prototype.toObject=function(e){return proto.google.protobuf.SourceCodeInfo.Location.toObject(e,this)},proto.google.protobuf.SourceCodeInfo.Location.toObject=function(e,r){var o,i={pathList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o,spanList:null==(o=t.Message.getRepeatedField(r,2))?void 0:o,leadingComments:null==(o=t.Message.getField(r,3))?void 0:o,trailingComments:null==(o=t.Message.getField(r,4))?void 0:o,leadingDetachedCommentsList:null==(o=t.Message.getRepeatedField(r,6))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.SourceCodeInfo.Location.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.SourceCodeInfo.Location;return proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader(o,r)},proto.google.protobuf.SourceCodeInfo.Location.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:for(var r=t.isDelimited()?t.readPackedInt32():[t.readInt32()],o=0;o<r.length;o++)e.addPath(r[o]);break;case 2:for(r=t.isDelimited()?t.readPackedInt32():[t.readInt32()],o=0;o<r.length;o++)e.addSpan(r[o]);break;case 3:var i=t.readString();e.setLeadingComments(i);break;case 4:i=t.readString();e.setTrailingComments(i);break;case 6:i=t.readString();e.addLeadingDetachedComments(i);break;default:t.skipField()}}return e},proto.google.protobuf.SourceCodeInfo.Location.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.SourceCodeInfo.Location.serializeBinaryToWriter=function(e,r){var o=void 0;(o=e.getPathList()).length>0&&r.writePackedInt32(1,o),(o=e.getSpanList()).length>0&&r.writePackedInt32(2,o),null!=(o=t.Message.getField(e,3))&&r.writeString(3,o),null!=(o=t.Message.getField(e,4))&&r.writeString(4,o),(o=e.getLeadingDetachedCommentsList()).length>0&&r.writeRepeatedString(6,o)},proto.google.protobuf.SourceCodeInfo.Location.prototype.getPathList=function(){return t.Message.getRepeatedField(this,1)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setPathList=function(e){return t.Message.setField(this,1,e||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addPath=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearPathList=function(){return this.setPathList([])},proto.google.protobuf.SourceCodeInfo.Location.prototype.getSpanList=function(){return t.Message.getRepeatedField(this,2)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setSpanList=function(e){return t.Message.setField(this,2,e||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addSpan=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearSpanList=function(){return this.setSpanList([])},proto.google.protobuf.SourceCodeInfo.Location.prototype.getLeadingComments=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.google.protobuf.SourceCodeInfo.Location.prototype.setLeadingComments=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearLeadingComments=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.SourceCodeInfo.Location.prototype.hasLeadingComments=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.SourceCodeInfo.Location.prototype.getTrailingComments=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.google.protobuf.SourceCodeInfo.Location.prototype.setTrailingComments=function(e){return t.Message.setField(this,4,e)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearTrailingComments=function(){return t.Message.setField(this,4,void 0)},proto.google.protobuf.SourceCodeInfo.Location.prototype.hasTrailingComments=function(){return null!=t.Message.getField(this,4)},proto.google.protobuf.SourceCodeInfo.Location.prototype.getLeadingDetachedCommentsList=function(){return t.Message.getRepeatedField(this,6)},proto.google.protobuf.SourceCodeInfo.Location.prototype.setLeadingDetachedCommentsList=function(e){return t.Message.setField(this,6,e||[])},proto.google.protobuf.SourceCodeInfo.Location.prototype.addLeadingDetachedComments=function(e,r){return t.Message.addToRepeatedField(this,6,e,r)},proto.google.protobuf.SourceCodeInfo.Location.prototype.clearLeadingDetachedCommentsList=function(){return this.setLeadingDetachedCommentsList([])},proto.google.protobuf.SourceCodeInfo.prototype.getLocationList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.SourceCodeInfo.Location,1)},proto.google.protobuf.SourceCodeInfo.prototype.setLocationList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.google.protobuf.SourceCodeInfo.prototype.addLocation=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.google.protobuf.SourceCodeInfo.Location,r)},proto.google.protobuf.SourceCodeInfo.prototype.clearLocationList=function(){return this.setLocationList([])},proto.google.protobuf.GeneratedCodeInfo.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.GeneratedCodeInfo.prototype.toObject=function(e){return proto.google.protobuf.GeneratedCodeInfo.toObject(e,this)},proto.google.protobuf.GeneratedCodeInfo.toObject=function(e,r){var o={annotationList:t.Message.toObjectList(r.getAnnotationList(),proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject,e)};return e&&(o.$jspbMessageInstance=r),o}),proto.google.protobuf.GeneratedCodeInfo.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.GeneratedCodeInfo;return proto.google.protobuf.GeneratedCodeInfo.deserializeBinaryFromReader(o,r)},proto.google.protobuf.GeneratedCodeInfo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var r=new proto.google.protobuf.GeneratedCodeInfo.Annotation;t.readMessage(r,proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader),e.addAnnotation(r)}else t.skipField()}return e},proto.google.protobuf.GeneratedCodeInfo.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.GeneratedCodeInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.GeneratedCodeInfo.serializeBinaryToWriter=function(e,t){var r;(r=e.getAnnotationList()).length>0&&t.writeRepeatedMessage(1,r,proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter)},proto.google.protobuf.GeneratedCodeInfo.Annotation.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.toObject=function(e){return proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject(e,this)},proto.google.protobuf.GeneratedCodeInfo.Annotation.toObject=function(e,r){var o,i={pathList:null==(o=t.Message.getRepeatedField(r,1))?void 0:o,sourceFile:null==(o=t.Message.getField(r,2))?void 0:o,begin:null==(o=t.Message.getField(r,3))?void 0:o,end:null==(o=t.Message.getField(r,4))?void 0:o};return e&&(i.$jspbMessageInstance=r),i}),proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinary=function(e){var r=new t.BinaryReader(e),o=new proto.google.protobuf.GeneratedCodeInfo.Annotation;return proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader(o,r)},proto.google.protobuf.GeneratedCodeInfo.Annotation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:for(var r=t.isDelimited()?t.readPackedInt32():[t.readInt32()],o=0;o<r.length;o++)e.addPath(r[o]);break;case 2:var i=t.readString();e.setSourceFile(i);break;case 3:i=t.readInt32();e.setBegin(i);break;case 4:i=t.readInt32();e.setEnd(i);break;default:t.skipField()}}return e},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.GeneratedCodeInfo.Annotation.serializeBinaryToWriter=function(e,r){var o=void 0;(o=e.getPathList()).length>0&&r.writePackedInt32(1,o),null!=(o=t.Message.getField(e,2))&&r.writeString(2,o),null!=(o=t.Message.getField(e,3))&&r.writeInt32(3,o),null!=(o=t.Message.getField(e,4))&&r.writeInt32(4,o)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getPathList=function(){return t.Message.getRepeatedField(this,1)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setPathList=function(e){return t.Message.setField(this,1,e||[])},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.addPath=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearPathList=function(){return this.setPathList([])},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getSourceFile=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setSourceFile=function(e){return t.Message.setField(this,2,e)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearSourceFile=function(){return t.Message.setField(this,2,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasSourceFile=function(){return null!=t.Message.getField(this,2)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getBegin=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setBegin=function(e){return t.Message.setField(this,3,e)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearBegin=function(){return t.Message.setField(this,3,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasBegin=function(){return null!=t.Message.getField(this,3)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.getEnd=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.setEnd=function(e){return t.Message.setField(this,4,e)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.clearEnd=function(){return t.Message.setField(this,4,void 0)},proto.google.protobuf.GeneratedCodeInfo.Annotation.prototype.hasEnd=function(){return null!=t.Message.getField(this,4)},proto.google.protobuf.GeneratedCodeInfo.prototype.getAnnotationList=function(){return t.Message.getRepeatedWrapperField(this,proto.google.protobuf.GeneratedCodeInfo.Annotation,1)},proto.google.protobuf.GeneratedCodeInfo.prototype.setAnnotationList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.google.protobuf.GeneratedCodeInfo.prototype.addAnnotation=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.google.protobuf.GeneratedCodeInfo.Annotation,r)},proto.google.protobuf.GeneratedCodeInfo.prototype.clearAnnotationList=function(){return this.setAnnotationList([])},r.object.extend(e,proto.google.protobuf)}(descriptor_pb),function(e){var t=googleProtobuf,r=t,o={},i=descriptor_pb;r.object.extend(o,i),r.exportSymbol("RetrySemantic",null,o),r.exportSymbol("retrySemantic",null,o),o.RetrySemantic={NOTRETRYABLE:0,RETRYABLE:1},o.retrySemantic=new t.ExtensionFieldInfo(5e4,{retrySemantic:0},null,null,0),i.MessageOptions.extensionsBinary[5e4]=new t.ExtensionFieldBinaryInfo(o.retrySemantic,t.BinaryReader.prototype.readEnum,t.BinaryWriter.prototype.writeEnum,void 0,void 0,!1),i.MessageOptions.extensions[5e4]=o.retrySemantic,r.object.extend(e,o)}(extensions_pb),function(e){var t=googleProtobuf,r=t,o={};r.object.extend(o,extensions_pb),r.exportSymbol("_Discontinuity",null,o),r.exportSymbol("_Empty",null,o),r.exportSymbol("_Heartbeat",null,o),r.exportSymbol("_PublishRequest",null,o),r.exportSymbol("_SubscriptionItem",null,o),r.exportSymbol("_SubscriptionItem.KindCase",null,o),r.exportSymbol("_SubscriptionRequest",null,o),r.exportSymbol("_TopicItem",null,o),r.exportSymbol("_TopicValue",null,o),r.exportSymbol("_TopicValue.KindCase",null,o),o._Empty=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Empty,t.Message),r.DEBUG&&!COMPILED&&(o._Empty.displayName="proto._Empty"),o._PublishRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._PublishRequest,t.Message),r.DEBUG&&!COMPILED&&(o._PublishRequest.displayName="proto._PublishRequest"),o._SubscriptionRequest=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._SubscriptionRequest,t.Message),r.DEBUG&&!COMPILED&&(o._SubscriptionRequest.displayName="proto._SubscriptionRequest"),o._SubscriptionItem=function(e){t.Message.initialize(this,e,0,-1,null,o._SubscriptionItem.oneofGroups_)},r.inherits(o._SubscriptionItem,t.Message),r.DEBUG&&!COMPILED&&(o._SubscriptionItem.displayName="proto._SubscriptionItem"),o._TopicItem=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._TopicItem,t.Message),r.DEBUG&&!COMPILED&&(o._TopicItem.displayName="proto._TopicItem"),o._TopicValue=function(e){t.Message.initialize(this,e,0,-1,null,o._TopicValue.oneofGroups_)},r.inherits(o._TopicValue,t.Message),r.DEBUG&&!COMPILED&&(o._TopicValue.displayName="proto._TopicValue"),o._Discontinuity=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Discontinuity,t.Message),r.DEBUG&&!COMPILED&&(o._Discontinuity.displayName="proto._Discontinuity"),o._Heartbeat=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(o._Heartbeat,t.Message),r.DEBUG&&!COMPILED&&(o._Heartbeat.displayName="proto._Heartbeat"),t.Message.GENERATE_TO_OBJECT&&(o._Empty.prototype.toObject=function(e){return o._Empty.toObject(e,this)},o._Empty.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._Empty.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Empty;return o._Empty.deserializeBinaryFromReader(i,r)},o._Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._Empty.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Empty.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(o._PublishRequest.prototype.toObject=function(e){return o._PublishRequest.toObject(e,this)},o._PublishRequest.toObject=function(e,r){var i,s={cacheName:t.Message.getFieldWithDefault(r,1,""),topic:t.Message.getFieldWithDefault(r,2,""),value:(i=r.getValue())&&o._TopicValue.toObject(e,i)};return e&&(s.$jspbMessageInstance=r),s}),o._PublishRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._PublishRequest;return o._PublishRequest.deserializeBinaryFromReader(i,r)},o._PublishRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setTopic(r);break;case 3:r=new o._TopicValue;t.readMessage(r,o._TopicValue.deserializeBinaryFromReader),e.setValue(r);break;default:t.skipField()}}return e},o._PublishRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._PublishRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._PublishRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getTopic()).length>0&&t.writeString(2,r),null!=(r=e.getValue())&&t.writeMessage(3,r,o._TopicValue.serializeBinaryToWriter)},o._PublishRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._PublishRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._PublishRequest.prototype.getTopic=function(){return t.Message.getFieldWithDefault(this,2,"")},o._PublishRequest.prototype.setTopic=function(e){return t.Message.setProto3StringField(this,2,e)},o._PublishRequest.prototype.getValue=function(){return t.Message.getWrapperField(this,o._TopicValue,3)},o._PublishRequest.prototype.setValue=function(e){return t.Message.setWrapperField(this,3,e)},o._PublishRequest.prototype.clearValue=function(){return this.setValue(void 0)},o._PublishRequest.prototype.hasValue=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._SubscriptionRequest.prototype.toObject=function(e){return o._SubscriptionRequest.toObject(e,this)},o._SubscriptionRequest.toObject=function(e,r){var o={cacheName:t.Message.getFieldWithDefault(r,1,""),topic:t.Message.getFieldWithDefault(r,2,""),resumeAtTopicSequenceNumber:t.Message.getFieldWithDefault(r,3,0)};return e&&(o.$jspbMessageInstance=r),o}),o._SubscriptionRequest.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SubscriptionRequest;return o._SubscriptionRequest.deserializeBinaryFromReader(i,r)},o._SubscriptionRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheName(r);break;case 2:r=t.readString();e.setTopic(r);break;case 3:r=t.readUint64();e.setResumeAtTopicSequenceNumber(r);break;default:t.skipField()}}return e},o._SubscriptionRequest.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SubscriptionRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SubscriptionRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCacheName()).length>0&&t.writeString(1,r),(r=e.getTopic()).length>0&&t.writeString(2,r),0!==(r=e.getResumeAtTopicSequenceNumber())&&t.writeUint64(3,r)},o._SubscriptionRequest.prototype.getCacheName=function(){return t.Message.getFieldWithDefault(this,1,"")},o._SubscriptionRequest.prototype.setCacheName=function(e){return t.Message.setProto3StringField(this,1,e)},o._SubscriptionRequest.prototype.getTopic=function(){return t.Message.getFieldWithDefault(this,2,"")},o._SubscriptionRequest.prototype.setTopic=function(e){return t.Message.setProto3StringField(this,2,e)},o._SubscriptionRequest.prototype.getResumeAtTopicSequenceNumber=function(){return t.Message.getFieldWithDefault(this,3,0)},o._SubscriptionRequest.prototype.setResumeAtTopicSequenceNumber=function(e){return t.Message.setProto3IntField(this,3,e)},o._SubscriptionItem.oneofGroups_=[[1,2,3]],o._SubscriptionItem.KindCase={KIND_NOT_SET:0,ITEM:1,DISCONTINUITY:2,HEARTBEAT:3},o._SubscriptionItem.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o._SubscriptionItem.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._SubscriptionItem.prototype.toObject=function(e){return o._SubscriptionItem.toObject(e,this)},o._SubscriptionItem.toObject=function(e,t){var r,i={item:(r=t.getItem())&&o._TopicItem.toObject(e,r),discontinuity:(r=t.getDiscontinuity())&&o._Discontinuity.toObject(e,r),heartbeat:(r=t.getHeartbeat())&&o._Heartbeat.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),o._SubscriptionItem.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._SubscriptionItem;return o._SubscriptionItem.deserializeBinaryFromReader(i,r)},o._SubscriptionItem.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new o._TopicItem;t.readMessage(r,o._TopicItem.deserializeBinaryFromReader),e.setItem(r);break;case 2:r=new o._Discontinuity;t.readMessage(r,o._Discontinuity.deserializeBinaryFromReader),e.setDiscontinuity(r);break;case 3:r=new o._Heartbeat;t.readMessage(r,o._Heartbeat.deserializeBinaryFromReader),e.setHeartbeat(r);break;default:t.skipField()}}return e},o._SubscriptionItem.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._SubscriptionItem.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._SubscriptionItem.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getItem())&&t.writeMessage(1,r,o._TopicItem.serializeBinaryToWriter),null!=(r=e.getDiscontinuity())&&t.writeMessage(2,r,o._Discontinuity.serializeBinaryToWriter),null!=(r=e.getHeartbeat())&&t.writeMessage(3,r,o._Heartbeat.serializeBinaryToWriter)},o._SubscriptionItem.prototype.getItem=function(){return t.Message.getWrapperField(this,o._TopicItem,1)},o._SubscriptionItem.prototype.setItem=function(e){return t.Message.setOneofWrapperField(this,1,o._SubscriptionItem.oneofGroups_[0],e)},o._SubscriptionItem.prototype.clearItem=function(){return this.setItem(void 0)},o._SubscriptionItem.prototype.hasItem=function(){return null!=t.Message.getField(this,1)},o._SubscriptionItem.prototype.getDiscontinuity=function(){return t.Message.getWrapperField(this,o._Discontinuity,2)},o._SubscriptionItem.prototype.setDiscontinuity=function(e){return t.Message.setOneofWrapperField(this,2,o._SubscriptionItem.oneofGroups_[0],e)},o._SubscriptionItem.prototype.clearDiscontinuity=function(){return this.setDiscontinuity(void 0)},o._SubscriptionItem.prototype.hasDiscontinuity=function(){return null!=t.Message.getField(this,2)},o._SubscriptionItem.prototype.getHeartbeat=function(){return t.Message.getWrapperField(this,o._Heartbeat,3)},o._SubscriptionItem.prototype.setHeartbeat=function(e){return t.Message.setOneofWrapperField(this,3,o._SubscriptionItem.oneofGroups_[0],e)},o._SubscriptionItem.prototype.clearHeartbeat=function(){return this.setHeartbeat(void 0)},o._SubscriptionItem.prototype.hasHeartbeat=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(o._TopicItem.prototype.toObject=function(e){return o._TopicItem.toObject(e,this)},o._TopicItem.toObject=function(e,r){var i,s={topicSequenceNumber:t.Message.getFieldWithDefault(r,1,0),value:(i=r.getValue())&&o._TopicValue.toObject(e,i),publisherId:t.Message.getFieldWithDefault(r,3,"")};return e&&(s.$jspbMessageInstance=r),s}),o._TopicItem.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._TopicItem;return o._TopicItem.deserializeBinaryFromReader(i,r)},o._TopicItem.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint64();e.setTopicSequenceNumber(r);break;case 2:r=new o._TopicValue;t.readMessage(r,o._TopicValue.deserializeBinaryFromReader),e.setValue(r);break;case 3:r=t.readString();e.setPublisherId(r);break;default:t.skipField()}}return e},o._TopicItem.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._TopicItem.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._TopicItem.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getTopicSequenceNumber())&&t.writeUint64(1,r),null!=(r=e.getValue())&&t.writeMessage(2,r,o._TopicValue.serializeBinaryToWriter),(r=e.getPublisherId()).length>0&&t.writeString(3,r)},o._TopicItem.prototype.getTopicSequenceNumber=function(){return t.Message.getFieldWithDefault(this,1,0)},o._TopicItem.prototype.setTopicSequenceNumber=function(e){return t.Message.setProto3IntField(this,1,e)},o._TopicItem.prototype.getValue=function(){return t.Message.getWrapperField(this,o._TopicValue,2)},o._TopicItem.prototype.setValue=function(e){return t.Message.setWrapperField(this,2,e)},o._TopicItem.prototype.clearValue=function(){return this.setValue(void 0)},o._TopicItem.prototype.hasValue=function(){return null!=t.Message.getField(this,2)},o._TopicItem.prototype.getPublisherId=function(){return t.Message.getFieldWithDefault(this,3,"")},o._TopicItem.prototype.setPublisherId=function(e){return t.Message.setProto3StringField(this,3,e)},o._TopicValue.oneofGroups_=[[1,2]],o._TopicValue.KindCase={KIND_NOT_SET:0,TEXT:1,BINARY:2},o._TopicValue.prototype.getKindCase=function(){return t.Message.computeOneofCase(this,o._TopicValue.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(o._TopicValue.prototype.toObject=function(e){return o._TopicValue.toObject(e,this)},o._TopicValue.toObject=function(e,r){var o={text:t.Message.getFieldWithDefault(r,1,""),binary:r.getBinary_asB64()};return e&&(o.$jspbMessageInstance=r),o}),o._TopicValue.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._TopicValue;return o._TopicValue.deserializeBinaryFromReader(i,r)},o._TopicValue.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setText(r);break;case 2:r=t.readBytes();e.setBinary(r);break;default:t.skipField()}}return e},o._TopicValue.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._TopicValue.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._TopicValue.serializeBinaryToWriter=function(e,r){var o=void 0;null!=(o=t.Message.getField(e,1))&&r.writeString(1,o),null!=(o=t.Message.getField(e,2))&&r.writeBytes(2,o)},o._TopicValue.prototype.getText=function(){return t.Message.getFieldWithDefault(this,1,"")},o._TopicValue.prototype.setText=function(e){return t.Message.setOneofField(this,1,o._TopicValue.oneofGroups_[0],e)},o._TopicValue.prototype.clearText=function(){return t.Message.setOneofField(this,1,o._TopicValue.oneofGroups_[0],void 0)},o._TopicValue.prototype.hasText=function(){return null!=t.Message.getField(this,1)},o._TopicValue.prototype.getBinary=function(){return t.Message.getFieldWithDefault(this,2,"")},o._TopicValue.prototype.getBinary_asB64=function(){return t.Message.bytesAsB64(this.getBinary())},o._TopicValue.prototype.getBinary_asU8=function(){return t.Message.bytesAsU8(this.getBinary())},o._TopicValue.prototype.setBinary=function(e){return t.Message.setOneofField(this,2,o._TopicValue.oneofGroups_[0],e)},o._TopicValue.prototype.clearBinary=function(){return t.Message.setOneofField(this,2,o._TopicValue.oneofGroups_[0],void 0)},o._TopicValue.prototype.hasBinary=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(o._Discontinuity.prototype.toObject=function(e){return o._Discontinuity.toObject(e,this)},o._Discontinuity.toObject=function(e,r){var o={lastTopicSequence:t.Message.getFieldWithDefault(r,1,0),newTopicSequence:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),o._Discontinuity.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Discontinuity;return o._Discontinuity.deserializeBinaryFromReader(i,r)},o._Discontinuity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint64();e.setLastTopicSequence(r);break;case 2:r=t.readUint64();e.setNewTopicSequence(r);break;default:t.skipField()}}return e},o._Discontinuity.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Discontinuity.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Discontinuity.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getLastTopicSequence())&&t.writeUint64(1,r),0!==(r=e.getNewTopicSequence())&&t.writeUint64(2,r)},o._Discontinuity.prototype.getLastTopicSequence=function(){return t.Message.getFieldWithDefault(this,1,0)},o._Discontinuity.prototype.setLastTopicSequence=function(e){return t.Message.setProto3IntField(this,1,e)},o._Discontinuity.prototype.getNewTopicSequence=function(){return t.Message.getFieldWithDefault(this,2,0)},o._Discontinuity.prototype.setNewTopicSequence=function(e){return t.Message.setProto3IntField(this,2,e)},t.Message.GENERATE_TO_OBJECT&&(o._Heartbeat.prototype.toObject=function(e){return o._Heartbeat.toObject(e,this)},o._Heartbeat.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),o._Heartbeat.deserializeBinary=function(e){var r=new t.BinaryReader(e),i=new o._Heartbeat;return o._Heartbeat.deserializeBinaryFromReader(i,r)},o._Heartbeat.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},o._Heartbeat.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return o._Heartbeat.serializeBinaryToWriter(this,e),e.getResultBuffer()},o._Heartbeat.serializeBinaryToWriter=function(e,t){},r.object.extend(e,o)}(cachepubsub_pb$1);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(CachepubsubServiceClientPb,"__esModule",{value:!0}),CachepubsubServiceClientPb.PubsubClient=void 0;const grpcWeb=__importStar(grpcWeb$8),cachepubsub_pb=__importStar(cachepubsub_pb$1);class PubsubClient{constructor(e,t,r){this.methodDescriptorPublish=new grpcWeb.MethodDescriptor("/cache_client.pubsub.Pubsub/Publish",grpcWeb.MethodType.UNARY,cachepubsub_pb._PublishRequest,cachepubsub_pb._Empty,(e=>e.serializeBinary()),cachepubsub_pb._Empty.deserializeBinary),this.methodDescriptorSubscribe=new grpcWeb.MethodDescriptor("/cache_client.pubsub.Pubsub/Subscribe",grpcWeb.MethodType.SERVER_STREAMING,cachepubsub_pb._SubscriptionRequest,cachepubsub_pb._SubscriptionItem,(e=>e.serializeBinary()),cachepubsub_pb._SubscriptionItem.deserializeBinary),r||(r={}),t||(t={}),r.format="text",this.client_=new grpcWeb.GrpcWebClientBase(r),this.hostname_=e,this.credentials_=t,this.options_=r}publish(e,t,r){return void 0!==r?this.client_.rpcCall(this.hostname_+"/cache_client.pubsub.Pubsub/Publish",e,t||{},this.methodDescriptorPublish,r):this.client_.unaryCall(this.hostname_+"/cache_client.pubsub.Pubsub/Publish",e,t||{},this.methodDescriptorPublish)}subscribe(e,t){return this.client_.serverStreaming(this.hostname_+"/cache_client.pubsub.Pubsub/Subscribe",e,t||{},this.methodDescriptorSubscribe)}}CachepubsubServiceClientPb.PubsubClient=PubsubClient;var AbstractPubsubClient$1={},subscriptionState={};Object.defineProperty(subscriptionState,"__esModule",{value:!0}),subscriptionState.SubscriptionState=void 0;class SubscriptionState{constructor(){this._unsubscribeFn=()=>{},this._isSubscribed=!1}get resumeAtTopicSequenceNumber(){var e;return(null!==(e=this.lastTopicSequenceNumber)&&void 0!==e?e:-1)+1}setSubscribed(){this._isSubscribed=!0}setUnsubscribed(){this._isSubscribed=!1}get isSubscribed(){return this._isSubscribed}set unsubscribeFn(e){this._unsubscribeFn=e}unsubscribe(){this.isSubscribed&&(this._unsubscribeFn(),this.setUnsubscribed())}}subscriptionState.SubscriptionState=SubscriptionState,Object.defineProperty(AbstractPubsubClient$1,"__esModule",{value:!0}),AbstractPubsubClient$1.AbstractPubsubClient=void 0;const utils_1$1=utils$1,errors_1=errors$1,index_1=requireSrc$1(),subscription_state_1=subscriptionState;class AbstractPubsubClient{getEndpoint(){const e=this.credentialProvider.getCacheEndpoint();return this.logger.debug(`Using cache endpoint: ${e}`),e}async publish(e,t,r){try{(0,utils_1$1.validateCacheName)(e),(0,utils_1$1.validateTopicName)(t)}catch(e){return new index_1.TopicPublish.Error((0,errors_1.normalizeSdkError)(e))}return this.logger.trace("Issuing publish request; topic: %s, message length: %s",(0,utils_1$1.truncateString)(t),r.length),await this.sendPublish(e,t,r)}async subscribe(e,t,r){var o,i;try{(0,utils_1$1.validateCacheName)(e),(0,utils_1$1.validateTopicName)(t)}catch(e){return new index_1.TopicSubscribe.Error((0,errors_1.normalizeSdkError)(e))}this.logger.trace("Issuing subscribe request; topic: %s",(0,utils_1$1.truncateString)(t));const s=null!==(o=r.onItem)&&void 0!==o?o:()=>{},n=null!==(i=r.onError)&&void 0!==i?i:()=>{},a=new subscription_state_1.SubscriptionState,l=new index_1.TopicSubscribe.Subscription(a);return await this.sendSubscribe({cacheName:e,topicName:t,onItem:s,onError:n,subscriptionState:a,subscription:l})}prepareEndCallback(e){return()=>{e.restartedDueToError?this.logger.trace("Stream ended after error but was restarted on topic: %s",e.topicName):e.subscriptionState.isSubscribed?(this.logger.trace("Stream ended on topic: %s; restarting.",e.topicName),this.sendSubscribe(e).then((()=>{})).catch((()=>{}))):this.logger.trace("Stream ended after unsubscribe on topic: %s",e.topicName)}}handleSubscribeError(e,t,r){return e.firstMessage?(this.logger.trace("Received subscription stream error; topic: %s",(0,utils_1$1.truncateString)(e.topicName)),e.resolve(t),void e.subscription.unsubscribe()):r?(this.logger.trace("Server closed stream due to idle activity. Restarting."),this.sendSubscribe(e).then((()=>{})).catch((()=>{})),void(e.restartedDueToError=!0)):t.errorCode()===errors_1.MomentoErrorCode.NOT_FOUND_ERROR?(this.logger.trace("Stream ended due to cache not found error on topic: %s",e.topicName),e.subscription.unsubscribe(),void e.onError(t,e.subscription)):void e.onError(t,e.subscription)}}var hasRequiredPubsubClient;function requirePubsubClient(){if(hasRequiredPubsubClient)return pubsubClient;hasRequiredPubsubClient=1,Object.defineProperty(pubsubClient,"__esModule",{value:!0}),pubsubClient.PubsubClient=void 0;const e=CachepubsubServiceClientPb,t=cachepubsub_pb$1,r=requireSrc$1(),o=grpcWeb$8,i=utils$1,s=requireSrc(),n=requireCacheServiceErrorMapper(),a=AbstractPubsubClient$1,l=webClientUtils,c=clientMetadataProvider;class u extends a.AbstractPubsubClient{constructor(t){super(),this.configuration=t.configuration,this.credentialProvider=t.credentialProvider,this.logger=this.configuration.getLoggerFactory().getLogger(this),this.requestTimeoutMs=u.DEFAULT_REQUEST_TIMEOUT_MS,this.logger.debug(`Creating topic client using endpoint: '${(0,l.getWebCacheEndpoint)(this.credentialProvider)}'`),this.client=new e.PubsubClient((0,l.getWebCacheEndpoint)(t.credentialProvider),null,{}),this.clientMetadataProvider=new c.ClientMetadataProvider({authToken:t.credentialProvider.getAuthToken()})}getEndpoint(){const e=(0,l.getWebCacheEndpoint)(this.credentialProvider);return this.logger.debug(`Using cache endpoint: ${e}`),e}async sendPublish(e,r,o){const i=new t._TopicValue;"string"==typeof o?i.setText(o):i.setBinary((0,l.convertToB64String)(o));const a=new t._PublishRequest;return a.setCacheName(e),a.setTopic(r),a.setValue(i),await new Promise((t=>{this.client.publish(a,{...this.clientMetadataProvider.createClientMetadata(),...(0,l.createCallMetadata)(e,this.requestTimeoutMs)},((e,r)=>{t(r?new s.TopicPublish.Success:new s.TopicPublish.Error((0,n.cacheServiceErrorMapper)(e)))}))}))}sendSubscribe(e){const r=new t._SubscriptionRequest;r.setCacheName(e.cacheName),r.setTopic(e.topicName),r.setResumeAtTopicSequenceNumber(e.subscriptionState.resumeAtTopicSequenceNumber);const o=this.client.subscribe(r,{...this.clientMetadataProvider.createClientMetadata()});return e.subscriptionState.setSubscribed(),e.subscriptionState.unsubscribeFn=()=>{o.cancel()},new Promise((t=>{const r={...e,restartedDueToError:!1,firstMessage:!e.subscriptionState.resumeAtTopicSequenceNumber,resolve:t};o.on("data",this.prepareDataCallback(r)),o.on("error",this.prepareErrorCallback(r)),o.on("end",this.prepareEndCallback(r))}))}prepareDataCallback(e){return t=>{var o,n,a,l,c,u;if(e.firstMessage&&e.resolve(e.subscription),e.firstMessage=!1,null==t?void 0:t.getItem()){e.subscriptionState.lastTopicSequenceNumber=null===(o=t.getItem())||void 0===o?void 0:o.getTopicSequenceNumber();const p=null===(a=null===(n=t.getItem())||void 0===n?void 0:n.getValue())||void 0===a?void 0:a.getText(),d=null===(l=t.getItem())||void 0===l?void 0:l.getPublisherId(),h=null===(u=null===(c=t.getItem())||void 0===c?void 0:c.getValue())||void 0===u?void 0:u.getBinary();p?e.onItem(new r.TopicItem(p,{tokenId:d})):h?e.onItem(new r.TopicItem(h,{tokenId:d})):(this.logger.error("Received subscription item with unknown type; topic: %s",(0,i.truncateString)(e.topicName)),e.onError(new s.TopicSubscribe.Error(new r.UnknownError("Unknown item value type")),e.subscription))}else(null==t?void 0:t.getHeartbeat())?this.logger.trace("Received heartbeat from subscription stream; topic: %s",(0,i.truncateString)(e.topicName)):(null==t?void 0:t.getDiscontinuity())?this.logger.trace("Received discontinuity from subscription stream; topic: %s",(0,i.truncateString)(e.topicName)):(this.logger.error("Received unknown subscription item; topic: %s",(0,i.truncateString)(e.topicName)),e.onError(new s.TopicSubscribe.Error(new r.UnknownError("Unknown item type")),e.subscription))}}prepareErrorCallback(e){return t=>{if(!e.subscriptionState.isSubscribed)return;const r=t.code===o.StatusCode.UNKNOWN&&t.message===u.BROWSER_DISCONNECT||t.code===o.StatusCode.INTERNAL&&t.message===u.RST_STREAM_NO_ERROR_MESSAGE,i=new s.TopicSubscribe.Error((0,n.cacheServiceErrorMapper)(t));this.handleSubscribeError(e,i,r)}}}return pubsubClient.PubsubClient=u,u.DEFAULT_REQUEST_TIMEOUT_MS=5e3,u.RST_STREAM_NO_ERROR_MESSAGE="Received RST_STREAM with code 0",u.BROWSER_DISCONNECT="Http response at 400 or 500 level, http status code: 0",pubsubClient}AbstractPubsubClient$1.AbstractPubsubClient=AbstractPubsubClient;var AbstractTopicClient$1={},hasRequiredTopicClient;Object.defineProperty(AbstractTopicClient$1,"__esModule",{value:!0}),AbstractTopicClient$1.AbstractTopicClient=void 0;class AbstractTopicClient{async publish(e,t,r){return await this.client.publish(e,t,r)}async subscribe(e,t,r){return await this.client.subscribe(e,t,r)}}function requireTopicClient(){if(hasRequiredTopicClient)return topicClient;hasRequiredTopicClient=1,Object.defineProperty(topicClient,"__esModule",{value:!0}),topicClient.TopicClient=void 0;const e=requirePubsubClient(),t=AbstractTopicClient$1;return topicClient.TopicClient=class extends t.AbstractTopicClient{constructor(t){super(),this.logger=t.configuration.getLoggerFactory().getLogger(this),this.logger.debug("Creating Momento TopicClient"),this.client=new e.PubsubClient(t)}},topicClient}AbstractTopicClient$1.AbstractTopicClient=AbstractTopicClient;var previewVectorIndexClient={},vectorIndexDataClient={},hasRequiredVectorIndexDataClient;function requireVectorIndexDataClient(){if(hasRequiredVectorIndexDataClient)return vectorIndexDataClient;hasRequiredVectorIndexDataClient=1,Object.defineProperty(vectorIndexDataClient,"__esModule",{value:!0}),vectorIndexDataClient.VectorIndexDataClient=void 0;const e=VectorindexServiceClientPb,t=vectorindex_pb$1,r=requireSrc$1(),o=requireCacheServiceErrorMapper(),i=utils$1,s=errors$1,n=clientMetadataProvider,a=webClientUtils,l=IVectorIndexClient;class c{constructor(t){this.logger=t.configuration.getLoggerFactory().getLogger(this);const r=(0,a.getWebVectorEndpoint)(t.credentialProvider);this.logger.debug(`Creating data client using endpoint: '${r}`),this.deadlineMillis=t.configuration.getTransportStrategy().getGrpcConfig().getDeadlineMillis(),this.clientMetadataProvider=new n.ClientMetadataProvider({authToken:t.credentialProvider.getAuthToken()}),this.client=new e.VectorIndexClient(r,null,{})}async upsertItemBatch(e,t){let o;try{(0,i.validateIndexName)(e),o=c.buildUpsertItemBatchRequest(e,t)}catch(e){return new r.VectorUpsertItemBatch.Error((0,s.normalizeSdkError)(e))}return await this.sendUpsertItemBatch(o)}static buildUpsertItemBatchRequest(e,r){const o=new t._UpsertItemBatchRequest;return o.setIndexName(e),o.setItemsList(r.map((e=>{const r=new t._Item;r.setId(e.id);const o=new t._Vector;return o.setElementsList(e.vector),r.setVector(o),r.setMetadataList(c.convertItemMetadataToProtobufMetadata(e)),r}))),o}static convertItemMetadataToProtobufMetadata(e){return void 0===e.metadata?[]:Object.entries(e.metadata).map((([e,o])=>{const i=new t._Metadata;if(i.setField(e),"string"==typeof o)i.setStringValue(o);else if("number"==typeof o)Number.isInteger(o)?i.setIntegerValue(o):i.setDoubleValue(o);else if("boolean"==typeof o)i.setBooleanValue(o);else{if(!Array.isArray(o)||!o.every((e=>"string"==typeof e)))throw new r.InvalidArgumentError(`Metadata value for field '${e}' is not a valid type. Value is of type '${typeof o} and is not a string, number, boolean, or array of strings.'`);{const e=new t._Metadata._ListOfStrings;e.setValuesList(o),i.setListOfStringsValue(e)}}return i}))}async sendUpsertItemBatch(e){return await new Promise((t=>{this.client.upsertItemBatch(e,{...this.clientMetadataProvider.createClientMetadata(),...this.createVectorCallMetadata(this.deadlineMillis)},((e,i)=>{t(i?new r.VectorUpsertItemBatch.Success:new r.VectorUpsertItemBatch.Error((0,o.cacheServiceErrorMapper)(e)))}))}))}async deleteItemBatch(e,t){try{(0,i.validateIndexName)(e)}catch(e){return new r.VectorDeleteItemBatch.Error((0,s.normalizeSdkError)(e))}return await this.sendDeleteItemBatch(e,t)}async sendDeleteItemBatch(e,i){const s=new t._DeleteItemBatchRequest;return s.setIndexName(e),s.setIdsList(i),await new Promise((e=>{this.client.deleteItemBatch(s,{...this.clientMetadataProvider.createClientMetadata(),...this.createVectorCallMetadata(this.deadlineMillis)},((t,i)=>{e(i?new r.VectorDeleteItemBatch.Success:new r.VectorDeleteItemBatch.Error((0,o.cacheServiceErrorMapper)(t)))}))}))}async search(e,t,o){try{(0,i.validateIndexName)(e),void 0!==(null==o?void 0:o.topK)&&(0,i.validateTopK)(o.topK)}catch(e){return new r.VectorSearch.Error((0,s.normalizeSdkError)(e))}return await this.sendSearch(e,t,o)}async sendSearch(e,i,s){const n=new t._SearchRequest;n.setIndexName(e);const a=new t._Vector;a.setElementsList(i),n.setQueryVector(a),void 0!==(null==s?void 0:s.topK)&&n.setTopK(s.topK);const c=new t._MetadataRequest;if((null==s?void 0:s.metadataFields)===l.ALL_VECTOR_METADATA){const e=new t._MetadataRequest.All;c.setAll(e)}else{const e=new t._MetadataRequest.Some;e.setFieldsList(void 0===(null==s?void 0:s.metadataFields)?[]:s.metadataFields),c.setSome(e)}return n.setMetadataFields(c),await new Promise((e=>{this.client.search(n,{...this.clientMetadataProvider.createClientMetadata(),...this.createVectorCallMetadata(this.deadlineMillis)},((i,s)=>{e(s?new r.VectorSearch.Success(s.getHitsList().map((o=>({id:o.getId(),distance:o.getDistance(),metadata:o.getMetadataList().reduce(((o,i)=>{var s,n;const a=i.getField();switch(i.getValueCase()){case t._Metadata.ValueCase.STRING_VALUE:o[a]=i.getStringValue();break;case t._Metadata.ValueCase.INTEGER_VALUE:o[a]=i.getIntegerValue();break;case t._Metadata.ValueCase.DOUBLE_VALUE:o[a]=i.getDoubleValue();break;case t._Metadata.ValueCase.BOOLEAN_VALUE:o[a]=i.getBooleanValue();break;case t._Metadata.ValueCase.LIST_OF_STRINGS_VALUE:o[a]=null!==(n=null===(s=i.getListOfStringsValue())||void 0===s?void 0:s.getValuesList())&&void 0!==n?n:[];break;default:e(new r.VectorSearch.Error(new r.UnknownError("Search responded with an unknown result")))}return o}),{})})))):new r.VectorSearch.Error((0,o.cacheServiceErrorMapper)(i)))}))}))}createVectorCallMetadata(e){return{deadline:(Date.now()+e).toString()}}}return vectorIndexDataClient.VectorIndexDataClient=c,vectorIndexDataClient}var vectorIndexControlClient={},hasRequiredVectorIndexControlClient,hasRequiredPreviewVectorIndexClient;function requireVectorIndexControlClient(){if(hasRequiredVectorIndexControlClient)return vectorIndexControlClient;hasRequiredVectorIndexControlClient=1,Object.defineProperty(vectorIndexControlClient,"__esModule",{value:!0}),vectorIndexControlClient.VectorIndexControlClient=void 0;const e=dist,t=requireSrc(),r=grpcWeb$8,o=controlclient_pb$1,i=requireCacheServiceErrorMapper(),s=requireClients(),n=errors$1,a=utils$1,l=webClientUtils,c=clientMetadataProvider,u=requireSrc$1();return vectorIndexControlClient.VectorIndexControlClient=class{constructor(t){this.logger=t.configuration.getLoggerFactory().getLogger(this),this.logger.debug(`Creating control client using endpoint: '${(0,l.getWebControlEndpoint)(t.credentialProvider)}`),this.clientMetadataProvider=new c.ClientMetadataProvider({authToken:t.credentialProvider.getAuthToken()}),this.clientWrapper=new e.control.ScsControlClient((0,l.getWebControlEndpoint)(t.credentialProvider),null,{})}async createIndex(e,l,c){try{(0,a.validateIndexName)(e),(0,a.validateNumDimensions)(l)}catch(e){return new u.CreateVectorIndex.Error((0,n.normalizeSdkError)(e))}const p=new o._CreateIndexRequest;switch(p.setIndexName(e),p.setNumDimensions(l),null!=c||(c=s.VectorSimilarityMetric.COSINE_SIMILARITY),c){case s.VectorSimilarityMetric.INNER_PRODUCT:p.setInnerProduct(new o._CreateIndexRequest._InnerProduct);break;case s.VectorSimilarityMetric.EUCLIDEAN_SIMILARITY:p.setEuclideanSimilarity(new o._CreateIndexRequest._EuclideanSimilarity);break;case s.VectorSimilarityMetric.COSINE_SIMILARITY:p.setCosineSimilarity(new o._CreateIndexRequest._CosineSimilarity);break;default:return new u.CreateVectorIndex.Error(new t.InvalidArgumentError(`Invalid similarity metric: ${c}`))}return this.logger.debug("Issuing 'createIndex' request"),await new Promise((e=>{this.clientWrapper.createIndex(p,this.clientMetadataProvider.createClientMetadata(),((t,o)=>{e(t?t.code===r.StatusCode.ALREADY_EXISTS?new u.CreateVectorIndex.AlreadyExists:new u.CreateVectorIndex.Error((0,i.cacheServiceErrorMapper)(t)):new u.CreateVectorIndex.Success)}))}))}async listIndexes(){const e=new o._ListIndexesRequest;return this.logger.debug("Issuing 'listIndexes' request"),await new Promise((t=>{this.clientWrapper.listIndexes(e,this.clientMetadataProvider.createClientMetadata(),((e,r)=>{if(e)t(new u.ListVectorIndexes.Error((0,i.cacheServiceErrorMapper)(e)));else{const e=r.getIndexNamesList();t(new u.ListVectorIndexes.Success(e))}}))}))}async deleteIndex(e){const t=new o._DeleteIndexRequest;try{(0,a.validateIndexName)(e)}catch(e){return new u.CreateVectorIndex.Error((0,n.normalizeSdkError)(e))}return t.setIndexName(e),this.logger.debug("Issuing 'deleteIndex' request"),await new Promise((e=>{this.clientWrapper.deleteIndex(t,this.clientMetadataProvider.createClientMetadata(),((t,r)=>{e(t?new u.DeleteVectorIndex.Error((0,i.cacheServiceErrorMapper)(t)):new u.DeleteVectorIndex.Success)}))}))}},vectorIndexControlClient}function requirePreviewVectorIndexClient(){if(hasRequiredPreviewVectorIndexClient)return previewVectorIndexClient;hasRequiredPreviewVectorIndexClient=1,Object.defineProperty(previewVectorIndexClient,"__esModule",{value:!0}),previewVectorIndexClient.PreviewVectorIndexClient=void 0;const e=requireClients(),t=requireVectorIndexDataClient(),r=requireVectorIndexControlClient();return previewVectorIndexClient.PreviewVectorIndexClient=class extends e.AbstractVectorIndexClient{constructor(e){const o=function(e){return new r.VectorIndexControlClient({configuration:e.configuration,credentialProvider:e.credentialProvider})}(e),i=function(e){return new t.VectorIndexDataClient(e)}(e);super(o,i)}},previewVectorIndexClient}var previewLeaderboardClient={},leaderboard={};Object.defineProperty(leaderboard,"__esModule",{value:!0}),leaderboard.Leaderboard=void 0;const sdk_core_1=requireSrc$1(),leaderboard_1=leaderboard$1,utils_1=utils$1;class Leaderboard extends leaderboard_1.AbstractLeaderboard{constructor(e,t,r){try{(0,utils_1.validateCacheName)(t),(0,utils_1.validateLeaderboardName)(r)}catch(e){throw new sdk_core_1.InvalidArgumentError("cache name and leaderboard name must not be empty strings")}super(t,r,e)}}leaderboard.Leaderboard=Leaderboard;var leaderboardDataClient={},hasRequiredLeaderboardDataClient,hasRequiredPreviewLeaderboardClient;function requireLeaderboardDataClient(){if(hasRequiredLeaderboardDataClient)return leaderboardDataClient;hasRequiredLeaderboardDataClient=1,Object.defineProperty(leaderboardDataClient,"__esModule",{value:!0}),leaderboardDataClient.LeaderboardDataClient=void 0;const e=requireSrc$1(),t=errors$1,r=utils$1,o=webClientUtils,i=dist,s=leaderboard_pb$1,n=clientMetadataProvider,a=requireCacheServiceErrorMapper(),l=grpcResponseTypes;return leaderboardDataClient.LeaderboardDataClient=class{constructor(e){this.logger=e.configuration.getLoggerFactory().getLogger(this),this.logger.debug(`Creating data client using endpoint: '${(0,o.getWebCacheEndpoint)(e.credentialProvider)}`),this.clientMetadataProvider=new n.ClientMetadataProvider({authToken:e.credentialProvider.getAuthToken()}),this.deadlineMillis=e.configuration.getTransportStrategy().getGrpcConfig().getDeadlineMillis(),this.client=new i.leaderboard.LeaderboardClient((0,o.getWebCacheEndpoint)(e.credentialProvider),null,{})}convertMapOrRecordToElementsList(e){const t=[];return e instanceof Map?e.forEach(((e,r)=>{const o=new s._Element;o.setId(r),o.setScore(e),t.push(o)})):Object.entries(e).forEach((e=>{const r=new s._Element;r.setId(Number(e[0])),r.setScore(e[1]),t.push(r)})),t}convertToRankedElementsList(e){return e.map((e=>new l._RankedElement(e.getId(),e.getScore(),e.getRank())))}async upsert(o,i,s){const n=s instanceof Map?s.size:Object.keys(s).length;try{(0,r.validateLeaderboardNumberOfElements)(n)}catch(r){return new e.LeaderboardUpsert.Error((0,t.normalizeSdkError)(r))}return this.logger.trace(`Issuing 'upsert' request; cache: ${o}, leaderboard: ${i}, number of elements: ${n}`),await this.sendUpsert(o,i,s)}async sendUpsert(t,r,i){const n=new s._UpsertElementsRequest;return n.setCacheName(t),n.setLeaderboard(r),n.setElementsList(this.convertMapOrRecordToElementsList(i)),await new Promise((r=>{this.client.upsertElements(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{r(o?new e.LeaderboardUpsert.Success:new e.LeaderboardUpsert.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async fetchByScore(o,i,s,n,a,l,c){var u;const p=void 0===l?0:l,d=void 0===c?8192:c,h=null!=a?a:e.LeaderboardOrder.Ascending;try{(0,r.validateSortedSetScores)(s,n),(0,r.validateLeaderboardOffset)(p),(0,r.validateLeaderboardCount)(d)}catch(r){return new e.LeaderboardFetch.Error((0,t.normalizeSdkError)(r))}return this.logger.trace(`Issuing 'fetchByScore' request; cache: ${o}, leaderboard: ${i}, order: ${h.toString()}, minScore: ${null!=s?s:"null"}, maxScore: ${null!==(u=null==n?void 0:n.toString())&&void 0!==u?u:"null"}, offset: ${p.toString()}, count: ${d.toString()}`),await this.sendFetchByScore(o,i,h,p,d,s,n)}async sendFetchByScore(t,r,i,n,l,c,u){const p=new s._GetByScoreRequest;p.setCacheName(t),p.setLeaderboard(r),p.setOffset(n),p.setLimitElements(l);p.setOrder(i===e.LeaderboardOrder.Descending?s._Order.DESCENDING:s._Order.ASCENDING);const d=new s._ScoreRange;return void 0!==c?d.setMinInclusive(c):d.setUnboundedMin(new s._Unbounded),void 0!==u?d.setMaxExclusive(u):d.setUnboundedMax(new s._Unbounded),p.setScoreRange(d),await new Promise((r=>{this.client.getByScore(p,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{if(o){const t=o.getElementsList();r(new e.LeaderboardFetch.Success(this.convertToRankedElementsList(t)))}else r(new e.LeaderboardFetch.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async fetchByRank(o,i,s,n,a){const l=null!=a?a:e.LeaderboardOrder.Ascending;try{(0,r.validateLeaderboardRanks)(s,n)}catch(r){return new e.LeaderboardFetch.Error((0,t.normalizeSdkError)(r))}return this.logger.trace(`Issuing 'fetchByRank' request; cache: ${o}, leaderboard: ${i}, order: ${l.toString()}, startRank: ${s}, endRank: ${n}`),await this.sendFetchByRank(o,i,s,n,l)}async sendFetchByRank(t,r,i,n,l){const c=new s._GetByRankRequest;c.setCacheName(t),c.setLeaderboard(r);c.setOrder(l===e.LeaderboardOrder.Descending?s._Order.DESCENDING:s._Order.ASCENDING);const u=new s._RankRange;return u.setStartInclusive(i),u.setEndExclusive(n),c.setRankRange(u),await new Promise((r=>{this.client.getByRank(c,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{if(o){const t=o.getElementsList();r(new e.LeaderboardFetch.Success(this.convertToRankedElementsList(t)))}else r(new e.LeaderboardFetch.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async getRank(t,r,o,i){const s=null!=i?i:e.LeaderboardOrder.Ascending;return this.logger.trace(`Issuing 'getRank' request; cache: ${t}, leaderboard: ${r}, order: ${s.toString()}, number of ids: ${o.length}`),await this.sendGetRank(t,r,o,s)}async sendGetRank(t,r,i,n){const l=new s._GetRankRequest;l.setCacheName(t),l.setLeaderboard(r),l.setIdsList(i);return l.setOrder(n===e.LeaderboardOrder.Descending?s._Order.DESCENDING:s._Order.ASCENDING),await new Promise((r=>{this.client.getRank(l,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{if(o){const t=o.getElementsList();r(new e.LeaderboardFetch.Success(this.convertToRankedElementsList(t)))}else r(new e.LeaderboardFetch.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async length(e,t){return this.logger.trace(`Issuing 'length' request; cache: ${e}, leaderboard: ${t}`),await this.sendLength(e,t)}async sendLength(t,r){const i=new s._GetLeaderboardLengthRequest;return i.setCacheName(t),i.setLeaderboard(r),await new Promise((r=>{this.client.getLeaderboardLength(i,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{if(o){const t=o.getCount();r(new e.LeaderboardLength.Success(t))}else r(new e.LeaderboardLength.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async removeElements(o,i,s){try{(0,r.validateLeaderboardNumberOfElements)(s.length)}catch(r){return new e.LeaderboardRemoveElements.Error((0,t.normalizeSdkError)(r))}return this.logger.trace(`Issuing 'removeElements' request; cache: ${o}, leaderboard: ${i}, number of elements: ${s.length.toString()}`),await this.sendRemoveElements(o,i,s)}async sendRemoveElements(t,r,i){const n=new s._RemoveElementsRequest;return n.setCacheName(t),n.setLeaderboard(r),n.setIdsList(i),await new Promise((r=>{this.client.removeElements(n,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{r(o?new e.LeaderboardRemoveElements.Success:new e.LeaderboardRemoveElements.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}async delete(e,t){return this.logger.trace(`Issuing 'delete' request; cache: ${e}, leaderboard: ${t}`),await this.sendDelete(e,t)}async sendDelete(t,r){const i=new s._DeleteLeaderboardRequest;return i.setCacheName(t),i.setLeaderboard(r),await new Promise((r=>{this.client.deleteLeaderboard(i,{...this.clientMetadataProvider.createClientMetadata(),...(0,o.createCallMetadata)(t,this.deadlineMillis)},((t,o)=>{r(o?new e.LeaderboardDelete.Success:new e.LeaderboardDelete.Error((0,a.cacheServiceErrorMapper)(t)))}))}))}},leaderboardDataClient}function requirePreviewLeaderboardClient(){if(hasRequiredPreviewLeaderboardClient)return previewLeaderboardClient;hasRequiredPreviewLeaderboardClient=1,Object.defineProperty(previewLeaderboardClient,"__esModule",{value:!0}),previewLeaderboardClient.PreviewLeaderboardClient=void 0;const e=leaderboard,t=requireLeaderboardDataClient();return previewLeaderboardClient.PreviewLeaderboardClient=class{constructor(e){this.props=e,this.dataClient=new t.LeaderboardDataClient(this.props)}leaderboard(t,r){return new e.Leaderboard(this.dataClient,t,r)}},previewLeaderboardClient}var configurations={},configuration={};Object.defineProperty(configuration,"__esModule",{value:!0}),configuration.CacheConfiguration=void 0;class CacheConfiguration{constructor(e){this.loggerFactory=e.loggerFactory,this.transportStrategy=e.transportStrategy}getLoggerFactory(){return this.loggerFactory}getTransportStrategy(){return this.transportStrategy}withTransportStrategy(e){return new CacheConfiguration({loggerFactory:this.loggerFactory,transportStrategy:e})}withClientTimeoutMillis(e){return new CacheConfiguration({loggerFactory:this.loggerFactory,transportStrategy:this.transportStrategy.withClientTimeoutMillis(e)})}}configuration.CacheConfiguration=CacheConfiguration;var transport={},grpcConfiguration={};Object.defineProperty(grpcConfiguration,"__esModule",{value:!0});var transportStrategy={};Object.defineProperty(transportStrategy,"__esModule",{value:!0}),transportStrategy.StaticTransportStrategy=transportStrategy.StaticGrpcConfiguration=void 0;class StaticGrpcConfiguration{constructor(e){this.deadlineMillis=e.deadlineMillis}getDeadlineMillis(){return this.deadlineMillis}withDeadlineMillis(e){return new StaticGrpcConfiguration({deadlineMillis:e})}}transportStrategy.StaticGrpcConfiguration=StaticGrpcConfiguration;class StaticTransportStrategy{constructor(e){this.grpcConfig=e.grpcConfiguration}getGrpcConfig(){return this.grpcConfig}withGrpcConfig(e){return new StaticTransportStrategy({grpcConfiguration:e})}withClientTimeoutMillis(e){return new StaticTransportStrategy({grpcConfiguration:this.grpcConfig.withDeadlineMillis(e)})}}transportStrategy.StaticTransportStrategy=StaticTransportStrategy,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(grpcConfiguration,e),r(transportStrategy,e)}(transport);var defaultMomentoLogger={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultMomentoLogger=e.DefaultMomentoLoggerFactory=e.DefaultMomentoLoggerLevel=void 0,function(e){e[e.TRACE=5]="TRACE",e[e.DEBUG=10]="DEBUG",e[e.INFO=20]="INFO",e[e.WARN=30]="WARN",e[e.ERROR=40]="ERROR"}(t=e.DefaultMomentoLoggerLevel||(e.DefaultMomentoLoggerLevel={}));e.DefaultMomentoLoggerFactory=class{constructor(e=t.INFO){this.level=e}getLogger(e){return new r(e,this.level)}};class r{constructor(e,t){this.loggerName="string"==typeof e||e instanceof String?e:e.constructor.name,this.level=t}trace(e,...r){this.level>t.TRACE||this.outputMessage(console.log,t.TRACE,e,r)}debug(e,...r){this.level>t.DEBUG||this.outputMessage(console.log,t.DEBUG,e,r)}info(e,...r){this.level>t.INFO||this.outputMessage(console.log,t.INFO,e,r)}warn(e,...r){this.level>t.WARN||this.outputMessage(console.warn,t.WARN,e,r)}error(e,...r){this.level>t.ERROR||this.outputMessage(console.error,t.ERROR,e,r)}outputMessage(e,r,o,i){e(`[${(new Date).toISOString()}] ${t[r]} (Momento: ${this.loggerName}): ${o}${i.join(",")}`)}}e.DefaultMomentoLogger=r}(defaultMomentoLogger),Object.defineProperty(configurations,"__esModule",{value:!0}),configurations.Browser=configurations.Laptop=void 0;const configuration_1=configuration,transport_1$2=transport,default_momento_logger_1$3=defaultMomentoLogger,defaultLoggerFactory$3=new default_momento_logger_1$3.DefaultMomentoLoggerFactory;let Laptop$2=class e extends configuration_1.CacheConfiguration{static latest(t=defaultLoggerFactory$3){return e.v1(t)}static v1(t=defaultLoggerFactory$3){const r=new transport_1$2.StaticGrpcConfiguration({deadlineMillis:5e3}),o=new transport_1$2.StaticTransportStrategy({grpcConfiguration:r});return new e({loggerFactory:t,transportStrategy:o})}};configurations.Laptop=Laptop$2;let Browser$1=class e extends configuration_1.CacheConfiguration{static latest(t=defaultLoggerFactory$3){return e.v1(t)}static v1(t=defaultLoggerFactory$3){const r=new transport_1$2.StaticGrpcConfiguration({deadlineMillis:5e3}),o=new transport_1$2.StaticTransportStrategy({grpcConfiguration:r});return new e({loggerFactory:t,transportStrategy:o})}};configurations.Browser=Browser$1;var topicConfigurations={},topicConfiguration={};Object.defineProperty(topicConfiguration,"__esModule",{value:!0}),topicConfiguration.TopicClientConfiguration=void 0;class TopicClientConfiguration{constructor(e){this.loggerFactory=e.loggerFactory}getLoggerFactory(){return this.loggerFactory}}topicConfiguration.TopicClientConfiguration=TopicClientConfiguration,Object.defineProperty(topicConfigurations,"__esModule",{value:!0}),topicConfigurations.Default=void 0;const default_momento_logger_1$2=defaultMomentoLogger,topic_configuration_1=topicConfiguration,defaultLoggerFactory$2=new default_momento_logger_1$2.DefaultMomentoLoggerFactory;class Default extends topic_configuration_1.TopicClientConfiguration{static latest(e=defaultLoggerFactory$2){return new topic_configuration_1.TopicClientConfiguration({loggerFactory:e})}}topicConfigurations.Default=Default;var vectorIndexConfigurations={},vectorIndexConfiguration={};Object.defineProperty(vectorIndexConfiguration,"__esModule",{value:!0}),vectorIndexConfiguration.VectorIndexClientConfiguration=void 0;class VectorIndexClientConfiguration{constructor(e){this.loggerFactory=e.loggerFactory,this.transportStrategy=e.transportStrategy}getLoggerFactory(){return this.loggerFactory}getTransportStrategy(){return this.transportStrategy}withClientTimeoutMillis(e){return new VectorIndexClientConfiguration({loggerFactory:this.loggerFactory,transportStrategy:this.transportStrategy.withClientTimeoutMillis(e)})}withTransportStrategy(e){return new VectorIndexClientConfiguration({loggerFactory:this.loggerFactory,transportStrategy:e})}}vectorIndexConfiguration.VectorIndexClientConfiguration=VectorIndexClientConfiguration,Object.defineProperty(vectorIndexConfigurations,"__esModule",{value:!0}),vectorIndexConfigurations.Browser=vectorIndexConfigurations.Laptop=void 0;const vector_index_configuration_1=vectorIndexConfiguration,transport_1$1=transport,default_momento_logger_1$1=defaultMomentoLogger,defaultLoggerFactory$1=new default_momento_logger_1$1.DefaultMomentoLoggerFactory;let Laptop$1=class e extends vector_index_configuration_1.VectorIndexClientConfiguration{static latest(t=defaultLoggerFactory$1){return e.v1(t)}static v1(t=defaultLoggerFactory$1){const r=new transport_1$1.StaticGrpcConfiguration({deadlineMillis:5e3}),o=new transport_1$1.StaticTransportStrategy({grpcConfiguration:r});return new e({loggerFactory:t,transportStrategy:o})}};vectorIndexConfigurations.Laptop=Laptop$1;class Browser extends vector_index_configuration_1.VectorIndexClientConfiguration{static latest(e=defaultLoggerFactory$1){return Browser.v1(e)}static v1(e=defaultLoggerFactory$1){const t=new transport_1$1.StaticGrpcConfiguration({deadlineMillis:5e3}),r=new transport_1$1.StaticTransportStrategy({grpcConfiguration:t});return new Browser({loggerFactory:e,transportStrategy:r})}}vectorIndexConfigurations.Browser=Browser;var leaderboardConfigurations={},leaderboardConfiguration={};Object.defineProperty(leaderboardConfiguration,"__esModule",{value:!0}),leaderboardConfiguration.LeaderboardClientConfiguration=void 0;class LeaderboardClientConfiguration{constructor(e){this.loggerFactory=e.loggerFactory,this.transportStrategy=e.transportStrategy}getLoggerFactory(){return this.loggerFactory}getTransportStrategy(){return this.transportStrategy}withClientTimeoutMillis(e){return new LeaderboardClientConfiguration({loggerFactory:this.loggerFactory,transportStrategy:this.transportStrategy.withClientTimeoutMillis(e)})}withTransportStrategy(e){return new LeaderboardClientConfiguration({loggerFactory:this.loggerFactory,transportStrategy:e})}}leaderboardConfiguration.LeaderboardClientConfiguration=LeaderboardClientConfiguration,Object.defineProperty(leaderboardConfigurations,"__esModule",{value:!0}),leaderboardConfigurations.Laptop=void 0;const leaderboard_configuration_1=leaderboardConfiguration,transport_1=transport,default_momento_logger_1=defaultMomentoLogger,defaultLoggerFactory=new default_momento_logger_1.DefaultMomentoLoggerFactory;class Laptop extends leaderboard_configuration_1.LeaderboardClientConfiguration{static latest(e=defaultLoggerFactory){return Laptop.v1(e)}static v1(e=defaultLoggerFactory){const t=new transport_1.StaticGrpcConfiguration({deadlineMillis:5e3}),r=new transport_1.StaticTransportStrategy({grpcConfiguration:t});return new Laptop({loggerFactory:e,transportStrategy:r})}}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.CacheDictionaryFetch=e.CacheSetFetch=e.RevokeSigningKey=e.ListSigningKeys=e.CreateSigningKey=e.CacheIncrement=e.ListCaches=e.DeleteCache=e.CreateCache=e.CacheFlush=e.CacheDelete=e.CacheSetIfNotExists=e.CacheSet=e.CacheListRetain=e.CacheListRemoveValue=e.CacheListPushFront=e.CacheListPushBack=e.CacheListPopFront=e.CacheListPopBack=e.CacheListLength=e.CacheListFetch=e.CacheListConcatenateFront=e.CacheListConcatenateBack=e.CacheGet=e.AllTopics=e.AllCaches=e.DisposableTokenScopes=e.TokenScopes=e.PermissionScopes=e.TopicRole=e.CacheRole=e.AllDataReadWrite=e.EnvMomentoTokenProvider=e.StringMomentoTokenProvider=e.CredentialProvider=e.CacheInfo=e.VectorIndexConfigurations=e.PreviewVectorIndexClient=e.AuthClient=e.CacheClient=e.Configurations=e.SortedSetOrder=e.ItemType=e.CollectionTtl=e.DefaultMomentoLoggerLevel=e.DefaultMomentoLogger=e.DefaultMomentoLoggerFactory=e.vector=e.VectorSimilarityMetric=e.ALL_VECTOR_METADATA=void 0,e.AuthenticationError=e.AlreadyExistsError=e.SdkError=e.MomentoErrorCode=e.ExpiresIn=e.ExpiresAt=e.GenerateDisposableToken=e.RefreshAuthToken=e.RefreshApiKey=e.GenerateAuthToken=e.GenerateApiKey=e.PreviewLeaderboardClient=e.LeaderboardClientConfiguration=e.LeaderboardConfigurations=e.TopicSubscribe=e.TopicPublish=e.TopicItem=e.TopicClient=e.TopicClientConfiguration=e.TopicConfigurations=e.CacheDecreaseTtl=e.CacheIncreaseTtl=e.CacheUpdateTtl=e.CacheKeysExist=e.CacheKeyExists=e.CacheItemGetTtl=e.CacheItemGetType=e.CacheSortedSetLengthByScore=e.CacheSortedSetLength=e.CacheSortedSetRemoveElements=e.CacheSortedSetRemoveElement=e.CacheSortedSetIncrementScore=e.CacheSortedSetGetScores=e.CacheSortedSetGetScore=e.CacheSortedSetGetRank=e.CacheSortedSetFetch=e.CacheSortedSetPutElements=e.CacheSortedSetPutElement=e.CacheSetRemoveElement=e.CacheSetRemoveElements=e.CacheSetAddElement=e.CacheSetAddElements=e.CacheDictionaryLength=e.CacheDictionaryIncrement=e.CacheDictionaryRemoveFields=e.CacheDictionaryRemoveField=e.CacheDictionaryGetFields=e.CacheDictionaryGetField=e.CacheDictionarySetFields=e.CacheDictionarySetField=void 0,e.NoopMomentoLoggerFactory=e.NoopMomentoLogger=e.UnknownError=e.NotFoundError=e.PermissionError=e.BadRequestError=e.TimeoutError=e.ServerUnavailableError=e.UnknownServiceError=e.InvalidArgumentError=e.InternalServerError=e.LimitExceededError=e.FailedPreconditionError=e.CancelledError=void 0;const o=requireCacheClient();Object.defineProperty(e,"CacheClient",{enumerable:!0,get:function(){return o.CacheClient}});const i=requireAuthClient();Object.defineProperty(e,"AuthClient",{enumerable:!0,get:function(){return i.AuthClient}});const s=requireTopicClient();Object.defineProperty(e,"TopicClient",{enumerable:!0,get:function(){return s.TopicClient}});const n=requirePreviewVectorIndexClient();Object.defineProperty(e,"PreviewVectorIndexClient",{enumerable:!0,get:function(){return n.PreviewVectorIndexClient}});const a=requirePreviewLeaderboardClient();Object.defineProperty(e,"PreviewLeaderboardClient",{enumerable:!0,get:function(){return a.PreviewLeaderboardClient}});e.Configurations=configurations;e.TopicConfigurations=topicConfigurations;e.VectorIndexConfigurations=vectorIndexConfigurations;e.LeaderboardConfigurations=leaderboardConfigurations;e.CacheGet=cacheGet;e.CacheListConcatenateBack=cacheListConcatenateBack;e.CacheListConcatenateFront=cacheListConcatenateFront;e.CacheListFetch=cacheListFetch;e.CacheListLength=cacheListLength;e.CacheListPopBack=cacheListPopBack;e.CacheListPopFront=cacheListPopFront;e.CacheListPushBack=cacheListPushBack;e.CacheListPushFront=cacheListPushFront;e.CacheListRemoveValue=cacheListRemoveValue;e.CacheListRetain=cacheListRetain;e.CacheSet=cacheSet;e.CacheDelete=cacheDelete;e.CacheFlush=cacheFlush;e.CreateCache=createCache;e.DeleteCache=deleteCache;e.ListCaches=listCaches;e.CreateSigningKey=createSigningKey;e.ListSigningKeys=listSigningKeys;e.RevokeSigningKey=revokeSigningKey;e.CacheSetFetch=cacheSetFetch;e.CacheDictionaryFetch=cacheDictionaryFetch;e.CacheDictionarySetField=cacheDictionarySetField;e.CacheDictionarySetFields=cacheDictionarySetFields;e.CacheDictionaryGetField=cacheDictionaryGetField;e.CacheDictionaryGetFields=cacheDictionaryGetFields;e.CacheDictionaryRemoveField=cacheDictionaryRemoveField;e.CacheDictionaryRemoveFields=cacheDictionaryRemoveFields;e.CacheDictionaryIncrement=cacheDictionaryIncrement;e.CacheDictionaryLength=cacheDictionaryLength;e.CacheSetAddElements=cacheSetAddElements;e.CacheSetAddElement=cacheSetAddElement;e.CacheSetRemoveElements=cacheSetRemoveElements;e.CacheSetRemoveElement=cacheSetRemoveElement;e.CacheIncrement=cacheIncrement;e.CacheSetIfNotExists=cacheSetIfNotExists;e.CacheSortedSetPutElement=cacheSortedSetPutElement;e.CacheSortedSetPutElements=cacheSortedSetPutElements;e.CacheSortedSetFetch=cacheSortedSetFetch;e.CacheSortedSetGetRank=cacheSortedSetGetRank;e.CacheSortedSetGetScore=cacheSortedSetGetScore;e.CacheSortedSetGetScores=cacheSortedSetGetScores;e.CacheSortedSetIncrementScore=cacheSortedSetIncrementScore;e.CacheSortedSetRemoveElement=cacheSortedSetRemoveElement;e.CacheSortedSetRemoveElements=cacheSortedSetRemoveElements;e.CacheSortedSetLength=cacheSortedSetLength;e.CacheSortedSetLengthByScore=cacheSortedSetLengthByScore;e.CacheItemGetType=cacheItemGetType;e.CacheItemGetTtl=cacheItemGetTtl;e.CacheKeyExists=cacheKeyExists;e.CacheKeysExist=cacheKeysExist;e.CacheUpdateTtl=cacheTtlUpdate;e.CacheIncreaseTtl=cacheTtlIncrease;e.CacheDecreaseTtl=cacheTtlDecrease;e.TopicPublish=topicPublish;e.TopicSubscribe=topicSubscribe;const l=topicItem;Object.defineProperty(e,"TopicItem",{enumerable:!0,get:function(){return l.TopicItem}});const c=generateApiKey;e.GenerateApiKey=c,e.GenerateAuthToken=c;const u=refreshApiKey;e.RefreshApiKey=u,e.RefreshAuthToken=u;e.GenerateDisposableToken=generateDisposableToken;const p=requireSrc$1();Object.defineProperty(e,"CacheInfo",{enumerable:!0,get:function(){return p.CacheInfo}}),Object.defineProperty(e,"CollectionTtl",{enumerable:!0,get:function(){return p.CollectionTtl}}),Object.defineProperty(e,"ItemType",{enumerable:!0,get:function(){return p.ItemType}}),Object.defineProperty(e,"SortedSetOrder",{enumerable:!0,get:function(){return p.SortedSetOrder}}),Object.defineProperty(e,"CredentialProvider",{enumerable:!0,get:function(){return p.CredentialProvider}}),Object.defineProperty(e,"StringMomentoTokenProvider",{enumerable:!0,get:function(){return p.StringMomentoTokenProvider}}),Object.defineProperty(e,"EnvMomentoTokenProvider",{enumerable:!0,get:function(){return p.EnvMomentoTokenProvider}}),Object.defineProperty(e,"MomentoErrorCode",{enumerable:!0,get:function(){return p.MomentoErrorCode}}),Object.defineProperty(e,"SdkError",{enumerable:!0,get:function(){return p.SdkError}}),Object.defineProperty(e,"AlreadyExistsError",{enumerable:!0,get:function(){return p.AlreadyExistsError}}),Object.defineProperty(e,"AuthenticationError",{enumerable:!0,get:function(){return p.AuthenticationError}}),Object.defineProperty(e,"CancelledError",{enumerable:!0,get:function(){return p.CancelledError}}),Object.defineProperty(e,"FailedPreconditionError",{enumerable:!0,get:function(){return p.FailedPreconditionError}}),Object.defineProperty(e,"LimitExceededError",{enumerable:!0,get:function(){return p.LimitExceededError}}),Object.defineProperty(e,"InternalServerError",{enumerable:!0,get:function(){return p.InternalServerError}}),Object.defineProperty(e,"InvalidArgumentError",{enumerable:!0,get:function(){return p.InvalidArgumentError}}),Object.defineProperty(e,"UnknownServiceError",{enumerable:!0,get:function(){return p.UnknownServiceError}}),Object.defineProperty(e,"ServerUnavailableError",{enumerable:!0,get:function(){return p.ServerUnavailableError}}),Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return p.TimeoutError}}),Object.defineProperty(e,"BadRequestError",{enumerable:!0,get:function(){return p.BadRequestError}}),Object.defineProperty(e,"PermissionError",{enumerable:!0,get:function(){return p.PermissionError}}),Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return p.NotFoundError}}),Object.defineProperty(e,"UnknownError",{enumerable:!0,get:function(){return p.UnknownError}}),Object.defineProperty(e,"NoopMomentoLogger",{enumerable:!0,get:function(){return p.NoopMomentoLogger}}),Object.defineProperty(e,"NoopMomentoLoggerFactory",{enumerable:!0,get:function(){return p.NoopMomentoLoggerFactory}}),Object.defineProperty(e,"AllDataReadWrite",{enumerable:!0,get:function(){return p.AllDataReadWrite}}),Object.defineProperty(e,"PermissionScopes",{enumerable:!0,get:function(){return p.PermissionScopes}}),Object.defineProperty(e,"TokenScopes",{enumerable:!0,get:function(){return p.PermissionScopes}}),Object.defineProperty(e,"DisposableTokenScopes",{enumerable:!0,get:function(){return p.DisposableTokenScopes}}),Object.defineProperty(e,"ExpiresIn",{enumerable:!0,get:function(){return p.ExpiresIn}}),Object.defineProperty(e,"ExpiresAt",{enumerable:!0,get:function(){return p.ExpiresAt}}),Object.defineProperty(e,"AllCaches",{enumerable:!0,get:function(){return p.AllCaches}}),Object.defineProperty(e,"AllTopics",{enumerable:!0,get:function(){return p.AllTopics}}),Object.defineProperty(e,"CacheRole",{enumerable:!0,get:function(){return p.CacheRole}}),Object.defineProperty(e,"TopicRole",{enumerable:!0,get:function(){return p.TopicRole}});const d=topicConfiguration;Object.defineProperty(e,"TopicClientConfiguration",{enumerable:!0,get:function(){return d.TopicClientConfiguration}});const h=leaderboardConfiguration;Object.defineProperty(e,"LeaderboardClientConfiguration",{enumerable:!0,get:function(){return h.LeaderboardClientConfiguration}});var g=requireSrc$1();Object.defineProperty(e,"ALL_VECTOR_METADATA",{enumerable:!0,get:function(){return g.ALL_VECTOR_METADATA}}),Object.defineProperty(e,"VectorSimilarityMetric",{enumerable:!0,get:function(){return g.VectorSimilarityMetric}});var f=requireSrc$1();Object.defineProperty(e,"vector",{enumerable:!0,get:function(){return f.vector}}),r(vector$1,e);var _=defaultMomentoLogger;Object.defineProperty(e,"DefaultMomentoLoggerFactory",{enumerable:!0,get:function(){return _.DefaultMomentoLoggerFactory}}),Object.defineProperty(e,"DefaultMomentoLogger",{enumerable:!0,get:function(){return _.DefaultMomentoLogger}}),Object.defineProperty(e,"DefaultMomentoLoggerLevel",{enumerable:!0,get:function(){return _.DefaultMomentoLoggerLevel}})}(src$1)),src$1}leaderboardConfigurations.Laptop=Laptop;var srcExports=requireSrc();function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var css_248z=".mini-tokyo-3d .popup-text .mapboxgl-popup-content{padding:5px 10px}.mini-tokyo-3d .popup-input .mapboxgl-popup-close-button{color:#fff}.mini-tokyo-3d .text-input{-webkit-appearance:none;appearance:none;background-color:transparent;border:1px solid #777;border-radius:0;color:#fff;font-size:15.6px;height:35px;margin:6px 0;outline:none;padding:1px;width:200px}.mini-tokyo-3d .text-input:hover{background-color:rgba(51,51,51,.7)}.mini-tokyo-3d .send-button{-webkit-appearance:none;appearance:none;background-color:transparent;border:0;border-radius:10px;box-shadow:0 0 0 1px #777;color:#fff;cursor:pointer;font-size:15.6px;height:37px;margin:1px;outline:none;width:200px}.mini-tokyo-3d .send-button:hover{background-color:rgba(51,51,51,.7)}.mini-tokyo-3d .send-button:disabled{color:#777;cursor:not-allowed}";styleInject(css_248z);var img="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3e%3c!--! Font Awesome Free 6.4.2 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0%2c Fonts: SIL OFL 1.1%2c Code: MIT License) Copyright 2023 Fonticons%2c Inc. --%3e%3cpath d='M208 352c114.9 0 208-78.8 208-176S322.9 0 208 0S0 78.8 0 176c0 38.6 14.7 74.3 39.6 103.4c-3.5 9.4-8.7 17.7-14.2 24.7c-4.8 6.2-9.7 11-13.3 14.3c-1.8 1.6-3.3 2.9-4.3 3.7c-.5 .4-.9 .7-1.1 .8l-.2 .2 0 0 0 0C1 327.2-1.4 334.4 .8 340.9S9.1 352 16 352c21.8 0 43.8-5.6 62.1-12.5c9.2-3.5 17.8-7.4 25.3-11.4C134.1 343.3 169.8 352 208 352zM448 176c0 112.3-99.1 196.9-216.5 207C255.8 457.4 336.4 512 432 512c38.2 0 73.9-8.7 104.7-23.9c7.5 4 16 7.9 25.2 11.4c18.3 6.9 40.3 12.5 62.1 12.5c6.9 0 13.1-4.5 15.2-11.1c2.1-6.6-.2-13.8-5.8-17.9l0 0 0 0-.2-.2c-.2-.2-.6-.4-1.1-.8c-1-.8-2.5-2-4.3-3.7c-3.6-3.3-8.5-8.1-13.3-14.3c-5.5-7-10.7-15.4-14.2-24.7c24.9-29 39.6-64.7 39.6-103.4c0-92.8-84.9-168.9-192.6-175.5c.4 5.1 .6 10.3 .6 15.5z'/%3e%3c/svg%3e";const MOMENTO_AUTH_TOKEN="eyJlbmRwb2ludCI6ImNlbGwtYXAtbm9ydGhlYXN0LTEtMS5wcm9kLmEubW9tZW50b2hxLmNvbSIsImFwaV9rZXkiOiJleUpoYkdjaU9pSklVekkxTmlKOS5leUp6ZFdJaU9pSnVZV2RwUUc1aFoya3RjQzVqYjIwaUxDSjJaWElpT2pFc0luQWlPaUpGYUZsTFJrSkpVME5CUldGRVFXOUxZbGRzZFdGVE1UQmlNblExWW5sSlFTSjkuMmpmekpPREUtZU1ybHk2UVZFRllWTVpJWTMzcm9JaE1Ub01MOVBMcVdNQSJ9";function addColor(e,t){const r=t.replace("#","%23");return e.replace("%3e",` fill='${r}' stroke='${r}'%3e`)}class PopupPlugin{constructor(e){const t=this;t.id="popup",t.name={en:"Popup",ja:""},t.iconStyle={backgroundSize:"32px",backgroundImage:`url("${addColor(img,"white")}")`},t.enabled=!0,t._onMouseDown=t._onMouseDown.bind(t),t._onMouseCancel=t._onMouseCancel.bind(t)}onAdd(e){this.map=e}onEnabled(){const e=this,{map:t}=e;t.on("mousedown",e._onMouseDown),t.on("touchstart",e._onMouseDown),t.on("mouseup",e._onMouseCancel),t.on("touchend",e._onMouseCancel),t.on("drag",e._onMouseCancel),t.on("rotate",e._onMouseCancel),e.client=new srcExports.TopicClient({configuration:srcExports.TopicConfigurations.Default.latest(),credentialProvider:srcExports.CredentialProvider.fromString({apiKey:MOMENTO_AUTH_TOKEN})}),e.client.subscribe("mini-tokyo","chat",{onError:()=>{},onItem:r=>{const o=JSON.parse(r.valueString()),i=new Popup({className:"popup-text",closeButton:!1,closeOnClick:!1}).setLngLat(o.center).setHTML([o.text].join("")).addTo(t.map);e.popups.push(i),setTimeout((()=>{i.remove()}),3e5)}}).then((t=>{e.topic=t})),e.popups=[]}onDisabled(){const e=this,{map:t}=e;t.off("mousedown",e._onMouseDown),t.off("touchstart",e._onMouseDown),t.off("mouseup",e._onMouseCancel),t.off("touchend",e._onMouseCancel),t.off("drag",e._onMouseCancel),t.off("rotate",e._onMouseCancel),e.topic.unsubscribe(),e.popups.forEach((e=>{e.remove()}))}_onMouseDown(e){const t=this,{map:r}=t;t.timeout=setTimeout((()=>{const o=new Popup({className:"popup-input",closeOnClick:!1}).setLngLat(e.lngLat).setHTML(['<input id="text-input" class="text-input" type="text" placeholder="">',"<br>",'<button id="send-button" class="send-button" disabled></button>'].join("")).addTo(r.map),i=r.container.querySelector("#text-input"),s=r.container.querySelector("#send-button");i.addEventListener("input",(()=>{s.disabled=!i.value.match(/\S/)})),s.addEventListener("click",(()=>{t.client.publish("mini-tokyo","chat",JSON.stringify({text:i.value,center:e.lngLat})),o.remove()})),t.inputPopup&&t.inputPopup.remove(),t.inputPopup=o}),1e3)}_onMouseCancel(){const e=this;e.timeout&&clearTimeout(e.timeout)}}function index(){return new PopupPlugin}return index}));
//# sourceMappingURL=mt3d-plugin-popup.min.js.map
